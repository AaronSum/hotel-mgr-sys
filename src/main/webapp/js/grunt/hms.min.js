/*! hms 08-01-2016 */
function isWebkitForHms(){return void 0!==document.body.style.WebkitBoxShadow}function daysBetween(a,b){var c=a.substring(5,a.lastIndexOf("-")),d=a.substring(a.length,a.lastIndexOf("-")+1),e=a.substring(0,a.indexOf("-")),f=b.substring(5,b.lastIndexOf("-")),g=b.substring(b.length,b.lastIndexOf("-")+1),h=b.substring(0,b.indexOf("-")),i=(Date.parse(c+"/"+d+"/"+e)-Date.parse(f+"/"+g+"/"+h))/864e5;return Math.abs(i)}function IsValidDate(a){var b=a.replace(/(^\s+|\s+$)/g,"");if(""==b)return!0;var c=b.replace(/[\d]{ 4,4 }[\-\/]{ 1 }[\d]{ 1,2 }[\-\/]{ 1 }[\d]{ 1,2 }/g,"");if(""!=c)return!1;var d=new Date(b.replace(/\-/g,"/")),e=b.split(/[-\/:]/);return e[0]!=d.getYear()||e[1]!=d.getMonth()+1||e[2]!=d.getDate()?!1:!0}function CheckDateTime(a){var b=/^(\d+)-(\d{ 1,2 })-(\d{ 1,2 }) (\d{ 1,2 }):(\d{ 1,2 }):(\d{ 1,2 })$/,c=a.match(b);if(null==c)return!1;c[2]=c[2]-1;var d=new Date(c[1],c[2],c[3],c[4],c[5],c[6]);return d.getFullYear()!=c[1]?!1:d.getMonth()!=c[2]?!1:d.getDate()!=c[3]?!1:d.getHours()!=c[4]?!1:d.getMinutes()!=c[5]?!1:d.getSeconds()!=c[6]?!1:!0}function StringToDate(a){var b=Date.parse(a),c=new Date(b);if(isNaN(c)){var d=a.split("-");c=new Date(d[0],--d[1],d[2])}return c}function genCommonPieChart(a,b,c,d,e){if(0==c&&0==d)return void jQuery("#"+a).css({"text-align":"center","line-height":"260px"});var f={normal:{label:{show:!0,position:"center",formatter:function(a){return a.value+e+""},textStyle:{align:"center",baseline:"middle",fontSize:25}},labelLine:{show:!1}}},g=[{name:"今日",value:d,itemStyle:f},{name:"历史最高",value:c,itemStyle:{normal:{color:"#ccc",label:{show:!0,position:"center",formatter:function(a){return"\n今天"},textStyle:{align:"center",baseline:"top",fontSize:15,color:"#FF7F50"}},labelLine:{show:!1}}}}];require(["echarts","echarts/chart/pie"],function(c){var d=c.init(document.getElementById(a)),e=[60,80],f={title:{text:b,x:"left"},tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c} ({d}%)"},series:[{type:"pie",center:["50%","50%"],radius:e,x:"0%",data:g}]};d.setOption(f)})}function showMonthCommonLineChart(a,b,c,d){return c.length>0&&c[0].data&&0==c[0].data.length?void jQuery("#p_"+a).css("display","none"):void require(["echarts","echarts/chart/line"],function(e){var f=e.init(document.getElementById(a)),g={tooltip:{trigger:"item",formatter:function(a){var b=new Date(a.value[0]);return data=b.getFullYear()+"-"+(b.getMonth()+1)+"-"+b.getDate(),data+'<br/><span style="font-size:12px;">'+a.value[1]+d+"</span>"}},dataZoom:{show:!1,start:0},legend:{data:b},grid:{x:"11%",y:"11%",x2:30,y2:50},xAxis:[{type:"time",splitNumber:10}],yAxis:[{type:"value"}],series:c,noDataLoadingOption:{text:"暂无数据",effect:"Spin",textStyle:{fontSize:20}}};f.setOption(g)})}function showWeekCommonLineChart(a,b,c,d){return c.length>0&&c[0].data&&0==c[0].data.length?void jQuery("#p_"+a).css("display","none"):void require(["echarts","echarts/chart/line"],function(e){var f=e.init(document.getElementById(a)),g={tooltip:{trigger:"axis"},legend:{data:b},grid:{x:"11%",y:"11%",x2:30,y2:50},calculable:!0,xAxis:d,yAxis:[{type:"value",axisLabel:{formatter:"{value}"}}],series:c,noDataLoadingOption:{text:"暂无数据",effect:"dynamicLine",textStyle:{fontSize:14}}};f.setOption(g)})}function makeCommonLineChartData(a,b,c,d,e){var f=["当期"];b&&f.push("上期");var g=-1;"week"==c?g=7:"month"==c&&(g=30);for(var h=[],i=[],j=0;j<f.length;j++){for(var k=[],l=j*g;l<d.length;l++){var m=d[l];if(!m||k.length==g)break;var n=new Date(m.date);"week"==c?(0==j&&i.splice(0,0,0==l?"今天":getWeekName(n)),k.splice(0,0,m[e]||0)):"month"==c&&k.splice(0,0,[new Date(m.date),m[e]||0])}if(k.length<g)for(var o=g-k.length,p=(new Date).DateAdd("d",-1),q=0;o>q;q++)"week"==c?(0==j&&i.splice(0,0,getWeekName(p)),k.splice(0,0,0)):"month"==c&&k.splice(0,0,[p,0]),p=p.DateAdd("d",-1);h.push({name:f[j],type:"line",data:k})}var r=[{type:"category",boundaryGap:!1,data:i}];"week"==c?showWeekCommonLineChart(a,f,h,r):"month"==c&&showMonthCommonLineChart(a,f,h,"元")}function genJdjyyj(a,b,c){require(["echarts","echarts/chart/line"],function(d){var e=d.init(document.getElementById("hotel_home_3")),f={tooltip:{trigger:"axis"},legend:{x:"right",y:"bottom",data:a},calculable:!0,xAxis:[{type:"category",boundaryGap:!1,data:b}],yAxis:[{type:"value"}],series:c};e.setOption(f)})}function loadHomeDatas(a){jQuery.ajax({type:"get",cache:!1,timeout:3e4,dataType:"json",async:!0,url:contentPath+"/home/homeDatas",success:function(b){var c=b.attribute||{};dateInfo=c.dateInfo||"",curData=c.curData||{date:(new Date).Format("yyyy-MM-dd"),pmsOrderNum:0,pmsCheckinNum:0,otaOrderNum:0,otaCheckinNum:0,otaRevenues:0},hisDatas=c.hisDatas||[],maxPrice=c.maxPrice||{},thisWeekOrderNum=c.orderNum,roomNum=parseInt(curData.hotelRoomNum||c.roomNum),genPageDefaultData(),setTimeout(function(){jQuery("#hotel_home_last_row_right").height(jQuery("#hotel_home_last_row_hei").height()-13)},500),a&&"function"==typeof a&&a()}})}function genPageDefaultData(){var a=hisDatas.length?hisDatas[1]||{}:{};(new Date).DateAdd("d",-1).Format("yyyy-MM-dd")!=new Date(a.date).Format("yyyy-MM-dd")&&(a={pmsOrderNum:0,pmsCheckinNum:0});var b=curData.otsOrderNum||0,c=curData.otsRentOrderNum||0,d=a.otaOrderNum||0,e=a.otaCheckinNum||0;jQuery("#div_dateInfo").text(dateInfo),jQuery("#div_pmsddjys").text(b),jQuery("#i_yesterday_order_num").attr("title","昨日"+d+"单"),d>b&&(jQuery("#i_yesterday_order_num").removeClass("glyphicon-arrow-up hotel-home-icon-up"),jQuery("#i_yesterday_order_num").addClass("glyphicon-arrow-down hotel-home-icon-down")),(b!=d||b>d)&&jQuery("#i_yesterday_order_num").css("visibility","visible"),jQuery("#div_pmsjys").text(c),jQuery("#i_yesterday_checkin_num").attr("title","昨日"+e+"单"),c>e&&(jQuery("#i_yesterday_checkin_num").removeClass("glyphicon-arrow-down hotel-home-icon-down"),jQuery("#i_yesterday_checkin_num").addClass("glyphicon-arrow-up hotel-home-icon-up")),(c!=e||e>c)&&jQuery("#i_yesterday_checkin_num").css("visibility","visible"),jQuery("#b_zryd").text(a.pmsOrderNum||0),jQuery("#b_zrrz").text(a.pmsCheckinNum||0),jQuery("#hygxsy").text(0),showCzlChart("day"),window.homePortalBillWeek2(1),showYysrPie(),showJdjyyj("week"),showOtaDdsPie(),showOtaDds("week"),showOtaJyePie(),showOtaJye("month")}function showCzlChart(a){var b=roomNum,c=curData.pmsRentOrderNum,d=curData.otsRentOrderNum||0,e=-1;if("week"==a?e=7:"month"==a&&(e=30),e>-1){var f=hisDatas.length>e?e:hisDatas.length;if(f=0==f?1:f,hisDatas.length>1){for(var g=0;g<hisDatas.length;g++){var h=hisDatas[g];if(b+=h.hotelRoomNum||0,c+=h.pmsCheckinNum,d+=h.otaCheckinNum,g==e-1)break}b=parseInt(b/f).toFixed(2),d=parseInt(c/f).toFixed(2),c=parseInt(d/f).toFixed(2)}}genCzl(b,d,c)}function genCzl(a,b,c){a=parseFloat(a),b=parseFloat(b),c=parseFloat(c);var d=b+c,e={normal:{color:"#e1e1e1",label:{show:!0,position:"center",formatter:function(b){return parseInt(d/a*100)+"%"},textStyle:{align:"center",baseline:"middle",fontSize:30,color:"#024857"}},labelLine:{show:!1}}},f={normal:{color:"#FACC51",label:{show:!0,position:"center",formatter:function(a){return"\n今天"},textStyle:{align:"center",baseline:"top",fontSize:15,color:"#024857"}},labelLine:{show:!1}}},g=[{value:a-b-c,name:"空房",itemStyle:e},{value:b,name:"眯客",itemStyle:f},{value:c,name:"店铺",itemStyle:{normal:{color:"#1EB4B1",label:{show:!1},labelLine:{show:!1}}}}];require(["echarts","echarts/chart/pie"],function(a){var b=a.init(document.getElementById("hotel_home_1")),c={tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c} ({d}%)"},legend:{orient:"vertical",x:"right",y:"bottom",data:["空房","眯客","店铺"]},calculable:!1,series:[{name:"出租率",type:"pie",radius:"90%",center:["40%","50%"],data:g}]};b.setOption(c)})}function showYysrPie(){var a=maxPrice.pmsRevenues||0,b=hisDatas[0]||{},c=b.pmsRevenues||0;genCommonPieChart("hotel_home_2","营业收入",a,c,"元")}function showJdjyyj(a){JdjyyjType=a;var b=jQuery("#chk_jdjyyj").is(":checked");makeCommonLineChartData("hotel_home_3",b,a,hisDatas,"pmsRevenues")}function showOtaDdsPie(){var a=maxPrice.otaCheckinNum||0,b=curData.otaCheckinNum||0;genCommonPieChart("hotel_home_4","订单数",a,b,"单")}function showOtaDds(a){otaddsType=a;var b=jQuery("#chk_ota_dds_hb").is(":checked");makeCommonLineChartData("hotel_home_5",b,a,hisDatas,"pmsRevenues")}function showOtaJyePie(){var a=maxPrice.otaRevenues||0,b=curData.otaRevenues||0;genCommonPieChart("hotel_home_6","交易额",a,b,"元")}function showOtaJye(a){otajyeType=a;var b=jQuery("#chk_ota_jye_hb").is(":checked");makeCommonLineChartData("hotel_home_7",b,a,hisDatas,"pmsRevenues")}function getWeekName(a){var b=["周日","周一","周二","周三","周四","周五","周六"];return b[a.getDay()]}function bindInputs(){jQuery("#l_day").bind("click",function(){showCzlChart("day")}),jQuery("#l_week").bind("click",function(){showCzlChart("week")}),jQuery("#l_month").bind("click",function(){showCzlChart("month")}),jQuery("#l_jdjyyj_week").bind("click",function(){showJdjyyj("week")}),jQuery("#l_jdjyyj_month").bind("click",function(){showJdjyyj("month")}),jQuery("#chk_jdjyyj").bind("click",function(){showJdjyyj(JdjyyjType)}),jQuery("#chk_ota_dds_hb").bind("click",function(){showOtaDds(otaddsType)}),jQuery("#l_ota_dds_week").bind("click",function(){showOtaDds("week")}),jQuery("#l_ota_dds_month").bind("click",function(){showOtaDds("month")}),jQuery("#chk_ota_jye_hb").bind("click",function(){showOtaJye(otajyeType)}),jQuery("#l_ota_jye_week").bind("click",function(){showOtaJye("week")}),jQuery("#l_ota_jye_month").bind("click",function(){showOtaJye("month")})}function printMyErweima(){var a={};a.i2DimDataObj=jQuery("#hotel_home_erweima_print").data("qrcodeData"),a.hotelName=hotel_name,window.printData=a,window.open(app+"jsp/printMyErweima.jsp","newwindow")}if(function(a,b,c){"use strict";function d(a,b){return b=b||Error,function(){var c,d,e=arguments[0],f="["+(a?a+":":"")+e+"] ",g=arguments[1],h=arguments;for(c=f+g.replace(/\{\d+\}/g,function(a){var b=+a.slice(1,-1);return b+2<h.length?ma(h[b+2]):a}),c=c+"\nhttp://errors.angularjs.org/1.3.15/"+(a?a+"/":"")+e,d=2;d<arguments.length;d++)c=c+(2==d?"?":"&")+"p"+(d-2)+"="+encodeURIComponent(ma(arguments[d]));return new b(c)}}function e(a){if(null==a||z(a))return!1;var b=a.length;return a.nodeType===sd&&b?!0:u(a)||ld(a)||0===b||"number"==typeof b&&b>0&&b-1 in a}function f(a,b,c){var d,g;if(a)if(x(a))for(d in a)"prototype"==d||"length"==d||"name"==d||a.hasOwnProperty&&!a.hasOwnProperty(d)||b.call(c,a[d],d,a);else if(ld(a)||e(a)){var h="object"!=typeof a;for(d=0,g=a.length;g>d;d++)(h||d in a)&&b.call(c,a[d],d,a)}else if(a.forEach&&a.forEach!==f)a.forEach(b,c,a);else for(d in a)a.hasOwnProperty(d)&&b.call(c,a[d],d,a);return a}function g(a){return Object.keys(a).sort()}function h(a,b,c){for(var d=g(a),e=0;e<d.length;e++)b.call(c,a[d[e]],d[e]);return d}function i(a){return function(b,c){a(c,b)}}function j(){return++jd}function k(a,b){b?a.$$hashKey=b:delete a.$$hashKey}function l(a){for(var b=a.$$hashKey,c=1,d=arguments.length;d>c;c++){var e=arguments[c];if(e)for(var f=Object.keys(e),g=0,h=f.length;h>g;g++){var i=f[g];a[i]=e[i]}}return k(a,b),a}function m(a){return parseInt(a,10)}function n(a,b){return l(Object.create(a),b)}function o(){}function p(a){return a}function q(a){return function(){return a}}function r(a){return"undefined"==typeof a}function s(a){return"undefined"!=typeof a}function t(a){return null!==a&&"object"==typeof a}function u(a){return"string"==typeof a}function v(a){return"number"==typeof a}function w(a){return"[object Date]"===gd.call(a)}function x(a){return"function"==typeof a}function y(a){return"[object RegExp]"===gd.call(a)}function z(a){return a&&a.window===a}function A(a){return a&&a.$evalAsync&&a.$watch}function B(a){return"[object File]"===gd.call(a)}function C(a){return"[object FormData]"===gd.call(a)}function D(a){return"[object Blob]"===gd.call(a)}function E(a){return"boolean"==typeof a}function F(a){return a&&x(a.then)}function G(a){return!(!a||!(a.nodeName||a.prop&&a.attr&&a.find))}function H(a){var b,c={},d=a.split(",");for(b=0;b<d.length;b++)c[d[b]]=!0;return c}function I(a){return Wc(a.nodeName||a[0]&&a[0].nodeName)}function J(a,b){var c=a.indexOf(b);return c>=0&&a.splice(c,1),b}function K(a,b,c,d){if(z(a)||A(a))throw hd("cpws","Can't copy! Making copies of Window or Scope instances is not supported.");if(b){if(a===b)throw hd("cpi","Can't copy! Source and destination are identical.");if(c=c||[],d=d||[],t(a)){var e=c.indexOf(a);if(-1!==e)return d[e];c.push(a),d.push(b)}var g;if(ld(a)){b.length=0;for(var h=0;h<a.length;h++)g=K(a[h],null,c,d),t(a[h])&&(c.push(a[h]),d.push(g)),b.push(g)}else{var i=b.$$hashKey;ld(b)?b.length=0:f(b,function(a,c){delete b[c]});for(var j in a)a.hasOwnProperty(j)&&(g=K(a[j],null,c,d),t(a[j])&&(c.push(a[j]),d.push(g)),b[j]=g);k(b,i)}}else if(b=a,a)if(ld(a))b=K(a,[],c,d);else if(w(a))b=new Date(a.getTime());else if(y(a))b=new RegExp(a.source,a.toString().match(/[^\/]*$/)[0]),b.lastIndex=a.lastIndex;else if(t(a)){var l=Object.create(Object.getPrototypeOf(a));b=K(a,l,c,d)}return b}function L(a,b){if(ld(a)){b=b||[];for(var c=0,d=a.length;d>c;c++)b[c]=a[c]}else if(t(a)){b=b||{};for(var e in a)("$"!==e.charAt(0)||"$"!==e.charAt(1))&&(b[e]=a[e])}return b||a}function M(a,b){if(a===b)return!0;if(null===a||null===b)return!1;if(a!==a&&b!==b)return!0;var d,e,f,g=typeof a,h=typeof b;if(g==h&&"object"==g){if(!ld(a)){if(w(a))return w(b)?M(a.getTime(),b.getTime()):!1;if(y(a))return y(b)?a.toString()==b.toString():!1;if(A(a)||A(b)||z(a)||z(b)||ld(b)||w(b)||y(b))return!1;f={};for(e in a)if("$"!==e.charAt(0)&&!x(a[e])){if(!M(a[e],b[e]))return!1;f[e]=!0}for(e in b)if(!f.hasOwnProperty(e)&&"$"!==e.charAt(0)&&b[e]!==c&&!x(b[e]))return!1;return!0}if(!ld(b))return!1;if((d=a.length)==b.length){for(e=0;d>e;e++)if(!M(a[e],b[e]))return!1;return!0}}return!1}function N(a,b,c){return a.concat(dd.call(b,c))}function O(a,b){return dd.call(a,b||0)}function P(a,b){var c=arguments.length>2?O(arguments,2):[];return!x(b)||b instanceof RegExp?b:c.length?function(){return arguments.length?b.apply(a,N(c,arguments,0)):b.apply(a,c)}:function(){return arguments.length?b.apply(a,arguments):b.call(a)}}function Q(a,d){var e=d;return"string"==typeof a&&"$"===a.charAt(0)&&"$"===a.charAt(1)?e=c:z(d)?e="$WINDOW":d&&b===d?e="$DOCUMENT":A(d)&&(e="$SCOPE"),e}function R(a,b){return"undefined"==typeof a?c:(v(b)||(b=b?2:null),JSON.stringify(a,Q,b))}function S(a){return u(a)?JSON.parse(a):a}function T(a){a=ad(a).clone();try{a.empty()}catch(b){}var c=ad("<div>").append(a).html();try{return a[0].nodeType===td?Wc(c):c.match(/^(<[^>]+>)/)[1].replace(/^<([\w\-]+)/,function(a,b){return"<"+Wc(b)})}catch(b){return Wc(c)}}function U(a){try{return decodeURIComponent(a)}catch(b){}}function V(a){var b,c,d={};return f((a||"").split("&"),function(a){if(a&&(b=a.replace(/\+/g,"%20").split("="),c=U(b[0]),s(c))){var e=s(b[1])?U(b[1]):!0;Xc.call(d,c)?ld(d[c])?d[c].push(e):d[c]=[d[c],e]:d[c]=e}}),d}function W(a){var b=[];return f(a,function(a,c){ld(a)?f(a,function(a){b.push(Y(c,!0)+(a===!0?"":"="+Y(a,!0)))}):b.push(Y(c,!0)+(a===!0?"":"="+Y(a,!0)))}),b.length?b.join("&"):""}function X(a){return Y(a,!0).replace(/%26/gi,"&").replace(/%3D/gi,"=").replace(/%2B/gi,"+")}function Y(a,b){return encodeURIComponent(a).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%20/g,b?"%20":"+")}function Z(a,b){var c,d,e=pd.length;for(a=ad(a),d=0;e>d;++d)if(c=pd[d]+b,u(c=a.attr(c)))return c;return null}function $(a,b){var c,d,e={};f(pd,function(b){var e=b+"app";!c&&a.hasAttribute&&a.hasAttribute(e)&&(c=a,d=a.getAttribute(e))}),f(pd,function(b){var e,f=b+"app";!c&&(e=a.querySelector("["+f.replace(":","\\:")+"]"))&&(c=e,d=e.getAttribute(f))}),c&&(e.strictDi=null!==Z(c,"strict-di"),b(c,d?[d]:[],e))}function _(c,d,e){t(e)||(e={});var g={strictDi:!1};e=l(g,e);var h=function(){if(c=ad(c),c.injector()){var a=c[0]===b?"document":T(c);throw hd("btstrpd","App Already Bootstrapped with this Element '{0}'",a.replace(/</,"&lt;").replace(/>/,"&gt;"))}d=d||[],d.unshift(["$provide",function(a){a.value("$rootElement",c)}]),e.debugInfoEnabled&&d.push(["$compileProvider",function(a){a.debugInfoEnabled(!0)}]),d.unshift("ng");var f=Sa(d,e.strictDi);return f.invoke(["$rootScope","$rootElement","$compile","$injector",function(a,b,c,d){a.$apply(function(){b.data("$injector",d),c(b)(a)})}]),f},i=/^NG_ENABLE_DEBUG_INFO!/,j=/^NG_DEFER_BOOTSTRAP!/;return a&&i.test(a.name)&&(e.debugInfoEnabled=!0,a.name=a.name.replace(i,"")),a&&!j.test(a.name)?h():(a.name=a.name.replace(j,""),id.resumeBootstrap=function(a){return f(a,function(a){d.push(a)}),h()},void(x(id.resumeDeferredBootstrap)&&id.resumeDeferredBootstrap()))}function aa(){a.name="NG_ENABLE_DEBUG_INFO!"+a.name,a.location.reload()}function ba(a){var b=id.element(a).injector();if(!b)throw hd("test","no injector found for element argument to getTestability");return b.get("$$testability")}function ca(a,b){return b=b||"_",a.replace(qd,function(a,c){return(c?b:"")+a.toLowerCase()})}function da(){var b;rd||(bd=a.jQuery,bd&&bd.fn.on?(ad=bd,l(bd.fn,{scope:Ld.scope,isolateScope:Ld.isolateScope,controller:Ld.controller,injector:Ld.injector,inheritedData:Ld.inheritedData}),b=bd.cleanData,bd.cleanData=function(a){var c;if(kd)kd=!1;else for(var d,e=0;null!=(d=a[e]);e++)c=bd._data(d,"events"),c&&c.$destroy&&bd(d).triggerHandler("$destroy");b(a)}):ad=ua,id.element=ad,rd=!0)}function ea(a,b,c){if(!a)throw hd("areq","Argument '{0}' is {1}",b||"?",c||"required");return a}function fa(a,b,c){return c&&ld(a)&&(a=a[a.length-1]),ea(x(a),b,"not a function, got "+(a&&"object"==typeof a?a.constructor.name||"Object":typeof a)),a}function ga(a,b){if("hasOwnProperty"===a)throw hd("badname","hasOwnProperty is not a valid {0} name",b)}function ha(a,b,c){if(!b)return a;for(var d,e=b.split("."),f=a,g=e.length,h=0;g>h;h++)d=e[h],a&&(a=(f=a)[d]);return!c&&x(a)?P(f,a):a}function ia(a){var b=a[0],c=a[a.length-1],d=[b];do{if(b=b.nextSibling,!b)break;d.push(b)}while(b!==c);return ad(d)}function ja(){return Object.create(null)}function ka(a){function b(a,b,c){return a[b]||(a[b]=c())}var c=d("$injector"),e=d("ng"),f=b(a,"angular",Object);return f.$$minErr=f.$$minErr||d,b(f,"module",function(){var a={};return function(d,f,g){var h=function(a,b){if("hasOwnProperty"===a)throw e("badname","hasOwnProperty is not a valid {0} name",b)};return h(d,"module"),f&&a.hasOwnProperty(d)&&(a[d]=null),b(a,d,function(){function a(a,c,d,e){return e||(e=b),function(){return e[d||"push"]([a,c,arguments]),j}}if(!f)throw c("nomod","Module '{0}' is not available! You either misspelled the module name or forgot to load it. If registering a module ensure that you specify the dependencies as the second argument.",d);var b=[],e=[],h=[],i=a("$injector","invoke","push",e),j={_invokeQueue:b,_configBlocks:e,_runBlocks:h,requires:f,name:d,provider:a("$provide","provider"),factory:a("$provide","factory"),service:a("$provide","service"),value:a("$provide","value"),constant:a("$provide","constant","unshift"),animation:a("$animateProvider","register"),filter:a("$filterProvider","register"),controller:a("$controllerProvider","register"),directive:a("$compileProvider","directive"),config:i,run:function(a){return h.push(a),this}};return g&&i(g),j})}})}function la(a){var b=[];return JSON.stringify(a,function(a,c){if(c=Q(a,c),t(c)){if(b.indexOf(c)>=0)return"<<already seen>>";b.push(c)}return c})}function ma(a){return"function"==typeof a?a.toString().replace(/ \{[\s\S]*$/,""):"undefined"==typeof a?"undefined":"string"!=typeof a?la(a):a}function na(b){l(b,{bootstrap:_,copy:K,extend:l,equals:M,element:ad,forEach:f,injector:Sa,noop:o,bind:P,toJson:R,fromJson:S,identity:p,isUndefined:r,isDefined:s,isString:u,isFunction:x,isObject:t,isNumber:v,isElement:G,isArray:ld,version:xd,isDate:w,lowercase:Wc,uppercase:Yc,callbacks:{counter:0},getTestability:ba,$$minErr:d,$$csp:od,reloadWithDebugInfo:aa}),cd=ka(a);try{cd("ngLocale")}catch(c){cd("ngLocale",[]).provider("$locale",qb)}cd("ng",["ngLocale"],["$provide",function(a){a.provider({$$sanitizeUri:Wb}),a.provider("$compile",Za).directive({a:De,input:Ue,textarea:Ue,form:Ie,script:Kf,select:Nf,style:Pf,option:Of,ngBind:Xe,ngBindHtml:Ze,ngBindTemplate:Ye,ngClass:_e,ngClassEven:bf,ngClassOdd:af,ngCloak:cf,ngController:df,ngForm:Je,ngHide:Ef,ngIf:gf,ngInclude:hf,ngInit:kf,ngNonBindable:yf,ngPluralize:zf,ngRepeat:Af,ngShow:Df,ngStyle:Ff,ngSwitch:Gf,ngSwitchWhen:Hf,ngSwitchDefault:If,ngOptions:Mf,ngTransclude:Jf,ngModel:vf,ngList:lf,ngChange:$e,pattern:Rf,ngPattern:Rf,required:Qf,ngRequired:Qf,minlength:Tf,ngMinlength:Tf,maxlength:Sf,ngMaxlength:Sf,ngValue:We,ngModelOptions:xf}).directive({ngInclude:jf}).directive(Ee).directive(ef),a.provider({$anchorScroll:Ta,$animate:Vd,$browser:Wa,$cacheFactory:Xa,$controller:bb,$document:cb,$exceptionHandler:db,$filter:gc,$interpolate:ob,$interval:pb,$http:kb,$httpBackend:mb,$location:Eb,$log:Fb,$parse:Qb,$rootScope:Vb,$q:Rb,$$q:Sb,$sce:$b,$sceDelegate:Zb,$sniffer:_b,$templateCache:Ya,$templateRequest:ac,$$testability:bc,$timeout:cc,$window:fc,$$rAF:Ub,$$asyncCallback:Ua,$$jqLite:Na})}])}function oa(){return++zd}function pa(a){return a.replace(Cd,function(a,b,c,d){return d?c.toUpperCase():c}).replace(Dd,"Moz$1")}function qa(a){return!Hd.test(a)}function ra(a){var b=a.nodeType;return b===sd||!b||b===vd}function sa(a,b){var c,d,e,g,h=b.createDocumentFragment(),i=[];if(qa(a))i.push(b.createTextNode(a));else{for(c=c||h.appendChild(b.createElement("div")),d=(Id.exec(a)||["",""])[1].toLowerCase(),e=Kd[d]||Kd._default,c.innerHTML=e[1]+a.replace(Jd,"<$1></$2>")+e[2],g=e[0];g--;)c=c.lastChild;i=N(i,c.childNodes),c=h.firstChild,c.textContent=""}return h.textContent="",h.innerHTML="",f(i,function(a){h.appendChild(a)}),h}function ta(a,c){c=c||b;var d;return(d=Gd.exec(a))?[c.createElement(d[1])]:(d=sa(a,c))?d.childNodes:[]}function ua(a){if(a instanceof ua)return a;var b;if(u(a)&&(a=md(a),b=!0),!(this instanceof ua)){if(b&&"<"!=a.charAt(0))throw Fd("nosel","Looking up elements via selectors is not supported by jqLite! See: http://docs.angularjs.org/api/angular.element");return new ua(a)}b?Ea(this,ta(a)):Ea(this,a)}function va(a){return a.cloneNode(!0)}function wa(a,b){if(b||ya(a),a.querySelectorAll)for(var c=a.querySelectorAll("*"),d=0,e=c.length;e>d;d++)ya(c[d])}function xa(a,b,c,d){if(s(d))throw Fd("offargs","jqLite#off() does not support the `selector` argument");var e=za(a),g=e&&e.events,h=e&&e.handle;if(h)if(b)f(b.split(" "),function(b){if(s(c)){var d=g[b];if(J(d||[],c),d&&d.length>0)return}Bd(a,b,h),delete g[b]});else for(b in g)"$destroy"!==b&&Bd(a,b,h),delete g[b]}function ya(a,b){var d=a.ng339,e=d&&yd[d];if(e){if(b)return void delete e.data[b];e.handle&&(e.events.$destroy&&e.handle({},"$destroy"),xa(a)),delete yd[d],a.ng339=c}}function za(a,b){var d=a.ng339,e=d&&yd[d];return b&&!e&&(a.ng339=d=oa(),e=yd[d]={events:{},data:{},handle:c}),e}function Aa(a,b,c){if(ra(a)){var d=s(c),e=!d&&b&&!t(b),f=!b,g=za(a,!e),h=g&&g.data;if(d)h[b]=c;else{if(f)return h;if(e)return h&&h[b];l(h,b)}}}function Ba(a,b){return a.getAttribute?(" "+(a.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").indexOf(" "+b+" ")>-1:!1}function Ca(a,b){b&&a.setAttribute&&f(b.split(" "),function(b){a.setAttribute("class",md((" "+(a.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").replace(" "+md(b)+" "," ")))})}function Da(a,b){if(b&&a.setAttribute){var c=(" "+(a.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ");f(b.split(" "),function(a){a=md(a),-1===c.indexOf(" "+a+" ")&&(c+=a+" ")}),a.setAttribute("class",md(c))}}function Ea(a,b){if(b)if(b.nodeType)a[a.length++]=b;else{var c=b.length;if("number"==typeof c&&b.window!==b){if(c)for(var d=0;c>d;d++)a[a.length++]=b[d]}else a[a.length++]=b}}function Fa(a,b){return Ga(a,"$"+(b||"ngController")+"Controller")}function Ga(a,b,d){a.nodeType==vd&&(a=a.documentElement);for(var e=ld(b)?b:[b];a;){for(var f=0,g=e.length;g>f;f++)if((d=ad.data(a,e[f]))!==c)return d;a=a.parentNode||a.nodeType===wd&&a.host}}function Ha(a){for(wa(a,!0);a.firstChild;)a.removeChild(a.firstChild)}function Ia(a,b){b||wa(a);var c=a.parentNode;c&&c.removeChild(a)}function Ja(b,c){c=c||a,"complete"===c.document.readyState?c.setTimeout(b):ad(c).on("load",b)}function Ka(a,b){var c=Md[b.toLowerCase()];return c&&Nd[I(a)]&&c}function La(a,b){var c=a.nodeName;return("INPUT"===c||"TEXTAREA"===c)&&Od[b]}function Ma(a,b){var c=function(c,d){c.isDefaultPrevented=function(){return c.defaultPrevented};var e=b[d||c.type],f=e?e.length:0;if(f){if(r(c.immediatePropagationStopped)){var g=c.stopImmediatePropagation;c.stopImmediatePropagation=function(){c.immediatePropagationStopped=!0,c.stopPropagation&&c.stopPropagation(),g&&g.call(c)}}c.isImmediatePropagationStopped=function(){return c.immediatePropagationStopped===!0},f>1&&(e=L(e));for(var h=0;f>h;h++)c.isImmediatePropagationStopped()||e[h].call(a,c)}};return c.elem=a,c}function Na(){this.$get=function(){return l(ua,{hasClass:function(a,b){return a.attr&&(a=a[0]),Ba(a,b)},addClass:function(a,b){return a.attr&&(a=a[0]),Da(a,b)},removeClass:function(a,b){return a.attr&&(a=a[0]),Ca(a,b)}})}}function Oa(a,b){var c=a&&a.$$hashKey;if(c)return"function"==typeof c&&(c=a.$$hashKey()),c;var d=typeof a;return c="function"==d||"object"==d&&null!==a?a.$$hashKey=d+":"+(b||j)():d+":"+a}function Pa(a,b){if(b){var c=0;this.nextUid=function(){return++c}}f(a,this.put,this)}function Qa(a){var b=a.toString().replace(Sd,""),c=b.match(Pd);return c?"function("+(c[1]||"").replace(/[\s\r\n]+/," ")+")":"fn"}function Ra(a,b,c){var d,e,g,h;if("function"==typeof a){if(!(d=a.$inject)){if(d=[],a.length){if(b)throw u(c)&&c||(c=a.name||Qa(a)),Td("strictdi","{0} is not using explicit annotation and cannot be invoked in strict mode",c);e=a.toString().replace(Sd,""),g=e.match(Pd),f(g[1].split(Qd),function(a){a.replace(Rd,function(a,b,c){d.push(c)})})}a.$inject=d}}else ld(a)?(h=a.length-1,fa(a[h],"fn"),d=a.slice(0,h)):fa(a,"fn",!0);return d}function Sa(a,b){function d(a){return function(b,c){return t(b)?void f(b,i(a)):a(b,c)}}function e(a,b){if(ga(a,"service"),(x(b)||ld(b))&&(b=A.instantiate(b)),!b.$get)throw Td("pget","Provider '{0}' must define $get factory method.",a);return z[a+v]=b}function g(a,b){return function(){var c=C.invoke(b,this);if(r(c))throw Td("undef","Provider '{0}' must return a value from $get factory method.",a);return c}}function h(a,b,c){return e(a,{$get:c!==!1?g(a,b):b})}function j(a,b){return h(a,["$injector",function(a){return a.instantiate(b)}])}function k(a,b){return h(a,q(b),!1)}function l(a,b){ga(a,"constant"),z[a]=b,B[a]=b}function m(a,b){var c=A.get(a+v),d=c.$get;c.$get=function(){var a=C.invoke(d,c);return C.invoke(b,null,{$delegate:a})}}function n(a){var b,c=[];return f(a,function(a){function d(a){var b,c;for(b=0,c=a.length;c>b;b++){var d=a[b],e=A.get(d[0]);e[d[1]].apply(e,d[2])}}if(!y.get(a)){y.put(a,!0);try{u(a)?(b=cd(a),c=c.concat(n(b.requires)).concat(b._runBlocks),d(b._invokeQueue),d(b._configBlocks)):x(a)?c.push(A.invoke(a)):ld(a)?c.push(A.invoke(a)):fa(a,"module")}catch(e){throw ld(a)&&(a=a[a.length-1]),e.message&&e.stack&&-1==e.stack.indexOf(e.message)&&(e=e.message+"\n"+e.stack),Td("modulerr","Failed to instantiate module {0} due to:\n{1}",a,e.stack||e.message||e)}}}),c}function p(a,c){function d(b,d){if(a.hasOwnProperty(b)){if(a[b]===s)throw Td("cdep","Circular dependency found: {0}",b+" <- "+w.join(" <- "));return a[b]}try{return w.unshift(b),a[b]=s,a[b]=c(b,d)}catch(e){throw a[b]===s&&delete a[b],e}finally{w.shift()}}function e(a,c,e,f){"string"==typeof e&&(f=e,e=null);var g,h,i,j=[],k=Sa.$$annotate(a,b,f);for(h=0,g=k.length;g>h;h++){if(i=k[h],"string"!=typeof i)throw Td("itkn","Incorrect injection token! Expected service name as string, got {0}",i);j.push(e&&e.hasOwnProperty(i)?e[i]:d(i,f))}return ld(a)&&(a=a[g]),a.apply(c,j)}function f(a,b,c){var d=Object.create((ld(a)?a[a.length-1]:a).prototype||null),f=e(a,d,b,c);return t(f)||x(f)?f:d}return{invoke:e,instantiate:f,get:d,annotate:Sa.$$annotate,has:function(b){return z.hasOwnProperty(b+v)||a.hasOwnProperty(b)}}}b=b===!0;var s={},v="Provider",w=[],y=new Pa([],!0),z={$provide:{provider:d(e),factory:d(h),service:d(j),value:d(k),constant:d(l),decorator:m}},A=z.$injector=p(z,function(a,b){throw id.isString(b)&&w.push(b),Td("unpr","Unknown provider: {0}",w.join(" <- "))}),B={},C=B.$injector=p(B,function(a,b){var d=A.get(a+v,b);return C.invoke(d.$get,d,c,a)});return f(n(a),function(a){C.invoke(a||o)}),C}function Ta(){var a=!0;this.disableAutoScrolling=function(){a=!1},this.$get=["$window","$location","$rootScope",function(b,c,d){function e(a){var b=null;return Array.prototype.some.call(a,function(a){return"a"===I(a)?(b=a,!0):void 0}),b}function f(){var a=h.yOffset;if(x(a))a=a();else if(G(a)){var c=a[0],d=b.getComputedStyle(c);a="fixed"!==d.position?0:c.getBoundingClientRect().bottom}else v(a)||(a=0);return a}function g(a){if(a){a.scrollIntoView();var c=f();if(c){var d=a.getBoundingClientRect().top;b.scrollBy(0,d-c)}}else b.scrollTo(0,0)}function h(){var a,b=c.hash();b?(a=i.getElementById(b))?g(a):(a=e(i.getElementsByName(b)))?g(a):"top"===b&&g(null):g(null)}var i=b.document;return a&&d.$watch(function(){return c.hash()},function(a,b){(a!==b||""!==a)&&Ja(function(){d.$evalAsync(h)})}),h}]}function Ua(){this.$get=["$$rAF","$timeout",function(a,b){return a.supported?function(b){return a(b)}:function(a){return b(a,0,!1)}}]}function Va(a,b,d,e){function g(a){try{a.apply(null,O(arguments,1))}finally{if(y--,0===y)for(;z.length;)try{z.pop()()}catch(b){d.error(b)}}}function h(a){var b=a.indexOf("#");return-1===b?"":a.substr(b+1)}function i(a,b){!function c(){f(B,function(a){a()}),A=b(c,a)}()}function j(){l(),m()}function k(){try{return t.state}catch(a){}}function l(){C=k(),C=r(C)?null:C,M(C,J)&&(C=J),J=C}function m(){(E!==p.url()||D!==C)&&(E=p.url(),D=C,f(H,function(a){a(p.url(),C)}))}function n(a){try{return decodeURIComponent(a)}catch(b){return a}}var p=this,q=b[0],s=a.location,t=a.history,v=a.setTimeout,w=a.clearTimeout,x={};p.isMock=!1;var y=0,z=[];p.$$completeOutstandingRequest=g,p.$$incOutstandingRequestCount=function(){y++},p.notifyWhenNoOutstandingRequests=function(a){f(B,function(a){a()}),0===y?a():z.push(a)};var A,B=[];p.addPollFn=function(a){return r(A)&&i(100,v),B.push(a),a};var C,D,E=s.href,F=b.find("base"),G=null;l(),D=C,p.url=function(b,c,d){if(r(d)&&(d=null),s!==a.location&&(s=a.location),t!==a.history&&(t=a.history),b){var f=D===d;if(E===b&&(!e.history||f))return p;var g=E&&vb(E)===vb(b);return E=b,D=d,!e.history||g&&f?(g||(G=b),c?s.replace(b):g?s.hash=h(b):s.href=b):(t[c?"replaceState":"pushState"](d,"",b),l(),D=C),p}return G||s.href.replace(/%27/g,"'")},p.state=function(){return C};var H=[],I=!1,J=null;p.onUrlChange=function(b){return I||(e.history&&ad(a).on("popstate",j),ad(a).on("hashchange",j),I=!0),H.push(b),b},p.$$checkUrlChange=m,p.baseHref=function(){var a=F.attr("href");return a?a.replace(/^(https?\:)?\/\/[^\/]*/,""):""};var K={},L="",N=p.baseHref();p.cookies=function(a,b){var e,f,g,h,i;if(!a){if(q.cookie!==L)for(L=q.cookie,f=L.split("; "),K={},h=0;h<f.length;h++)g=f[h],i=g.indexOf("="),i>0&&(a=n(g.substring(0,i)),K[a]===c&&(K[a]=n(g.substring(i+1))));return K}b===c?q.cookie=encodeURIComponent(a)+"=;path="+N+";expires=Thu, 01 Jan 1970 00:00:00 GMT":u(b)&&(e=(q.cookie=encodeURIComponent(a)+"="+encodeURIComponent(b)+";path="+N).length+1,e>4096&&d.warn("Cookie '"+a+"' possibly not set or overflowed because it was too large ("+e+" > 4096 bytes)!"))},p.defer=function(a,b){var c;return y++,c=v(function(){delete x[c],g(a)},b||0),x[c]=!0,c},p.defer.cancel=function(a){return x[a]?(delete x[a],w(a),g(o),!0):!1}}function Wa(){this.$get=["$window","$log","$sniffer","$document",function(a,b,c,d){return new Va(a,d,b,c)}]}function Xa(){this.$get=function(){function a(a,c){function e(a){a!=m&&(n?n==a&&(n=a.n):n=a,f(a.n,a.p),f(a,m),m=a,m.n=null)}function f(a,b){a!=b&&(a&&(a.p=b),b&&(b.n=a))}if(a in b)throw d("$cacheFactory")("iid","CacheId '{0}' is already taken!",a);var g=0,h=l({},c,{id:a}),i={},j=c&&c.capacity||Number.MAX_VALUE,k={},m=null,n=null;return b[a]={put:function(a,b){if(j<Number.MAX_VALUE){var c=k[a]||(k[a]={key:a});e(c)}if(!r(b))return a in i||g++,i[a]=b,g>j&&this.remove(n.key),
b},get:function(a){if(j<Number.MAX_VALUE){var b=k[a];if(!b)return;e(b)}return i[a]},remove:function(a){if(j<Number.MAX_VALUE){var b=k[a];if(!b)return;b==m&&(m=b.p),b==n&&(n=b.n),f(b.n,b.p),delete k[a]}delete i[a],g--},removeAll:function(){i={},g=0,k={},m=n=null},destroy:function(){i=null,h=null,k=null,delete b[a]},info:function(){return l({},h,{size:g})}}}var b={};return a.info=function(){var a={};return f(b,function(b,c){a[c]=b.info()}),a},a.get=function(a){return b[a]},a}}function Ya(){this.$get=["$cacheFactory",function(a){return a("templates")}]}function Za(a,d){function e(a,b){var c=/^\s*([@&]|=(\*?))(\??)\s*(\w*)\s*$/,d={};return f(a,function(a,e){var f=a.match(c);if(!f)throw Wd("iscp","Invalid isolate scope definition for directive '{0}'. Definition: {... {1}: '{2}' ...}",b,e,a);d[e]={mode:f[1][0],collection:"*"===f[2],optional:"?"===f[3],attrName:f[4]||e}}),d}var g={},h="Directive",j=/^\s*directive\:\s*([\w\-]+)\s+(.*)$/,k=/(([\w\-]+)(?:\:([^;]+))?;?)/,m=H("ngSrc,ngSrcset,src,srcset"),r=/^(?:(\^\^?)?(\?)?(\^\^?)?)?/,v=/^(on[a-z]+|formaction)$/;this.directive=function y(b,c){return ga(b,"directive"),u(b)?(ea(c,"directiveFactory"),g.hasOwnProperty(b)||(g[b]=[],a.factory(b+h,["$injector","$exceptionHandler",function(a,c){var d=[];return f(g[b],function(f,g){try{var h=a.invoke(f);x(h)?h={compile:q(h)}:!h.compile&&h.link&&(h.compile=q(h.link)),h.priority=h.priority||0,h.index=g,h.name=h.name||b,h.require=h.require||h.controller&&h.name,h.restrict=h.restrict||"EA",t(h.scope)&&(h.$$isolateBindings=e(h.scope,h.name)),d.push(h)}catch(i){c(i)}}),d}])),g[b].push(c)):f(b,i(y)),this},this.aHrefSanitizationWhitelist=function(a){return s(a)?(d.aHrefSanitizationWhitelist(a),this):d.aHrefSanitizationWhitelist()},this.imgSrcSanitizationWhitelist=function(a){return s(a)?(d.imgSrcSanitizationWhitelist(a),this):d.imgSrcSanitizationWhitelist()};var w=!0;this.debugInfoEnabled=function(a){return s(a)?(w=a,this):w},this.$get=["$injector","$interpolate","$exceptionHandler","$templateRequest","$parse","$controller","$rootScope","$document","$sce","$animate","$$sanitizeUri",function(a,d,e,i,q,s,y,z,B,C,D){function E(a,b){try{a.addClass(b)}catch(c){}}function F(a,b,c,d,e){a instanceof ad||(a=ad(a)),f(a,function(b,c){b.nodeType==td&&b.nodeValue.match(/\S+/)&&(a[c]=ad(b).wrap("<span></span>").parent()[0])});var g=H(a,b,a,c,d,e);F.$$addScopeClass(a);var h=null;return function(b,c,d){ea(b,"scope"),d=d||{};var e=d.parentBoundTranscludeFn,f=d.transcludeControllers,i=d.futureParentElement;e&&e.$$boundTransclude&&(e=e.$$boundTransclude),h||(h=G(i));var j;if(j="html"!==h?ad($(h,ad("<div>").append(a).html())):c?Ld.clone.call(a):a,f)for(var k in f)j.data("$"+k+"Controller",f[k].instance);return F.$$addScopeInfo(j,b),c&&c(j,b),g&&g(b,j,j,e),j}}function G(a){var b=a&&a[0];return b&&"foreignobject"!==I(b)&&b.toString().match(/SVG/)?"svg":"html"}function H(a,b,d,e,f,g){function h(a,d,e,f){var g,h,i,j,k,l,m,n,q;if(o){var r=d.length;for(q=new Array(r),k=0;k<p.length;k+=3)m=p[k],q[m]=d[m]}else q=d;for(k=0,l=p.length;l>k;)i=q[p[k++]],g=p[k++],h=p[k++],g?(g.scope?(j=a.$new(),F.$$addScopeInfo(ad(i),j)):j=a,n=g.transcludeOnThisElement?K(a,g.transclude,f,g.elementTranscludeOnThisElement):!g.templateOnThisElement&&f?f:!f&&b?K(a,b):null,g(h,j,i,e,n)):h&&h(a,i.childNodes,c,f)}for(var i,j,k,l,m,n,o,p=[],q=0;q<a.length;q++)i=new ga,j=L(a[q],[],i,0===q?e:c,f),k=j.length?Q(j,a[q],i,b,d,null,[],[],g):null,k&&k.scope&&F.$$addScopeClass(i.$$element),m=k&&k.terminal||!(l=a[q].childNodes)||!l.length?null:H(l,k?(k.transcludeOnThisElement||!k.templateOnThisElement)&&k.transclude:b),(k||m)&&(p.push(q,k,m),n=!0,o=o||k),g=null;return n?h:null}function K(a,b,c,d){var e=function(d,e,f,g,h){return d||(d=a.$new(!1,h),d.$$transcluded=!0),b(d,e,{parentBoundTranscludeFn:c,transcludeControllers:f,futureParentElement:g})};return e}function L(a,b,c,d,e){var f,g,h=a.nodeType,i=c.$attr;switch(h){case sd:S(b,$a(I(a)),"E",d,e);for(var l,m,n,o,p,q,r=a.attributes,s=0,v=r&&r.length;v>s;s++){var w=!1,x=!1;l=r[s],m=l.name,p=md(l.value),o=$a(m),(q=la.test(o))&&(m=m.replace(Xd,"").substr(8).replace(/_(.)/g,function(a,b){return b.toUpperCase()}));var y=o.replace(/(Start|End)$/,"");U(y)&&o===y+"Start"&&(w=m,x=m.substr(0,m.length-5)+"end",m=m.substr(0,m.length-6)),n=$a(m.toLowerCase()),i[n]=m,(q||!c.hasOwnProperty(n))&&(c[n]=p,Ka(a,n)&&(c[n]=!0)),aa(a,b,p,n,q),S(b,n,"A",d,e,w,x)}if(g=a.className,t(g)&&(g=g.animVal),u(g)&&""!==g)for(;f=k.exec(g);)n=$a(f[2]),S(b,n,"C",d,e)&&(c[n]=md(f[3])),g=g.substr(f.index+f[0].length);break;case td:Z(b,a.nodeValue);break;case ud:try{f=j.exec(a.nodeValue),f&&(n=$a(f[1]),S(b,n,"M",d,e)&&(c[n]=md(f[2])))}catch(z){}}return b.sort(X),b}function N(a,b,c){var d=[],e=0;if(b&&a.hasAttribute&&a.hasAttribute(b)){do{if(!a)throw Wd("uterdir","Unterminated attribute, found '{0}' but no matching '{1}' found.",b,c);a.nodeType==sd&&(a.hasAttribute(b)&&e++,a.hasAttribute(c)&&e--),d.push(a),a=a.nextSibling}while(e>0)}else d.push(a);return ad(d)}function P(a,b,c){return function(d,e,f,g,h){return e=N(e[0],b,c),a(d,e,f,g,h)}}function Q(a,g,h,i,j,k,l,m,n){function o(a,b,c,d){a&&(c&&(a=P(a,c,d)),a.require=z.require,a.directiveName=B,(I===z||z.$$isolateScope)&&(a=da(a,{isolateScope:!0})),l.push(a)),b&&(c&&(b=P(b,c,d)),b.require=z.require,b.directiveName=B,(I===z||z.$$isolateScope)&&(b=da(b,{isolateScope:!0})),m.push(b))}function p(a,b,c,d){var e,g,h="data",i=!1,j=c;if(u(b)){if(g=b.match(r),b=b.substring(g[0].length),g[3]&&(g[1]?g[3]=null:g[1]=g[3]),"^"===g[1]?h="inheritedData":"^^"===g[1]&&(h="inheritedData",j=c.parent()),"?"===g[2]&&(i=!0),e=null,d&&"data"===h&&(e=d[b])&&(e=e.instance),e=e||j[h]("$"+b+"Controller"),!e&&!i)throw Wd("ctreq","Controller '{0}', required by directive '{1}', can't be found!",b,a);return e||null}return ld(b)&&(e=[],f(b,function(b){e.push(p(a,b,c,d))})),e}function v(a,b,e,i,j){function k(a,b,d){var e;return A(a)||(d=b,b=a,a=c),U&&(e=v),d||(d=U?x.parent():x),j(a,b,e,d,D)}var n,o,r,t,u,v,w,x,z;if(g===e?(z=h,x=h.$$element):(x=ad(e),z=new ga(x,h)),I&&(u=b.$new(!0)),j&&(w=k,w.$$boundTransclude=j),H&&(y={},v={},f(H,function(a){var c,d={$scope:a===I||a.$$isolateScope?u:b,$element:x,$attrs:z,$transclude:w};t=a.controller,"@"==t&&(t=z[a.name]),c=s(t,d,!0,a.controllerAs),v[a.name]=c,U||x.data("$"+a.name+"Controller",c.instance),y[a.name]=c})),I){F.$$addScopeInfo(x,u,!0,!(J&&(J===I||J===I.$$originalDirective))),F.$$addScopeClass(x,!0);var B=y&&y[I.name],C=u;B&&B.identifier&&I.bindToController===!0&&(C=B.instance),f(u.$$isolateBindings=I.$$isolateBindings,function(a,c){var e,f,g,h,i=a.attrName,j=a.optional,k=a.mode;switch(k){case"@":z.$observe(i,function(a){C[c]=a}),z.$$observers[i].$$scope=b,z[i]&&(C[c]=d(z[i])(b));break;case"=":if(j&&!z[i])return;f=q(z[i]),h=f.literal?M:function(a,b){return a===b||a!==a&&b!==b},g=f.assign||function(){throw e=C[c]=f(b),Wd("nonassign","Expression '{0}' used with directive '{1}' is non-assignable!",z[i],I.name)},e=C[c]=f(b);var l=function(a){return h(a,C[c])||(h(a,e)?g(b,a=C[c]):C[c]=a),e=a};l.$stateful=!0;var m;m=a.collection?b.$watchCollection(z[i],l):b.$watch(q(z[i],l),null,f.literal),u.$on("$destroy",m);break;case"&":f=q(z[i]),C[c]=function(a){return f(b,a)}}})}for(y&&(f(y,function(a){a()}),y=null),n=0,o=l.length;o>n;n++)r=l[n],fa(r,r.isolateScope?u:b,x,z,r.require&&p(r.directiveName,r.require,x,v),w);var D=b;for(I&&(I.template||null===I.templateUrl)&&(D=u),a&&a(D,e.childNodes,c,j),n=m.length-1;n>=0;n--)r=m[n],fa(r,r.isolateScope?u:b,x,z,r.require&&p(r.directiveName,r.require,x,v),w)}n=n||{};for(var w,y,z,B,C,D,E,G=-Number.MAX_VALUE,H=n.controllerDirectives,I=n.newIsolateScopeDirective,J=n.templateDirective,K=n.nonTlbTranscludeDirective,Q=!1,S=!1,U=n.hasElementTranscludeDirective,X=h.$$element=ad(g),Z=k,_=i,aa=0,ca=a.length;ca>aa;aa++){z=a[aa];var ea=z.$$start,ha=z.$$end;if(ea&&(X=N(g,ea,ha)),C=c,G>z.priority)break;if((E=z.scope)&&(z.templateUrl||(t(E)?(Y("new/isolated scope",I||w,z,X),I=z):Y("new/isolated scope",I,z,X)),w=w||z),B=z.name,!z.templateUrl&&z.controller&&(E=z.controller,H=H||{},Y("'"+B+"' controller",H[B],z,X),H[B]=z),(E=z.transclude)&&(Q=!0,z.$$tlb||(Y("transclusion",K,z,X),K=z),"element"==E?(U=!0,G=z.priority,C=X,X=h.$$element=ad(b.createComment(" "+B+": "+h[B]+" ")),g=X[0],ba(j,O(C),g),_=F(C,i,G,Z&&Z.name,{nonTlbTranscludeDirective:K})):(C=ad(va(g)).contents(),X.empty(),_=F(C,i))),z.template)if(S=!0,Y("template",J,z,X),J=z,E=x(z.template)?z.template(X,h):z.template,E=ka(E),z.replace){if(Z=z,C=qa(E)?[]:ab($(z.templateNamespace,md(E))),g=C[0],1!=C.length||g.nodeType!==sd)throw Wd("tplrt","Template for directive '{0}' must have exactly one root element. {1}",B,"");ba(j,X,g);var ia={$attr:{}},ja=L(g,[],ia),la=a.splice(aa+1,a.length-(aa+1));I&&R(ja),a=a.concat(ja).concat(la),V(h,ia),ca=a.length}else X.html(E);if(z.templateUrl)S=!0,Y("template",J,z,X),J=z,z.replace&&(Z=z),v=W(a.splice(aa,a.length-aa),X,h,j,Q&&_,l,m,{controllerDirectives:H,newIsolateScopeDirective:I,templateDirective:J,nonTlbTranscludeDirective:K}),ca=a.length;else if(z.compile)try{D=z.compile(X,h,_),x(D)?o(null,D,ea,ha):D&&o(D.pre,D.post,ea,ha)}catch(ma){e(ma,T(X))}z.terminal&&(v.terminal=!0,G=Math.max(G,z.priority))}return v.scope=w&&w.scope===!0,v.transcludeOnThisElement=Q,v.elementTranscludeOnThisElement=U,v.templateOnThisElement=S,v.transclude=_,n.hasElementTranscludeDirective=U,v}function R(a){for(var b=0,c=a.length;c>b;b++)a[b]=n(a[b],{$$isolateScope:!0})}function S(b,d,f,i,j,k,l){if(d===j)return null;var m=null;if(g.hasOwnProperty(d))for(var o,p=a.get(d+h),q=0,r=p.length;r>q;q++)try{o=p[q],(i===c||i>o.priority)&&-1!=o.restrict.indexOf(f)&&(k&&(o=n(o,{$$start:k,$$end:l})),b.push(o),m=o)}catch(s){e(s)}return m}function U(b){if(g.hasOwnProperty(b))for(var c,d=a.get(b+h),e=0,f=d.length;f>e;e++)if(c=d[e],c.multiElement)return!0;return!1}function V(a,b){var c=b.$attr,d=a.$attr,e=a.$$element;f(a,function(d,e){"$"!=e.charAt(0)&&(b[e]&&b[e]!==d&&(d+=("style"===e?";":" ")+b[e]),a.$set(e,d,!0,c[e]))}),f(b,function(b,f){"class"==f?(E(e,b),a["class"]=(a["class"]?a["class"]+" ":"")+b):"style"==f?(e.attr("style",e.attr("style")+";"+b),a.style=(a.style?a.style+";":"")+b):"$"==f.charAt(0)||a.hasOwnProperty(f)||(a[f]=b,d[f]=c[f])})}function W(a,b,c,d,e,g,h,j){var k,l,m=[],o=b[0],p=a.shift(),q=n(p,{templateUrl:null,transclude:null,replace:null,$$originalDirective:p}),r=x(p.templateUrl)?p.templateUrl(b,c):p.templateUrl,s=p.templateNamespace;return b.empty(),i(B.getTrustedResourceUrl(r)).then(function(i){var n,u,v,w;if(i=ka(i),p.replace){if(v=qa(i)?[]:ab($(s,md(i))),n=v[0],1!=v.length||n.nodeType!==sd)throw Wd("tplrt","Template for directive '{0}' must have exactly one root element. {1}",p.name,r);u={$attr:{}},ba(d,b,n);var x=L(n,[],u);t(p.scope)&&R(x),a=x.concat(a),V(c,u)}else n=o,b.html(i);for(a.unshift(q),k=Q(a,n,c,e,b,p,g,h,j),f(d,function(a,c){a==n&&(d[c]=b[0])}),l=H(b[0].childNodes,e);m.length;){var y=m.shift(),z=m.shift(),A=m.shift(),B=m.shift(),C=b[0];if(!y.$$destroyed){if(z!==o){var D=z.className;j.hasElementTranscludeDirective&&p.replace||(C=va(n)),ba(A,ad(z),C),E(ad(C),D)}w=k.transcludeOnThisElement?K(y,k.transclude,B):B,k(l,y,C,d,w)}}m=null}),function(a,b,c,d,e){var f=e;b.$$destroyed||(m?m.push(b,c,d,f):(k.transcludeOnThisElement&&(f=K(b,k.transclude,e)),k(l,b,c,d,f)))}}function X(a,b){var c=b.priority-a.priority;return 0!==c?c:a.name!==b.name?a.name<b.name?-1:1:a.index-b.index}function Y(a,b,c,d){if(b)throw Wd("multidir","Multiple directives [{0}, {1}] asking for {2} on: {3}",b.name,c.name,a,T(d))}function Z(a,b){var c=d(b,!0);c&&a.push({priority:0,compile:function(a){var b=a.parent(),d=!!b.length;return d&&F.$$addBindingClass(b),function(a,b){var e=b.parent();d||F.$$addBindingClass(e),F.$$addBindingInfo(e,c.expressions),a.$watch(c,function(a){b[0].nodeValue=a})}}})}function $(a,c){switch(a=Wc(a||"html")){case"svg":case"math":var d=b.createElement("div");return d.innerHTML="<"+a+">"+c+"</"+a+">",d.childNodes[0].childNodes;default:return c}}function _(a,b){if("srcdoc"==b)return B.HTML;var c=I(a);return"xlinkHref"==b||"form"==c&&"action"==b||"img"!=c&&("src"==b||"ngSrc"==b)?B.RESOURCE_URL:void 0}function aa(a,b,c,e,f){var g=_(a,e);f=m[e]||f;var h=d(c,!0,g,f);if(h){if("multiple"===e&&"select"===I(a))throw Wd("selmulti","Binding to the 'multiple' attribute is not supported. Element: {0}",T(a));b.push({priority:100,compile:function(){return{pre:function(a,b,i){var j=i.$$observers||(i.$$observers={});if(v.test(e))throw Wd("nodomevents","Interpolations for HTML DOM event attributes are disallowed.  Please use the ng- versions (such as ng-click instead of onclick) instead.");var k=i[e];k!==c&&(h=k&&d(k,!0,g,f),c=k),h&&(i[e]=h(a),(j[e]||(j[e]=[])).$$inter=!0,(i.$$observers&&i.$$observers[e].$$scope||a).$watch(h,function(a,b){"class"===e&&a!=b?i.$updateClass(a,b):i.$set(e,a)}))}}}})}}function ba(a,c,d){var e,f,g=c[0],h=c.length,i=g.parentNode;if(a)for(e=0,f=a.length;f>e;e++)if(a[e]==g){a[e++]=d;for(var j=e,k=j+h-1,l=a.length;l>j;j++,k++)l>k?a[j]=a[k]:delete a[j];a.length-=h-1,a.context===g&&(a.context=d);break}i&&i.replaceChild(d,g);var m=b.createDocumentFragment();m.appendChild(g),ad(d).data(ad(g).data()),bd?(kd=!0,bd.cleanData([g])):delete ad.cache[g[ad.expando]];for(var n=1,o=c.length;o>n;n++){var p=c[n];ad(p).remove(),m.appendChild(p),delete c[n]}c[0]=d,c.length=1}function da(a,b){return l(function(){return a.apply(null,arguments)},a,b)}function fa(a,b,c,d,f,g){try{a(b,c,d,f,g)}catch(h){e(h,T(c))}}var ga=function(a,b){if(b){var c,d,e,f=Object.keys(b);for(c=0,d=f.length;d>c;c++)e=f[c],this[e]=b[e]}else this.$attr={};this.$$element=a};ga.prototype={$normalize:$a,$addClass:function(a){a&&a.length>0&&C.addClass(this.$$element,a)},$removeClass:function(a){a&&a.length>0&&C.removeClass(this.$$element,a)},$updateClass:function(a,b){var c=_a(a,b);c&&c.length&&C.addClass(this.$$element,c);var d=_a(b,a);d&&d.length&&C.removeClass(this.$$element,d)},$set:function(a,b,d,g){var h,i=this.$$element[0],j=Ka(i,a),k=La(i,a),l=a;if(j?(this.$$element.prop(a,b),g=j):k&&(this[k]=b,l=k),this[a]=b,g?this.$attr[a]=g:(g=this.$attr[a],g||(this.$attr[a]=g=ca(a,"-"))),h=I(this.$$element),"a"===h&&"href"===a||"img"===h&&"src"===a)this[a]=b=D(b,"src"===a);else if("img"===h&&"srcset"===a){for(var m="",n=md(b),o=/(\s+\d+x\s*,|\s+\d+w\s*,|\s+,|,\s+)/,p=/\s/.test(n)?o:/(,)/,q=n.split(p),r=Math.floor(q.length/2),s=0;r>s;s++){var t=2*s;m+=D(md(q[t]),!0),m+=" "+md(q[t+1])}var u=md(q[2*s]).split(/\s/);m+=D(md(u[0]),!0),2===u.length&&(m+=" "+md(u[1])),this[a]=b=m}d!==!1&&(null===b||b===c?this.$$element.removeAttr(g):this.$$element.attr(g,b));var v=this.$$observers;v&&f(v[l],function(a){try{a(b)}catch(c){e(c)}})},$observe:function(a,b){var c=this,d=c.$$observers||(c.$$observers=ja()),e=d[a]||(d[a]=[]);return e.push(b),y.$evalAsync(function(){!e.$$inter&&c.hasOwnProperty(a)&&b(c[a])}),function(){J(e,b)}}};var ha=d.startSymbol(),ia=d.endSymbol(),ka="{{"==ha||"}}"==ia?p:function(a){return a.replace(/\{\{/g,ha).replace(/}}/g,ia)},la=/^ngAttr[A-Z]/;return F.$$addBindingInfo=w?function(a,b){var c=a.data("$binding")||[];ld(b)?c=c.concat(b):c.push(b),a.data("$binding",c)}:o,F.$$addBindingClass=w?function(a){E(a,"ng-binding")}:o,F.$$addScopeInfo=w?function(a,b,c,d){var e=c?d?"$isolateScopeNoTemplate":"$isolateScope":"$scope";a.data(e,b)}:o,F.$$addScopeClass=w?function(a,b){E(a,b?"ng-isolate-scope":"ng-scope")}:o,F}]}function $a(a){return pa(a.replace(Xd,""))}function _a(a,b){var c="",d=a.split(/\s+/),e=b.split(/\s+/);a:for(var f=0;f<d.length;f++){for(var g=d[f],h=0;h<e.length;h++)if(g==e[h])continue a;c+=(c.length>0?" ":"")+g}return c}function ab(a){a=ad(a);var b=a.length;if(1>=b)return a;for(;b--;){var c=a[b];c.nodeType===ud&&ed.call(a,b,1)}return a}function bb(){var a={},b=!1,e=/^(\S+)(\s+as\s+(\w+))?$/;this.register=function(b,c){ga(b,"controller"),t(b)?l(a,b):a[b]=c},this.allowGlobals=function(){b=!0},this.$get=["$injector","$window",function(f,g){function h(a,b,c,e){if(!a||!t(a.$scope))throw d("$controller")("noscp","Cannot export controller '{0}' as '{1}'! No $scope object provided via `locals`.",e,b);a.$scope[b]=c}return function(d,i,j,k){var m,n,o,p;if(j=j===!0,k&&u(k)&&(p=k),u(d)){if(n=d.match(e),!n)throw Yd("ctrlfmt","Badly formed controller string '{0}'. Must match `__name__ as __id__` or `__name__`.",d);o=n[1],p=p||n[3],d=a.hasOwnProperty(o)?a[o]:ha(i.$scope,o,!0)||(b?ha(g,o,!0):c),fa(d,o,!0)}if(j){var q=(ld(d)?d[d.length-1]:d).prototype;return m=Object.create(q||null),p&&h(i,p,m,o||d.name),l(function(){return f.invoke(d,m,i,o),m},{instance:m,identifier:p})}return m=f.instantiate(d,i,o),p&&h(i,p,m,o||d.name),m}}]}function cb(){this.$get=["$window",function(a){return ad(a.document)}]}function db(){this.$get=["$log",function(a){return function(b,c){a.error.apply(a,arguments)}}]}function eb(a,b){if(u(a)){var c=a.replace(be,"").trim();if(c){var d=b("Content-Type");(d&&0===d.indexOf(Zd)||fb(c))&&(a=S(c))}}return a}function fb(a){var b=a.match(_d);return b&&ae[b[0]].test(a)}function gb(a){var b,c,d,e=ja();return a?(f(a.split("\n"),function(a){d=a.indexOf(":"),b=Wc(md(a.substr(0,d))),c=md(a.substr(d+1)),b&&(e[b]=e[b]?e[b]+", "+c:c)}),e):e}function hb(a){var b=t(a)?a:c;return function(c){if(b||(b=gb(a)),c){var d=b[Wc(c)];return void 0===d&&(d=null),d}return b}}function ib(a,b,c,d){return x(d)?d(a,b,c):(f(d,function(d){a=d(a,b,c)}),a)}function jb(a){return a>=200&&300>a}function kb(){var a=this.defaults={transformResponse:[eb],transformRequest:[function(a){return!t(a)||B(a)||D(a)||C(a)?a:R(a)}],headers:{common:{Accept:"application/json, text/plain, */*"},post:L($d),put:L($d),patch:L($d)},xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN"},b=!1;this.useApplyAsync=function(a){return s(a)?(b=!!a,this):b};var e=this.interceptors=[];this.$get=["$httpBackend","$browser","$cacheFactory","$rootScope","$q","$injector",function(g,i,j,k,m,n){function o(b){function e(a){var b=l({},a);return a.data?b.data=ib(a.data,a.headers,a.status,i.transformResponse):b.data=a.data,jb(a.status)?b:m.reject(b)}function g(a){var b,c={};return f(a,function(a,d){x(a)?(b=a(),null!=b&&(c[d]=b)):c[d]=a}),c}function h(b){var c,d,e,f=a.headers,h=l({},b.headers);f=l({},f.common,f[Wc(b.method)]);a:for(c in f){d=Wc(c);for(e in h)if(Wc(e)===d)continue a;h[c]=f[c]}return g(h)}if(!id.isObject(b))throw d("$http")("badreq","Http request configuration must be an object.  Received: {0}",b);var i=l({method:"get",transformRequest:a.transformRequest,transformResponse:a.transformResponse},b);i.headers=h(b),i.method=Yc(i.method);var j=function(b){var d=b.headers,g=ib(b.data,hb(d),c,b.transformRequest);return r(g)&&f(d,function(a,b){"content-type"===Wc(b)&&delete d[b]}),r(b.withCredentials)&&!r(a.withCredentials)&&(b.withCredentials=a.withCredentials),v(b,g).then(e,e)},k=[j,c],n=m.when(i);for(f(A,function(a){(a.request||a.requestError)&&k.unshift(a.request,a.requestError),(a.response||a.responseError)&&k.push(a.response,a.responseError)});k.length;){var o=k.shift(),p=k.shift();n=n.then(o,p)}return n.success=function(a){return n.then(function(b){a(b.data,b.status,b.headers,i)}),n},n.error=function(a){return n.then(null,function(b){a(b.data,b.status,b.headers,i)}),n},n}function p(a){f(arguments,function(a){o[a]=function(b,c){return o(l(c||{},{method:a,url:b}))}})}function q(a){f(arguments,function(a){o[a]=function(b,c,d){return o(l(d||{},{method:a,url:b,data:c}))}})}function v(d,e){function f(a,c,d,e){function f(){h(c,a,d,e)}n&&(jb(a)?n.put(w,[a,c,gb(d),e]):n.remove(w)),b?k.$applyAsync(f):(f(),k.$$phase||k.$apply())}function h(a,b,c,e){b=Math.max(b,0),(jb(b)?q.resolve:q.reject)({data:a,status:b,headers:hb(c),config:d,statusText:e})}function j(a){h(a.data,a.status,L(a.headers()),a.statusText)}function l(){var a=o.pendingRequests.indexOf(d);-1!==a&&o.pendingRequests.splice(a,1)}var n,p,q=m.defer(),u=q.promise,v=d.headers,w=y(d.url,d.params);if(o.pendingRequests.push(d),u.then(l,l),!d.cache&&!a.cache||d.cache===!1||"GET"!==d.method&&"JSONP"!==d.method||(n=t(d.cache)?d.cache:t(a.cache)?a.cache:z),n&&(p=n.get(w),s(p)?F(p)?p.then(j,j):ld(p)?h(p[1],p[0],L(p[2]),p[3]):h(p,200,{},"OK"):n.put(w,u)),r(p)){var x=ec(d.url)?i.cookies()[d.xsrfCookieName||a.xsrfCookieName]:c;x&&(v[d.xsrfHeaderName||a.xsrfHeaderName]=x),g(d.method,w,e,f,v,d.timeout,d.withCredentials,d.responseType)}return u}function y(a,b){if(!b)return a;var c=[];return h(b,function(a,b){null===a||r(a)||(ld(a)||(a=[a]),f(a,function(a){t(a)&&(a=w(a)?a.toISOString():R(a)),c.push(Y(b)+"="+Y(a))}))}),c.length>0&&(a+=(-1==a.indexOf("?")?"?":"&")+c.join("&")),a}var z=j("$http"),A=[];return f(e,function(a){A.unshift(u(a)?n.get(a):n.invoke(a))}),o.pendingRequests=[],p("get","delete","head","jsonp"),q("post","put","patch"),o.defaults=a,o}]}function lb(){return new a.XMLHttpRequest}function mb(){this.$get=["$browser","$window","$document",function(a,b,c){return nb(a,lb,a.defer,b.angular.callbacks,c[0])}]}function nb(a,b,d,e,g){function h(a,b,c){var d=g.createElement("script"),f=null;return d.type="text/javascript",d.src=a,d.async=!0,f=function(a){Bd(d,"load",f),Bd(d,"error",f),g.body.removeChild(d),d=null;var h=-1,i="unknown";a&&("load"!==a.type||e[b].called||(a={type:"error"}),i=a.type,h="error"===a.type?404:200),c&&c(h,i)},Ad(d,"load",f),Ad(d,"error",f),g.body.appendChild(d),f}return function(g,i,j,k,l,m,n,p){function q(){u&&u(),v&&v.abort()}function r(b,e,f,g,h){y!==c&&d.cancel(y),u=v=null,b(e,f,g,h),a.$$completeOutstandingRequest(o)}if(a.$$incOutstandingRequestCount(),i=i||a.url(),"jsonp"==Wc(g)){var t="_"+(e.counter++).toString(36);e[t]=function(a){e[t].data=a,e[t].called=!0};var u=h(i.replace("JSON_CALLBACK","angular.callbacks."+t),t,function(a,b){r(k,a,e[t].data,"",b),e[t]=o})}else{var v=b();v.open(g,i,!0),f(l,function(a,b){s(a)&&v.setRequestHeader(b,a)}),v.onload=function(){var a=v.statusText||"",b="response"in v?v.response:v.responseText,c=1223===v.status?204:v.status;0===c&&(c=b?200:"file"==dc(i).protocol?404:0),r(k,c,b,v.getAllResponseHeaders(),a)};var w=function(){r(k,-1,null,null,"")};if(v.onerror=w,v.onabort=w,n&&(v.withCredentials=!0),p)try{v.responseType=p}catch(x){if("json"!==p)throw x}v.send(j||null)}if(m>0)var y=d(q,m);else F(m)&&m.then(q)}}function ob(){var a="{{",b="}}";this.startSymbol=function(b){return b?(a=b,this):a},this.endSymbol=function(a){return a?(b=a,this):b},this.$get=["$parse","$exceptionHandler","$sce",function(c,d,e){function f(a){return"\\\\\\"+a}function g(f,g,m,n){function o(c){return c.replace(j,a).replace(k,b)}function p(a){try{return a=D(a),n&&!s(a)?a:E(a)}catch(b){var c=ce("interr","Can't interpolate: {0}\n{1}",f,b.toString());d(c)}}n=!!n;for(var q,t,u,v=0,w=[],y=[],z=f.length,A=[],B=[];z>v;){if(-1==(q=f.indexOf(a,v))||-1==(t=f.indexOf(b,q+h))){v!==z&&A.push(o(f.substring(v)));break}v!==q&&A.push(o(f.substring(v,q))),u=f.substring(q+h,t),w.push(u),y.push(c(u,p)),v=t+i,B.push(A.length),A.push("")}if(m&&A.length>1)throw ce("noconcat","Error while interpolating: {0}\nStrict Contextual Escaping disallows interpolations that concatenate multiple expressions when a trusted value is required.  See http://docs.angularjs.org/api/ng.$sce",f);if(!g||w.length){var C=function(a){for(var b=0,c=w.length;c>b;b++){if(n&&r(a[b]))return;A[B[b]]=a[b]}return A.join("")},D=function(a){return m?e.getTrusted(m,a):e.valueOf(a)},E=function(a){if(null==a)return"";switch(typeof a){case"string":break;case"number":a=""+a;break;default:a=R(a)}return a};return l(function(a){var b=0,c=w.length,e=new Array(c);try{for(;c>b;b++)e[b]=y[b](a);return C(e)}catch(g){var h=ce("interr","Can't interpolate: {0}\n{1}",f,g.toString());d(h)}},{exp:f,expressions:w,$$watchDelegate:function(a,b,c){var d;return a.$watchGroup(y,function(c,e){var f=C(c);x(b)&&b.call(this,f,c!==e?d:f,a),d=f},c)}})}}var h=a.length,i=b.length,j=new RegExp(a.replace(/./g,f),"g"),k=new RegExp(b.replace(/./g,f),"g");return g.startSymbol=function(){return a},g.endSymbol=function(){return b},g}]}function pb(){this.$get=["$rootScope","$window","$q","$$q",function(a,b,c,d){function e(e,g,h,i){var j=b.setInterval,k=b.clearInterval,l=0,m=s(i)&&!i,n=(m?d:c).defer(),o=n.promise;return h=s(h)?h:0,o.then(null,null,e),o.$$intervalId=j(function(){n.notify(l++),h>0&&l>=h&&(n.resolve(l),k(o.$$intervalId),delete f[o.$$intervalId]),m||a.$apply()},g),f[o.$$intervalId]=n,o}var f={};return e.cancel=function(a){return a&&a.$$intervalId in f?(f[a.$$intervalId].reject("canceled"),b.clearInterval(a.$$intervalId),delete f[a.$$intervalId],!0):!1},e}]}function qb(){this.$get=function(){return{id:"en-us",NUMBER_FORMATS:{DECIMAL_SEP:".",GROUP_SEP:",",PATTERNS:[{minInt:1,minFrac:0,maxFrac:3,posPre:"",posSuf:"",negPre:"-",negSuf:"",gSize:3,lgSize:3},{minInt:1,minFrac:2,maxFrac:2,posPre:"¤",posSuf:"",negPre:"(¤",negSuf:")",gSize:3,lgSize:3}],CURRENCY_SYM:"$"},DATETIME_FORMATS:{MONTH:"January,February,March,April,May,June,July,August,September,October,November,December".split(","),SHORTMONTH:"Jan,Feb,Mar,Apr,May,Jun,Jul,Aug,Sep,Oct,Nov,Dec".split(","),DAY:"Sunday,Monday,Tuesday,Wednesday,Thursday,Friday,Saturday".split(","),SHORTDAY:"Sun,Mon,Tue,Wed,Thu,Fri,Sat".split(","),AMPMS:["AM","PM"],medium:"MMM d, y h:mm:ss a","short":"M/d/yy h:mm a",fullDate:"EEEE, MMMM d, y",longDate:"MMMM d, y",mediumDate:"MMM d, y",shortDate:"M/d/yy",mediumTime:"h:mm:ss a",shortTime:"h:mm a",ERANAMES:["Before Christ","Anno Domini"],ERAS:["BC","AD"]},pluralCat:function(a){return 1===a?"one":"other"}}}}function rb(a){for(var b=a.split("/"),c=b.length;c--;)b[c]=X(b[c]);return b.join("/")}function sb(a,b){var c=dc(a);b.$$protocol=c.protocol,b.$$host=c.hostname,b.$$port=m(c.port)||ee[c.protocol]||null}function tb(a,b){var c="/"!==a.charAt(0);c&&(a="/"+a);var d=dc(a);b.$$path=decodeURIComponent(c&&"/"===d.pathname.charAt(0)?d.pathname.substring(1):d.pathname),b.$$search=V(d.search),b.$$hash=decodeURIComponent(d.hash),b.$$path&&"/"!=b.$$path.charAt(0)&&(b.$$path="/"+b.$$path)}function ub(a,b){return 0===b.indexOf(a)?b.substr(a.length):void 0}function vb(a){var b=a.indexOf("#");return-1==b?a:a.substr(0,b)}function wb(a){return a.replace(/(#.+)|#$/,"$1")}function xb(a){return a.substr(0,vb(a).lastIndexOf("/")+1)}function yb(a){return a.substring(0,a.indexOf("/",a.indexOf("//")+2))}function zb(a,b){this.$$html5=!0,b=b||"";var d=xb(a);sb(a,this),this.$$parse=function(a){var b=ub(d,a);if(!u(b))throw fe("ipthprfx",'Invalid url "{0}", missing path prefix "{1}".',a,d);tb(b,this),this.$$path||(this.$$path="/"),this.$$compose()},this.$$compose=function(){var a=W(this.$$search),b=this.$$hash?"#"+X(this.$$hash):"";this.$$url=rb(this.$$path)+(a?"?"+a:"")+b,this.$$absUrl=d+this.$$url.substr(1)},this.$$parseLinkUrl=function(e,f){if(f&&"#"===f[0])return this.hash(f.slice(1)),!0;var g,h,i;return(g=ub(a,e))!==c?(h=g,i=(g=ub(b,g))!==c?d+(ub("/",g)||g):a+h):(g=ub(d,e))!==c?i=d+g:d==e+"/"&&(i=d),i&&this.$$parse(i),!!i}}function Ab(a,b){var c=xb(a);sb(a,this),this.$$parse=function(d){function e(a,b,c){var d,e=/^\/[A-Z]:(\/.*)/;return 0===b.indexOf(c)&&(b=b.replace(c,"")),e.exec(b)?a:(d=e.exec(a),d?d[1]:a)}var f,g=ub(a,d)||ub(c,d);"#"===g.charAt(0)?(f=ub(b,g),r(f)&&(f=g)):f=this.$$html5?g:"",tb(f,this),this.$$path=e(this.$$path,f,a),this.$$compose()},this.$$compose=function(){var c=W(this.$$search),d=this.$$hash?"#"+X(this.$$hash):"";this.$$url=rb(this.$$path)+(c?"?"+c:"")+d,this.$$absUrl=a+(this.$$url?b+this.$$url:"")},this.$$parseLinkUrl=function(b,c){return vb(a)==vb(b)?(this.$$parse(b),!0):!1}}function Bb(a,b){this.$$html5=!0,Ab.apply(this,arguments);var c=xb(a);this.$$parseLinkUrl=function(d,e){if(e&&"#"===e[0])return this.hash(e.slice(1)),!0;var f,g;return a==vb(d)?f=d:(g=ub(c,d))?f=a+b+g:c===d+"/"&&(f=c),f&&this.$$parse(f),!!f},this.$$compose=function(){var c=W(this.$$search),d=this.$$hash?"#"+X(this.$$hash):"";this.$$url=rb(this.$$path)+(c?"?"+c:"")+d,this.$$absUrl=a+b+this.$$url}}function Cb(a){return function(){return this[a]}}function Db(a,b){return function(c){return r(c)?this[a]:(this[a]=b(c),this.$$compose(),this)}}function Eb(){var a="",b={enabled:!1,requireBase:!0,rewriteLinks:!0};this.hashPrefix=function(b){return s(b)?(a=b,this):a},this.html5Mode=function(a){return E(a)?(b.enabled=a,this):t(a)?(E(a.enabled)&&(b.enabled=a.enabled),E(a.requireBase)&&(b.requireBase=a.requireBase),E(a.rewriteLinks)&&(b.rewriteLinks=a.rewriteLinks),this):b},this.$get=["$rootScope","$browser","$sniffer","$rootElement","$window",function(c,d,e,f,g){function h(a,b,c){var e=j.url(),f=j.$$state;try{d.url(a,b,c),j.$$state=d.state()}catch(g){throw j.url(e),j.$$state=f,g}}function i(a,b){c.$broadcast("$locationChangeSuccess",j.absUrl(),a,j.$$state,b)}var j,k,l,m=d.baseHref(),n=d.url();if(b.enabled){if(!m&&b.requireBase)throw fe("nobase","$location in HTML5 mode requires a <base> tag to be present!");l=yb(n)+(m||"/"),k=e.history?zb:Bb}else l=vb(n),k=Ab;j=new k(l,"#"+a),j.$$parseLinkUrl(n,n),j.$$state=d.state();var o=/^\s*(javascript|mailto):/i;f.on("click",function(a){if(b.rewriteLinks&&!a.ctrlKey&&!a.metaKey&&!a.shiftKey&&2!=a.which&&2!=a.button){for(var e=ad(a.target);"a"!==I(e[0]);)if(e[0]===f[0]||!(e=e.parent())[0])return;var h=e.prop("href"),i=e.attr("href")||e.attr("xlink:href");t(h)&&"[object SVGAnimatedString]"===h.toString()&&(h=dc(h.animVal).href),o.test(h)||!h||e.attr("target")||a.isDefaultPrevented()||j.$$parseLinkUrl(h,i)&&(a.preventDefault(),j.absUrl()!=d.url()&&(c.$apply(),g.angular["ff-684208-preventDefault"]=!0))}}),wb(j.absUrl())!=wb(n)&&d.url(j.absUrl(),!0);var p=!0;return d.onUrlChange(function(a,b){c.$evalAsync(function(){var d,e=j.absUrl(),f=j.$$state;j.$$parse(a),j.$$state=b,d=c.$broadcast("$locationChangeStart",a,e,b,f).defaultPrevented,j.absUrl()===a&&(d?(j.$$parse(e),j.$$state=f,h(e,!1,f)):(p=!1,i(e,f)))}),c.$$phase||c.$digest()}),c.$watch(function(){var a=wb(d.url()),b=wb(j.absUrl()),f=d.state(),g=j.$$replace,k=a!==b||j.$$html5&&e.history&&f!==j.$$state;(p||k)&&(p=!1,c.$evalAsync(function(){var b=j.absUrl(),d=c.$broadcast("$locationChangeStart",b,a,j.$$state,f).defaultPrevented;j.absUrl()===b&&(d?(j.$$parse(a),j.$$state=f):(k&&h(b,g,f===j.$$state?null:j.$$state),i(a,f)))})),j.$$replace=!1}),j}]}function Fb(){var a=!0,b=this;this.debugEnabled=function(b){return s(b)?(a=b,this):a},this.$get=["$window",function(c){function d(a){return a instanceof Error&&(a.stack?a=a.message&&-1===a.stack.indexOf(a.message)?"Error: "+a.message+"\n"+a.stack:a.stack:a.sourceURL&&(a=a.message+"\n"+a.sourceURL+":"+a.line)),a}function e(a){var b=c.console||{},e=b[a]||b.log||o,g=!1;try{g=!!e.apply}catch(h){}return g?function(){var a=[];return f(arguments,function(b){a.push(d(b))}),e.apply(b,a)}:function(a,b){e(a,null==b?"":b)}}return{log:e("log"),info:e("info"),warn:e("warn"),error:e("error"),debug:function(){var c=e("debug");return function(){a&&c.apply(b,arguments)}}()}}]}function Gb(a,b){if("__defineGetter__"===a||"__defineSetter__"===a||"__lookupGetter__"===a||"__lookupSetter__"===a||"__proto__"===a)throw he("isecfld","Attempting to access a disallowed field in Angular expressions! Expression: {0}",b);return a}function Hb(a,b){if(a){if(a.constructor===a)throw he("isecfn","Referencing Function in Angular expressions is disallowed! Expression: {0}",b);if(a.window===a)throw he("isecwindow","Referencing the Window in Angular expressions is disallowed! Expression: {0}",b);if(a.children&&(a.nodeName||a.prop&&a.attr&&a.find))throw he("isecdom","Referencing DOM nodes in Angular expressions is disallowed! Expression: {0}",b);if(a===Object)throw he("isecobj","Referencing Object in Angular expressions is disallowed! Expression: {0}",b)}return a}function Ib(a,b){if(a){if(a.constructor===a)throw he("isecfn","Referencing Function in Angular expressions is disallowed! Expression: {0}",b);if(a===ie||a===je||a===ke)throw he("isecff","Referencing call, apply or bind in Angular expressions is disallowed! Expression: {0}",b)}}function Jb(a){return a.constant}function Kb(a,b,c,d,e){Hb(a,e),Hb(b,e);for(var f,g=c.split("."),h=0;g.length>1;h++){f=Gb(g.shift(),e);var i=0===h&&b&&b[f]||a[f];i||(i={},a[f]=i),a=Hb(i,e)}return f=Gb(g.shift(),e),Hb(a[f],e),a[f]=d,d}function Lb(a){return"constructor"==a}function Mb(a,b,d,e,f,g,h){Gb(a,g),
Gb(b,g),Gb(d,g),Gb(e,g),Gb(f,g);var i=function(a){return Hb(a,g)},j=h||Lb(a)?i:p,k=h||Lb(b)?i:p,l=h||Lb(d)?i:p,m=h||Lb(e)?i:p,n=h||Lb(f)?i:p;return function(g,h){var i=h&&h.hasOwnProperty(a)?h:g;return null==i?i:(i=j(i[a]),b?null==i?c:(i=k(i[b]),d?null==i?c:(i=l(i[d]),e?null==i?c:(i=m(i[e]),f?null==i?c:i=n(i[f]):i):i):i):i)}}function Nb(a,b){return function(c,d){return a(c,d,Hb,b)}}function Ob(a,b,d){var e=b.expensiveChecks,g=e?re:qe,h=g[a];if(h)return h;var i=a.split("."),j=i.length;if(b.csp)h=6>j?Mb(i[0],i[1],i[2],i[3],i[4],d,e):function(a,b){var f,g=0;do f=Mb(i[g++],i[g++],i[g++],i[g++],i[g++],d,e)(a,b),b=c,a=f;while(j>g);return f};else{var k="";e&&(k+="s = eso(s, fe);\nl = eso(l, fe);\n");var l=e;f(i,function(a,b){Gb(a,d);var c=(b?"s":'((l&&l.hasOwnProperty("'+a+'"))?l:s)')+"."+a;(e||Lb(a))&&(c="eso("+c+", fe)",l=!0),k+="if(s == null) return undefined;\ns="+c+";\n"}),k+="return s;";var m=new Function("s","l","eso","fe",k);m.toString=q(k),l&&(m=Nb(m,d)),h=m}return h.sharedGetter=!0,h.assign=function(b,c,d){return Kb(b,d,a,c,a)},g[a]=h,h}function Pb(a){return x(a.valueOf)?a.valueOf():se.call(a)}function Qb(){var a=ja(),b=ja();this.$get=["$filter","$sniffer",function(c,d){function e(a){var b=a;return a.sharedGetter&&(b=function(b,c){return a(b,c)},b.literal=a.literal,b.constant=a.constant,b.assign=a.assign),b}function g(a,b){for(var c=0,d=a.length;d>c;c++){var e=a[c];e.constant||(e.inputs?g(e.inputs,b):-1===b.indexOf(e)&&b.push(e))}return b}function h(a,b){return null==a||null==b?a===b:"object"==typeof a&&(a=Pb(a),"object"==typeof a)?!1:a===b||a!==a&&b!==b}function i(a,b,c,d){var e,f=d.$$inputs||(d.$$inputs=g(d.inputs,[]));if(1===f.length){var i=h;return f=f[0],a.$watch(function(a){var b=f(a);return h(b,i)||(e=d(a),i=b&&Pb(b)),e},b,c)}for(var j=[],k=0,l=f.length;l>k;k++)j[k]=h;return a.$watch(function(a){for(var b=!1,c=0,g=f.length;g>c;c++){var i=f[c](a);(b||(b=!h(i,j[c])))&&(j[c]=i&&Pb(i))}return b&&(e=d(a)),e},b,c)}function j(a,b,c,d){var e,f;return e=a.$watch(function(a){return d(a)},function(a,c,d){f=a,x(b)&&b.apply(this,arguments),s(a)&&d.$$postDigest(function(){s(f)&&e()})},c)}function k(a,b,c,d){function e(a){var b=!0;return f(a,function(a){s(a)||(b=!1)}),b}var g,h;return g=a.$watch(function(a){return d(a)},function(a,c,d){h=a,x(b)&&b.call(this,a,c,d),e(a)&&d.$$postDigest(function(){e(h)&&g()})},c)}function l(a,b,c,d){var e;return e=a.$watch(function(a){return d(a)},function(a,c,d){x(b)&&b.apply(this,arguments),e()},c)}function m(a,b){if(!b)return a;var c=a.$$watchDelegate,d=c!==k&&c!==j,e=d?function(c,d){var e=a(c,d);return b(e,c,d)}:function(c,d){var e=a(c,d),f=b(e,c,d);return s(e)?f:e};return a.$$watchDelegate&&a.$$watchDelegate!==i?e.$$watchDelegate=a.$$watchDelegate:b.$stateful||(e.$$watchDelegate=i,e.inputs=[a]),e}var n={csp:d.csp,expensiveChecks:!1},p={csp:d.csp,expensiveChecks:!0};return function(d,f,g){var h,q,r;switch(typeof d){case"string":r=d=d.trim();var s=g?b:a;if(h=s[r],!h){":"===d.charAt(0)&&":"===d.charAt(1)&&(q=!0,d=d.substring(2));var t=g?p:n,u=new oe(t),v=new pe(u,c,t);h=v.parse(d),h.constant?h.$$watchDelegate=l:q?(h=e(h),h.$$watchDelegate=h.literal?k:j):h.inputs&&(h.$$watchDelegate=i),s[r]=h}return m(h,f);case"function":return m(d,f);default:return m(o,f)}}}]}function Rb(){this.$get=["$rootScope","$exceptionHandler",function(a,b){return Tb(function(b){a.$evalAsync(b)},b)}]}function Sb(){this.$get=["$browser","$exceptionHandler",function(a,b){return Tb(function(b){a.defer(b)},b)}]}function Tb(a,b){function e(a,b,c){function d(b){return function(c){e||(e=!0,b.call(a,c))}}var e=!1;return[d(b),d(c)]}function g(){this.$$state={status:0}}function h(a,b){return function(c){b.call(a,c)}}function i(a){var d,e,f;f=a.pending,a.processScheduled=!1,a.pending=c;for(var g=0,h=f.length;h>g;++g){e=f[g][0],d=f[g][a.status];try{x(d)?e.resolve(d(a.value)):1===a.status?e.resolve(a.value):e.reject(a.value)}catch(i){e.reject(i),b(i)}}}function j(b){!b.processScheduled&&b.pending&&(b.processScheduled=!0,a(function(){i(b)}))}function k(){this.promise=new g,this.resolve=h(this,this.resolve),this.reject=h(this,this.reject),this.notify=h(this,this.notify)}function l(a){var b=new k,c=0,d=ld(a)?[]:{};return f(a,function(a,e){c++,r(a).then(function(a){d.hasOwnProperty(e)||(d[e]=a,--c||b.resolve(d))},function(a){d.hasOwnProperty(e)||b.reject(a)})}),0===c&&b.resolve(d),b.promise}var m=d("$q",TypeError),n=function(){return new k};g.prototype={then:function(a,b,c){var d=new k;return this.$$state.pending=this.$$state.pending||[],this.$$state.pending.push([d,a,b,c]),this.$$state.status>0&&j(this.$$state),d.promise},"catch":function(a){return this.then(null,a)},"finally":function(a,b){return this.then(function(b){return q(b,!0,a)},function(b){return q(b,!1,a)},b)}},k.prototype={resolve:function(a){this.promise.$$state.status||(a===this.promise?this.$$reject(m("qcycle","Expected promise to be resolved with value other than itself '{0}'",a)):this.$$resolve(a))},$$resolve:function(a){var c,d;d=e(this,this.$$resolve,this.$$reject);try{(t(a)||x(a))&&(c=a&&a.then),x(c)?(this.promise.$$state.status=-1,c.call(a,d[0],d[1],this.notify)):(this.promise.$$state.value=a,this.promise.$$state.status=1,j(this.promise.$$state))}catch(f){d[1](f),b(f)}},reject:function(a){this.promise.$$state.status||this.$$reject(a)},$$reject:function(a){this.promise.$$state.value=a,this.promise.$$state.status=2,j(this.promise.$$state)},notify:function(c){var d=this.promise.$$state.pending;this.promise.$$state.status<=0&&d&&d.length&&a(function(){for(var a,e,f=0,g=d.length;g>f;f++){e=d[f][0],a=d[f][3];try{e.notify(x(a)?a(c):c)}catch(h){b(h)}}})}};var o=function(a){var b=new k;return b.reject(a),b.promise},p=function(a,b){var c=new k;return b?c.resolve(a):c.reject(a),c.promise},q=function(a,b,c){var d=null;try{x(c)&&(d=c())}catch(e){return p(e,!1)}return F(d)?d.then(function(){return p(a,b)},function(a){return p(a,!1)}):p(a,b)},r=function(a,b,c,d){var e=new k;return e.resolve(a),e.promise.then(b,c,d)},s=function u(a){function b(a){d.resolve(a)}function c(a){d.reject(a)}if(!x(a))throw m("norslvr","Expected resolverFn, got '{0}'",a);if(!(this instanceof u))return new u(a);var d=new k;return a(b,c),d.promise};return s.defer=n,s.reject=o,s.when=r,s.all=l,s}function Ub(){this.$get=["$window","$timeout",function(a,b){var c=a.requestAnimationFrame||a.webkitRequestAnimationFrame,d=a.cancelAnimationFrame||a.webkitCancelAnimationFrame||a.webkitCancelRequestAnimationFrame,e=!!c,f=e?function(a){var b=c(a);return function(){d(b)}}:function(a){var c=b(a,16.66,!1);return function(){b.cancel(c)}};return f.supported=e,f}]}function Vb(){function a(a){function b(){this.$$watchers=this.$$nextSibling=this.$$childHead=this.$$childTail=null,this.$$listeners={},this.$$listenerCount={},this.$$watchersCount=0,this.$id=j(),this.$$ChildScope=null}return b.prototype=a,b}var b=10,c=d("$rootScope"),g=null,h=null;this.digestTtl=function(a){return arguments.length&&(b=a),b},this.$get=["$injector","$exceptionHandler","$parse","$browser",function(d,i,k,l){function m(a){a.currentScope.$$destroyed=!0}function n(){this.$id=j(),this.$$phase=this.$parent=this.$$watchers=this.$$nextSibling=this.$$prevSibling=this.$$childHead=this.$$childTail=null,this.$root=this,this.$$destroyed=!1,this.$$listeners={},this.$$listenerCount={},this.$$isolateBindings=null}function p(a){if(y.$$phase)throw c("inprog","{0} already in progress",y.$$phase);y.$$phase=a}function q(){y.$$phase=null}function s(a,b,c){do a.$$listenerCount[c]-=b,0===a.$$listenerCount[c]&&delete a.$$listenerCount[c];while(a=a.$parent)}function u(){}function v(){for(;B.length;)try{B.shift()()}catch(a){i(a)}h=null}function w(){null===h&&(h=l.defer(function(){y.$apply(v)}))}n.prototype={constructor:n,$new:function(b,c){var d;return c=c||this,b?(d=new n,d.$root=this.$root):(this.$$ChildScope||(this.$$ChildScope=a(this)),d=new this.$$ChildScope),d.$parent=c,d.$$prevSibling=c.$$childTail,c.$$childHead?(c.$$childTail.$$nextSibling=d,c.$$childTail=d):c.$$childHead=c.$$childTail=d,(b||c!=this)&&d.$on("$destroy",m),d},$watch:function(a,b,c){var d=k(a);if(d.$$watchDelegate)return d.$$watchDelegate(this,b,c,d);var e=this,f=e.$$watchers,h={fn:b,last:u,get:d,exp:a,eq:!!c};return g=null,x(b)||(h.fn=o),f||(f=e.$$watchers=[]),f.unshift(h),function(){J(f,h),g=null}},$watchGroup:function(a,b){function c(){i=!1,j?(j=!1,b(e,e,h)):b(e,d,h)}var d=new Array(a.length),e=new Array(a.length),g=[],h=this,i=!1,j=!0;if(!a.length){var k=!0;return h.$evalAsync(function(){k&&b(e,e,h)}),function(){k=!1}}return 1===a.length?this.$watch(a[0],function(a,c,f){e[0]=a,d[0]=c,b(e,a===c?e:d,f)}):(f(a,function(a,b){var f=h.$watch(a,function(a,f){e[b]=a,d[b]=f,i||(i=!0,h.$evalAsync(c))});g.push(f)}),function(){for(;g.length;)g.shift()()})},$watchCollection:function(a,b){function c(a){f=a;var b,c,d,h,i;if(!r(f)){if(t(f))if(e(f)){g!==n&&(g=n,q=g.length=0,l++),b=f.length,q!==b&&(l++,g.length=q=b);for(var j=0;b>j;j++)i=g[j],h=f[j],d=i!==i&&h!==h,d||i===h||(l++,g[j]=h)}else{g!==o&&(g=o={},q=0,l++),b=0;for(c in f)f.hasOwnProperty(c)&&(b++,h=f[c],i=g[c],c in g?(d=i!==i&&h!==h,d||i===h||(l++,g[c]=h)):(q++,g[c]=h,l++));if(q>b){l++;for(c in g)f.hasOwnProperty(c)||(q--,delete g[c])}}else g!==f&&(g=f,l++);return l}}function d(){if(p?(p=!1,b(f,f,i)):b(f,h,i),j)if(t(f))if(e(f)){h=new Array(f.length);for(var a=0;a<f.length;a++)h[a]=f[a]}else{h={};for(var c in f)Xc.call(f,c)&&(h[c]=f[c])}else h=f}c.$stateful=!0;var f,g,h,i=this,j=b.length>1,l=0,m=k(a,c),n=[],o={},p=!0,q=0;return this.$watch(m,d)},$digest:function(){var a,d,e,f,j,k,m,n,o,r,s=b,t=this,w=[];p("$digest"),l.$$checkUrlChange(),this===y&&null!==h&&(l.defer.cancel(h),v()),g=null;do{for(k=!1,n=t;z.length;){try{r=z.shift(),r.scope.$eval(r.expression,r.locals)}catch(B){i(B)}g=null}a:do{if(f=n.$$watchers)for(j=f.length;j--;)try{if(a=f[j])if((d=a.get(n))===(e=a.last)||(a.eq?M(d,e):"number"==typeof d&&"number"==typeof e&&isNaN(d)&&isNaN(e))){if(a===g){k=!1;break a}}else k=!0,g=a,a.last=a.eq?K(d,null):d,a.fn(d,e===u?d:e,n),5>s&&(o=4-s,w[o]||(w[o]=[]),w[o].push({msg:x(a.exp)?"fn: "+(a.exp.name||a.exp.toString()):a.exp,newVal:d,oldVal:e}))}catch(B){i(B)}if(!(m=n.$$childHead||n!==t&&n.$$nextSibling))for(;n!==t&&!(m=n.$$nextSibling);)n=n.$parent}while(n=m);if((k||z.length)&&!s--)throw q(),c("infdig","{0} $digest() iterations reached. Aborting!\nWatchers fired in the last 5 iterations: {1}",b,w)}while(k||z.length);for(q();A.length;)try{A.shift()()}catch(B){i(B)}},$destroy:function(){if(!this.$$destroyed){var a=this.$parent;if(this.$broadcast("$destroy"),this.$$destroyed=!0,this!==y){for(var b in this.$$listenerCount)s(this,this.$$listenerCount[b],b);a.$$childHead==this&&(a.$$childHead=this.$$nextSibling),a.$$childTail==this&&(a.$$childTail=this.$$prevSibling),this.$$prevSibling&&(this.$$prevSibling.$$nextSibling=this.$$nextSibling),this.$$nextSibling&&(this.$$nextSibling.$$prevSibling=this.$$prevSibling),this.$destroy=this.$digest=this.$apply=this.$evalAsync=this.$applyAsync=o,this.$on=this.$watch=this.$watchGroup=function(){return o},this.$$listeners={},this.$parent=this.$$nextSibling=this.$$prevSibling=this.$$childHead=this.$$childTail=this.$root=this.$$watchers=null}}},$eval:function(a,b){return k(a)(this,b)},$evalAsync:function(a,b){y.$$phase||z.length||l.defer(function(){z.length&&y.$digest()}),z.push({scope:this,expression:a,locals:b})},$$postDigest:function(a){A.push(a)},$apply:function(a){try{return p("$apply"),this.$eval(a)}catch(b){i(b)}finally{q();try{y.$digest()}catch(b){throw i(b),b}}},$applyAsync:function(a){function b(){c.$eval(a)}var c=this;a&&B.push(b),w()},$on:function(a,b){var c=this.$$listeners[a];c||(this.$$listeners[a]=c=[]),c.push(b);var d=this;do d.$$listenerCount[a]||(d.$$listenerCount[a]=0),d.$$listenerCount[a]++;while(d=d.$parent);var e=this;return function(){var d=c.indexOf(b);-1!==d&&(c[d]=null,s(e,1,a))}},$emit:function(a,b){var c,d,e,f=[],g=this,h=!1,j={name:a,targetScope:g,stopPropagation:function(){h=!0},preventDefault:function(){j.defaultPrevented=!0},defaultPrevented:!1},k=N([j],arguments,1);do{for(c=g.$$listeners[a]||f,j.currentScope=g,d=0,e=c.length;e>d;d++)if(c[d])try{c[d].apply(null,k)}catch(l){i(l)}else c.splice(d,1),d--,e--;if(h)return j.currentScope=null,j;g=g.$parent}while(g);return j.currentScope=null,j},$broadcast:function(a,b){var c=this,d=c,e=c,f={name:a,targetScope:c,preventDefault:function(){f.defaultPrevented=!0},defaultPrevented:!1};if(!c.$$listenerCount[a])return f;for(var g,h,j,k=N([f],arguments,1);d=e;){for(f.currentScope=d,g=d.$$listeners[a]||[],h=0,j=g.length;j>h;h++)if(g[h])try{g[h].apply(null,k)}catch(l){i(l)}else g.splice(h,1),h--,j--;if(!(e=d.$$listenerCount[a]&&d.$$childHead||d!==c&&d.$$nextSibling))for(;d!==c&&!(e=d.$$nextSibling);)d=d.$parent}return f.currentScope=null,f}};var y=new n,z=y.$$asyncQueue=[],A=y.$$postDigestQueue=[],B=y.$$applyAsyncQueue=[];return y}]}function Wb(){var a=/^\s*(https?|ftp|mailto|tel|file):/,b=/^\s*((https?|ftp|file|blob):|data:image\/)/;this.aHrefSanitizationWhitelist=function(b){return s(b)?(a=b,this):a},this.imgSrcSanitizationWhitelist=function(a){return s(a)?(b=a,this):b},this.$get=function(){return function(c,d){var e,f=d?b:a;return e=dc(c).href,""===e||e.match(f)?c:"unsafe:"+e}}}function Xb(a){if("self"===a)return a;if(u(a)){if(a.indexOf("***")>-1)throw te("iwcard","Illegal sequence *** in string matcher.  String: {0}",a);return a=nd(a).replace("\\*\\*",".*").replace("\\*","[^:/.?&;]*"),new RegExp("^"+a+"$")}if(y(a))return new RegExp("^"+a.source+"$");throw te("imatcher",'Matchers may only be "self", string patterns or RegExp objects')}function Yb(a){var b=[];return s(a)&&f(a,function(a){b.push(Xb(a))}),b}function Zb(){this.SCE_CONTEXTS=ue;var a=["self"],b=[];this.resourceUrlWhitelist=function(b){return arguments.length&&(a=Yb(b)),a},this.resourceUrlBlacklist=function(a){return arguments.length&&(b=Yb(a)),b},this.$get=["$injector",function(d){function e(a,b){return"self"===a?ec(b):!!a.exec(b.href)}function f(c){var d,f,g=dc(c.toString()),h=!1;for(d=0,f=a.length;f>d;d++)if(e(a[d],g)){h=!0;break}if(h)for(d=0,f=b.length;f>d;d++)if(e(b[d],g)){h=!1;break}return h}function g(a){var b=function(a){this.$$unwrapTrustedValue=function(){return a}};return a&&(b.prototype=new a),b.prototype.valueOf=function(){return this.$$unwrapTrustedValue()},b.prototype.toString=function(){return this.$$unwrapTrustedValue().toString()},b}function h(a,b){var d=m.hasOwnProperty(a)?m[a]:null;if(!d)throw te("icontext","Attempted to trust a value in invalid context. Context: {0}; Value: {1}",a,b);if(null===b||b===c||""===b)return b;if("string"!=typeof b)throw te("itype","Attempted to trust a non-string value in a content requiring a string: Context: {0}",a);return new d(b)}function i(a){return a instanceof l?a.$$unwrapTrustedValue():a}function j(a,b){if(null===b||b===c||""===b)return b;var d=m.hasOwnProperty(a)?m[a]:null;if(d&&b instanceof d)return b.$$unwrapTrustedValue();if(a===ue.RESOURCE_URL){if(f(b))return b;throw te("insecurl","Blocked loading resource from url not allowed by $sceDelegate policy.  URL: {0}",b.toString())}if(a===ue.HTML)return k(b);throw te("unsafe","Attempting to use an unsafe value in a safe context.")}var k=function(a){throw te("unsafe","Attempting to use an unsafe value in a safe context.")};d.has("$sanitize")&&(k=d.get("$sanitize"));var l=g(),m={};return m[ue.HTML]=g(l),m[ue.CSS]=g(l),m[ue.URL]=g(l),m[ue.JS]=g(l),m[ue.RESOURCE_URL]=g(m[ue.URL]),{trustAs:h,getTrusted:j,valueOf:i}}]}function $b(){var a=!0;this.enabled=function(b){return arguments.length&&(a=!!b),a},this.$get=["$parse","$sceDelegate",function(b,c){if(a&&8>_c)throw te("iequirks","Strict Contextual Escaping does not support Internet Explorer version < 11 in quirks mode.  You can fix this by adding the text <!doctype html> to the top of your HTML document.  See http://docs.angularjs.org/api/ng.$sce for more information.");var d=L(ue);d.isEnabled=function(){return a},d.trustAs=c.trustAs,d.getTrusted=c.getTrusted,d.valueOf=c.valueOf,a||(d.trustAs=d.getTrusted=function(a,b){return b},d.valueOf=p),d.parseAs=function(a,c){var e=b(c);return e.literal&&e.constant?e:b(c,function(b){return d.getTrusted(a,b)})};var e=d.parseAs,g=d.getTrusted,h=d.trustAs;return f(ue,function(a,b){var c=Wc(b);d[pa("parse_as_"+c)]=function(b){return e(a,b)},d[pa("get_trusted_"+c)]=function(b){return g(a,b)},d[pa("trust_as_"+c)]=function(b){return h(a,b)}}),d}]}function _b(){this.$get=["$window","$document",function(a,b){var c,d,e={},f=m((/android (\d+)/.exec(Wc((a.navigator||{}).userAgent))||[])[1]),g=/Boxee/i.test((a.navigator||{}).userAgent),h=b[0]||{},i=/^(Moz|webkit|ms)(?=[A-Z])/,j=h.body&&h.body.style,k=!1,l=!1;if(j){for(var n in j)if(d=i.exec(n)){c=d[0],c=c.substr(0,1).toUpperCase()+c.substr(1);break}c||(c="WebkitOpacity"in j&&"webkit"),k=!!("transition"in j||c+"Transition"in j),l=!!("animation"in j||c+"Animation"in j),!f||k&&l||(k=u(h.body.style.webkitTransition),l=u(h.body.style.webkitAnimation))}return{history:!(!a.history||!a.history.pushState||4>f||g),hasEvent:function(a){if("input"===a&&11>=_c)return!1;if(r(e[a])){var b=h.createElement("div");e[a]="on"+a in b}return e[a]},csp:od(),vendorPrefix:c,transitions:k,animations:l,android:f}}]}function ac(){this.$get=["$templateCache","$http","$q",function(a,b,c){function d(e,f){function g(a){if(!f)throw Wd("tpload","Failed to load template: {0}",e);return c.reject(a)}d.totalPendingRequests++;var h=b.defaults&&b.defaults.transformResponse;ld(h)?h=h.filter(function(a){return a!==eb}):h===eb&&(h=null);var i={cache:a,transformResponse:h};return b.get(e,i)["finally"](function(){d.totalPendingRequests--}).then(function(a){return a.data},g)}return d.totalPendingRequests=0,d}]}function bc(){this.$get=["$rootScope","$browser","$location",function(a,b,c){var d={};return d.findBindings=function(a,b,c){var d=a.getElementsByClassName("ng-binding"),e=[];return f(d,function(a){var d=id.element(a).data("$binding");d&&f(d,function(d){if(c){var f=new RegExp("(^|\\s)"+nd(b)+"(\\s|\\||$)");f.test(d)&&e.push(a)}else-1!=d.indexOf(b)&&e.push(a)})}),e},d.findModels=function(a,b,c){for(var d=["ng-","data-ng-","ng\\:"],e=0;e<d.length;++e){var f=c?"=":"*=",g="["+d[e]+"model"+f+'"'+b+'"]',h=a.querySelectorAll(g);if(h.length)return h}},d.getLocation=function(){return c.url()},d.setLocation=function(b){b!==c.url()&&(c.url(b),a.$digest())},d.whenStable=function(a){b.notifyWhenNoOutstandingRequests(a)},d}]}function cc(){this.$get=["$rootScope","$browser","$q","$$q","$exceptionHandler",function(a,b,c,d,e){function f(f,h,i){var j,k=s(i)&&!i,l=(k?d:c).defer(),m=l.promise;return j=b.defer(function(){try{l.resolve(f())}catch(b){l.reject(b),e(b)}finally{delete g[m.$$timeoutId]}k||a.$apply()},h),m.$$timeoutId=j,g[j]=l,m}var g={};return f.cancel=function(a){return a&&a.$$timeoutId in g?(g[a.$$timeoutId].reject("canceled"),delete g[a.$$timeoutId],b.defer.cancel(a.$$timeoutId)):!1},f}]}function dc(a){var b=a;return _c&&(ve.setAttribute("href",b),b=ve.href),ve.setAttribute("href",b),{href:ve.href,protocol:ve.protocol?ve.protocol.replace(/:$/,""):"",host:ve.host,search:ve.search?ve.search.replace(/^\?/,""):"",hash:ve.hash?ve.hash.replace(/^#/,""):"",hostname:ve.hostname,port:ve.port,pathname:"/"===ve.pathname.charAt(0)?ve.pathname:"/"+ve.pathname}}function ec(a){var b=u(a)?dc(a):a;return b.protocol===we.protocol&&b.host===we.host}function fc(){this.$get=q(a)}function gc(a){function b(d,e){if(t(d)){var g={};return f(d,function(a,c){g[c]=b(c,a)}),g}return a.factory(d+c,e)}var c="Filter";this.register=b,this.$get=["$injector",function(a){return function(b){return a.get(b+c)}}],b("currency",kc),b("date",xc),b("filter",hc),b("json",yc),b("limitTo",zc),b("lowercase",Be),b("number",lc),b("orderBy",Ac),b("uppercase",Ce)}function hc(){return function(a,b,c){if(!ld(a))return a;var d,e;switch(typeof b){case"function":d=b;break;case"boolean":case"number":case"string":e=!0;case"object":d=ic(b,c,e);break;default:return a}return a.filter(d)}}function ic(a,b,c){var d,e=t(a)&&"$"in a;return b===!0?b=M:x(b)||(b=function(a,b){return t(a)||t(b)?!1:(a=Wc(""+a),b=Wc(""+b),-1!==a.indexOf(b))}),d=function(d){return e&&!t(d)?jc(d,a.$,b,!1):jc(d,a,b,c)}}function jc(a,b,c,d,e){var f=null!==a?typeof a:"null",g=null!==b?typeof b:"null";if("string"===g&&"!"===b.charAt(0))return!jc(a,b.substring(1),c,d);if(ld(a))return a.some(function(a){return jc(a,b,c,d)});switch(f){case"object":var h;if(d){for(h in a)if("$"!==h.charAt(0)&&jc(a[h],b,c,!0))return!0;return e?!1:jc(a,b,c,!1)}if("object"===g){for(h in b){var i=b[h];if(!x(i)&&!r(i)){var j="$"===h,k=j?a:a[h];if(!jc(k,i,c,j,j))return!1}}return!0}return c(a,b);case"function":return!1;default:return c(a,b)}}function kc(a){var b=a.NUMBER_FORMATS;return function(a,c,d){return r(c)&&(c=b.CURRENCY_SYM),r(d)&&(d=b.PATTERNS[1].maxFrac),null==a?a:mc(a,b.PATTERNS[1],b.GROUP_SEP,b.DECIMAL_SEP,d).replace(/\u00A4/g,c)}}function lc(a){var b=a.NUMBER_FORMATS;return function(a,c){return null==a?a:mc(a,b.PATTERNS[0],b.GROUP_SEP,b.DECIMAL_SEP,c)}}function mc(a,b,c,d,e){if(!isFinite(a)||t(a))return"";var f=0>a;a=Math.abs(a);var g=a+"",h="",i=[],j=!1;if(-1!==g.indexOf("e")){var k=g.match(/([\d\.]+)e(-?)(\d+)/);k&&"-"==k[2]&&k[3]>e+1?a=0:(h=g,j=!0)}if(j)e>0&&1>a&&(h=a.toFixed(e),a=parseFloat(h));else{var l=(g.split(xe)[1]||"").length;r(e)&&(e=Math.min(Math.max(b.minFrac,l),b.maxFrac)),a=+(Math.round(+(a.toString()+"e"+e)).toString()+"e"+-e);var m=(""+a).split(xe),n=m[0];m=m[1]||"";var o,p=0,q=b.lgSize,s=b.gSize;if(n.length>=q+s)for(p=n.length-q,o=0;p>o;o++)(p-o)%s===0&&0!==o&&(h+=c),h+=n.charAt(o);for(o=p;o<n.length;o++)(n.length-o)%q===0&&0!==o&&(h+=c),h+=n.charAt(o);for(;m.length<e;)m+="0";e&&"0"!==e&&(h+=d+m.substr(0,e))}return 0===a&&(f=!1),i.push(f?b.negPre:b.posPre,h,f?b.negSuf:b.posSuf),i.join("")}function nc(a,b,c){var d="";for(0>a&&(d="-",a=-a),a=""+a;a.length<b;)a="0"+a;return c&&(a=a.substr(a.length-b)),d+a}function oc(a,b,c,d){return c=c||0,function(e){var f=e["get"+a]();return(c>0||f>-c)&&(f+=c),0===f&&-12==c&&(f=12),nc(f,b,d)}}function pc(a,b){return function(c,d){var e=c["get"+a](),f=Yc(b?"SHORT"+a:a);return d[f][e]}}function qc(a){var b=-1*a.getTimezoneOffset(),c=b>=0?"+":"";return c+=nc(Math[b>0?"floor":"ceil"](b/60),2)+nc(Math.abs(b%60),2)}function rc(a){var b=new Date(a,0,1).getDay();return new Date(a,0,(4>=b?5:12)-b)}function sc(a){return new Date(a.getFullYear(),a.getMonth(),a.getDate()+(4-a.getDay()))}function tc(a){return function(b){var c=rc(b.getFullYear()),d=sc(b),e=+d-+c,f=1+Math.round(e/6048e5);return nc(f,a)}}function uc(a,b){return a.getHours()<12?b.AMPMS[0]:b.AMPMS[1]}function vc(a,b){return a.getFullYear()<=0?b.ERAS[0]:b.ERAS[1]}function wc(a,b){return a.getFullYear()<=0?b.ERANAMES[0]:b.ERANAMES[1]}function xc(a){function b(a){var b;if(b=a.match(c)){var d=new Date(0),e=0,f=0,g=b[8]?d.setUTCFullYear:d.setFullYear,h=b[8]?d.setUTCHours:d.setHours;b[9]&&(e=m(b[9]+b[10]),f=m(b[9]+b[11])),g.call(d,m(b[1]),m(b[2])-1,m(b[3]));var i=m(b[4]||0)-e,j=m(b[5]||0)-f,k=m(b[6]||0),l=Math.round(1e3*parseFloat("0."+(b[7]||0)));return h.call(d,i,j,k,l),d}return a}var c=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/;return function(c,d,e){var g,h,i="",j=[];if(d=d||"mediumDate",d=a.DATETIME_FORMATS[d]||d,u(c)&&(c=Ae.test(c)?m(c):b(c)),v(c)&&(c=new Date(c)),!w(c))return c;for(;d;)h=ze.exec(d),h?(j=N(j,h,1),d=j.pop()):(j.push(d),d=null);return e&&"UTC"===e&&(c=new Date(c.getTime()),c.setMinutes(c.getMinutes()+c.getTimezoneOffset())),f(j,function(b){g=ye[b],i+=g?g(c,a.DATETIME_FORMATS):b.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),i}}function yc(){return function(a,b){return r(b)&&(b=2),R(a,b)}}function zc(){return function(a,b){return v(a)&&(a=a.toString()),ld(a)||u(a)?(b=Math.abs(Number(b))===1/0?Number(b):m(b),b?b>0?a.slice(0,b):a.slice(b):u(a)?"":[]):a}}function Ac(a){return function(b,c,d){function f(a,b){for(var d=0;d<c.length;d++){var e=c[d](a,b);if(0!==e)return e}return 0}function g(a,b){return b?function(b,c){return a(c,b)}:a}function h(a){switch(typeof a){case"number":case"boolean":case"string":return!0;default:return!1}}function i(a){return null===a?"null":"function"==typeof a.valueOf&&(a=a.valueOf(),h(a))?a:"function"==typeof a.toString&&(a=a.toString(),h(a))?a:""}function j(a,b){var c=typeof a,d=typeof b;return c===d&&"object"===c&&(a=i(a),b=i(b)),c===d?("string"===c&&(a=a.toLowerCase(),b=b.toLowerCase()),a===b?0:b>a?-1:1):d>c?-1:1}return e(b)?(c=ld(c)?c:[c],0===c.length&&(c=["+"]),c=c.map(function(b){var c=!1,d=b||p;if(u(b)){if(("+"==b.charAt(0)||"-"==b.charAt(0))&&(c="-"==b.charAt(0),b=b.substring(1)),""===b)return g(j,c);if(d=a(b),d.constant){var e=d();return g(function(a,b){return j(a[e],b[e])},c)}}return g(function(a,b){return j(d(a),d(b))},c)}),dd.call(b).sort(g(f,d))):b}}function Bc(a){return x(a)&&(a={link:a}),a.restrict=a.restrict||"AC",q(a)}function Cc(a,b){a.$name=b}function Dc(a,b,d,e,g){var h=this,i=[],j=h.$$parentForm=a.parent().controller("form")||Fe;h.$error={},h.$$success={},h.$pending=c,h.$name=g(b.name||b.ngForm||"")(d),h.$dirty=!1,h.$pristine=!0,h.$valid=!0,h.$invalid=!1,h.$submitted=!1,j.$addControl(h),h.$rollbackViewValue=function(){f(i,function(a){a.$rollbackViewValue()})},h.$commitViewValue=function(){f(i,function(a){a.$commitViewValue()})},h.$addControl=function(a){ga(a.$name,"input"),i.push(a),a.$name&&(h[a.$name]=a)},h.$$renameControl=function(a,b){var c=a.$name;h[c]===a&&delete h[c],h[b]=a,a.$name=b},h.$removeControl=function(a){a.$name&&h[a.$name]===a&&delete h[a.$name],f(h.$pending,function(b,c){h.$setValidity(c,null,a)}),f(h.$error,function(b,c){h.$setValidity(c,null,a)}),f(h.$$success,function(b,c){h.$setValidity(c,null,a)}),J(i,a)},Sc({ctrl:this,$element:a,set:function(a,b,c){var d=a[b];if(d){var e=d.indexOf(c);-1===e&&d.push(c)}else a[b]=[c]},unset:function(a,b,c){var d=a[b];d&&(J(d,c),0===d.length&&delete a[b])},parentForm:j,$animate:e}),h.$setDirty=function(){e.removeClass(a,of),e.addClass(a,pf),h.$dirty=!0,h.$pristine=!1,j.$setDirty()},h.$setPristine=function(){e.setClass(a,of,pf+" "+Ge),h.$dirty=!1,h.$pristine=!0,h.$submitted=!1,f(i,function(a){a.$setPristine()})},h.$setUntouched=function(){f(i,function(a){a.$setUntouched()})},h.$setSubmitted=function(){e.addClass(a,Ge),h.$submitted=!0,j.$setSubmitted()}}function Ec(a){a.$formatters.push(function(b){return a.$isEmpty(b)?b:b.toString()})}function Fc(a,b,c,d,e,f){Gc(a,b,c,d,e,f),Ec(d)}function Gc(a,b,c,d,e,f){var g=Wc(b[0].type);if(!e.android){var h=!1;b.on("compositionstart",function(a){h=!0}),b.on("compositionend",function(){h=!1,i()})}var i=function(a){if(j&&(f.defer.cancel(j),j=null),!h){var e=b.val(),i=a&&a.type;"password"===g||c.ngTrim&&"false"===c.ngTrim||(e=md(e)),(d.$viewValue!==e||""===e&&d.$$hasNativeValidators)&&d.$setViewValue(e,i)}};if(e.hasEvent("input"))b.on("input",i);else{var j,k=function(a,b,c){j||(j=f.defer(function(){j=null,b&&b.value===c||i(a)}))};b.on("keydown",function(a){var b=a.keyCode;91===b||b>15&&19>b||b>=37&&40>=b||k(a,this,this.value)}),e.hasEvent("paste")&&b.on("paste cut",k)}b.on("change",i),d.$render=function(){b.val(d.$isEmpty(d.$viewValue)?"":d.$viewValue)}}function Hc(a,b){if(w(a))return a;if(u(a)){Qe.lastIndex=0;var c=Qe.exec(a);if(c){var d=+c[1],e=+c[2],f=0,g=0,h=0,i=0,j=rc(d),k=7*(e-1);return b&&(f=b.getHours(),g=b.getMinutes(),h=b.getSeconds(),i=b.getMilliseconds()),new Date(d,0,j.getDate()+k,f,g,h,i)}}return NaN}function Ic(a,b){return function(c,d){var e,g;if(w(c))return c;if(u(c)){if('"'==c.charAt(0)&&'"'==c.charAt(c.length-1)&&(c=c.substring(1,c.length-1)),Ke.test(c))return new Date(c);if(a.lastIndex=0,e=a.exec(c))return e.shift(),g=d?{yyyy:d.getFullYear(),MM:d.getMonth()+1,dd:d.getDate(),HH:d.getHours(),mm:d.getMinutes(),ss:d.getSeconds(),sss:d.getMilliseconds()/1e3}:{yyyy:1970,MM:1,dd:1,HH:0,mm:0,ss:0,sss:0},f(e,function(a,c){c<b.length&&(g[b[c]]=+a)}),new Date(g.yyyy,g.MM-1,g.dd,g.HH,g.mm,g.ss||0,1e3*g.sss||0)}return NaN}}function Jc(a,b,d,e){return function(f,g,h,i,j,k,l){function m(a){return a&&!(a.getTime&&a.getTime()!==a.getTime())}function n(a){return s(a)?w(a)?a:d(a):c}Kc(f,g,h,i),Gc(f,g,h,i,j,k);var o,p=i&&i.$options&&i.$options.timezone;if(i.$$parserName=a,i.$parsers.push(function(a){if(i.$isEmpty(a))return null;if(b.test(a)){var e=d(a,o);return"UTC"===p&&e.setMinutes(e.getMinutes()-e.getTimezoneOffset()),e}return c}),i.$formatters.push(function(a){if(a&&!w(a))throw tf("datefmt","Expected `{0}` to be a date",a);if(m(a)){if(o=a,o&&"UTC"===p){var b=6e4*o.getTimezoneOffset();o=new Date(o.getTime()+b)}return l("date")(a,e,p)}return o=null,""}),s(h.min)||h.ngMin){var q;i.$validators.min=function(a){return!m(a)||r(q)||d(a)>=q},h.$observe("min",function(a){q=n(a),i.$validate()})}if(s(h.max)||h.ngMax){var t;i.$validators.max=function(a){return!m(a)||r(t)||d(a)<=t},h.$observe("max",function(a){t=n(a),i.$validate()})}}}function Kc(a,b,d,e){var f=b[0],g=e.$$hasNativeValidators=t(f.validity);g&&e.$parsers.push(function(a){var d=b.prop(Vc)||{};return d.badInput&&!d.typeMismatch?c:a})}function Lc(a,b,d,e,f,g){if(Kc(a,b,d,e),Gc(a,b,d,e,f,g),e.$$parserName="number",e.$parsers.push(function(a){return e.$isEmpty(a)?null:Ne.test(a)?parseFloat(a):c}),e.$formatters.push(function(a){if(!e.$isEmpty(a)){if(!v(a))throw tf("numfmt","Expected `{0}` to be a number",a);a=a.toString()}return a}),s(d.min)||d.ngMin){var h;e.$validators.min=function(a){return e.$isEmpty(a)||r(h)||a>=h},d.$observe("min",function(a){s(a)&&!v(a)&&(a=parseFloat(a,10)),h=v(a)&&!isNaN(a)?a:c,e.$validate()})}if(s(d.max)||d.ngMax){var i;e.$validators.max=function(a){return e.$isEmpty(a)||r(i)||i>=a},d.$observe("max",function(a){s(a)&&!v(a)&&(a=parseFloat(a,10)),i=v(a)&&!isNaN(a)?a:c,e.$validate()})}}function Mc(a,b,c,d,e,f){Gc(a,b,c,d,e,f),Ec(d),d.$$parserName="url",d.$validators.url=function(a,b){var c=a||b;return d.$isEmpty(c)||Le.test(c)}}function Nc(a,b,c,d,e,f){Gc(a,b,c,d,e,f),Ec(d),d.$$parserName="email",d.$validators.email=function(a,b){var c=a||b;return d.$isEmpty(c)||Me.test(c)}}function Oc(a,b,c,d){r(c.name)&&b.attr("name",j());var e=function(a){b[0].checked&&d.$setViewValue(c.value,a&&a.type)};b.on("click",e),d.$render=function(){var a=c.value;b[0].checked=a==d.$viewValue},c.$observe("value",d.$render)}function Pc(a,b,c,e,f){var g;if(s(e)){if(g=a(e),!g.constant)throw d("ngModel")("constexpr","Expected constant expression for `{0}`, but saw `{1}`.",c,e);return g(b)}return f}function Qc(a,b,c,d,e,f,g,h){var i=Pc(h,a,"ngTrueValue",c.ngTrueValue,!0),j=Pc(h,a,"ngFalseValue",c.ngFalseValue,!1),k=function(a){d.$setViewValue(b[0].checked,a&&a.type)};b.on("click",k),d.$render=function(){b[0].checked=d.$viewValue},d.$isEmpty=function(a){return a===!1},d.$formatters.push(function(a){return M(a,i)}),d.$parsers.push(function(a){return a?i:j})}function Rc(a,b){return a="ngClass"+a,["$animate",function(c){function d(a,b){var c=[];a:for(var d=0;d<a.length;d++){for(var e=a[d],f=0;f<b.length;f++)if(e==b[f])continue a;c.push(e)}return c}function e(a){if(ld(a))return a;if(u(a))return a.split(" ");if(t(a)){var b=[];return f(a,function(a,c){a&&(b=b.concat(c.split(" ")))}),b}return a}return{restrict:"AC",link:function(g,h,i){function j(a){var b=l(a,1);i.$addClass(b)}function k(a){var b=l(a,-1);i.$removeClass(b)}function l(a,b){var c=h.data("$classCounts")||{},d=[];return f(a,function(a){(b>0||c[a])&&(c[a]=(c[a]||0)+b,c[a]===+(b>0)&&d.push(a))}),h.data("$classCounts",c),d.join(" ")}function m(a,b){var e=d(b,a),f=d(a,b);e=l(e,1),f=l(f,-1),e&&e.length&&c.addClass(h,e),f&&f.length&&c.removeClass(h,f)}function n(a){if(b===!0||g.$index%2===b){var c=e(a||[]);if(o){if(!M(a,o)){var d=e(o);m(d,c)}}else j(c)}o=L(a)}var o;g.$watch(i[a],n,!0),i.$observe("class",function(b){n(g.$eval(i[a]))}),"ngClass"!==a&&g.$watch("$index",function(c,d){var f=1&c;if(f!==(1&d)){var h=e(g.$eval(i[a]));f===b?j(h):k(h)}})}}}]}function Sc(a){function b(a,b,i){b===c?d("$pending",a,i):e("$pending",a,i),E(b)?b?(l(h.$error,a,i),k(h.$$success,a,i)):(k(h.$error,a,i),l(h.$$success,a,i)):(l(h.$error,a,i),l(h.$$success,a,i)),h.$pending?(f(sf,!0),h.$valid=h.$invalid=c,g("",null)):(f(sf,!1),h.$valid=Tc(h.$error),
h.$invalid=!h.$valid,g("",h.$valid));var j;j=h.$pending&&h.$pending[a]?c:h.$error[a]?!1:h.$$success[a]?!0:null,g(a,j),m.$setValidity(a,j,h)}function d(a,b,c){h[a]||(h[a]={}),k(h[a],b,c)}function e(a,b,d){h[a]&&l(h[a],b,d),Tc(h[a])&&(h[a]=c)}function f(a,b){b&&!j[a]?(n.addClass(i,a),j[a]=!0):!b&&j[a]&&(n.removeClass(i,a),j[a]=!1)}function g(a,b){a=a?"-"+ca(a,"-"):"",f(mf+a,b===!0),f(nf+a,b===!1)}var h=a.ctrl,i=a.$element,j={},k=a.set,l=a.unset,m=a.parentForm,n=a.$animate;j[nf]=!(j[mf]=i.hasClass(mf)),h.$setValidity=b}function Tc(a){if(a)for(var b in a)return!1;return!0}var Uc=/^\/(.+)\/([a-z]*)$/,Vc="validity",Wc=function(a){return u(a)?a.toLowerCase():a},Xc=Object.prototype.hasOwnProperty,Yc=function(a){return u(a)?a.toUpperCase():a},Zc=function(a){return u(a)?a.replace(/[A-Z]/g,function(a){return String.fromCharCode(32|a.charCodeAt(0))}):a},$c=function(a){return u(a)?a.replace(/[a-z]/g,function(a){return String.fromCharCode(-33&a.charCodeAt(0))}):a};"i"!=="I".toLowerCase()&&(Wc=Zc,Yc=$c);var _c,ad,bd,cd,dd=[].slice,ed=[].splice,fd=[].push,gd=Object.prototype.toString,hd=d("ng"),id=a.angular||(a.angular={}),jd=0;_c=b.documentMode,o.$inject=[],p.$inject=[];var kd,ld=Array.isArray,md=function(a){return u(a)?a.trim():a},nd=function(a){return a.replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08")},od=function(){if(s(od.isActive_))return od.isActive_;var a=!(!b.querySelector("[ng-csp]")&&!b.querySelector("[data-ng-csp]"));if(!a)try{new Function("")}catch(c){a=!0}return od.isActive_=a},pd=["ng-","data-ng-","ng:","x-ng-"],qd=/[A-Z]/g,rd=!1,sd=1,td=3,ud=8,vd=9,wd=11,xd={full:"1.3.15",major:1,minor:3,dot:15,codeName:"locality-filtration"};ua.expando="ng339";var yd=ua.cache={},zd=1,Ad=function(a,b,c){a.addEventListener(b,c,!1)},Bd=function(a,b,c){a.removeEventListener(b,c,!1)};ua._data=function(a){return this.cache[a[this.expando]]||{}};var Cd=/([\:\-\_]+(.))/g,Dd=/^moz([A-Z])/,Ed={mouseleave:"mouseout",mouseenter:"mouseover"},Fd=d("jqLite"),Gd=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,Hd=/<|&#?\w+;/,Id=/<([\w:]+)/,Jd=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,Kd={option:[1,'<select multiple="multiple">',"</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Kd.optgroup=Kd.option,Kd.tbody=Kd.tfoot=Kd.colgroup=Kd.caption=Kd.thead,Kd.th=Kd.td;var Ld=ua.prototype={ready:function(c){function d(){e||(e=!0,c())}var e=!1;"complete"===b.readyState?setTimeout(d):(this.on("DOMContentLoaded",d),ua(a).on("load",d))},toString:function(){var a=[];return f(this,function(b){a.push(""+b)}),"["+a.join(", ")+"]"},eq:function(a){return ad(a>=0?this[a]:this[this.length+a])},length:0,push:fd,sort:[].sort,splice:[].splice},Md={};f("multiple,selected,checked,disabled,readOnly,required,open".split(","),function(a){Md[Wc(a)]=a});var Nd={};f("input,select,option,textarea,button,form,details".split(","),function(a){Nd[a]=!0});var Od={ngMinlength:"minlength",ngMaxlength:"maxlength",ngMin:"min",ngMax:"max",ngPattern:"pattern"};f({data:Aa,removeData:ya},function(a,b){ua[b]=a}),f({data:Aa,inheritedData:Ga,scope:function(a){return ad.data(a,"$scope")||Ga(a.parentNode||a,["$isolateScope","$scope"])},isolateScope:function(a){return ad.data(a,"$isolateScope")||ad.data(a,"$isolateScopeNoTemplate")},controller:Fa,injector:function(a){return Ga(a,"$injector")},removeAttr:function(a,b){a.removeAttribute(b)},hasClass:Ba,css:function(a,b,c){return b=pa(b),s(c)?void(a.style[b]=c):a.style[b]},attr:function(a,b,d){var e=Wc(b);if(Md[e]){if(!s(d))return a[b]||(a.attributes.getNamedItem(b)||o).specified?e:c;d?(a[b]=!0,a.setAttribute(b,e)):(a[b]=!1,a.removeAttribute(e))}else if(s(d))a.setAttribute(b,d);else if(a.getAttribute){var f=a.getAttribute(b,2);return null===f?c:f}},prop:function(a,b,c){return s(c)?void(a[b]=c):a[b]},text:function(){function a(a,b){if(r(b)){var c=a.nodeType;return c===sd||c===td?a.textContent:""}a.textContent=b}return a.$dv="",a}(),val:function(a,b){if(r(b)){if(a.multiple&&"select"===I(a)){var c=[];return f(a.options,function(a){a.selected&&c.push(a.value||a.text)}),0===c.length?null:c}return a.value}a.value=b},html:function(a,b){return r(b)?a.innerHTML:(wa(a,!0),void(a.innerHTML=b))},empty:Ha},function(a,b){ua.prototype[b]=function(b,d){var e,f,g=this.length;if(a!==Ha&&(2==a.length&&a!==Ba&&a!==Fa?b:d)===c){if(t(b)){for(e=0;g>e;e++)if(a===Aa)a(this[e],b);else for(f in b)a(this[e],f,b[f]);return this}for(var h=a.$dv,i=h===c?Math.min(g,1):g,j=0;i>j;j++){var k=a(this[j],b,d);h=h?h+k:k}return h}for(e=0;g>e;e++)a(this[e],b,d);return this}}),f({removeData:ya,on:function Uf(a,b,c,d){if(s(d))throw Fd("onargs","jqLite#on() does not support the `selector` or `eventData` parameters");if(ra(a)){var e=za(a,!0),f=e.events,g=e.handle;g||(g=e.handle=Ma(a,f));for(var h=b.indexOf(" ")>=0?b.split(" "):[b],i=h.length;i--;){b=h[i];var j=f[b];j||(f[b]=[],"mouseenter"===b||"mouseleave"===b?Uf(a,Ed[b],function(a){var c=this,d=a.relatedTarget;(!d||d!==c&&!c.contains(d))&&g(a,b)}):"$destroy"!==b&&Ad(a,b,g),j=f[b]),j.push(c)}}},off:xa,one:function(a,b,c){a=ad(a),a.on(b,function d(){a.off(b,c),a.off(b,d)}),a.on(b,c)},replaceWith:function(a,b){var c,d=a.parentNode;wa(a),f(new ua(b),function(b){c?d.insertBefore(b,c.nextSibling):d.replaceChild(b,a),c=b})},children:function(a){var b=[];return f(a.childNodes,function(a){a.nodeType===sd&&b.push(a)}),b},contents:function(a){return a.contentDocument||a.childNodes||[]},append:function(a,b){var c=a.nodeType;if(c===sd||c===wd){b=new ua(b);for(var d=0,e=b.length;e>d;d++){var f=b[d];a.appendChild(f)}}},prepend:function(a,b){if(a.nodeType===sd){var c=a.firstChild;f(new ua(b),function(b){a.insertBefore(b,c)})}},wrap:function(a,b){b=ad(b).eq(0).clone()[0];var c=a.parentNode;c&&c.replaceChild(b,a),b.appendChild(a)},remove:Ia,detach:function(a){Ia(a,!0)},after:function(a,b){var c=a,d=a.parentNode;b=new ua(b);for(var e=0,f=b.length;f>e;e++){var g=b[e];d.insertBefore(g,c.nextSibling),c=g}},addClass:Da,removeClass:Ca,toggleClass:function(a,b,c){b&&f(b.split(" "),function(b){var d=c;r(d)&&(d=!Ba(a,b)),(d?Da:Ca)(a,b)})},parent:function(a){var b=a.parentNode;return b&&b.nodeType!==wd?b:null},next:function(a){return a.nextElementSibling},find:function(a,b){return a.getElementsByTagName?a.getElementsByTagName(b):[]},clone:va,triggerHandler:function(a,b,c){var d,e,g,h=b.type||b,i=za(a),j=i&&i.events,k=j&&j[h];k&&(d={preventDefault:function(){this.defaultPrevented=!0},isDefaultPrevented:function(){return this.defaultPrevented===!0},stopImmediatePropagation:function(){this.immediatePropagationStopped=!0},isImmediatePropagationStopped:function(){return this.immediatePropagationStopped===!0},stopPropagation:o,type:h,target:a},b.type&&(d=l(d,b)),e=L(k),g=c?[d].concat(c):[d],f(e,function(b){d.isImmediatePropagationStopped()||b.apply(a,g)}))}},function(a,b){ua.prototype[b]=function(b,c,d){for(var e,f=0,g=this.length;g>f;f++)r(e)?(e=a(this[f],b,c,d),s(e)&&(e=ad(e))):Ea(e,a(this[f],b,c,d));return s(e)?e:this},ua.prototype.bind=ua.prototype.on,ua.prototype.unbind=ua.prototype.off}),Pa.prototype={put:function(a,b){this[Oa(a,this.nextUid)]=b},get:function(a){return this[Oa(a,this.nextUid)]},remove:function(a){var b=this[a=Oa(a,this.nextUid)];return delete this[a],b}};var Pd=/^function\s*[^\(]*\(\s*([^\)]*)\)/m,Qd=/,/,Rd=/^\s*(_?)(\S+?)\1\s*$/,Sd=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/gm,Td=d("$injector");Sa.$$annotate=Ra;var Ud=d("$animate"),Vd=["$provide",function(a){this.$$selectors={},this.register=function(b,c){var d=b+"-animation";if(b&&"."!=b.charAt(0))throw Ud("notcsel","Expecting class selector starting with '.' got '{0}'.",b);this.$$selectors[b.substr(1)]=d,a.factory(d,c)},this.classNameFilter=function(a){return 1===arguments.length&&(this.$$classNameFilter=a instanceof RegExp?a:null),this.$$classNameFilter},this.$get=["$$q","$$asyncCallback","$rootScope",function(a,b,c){function d(b){var d,e=a.defer();return e.promise.$$cancelFn=function(){d&&d()},c.$$postDigest(function(){d=b(function(){e.resolve()})}),e.promise}function e(a,b){var c=[],d=[],e=ja();return f((a.attr("class")||"").split(/\s+/),function(a){e[a]=!0}),f(b,function(a,b){var f=e[b];a===!1&&f?d.push(b):a!==!0||f||c.push(b)}),c.length+d.length>0&&[c.length?c:null,d.length?d:null]}function g(a,b,c){for(var d=0,e=b.length;e>d;++d){var f=b[d];a[f]=c}}function h(){return j||(j=a.defer(),b(function(){j.resolve(),j=null})),j.promise}function i(a,b){if(id.isObject(b)){var c=l(b.from||{},b.to||{});a.css(c)}}var j;return{animate:function(a,b,c){return i(a,{from:b,to:c}),h()},enter:function(a,b,c,d){return i(a,d),c?c.after(a):b.prepend(a),h()},leave:function(a,b){return i(a,b),a.remove(),h()},move:function(a,b,c,d){return this.enter(a,b,c,d)},addClass:function(a,b,c){return this.setClass(a,b,[],c)},$$addClassImmediately:function(a,b,c){return a=ad(a),b=u(b)?b:ld(b)?b.join(" "):"",f(a,function(a){Da(a,b)}),i(a,c),h()},removeClass:function(a,b,c){return this.setClass(a,[],b,c)},$$removeClassImmediately:function(a,b,c){return a=ad(a),b=u(b)?b:ld(b)?b.join(" "):"",f(a,function(a){Ca(a,b)}),i(a,c),h()},setClass:function(a,b,c,f){var h=this,i="$$animateClasses",j=!1;a=ad(a);var k=a.data(i);k?f&&k.options&&(k.options=id.extend(k.options||{},f)):(k={classes:{},options:f},j=!0);var l=k.classes;return b=ld(b)?b:b.split(" "),c=ld(c)?c:c.split(" "),g(l,b,!0),g(l,c,!1),j&&(k.promise=d(function(b){var c=a.data(i);if(a.removeData(i),c){var d=e(a,c.classes);d&&h.$$setClassImmediately(a,d[0],d[1],c.options)}b()}),a.data(i,k)),k.promise},$$setClassImmediately:function(a,b,c,d){return b&&this.$$addClassImmediately(a,b),c&&this.$$removeClassImmediately(a,c),i(a,d),h()},enabled:o,cancel:o}}]}],Wd=d("$compile");Za.$inject=["$provide","$$sanitizeUriProvider"];var Xd=/^((?:x|data)[\:\-_])/i,Yd=d("$controller"),Zd="application/json",$d={"Content-Type":Zd+";charset=utf-8"},_d=/^\[|^\{(?!\{)/,ae={"[":/]$/,"{":/}$/},be=/^\)\]\}',?\n/,ce=d("$interpolate"),de=/^([^\?#]*)(\?([^#]*))?(#(.*))?$/,ee={http:80,https:443,ftp:21},fe=d("$location"),ge={$$html5:!1,$$replace:!1,absUrl:Cb("$$absUrl"),url:function(a){if(r(a))return this.$$url;var b=de.exec(a);return(b[1]||""===a)&&this.path(decodeURIComponent(b[1])),(b[2]||b[1]||""===a)&&this.search(b[3]||""),this.hash(b[5]||""),this},protocol:Cb("$$protocol"),host:Cb("$$host"),port:Cb("$$port"),path:Db("$$path",function(a){return a=null!==a?a.toString():"","/"==a.charAt(0)?a:"/"+a}),search:function(a,b){switch(arguments.length){case 0:return this.$$search;case 1:if(u(a)||v(a))a=a.toString(),this.$$search=V(a);else{if(!t(a))throw fe("isrcharg","The first argument of the `$location#search()` call must be a string or an object.");a=K(a,{}),f(a,function(b,c){null==b&&delete a[c]}),this.$$search=a}break;default:r(b)||null===b?delete this.$$search[a]:this.$$search[a]=b}return this.$$compose(),this},hash:Db("$$hash",function(a){return null!==a?a.toString():""}),replace:function(){return this.$$replace=!0,this}};f([Bb,Ab,zb],function(a){a.prototype=Object.create(ge),a.prototype.state=function(b){if(!arguments.length)return this.$$state;if(a!==zb||!this.$$html5)throw fe("nostate","History API state support is available only in HTML5 mode and only in browsers supporting HTML5 History API");return this.$$state=r(b)?null:b,this}});var he=d("$parse"),ie=Function.prototype.call,je=Function.prototype.apply,ke=Function.prototype.bind,le=ja();f({"null":function(){return null},"true":function(){return!0},"false":function(){return!1},undefined:function(){}},function(a,b){a.constant=a.literal=a.sharedGetter=!0,le[b]=a}),le["this"]=function(a){return a},le["this"].sharedGetter=!0;var me=l(ja(),{"+":function(a,b,d,e){return d=d(a,b),e=e(a,b),s(d)?s(e)?d+e:d:s(e)?e:c},"-":function(a,b,c,d){return c=c(a,b),d=d(a,b),(s(c)?c:0)-(s(d)?d:0)},"*":function(a,b,c,d){return c(a,b)*d(a,b)},"/":function(a,b,c,d){return c(a,b)/d(a,b)},"%":function(a,b,c,d){return c(a,b)%d(a,b)},"===":function(a,b,c,d){return c(a,b)===d(a,b)},"!==":function(a,b,c,d){return c(a,b)!==d(a,b)},"==":function(a,b,c,d){return c(a,b)==d(a,b)},"!=":function(a,b,c,d){return c(a,b)!=d(a,b)},"<":function(a,b,c,d){return c(a,b)<d(a,b)},">":function(a,b,c,d){return c(a,b)>d(a,b)},"<=":function(a,b,c,d){return c(a,b)<=d(a,b)},">=":function(a,b,c,d){return c(a,b)>=d(a,b)},"&&":function(a,b,c,d){return c(a,b)&&d(a,b)},"||":function(a,b,c,d){return c(a,b)||d(a,b)},"!":function(a,b,c){return!c(a,b)},"=":!0,"|":!0}),ne={n:"\n",f:"\f",r:"\r",t:"	",v:"\x0B","'":"'",'"':'"'},oe=function(a){this.options=a};oe.prototype={constructor:oe,lex:function(a){for(this.text=a,this.index=0,this.tokens=[];this.index<this.text.length;){var b=this.text.charAt(this.index);if('"'===b||"'"===b)this.readString(b);else if(this.isNumber(b)||"."===b&&this.isNumber(this.peek()))this.readNumber();else if(this.isIdent(b))this.readIdent();else if(this.is(b,"(){}[].,;:?"))this.tokens.push({index:this.index,text:b}),this.index++;else if(this.isWhitespace(b))this.index++;else{var c=b+this.peek(),d=c+this.peek(2),e=me[b],f=me[c],g=me[d];if(e||f||g){var h=g?d:f?c:b;this.tokens.push({index:this.index,text:h,operator:!0}),this.index+=h.length}else this.throwError("Unexpected next character ",this.index,this.index+1)}}return this.tokens},is:function(a,b){return-1!==b.indexOf(a)},peek:function(a){var b=a||1;return this.index+b<this.text.length?this.text.charAt(this.index+b):!1},isNumber:function(a){return a>="0"&&"9">=a&&"string"==typeof a},isWhitespace:function(a){return" "===a||"\r"===a||"	"===a||"\n"===a||"\x0B"===a||" "===a},isIdent:function(a){return a>="a"&&"z">=a||a>="A"&&"Z">=a||"_"===a||"$"===a},isExpOperator:function(a){return"-"===a||"+"===a||this.isNumber(a)},throwError:function(a,b,c){c=c||this.index;var d=s(b)?"s "+b+"-"+this.index+" ["+this.text.substring(b,c)+"]":" "+c;throw he("lexerr","Lexer Error: {0} at column{1} in expression [{2}].",a,d,this.text)},readNumber:function(){for(var a="",b=this.index;this.index<this.text.length;){var c=Wc(this.text.charAt(this.index));if("."==c||this.isNumber(c))a+=c;else{var d=this.peek();if("e"==c&&this.isExpOperator(d))a+=c;else if(this.isExpOperator(c)&&d&&this.isNumber(d)&&"e"==a.charAt(a.length-1))a+=c;else{if(!this.isExpOperator(c)||d&&this.isNumber(d)||"e"!=a.charAt(a.length-1))break;this.throwError("Invalid exponent")}}this.index++}this.tokens.push({index:b,text:a,constant:!0,value:Number(a)})},readIdent:function(){for(var a=this.index;this.index<this.text.length;){var b=this.text.charAt(this.index);if(!this.isIdent(b)&&!this.isNumber(b))break;this.index++}this.tokens.push({index:a,text:this.text.slice(a,this.index),identifier:!0})},readString:function(a){var b=this.index;this.index++;for(var c="",d=a,e=!1;this.index<this.text.length;){var f=this.text.charAt(this.index);if(d+=f,e){if("u"===f){var g=this.text.substring(this.index+1,this.index+5);g.match(/[\da-f]{4}/i)||this.throwError("Invalid unicode escape [\\u"+g+"]"),this.index+=4,c+=String.fromCharCode(parseInt(g,16))}else{var h=ne[f];c+=h||f}e=!1}else if("\\"===f)e=!0;else{if(f===a)return this.index++,void this.tokens.push({index:b,text:d,constant:!0,value:c});c+=f}this.index++}this.throwError("Unterminated quote",b)}};var pe=function(a,b,c){this.lexer=a,this.$filter=b,this.options=c};pe.ZERO=l(function(){return 0},{sharedGetter:!0,constant:!0}),pe.prototype={constructor:pe,parse:function(a){this.text=a,this.tokens=this.lexer.lex(a);var b=this.statements();return 0!==this.tokens.length&&this.throwError("is an unexpected token",this.tokens[0]),b.literal=!!b.literal,b.constant=!!b.constant,b},primary:function(){var a;this.expect("(")?(a=this.filterChain(),this.consume(")")):this.expect("[")?a=this.arrayDeclaration():this.expect("{")?a=this.object():this.peek().identifier&&this.peek().text in le?a=le[this.consume().text]:this.peek().identifier?a=this.identifier():this.peek().constant?a=this.constant():this.throwError("not a primary expression",this.peek());for(var b,c;b=this.expect("(","[",".");)"("===b.text?(a=this.functionCall(a,c),c=null):"["===b.text?(c=a,a=this.objectIndex(a)):"."===b.text?(c=a,a=this.fieldAccess(a)):this.throwError("IMPOSSIBLE");return a},throwError:function(a,b){throw he("syntax","Syntax Error: Token '{0}' {1} at column {2} of the expression [{3}] starting at [{4}].",b.text,a,b.index+1,this.text,this.text.substring(b.index))},peekToken:function(){if(0===this.tokens.length)throw he("ueoe","Unexpected end of expression: {0}",this.text);return this.tokens[0]},peek:function(a,b,c,d){return this.peekAhead(0,a,b,c,d)},peekAhead:function(a,b,c,d,e){if(this.tokens.length>a){var f=this.tokens[a],g=f.text;if(g===b||g===c||g===d||g===e||!b&&!c&&!d&&!e)return f}return!1},expect:function(a,b,c,d){var e=this.peek(a,b,c,d);return e?(this.tokens.shift(),e):!1},consume:function(a){if(0===this.tokens.length)throw he("ueoe","Unexpected end of expression: {0}",this.text);var b=this.expect(a);return b||this.throwError("is unexpected, expecting ["+a+"]",this.peek()),b},unaryFn:function(a,b){var c=me[a];return l(function(a,d){return c(a,d,b)},{constant:b.constant,inputs:[b]})},binaryFn:function(a,b,c,d){var e=me[b];return l(function(b,d){return e(b,d,a,c)},{constant:a.constant&&c.constant,inputs:!d&&[a,c]})},identifier:function(){for(var a=this.consume().text;this.peek(".")&&this.peekAhead(1).identifier&&!this.peekAhead(2,"(");)a+=this.consume().text+this.consume().text;return Ob(a,this.options,this.text)},constant:function(){var a=this.consume().value;return l(function(){return a},{constant:!0,literal:!0})},statements:function(){for(var a=[];;)if(this.tokens.length>0&&!this.peek("}",")",";","]")&&a.push(this.filterChain()),!this.expect(";"))return 1===a.length?a[0]:function(b,c){for(var d,e=0,f=a.length;f>e;e++)d=a[e](b,c);return d}},filterChain:function(){for(var a,b=this.expression();a=this.expect("|");)b=this.filter(b);return b},filter:function(a){var b,d,e=this.$filter(this.consume().text);if(this.peek(":"))for(b=[],d=[];this.expect(":");)b.push(this.expression());var f=[a].concat(b||[]);return l(function(f,g){var h=a(f,g);if(d){d[0]=h;for(var i=b.length;i--;)d[i+1]=b[i](f,g);return e.apply(c,d)}return e(h)},{constant:!e.$stateful&&f.every(Jb),inputs:!e.$stateful&&f})},expression:function(){return this.assignment()},assignment:function(){var a,b,c=this.ternary();return(b=this.expect("="))?(c.assign||this.throwError("implies assignment but ["+this.text.substring(0,b.index)+"] can not be assigned to",b),a=this.ternary(),l(function(b,d){return c.assign(b,a(b,d),d)},{inputs:[c,a]})):c},ternary:function(){var a,b,c=this.logicalOR();if((b=this.expect("?"))&&(a=this.assignment(),this.consume(":"))){var d=this.assignment();return l(function(b,e){return c(b,e)?a(b,e):d(b,e)},{constant:c.constant&&a.constant&&d.constant})}return c},logicalOR:function(){for(var a,b=this.logicalAND();a=this.expect("||");)b=this.binaryFn(b,a.text,this.logicalAND(),!0);return b},logicalAND:function(){for(var a,b=this.equality();a=this.expect("&&");)b=this.binaryFn(b,a.text,this.equality(),!0);return b},equality:function(){for(var a,b=this.relational();a=this.expect("==","!=","===","!==");)b=this.binaryFn(b,a.text,this.relational());return b},relational:function(){for(var a,b=this.additive();a=this.expect("<",">","<=",">=");)b=this.binaryFn(b,a.text,this.additive());return b},additive:function(){for(var a,b=this.multiplicative();a=this.expect("+","-");)b=this.binaryFn(b,a.text,this.multiplicative());return b},multiplicative:function(){for(var a,b=this.unary();a=this.expect("*","/","%");)b=this.binaryFn(b,a.text,this.unary());return b},unary:function(){var a;return this.expect("+")?this.primary():(a=this.expect("-"))?this.binaryFn(pe.ZERO,a.text,this.unary()):(a=this.expect("!"))?this.unaryFn(a.text,this.unary()):this.primary()},fieldAccess:function(a){var b=this.identifier();return l(function(d,e,f){var g=f||a(d,e);return null==g?c:b(g)},{assign:function(c,d,e){var f=a(c,e);return f||a.assign(c,f={},e),b.assign(f,d)}})},objectIndex:function(a){var b=this.text,d=this.expression();return this.consume("]"),l(function(e,f){var g,h=a(e,f),i=d(e,f);return Gb(i,b),h?g=Hb(h[i],b):c},{assign:function(c,e,f){var g=Gb(d(c,f),b),h=Hb(a(c,f),b);return h||a.assign(c,h={},f),h[g]=e}})},functionCall:function(a,b){var d=[];if(")"!==this.peekToken().text)do d.push(this.expression());while(this.expect(","));this.consume(")");var e=this.text,f=d.length?[]:null;return function(g,h){var i=b?b(g,h):s(b)?c:g,j=a(g,h,i)||o;if(f)for(var k=d.length;k--;)f[k]=Hb(d[k](g,h),e);Hb(i,e),Ib(j,e);var l=j.apply?j.apply(i,f):j(f[0],f[1],f[2],f[3],f[4]);return f&&(f.length=0),Hb(l,e)}},arrayDeclaration:function(){var a=[];if("]"!==this.peekToken().text)do{if(this.peek("]"))break;a.push(this.expression())}while(this.expect(","));return this.consume("]"),l(function(b,c){for(var d=[],e=0,f=a.length;f>e;e++)d.push(a[e](b,c));return d},{literal:!0,constant:a.every(Jb),inputs:a})},object:function(){var a=[],b=[];if("}"!==this.peekToken().text)do{if(this.peek("}"))break;var c=this.consume();c.constant?a.push(c.value):c.identifier?a.push(c.text):this.throwError("invalid key",c),this.consume(":"),b.push(this.expression())}while(this.expect(","));return this.consume("}"),l(function(c,d){for(var e={},f=0,g=b.length;g>f;f++)e[a[f]]=b[f](c,d);return e},{literal:!0,constant:b.every(Jb),inputs:b})}};var qe=ja(),re=ja(),se=Object.prototype.valueOf,te=d("$sce"),ue={HTML:"html",CSS:"css",URL:"url",RESOURCE_URL:"resourceUrl",JS:"js"},Wd=d("$compile"),ve=b.createElement("a"),we=dc(a.location.href);gc.$inject=["$provide"],kc.$inject=["$locale"],lc.$inject=["$locale"];var xe=".",ye={yyyy:oc("FullYear",4),yy:oc("FullYear",2,0,!0),y:oc("FullYear",1),MMMM:pc("Month"),MMM:pc("Month",!0),MM:oc("Month",2,1),M:oc("Month",1,1),dd:oc("Date",2),d:oc("Date",1),HH:oc("Hours",2),H:oc("Hours",1),hh:oc("Hours",2,-12),h:oc("Hours",1,-12),mm:oc("Minutes",2),m:oc("Minutes",1),ss:oc("Seconds",2),s:oc("Seconds",1),sss:oc("Milliseconds",3),EEEE:pc("Day"),EEE:pc("Day",!0),a:uc,Z:qc,ww:tc(2),w:tc(1),G:vc,GG:vc,GGG:vc,GGGG:wc},ze=/((?:[^yMdHhmsaZEwG']+)|(?:'(?:[^']|'')*')|(?:E+|y+|M+|d+|H+|h+|m+|s+|a|Z|G+|w+))(.*)/,Ae=/^\-?\d+$/;xc.$inject=["$locale"];var Be=q(Wc),Ce=q(Yc);Ac.$inject=["$parse"];var De=q({restrict:"E",compile:function(a,b){return b.href||b.xlinkHref||b.name?void 0:function(a,b){if("a"===b[0].nodeName.toLowerCase()){var c="[object SVGAnimatedString]"===gd.call(b.prop("href"))?"xlink:href":"href";b.on("click",function(a){b.attr(c)||a.preventDefault()})}}}}),Ee={};f(Md,function(a,b){if("multiple"!=a){var c=$a("ng-"+b);Ee[c]=function(){return{restrict:"A",priority:100,link:function(a,d,e){a.$watch(e[c],function(a){e.$set(b,!!a)})}}}}}),f(Od,function(a,b){Ee[b]=function(){return{priority:100,link:function(a,c,d){if("ngPattern"===b&&"/"==d.ngPattern.charAt(0)){var e=d.ngPattern.match(Uc);if(e)return void d.$set("ngPattern",new RegExp(e[1],e[2]))}a.$watch(d[b],function(a){d.$set(b,a)})}}}}),f(["src","srcset","href"],function(a){var b=$a("ng-"+a);Ee[b]=function(){return{priority:99,link:function(c,d,e){var f=a,g=a;"href"===a&&"[object SVGAnimatedString]"===gd.call(d.prop("href"))&&(g="xlinkHref",e.$attr[g]="xlink:href",f=null),e.$observe(b,function(b){return b?(e.$set(g,b),void(_c&&f&&d.prop(f,e[g]))):void("href"===a&&e.$set(g,null))})}}}});var Fe={$addControl:o,$$renameControl:Cc,$removeControl:o,$setValidity:o,$setDirty:o,$setPristine:o,$setSubmitted:o},Ge="ng-submitted";Dc.$inject=["$element","$attrs","$scope","$animate","$interpolate"];var He=function(a){return["$timeout",function(b){var d={name:"form",restrict:a?"EAC":"E",controller:Dc,compile:function(d,e){d.addClass(of).addClass(mf);var f=e.name?"name":a&&e.ngForm?"ngForm":!1;return{pre:function(a,d,e,g){if(!("action"in e)){var h=function(b){a.$apply(function(){g.$commitViewValue(),g.$setSubmitted()}),b.preventDefault()};Ad(d[0],"submit",h),d.on("$destroy",function(){b(function(){Bd(d[0],"submit",h)},0,!1)})}var i=g.$$parentForm;f&&(Kb(a,null,g.$name,g,g.$name),e.$observe(f,function(b){g.$name!==b&&(Kb(a,null,g.$name,c,g.$name),i.$$renameControl(g,b),Kb(a,null,g.$name,g,g.$name))})),d.on("$destroy",function(){i.$removeControl(g),f&&Kb(a,null,e[f],c,g.$name),l(g,Fe)})}}}};return d}]},Ie=He(),Je=He(!0),Ke=/\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z)/,Le=/^(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?$/,Me=/^[a-z0-9!#$%&'*+\/=?^_`{|}~.-]+@[a-z0-9]([a-z0-9-]*[a-z0-9])?(\.[a-z0-9]([a-z0-9-]*[a-z0-9])?)*$/i,Ne=/^\s*(\-|\+)?(\d+|(\d*(\.\d*)))\s*$/,Oe=/^(\d{4})-(\d{2})-(\d{2})$/,Pe=/^(\d{4})-(\d\d)-(\d\d)T(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/,Qe=/^(\d{4})-W(\d\d)$/,Re=/^(\d{4})-(\d\d)$/,Se=/^(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/,Te={text:Fc,date:Jc("date",Oe,Ic(Oe,["yyyy","MM","dd"]),"yyyy-MM-dd"),"datetime-local":Jc("datetimelocal",Pe,Ic(Pe,["yyyy","MM","dd","HH","mm","ss","sss"]),"yyyy-MM-ddTHH:mm:ss.sss"),time:Jc("time",Se,Ic(Se,["HH","mm","ss","sss"]),"HH:mm:ss.sss"),week:Jc("week",Qe,Hc,"yyyy-Www"),month:Jc("month",Re,Ic(Re,["yyyy","MM"]),"yyyy-MM"),number:Lc,url:Mc,email:Nc,radio:Oc,checkbox:Qc,hidden:o,button:o,submit:o,reset:o,file:o},Ue=["$browser","$sniffer","$filter","$parse",function(a,b,c,d){return{restrict:"E",require:["?ngModel"],link:{pre:function(e,f,g,h){h[0]&&(Te[Wc(g.type)]||Te.text)(e,f,g,h[0],b,a,c,d)}}}}],Ve=/^(true|false|\d+)$/,We=function(){return{restrict:"A",priority:100,compile:function(a,b){return Ve.test(b.ngValue)?function(a,b,c){c.$set("value",a.$eval(c.ngValue))}:function(a,b,c){a.$watch(c.ngValue,function(a){c.$set("value",a)})}}}},Xe=["$compile",function(a){return{restrict:"AC",compile:function(b){return a.$$addBindingClass(b),function(b,d,e){a.$$addBindingInfo(d,e.ngBind),d=d[0],b.$watch(e.ngBind,function(a){d.textContent=a===c?"":a})}}}}],Ye=["$interpolate","$compile",function(a,b){return{compile:function(d){return b.$$addBindingClass(d),function(d,e,f){var g=a(e.attr(f.$attr.ngBindTemplate));b.$$addBindingInfo(e,g.expressions),e=e[0],f.$observe("ngBindTemplate",function(a){e.textContent=a===c?"":a})}}}}],Ze=["$sce","$parse","$compile",function(a,b,c){return{restrict:"A",compile:function(d,e){var f=b(e.ngBindHtml),g=b(e.ngBindHtml,function(a){return(a||"").toString()});return c.$$addBindingClass(d),function(b,d,e){c.$$addBindingInfo(d,e.ngBindHtml),b.$watch(g,function(){d.html(a.getTrustedHtml(f(b))||"")})}}}}],$e=q({restrict:"A",require:"ngModel",link:function(a,b,c,d){d.$viewChangeListeners.push(function(){a.$eval(c.ngChange)})}}),_e=Rc("",!0),af=Rc("Odd",0),bf=Rc("Even",1),cf=Bc({compile:function(a,b){b.$set("ngCloak",c),a.removeClass("ng-cloak")}}),df=[function(){return{restrict:"A",scope:!0,controller:"@",priority:500}}],ef={},ff={blur:!0,focus:!0};f("click dblclick mousedown mouseup mouseover mouseout mousemove mouseenter mouseleave keydown keyup keypress submit focus blur copy cut paste".split(" "),function(a){var b=$a("ng-"+a);ef[b]=["$parse","$rootScope",function(c,d){return{restrict:"A",compile:function(e,f){var g=c(f[b],null,!0);return function(b,c){c.on(a,function(c){var e=function(){g(b,{$event:c})};ff[a]&&d.$$phase?b.$evalAsync(e):b.$apply(e)})}}}}]});var gf=["$animate",function(a){return{multiElement:!0,transclude:"element",priority:600,terminal:!0,restrict:"A",$$tlb:!0,link:function(c,d,e,f,g){var h,i,j;c.$watch(e.ngIf,function(c){c?i||g(function(c,f){i=f,c[c.length++]=b.createComment(" end ngIf: "+e.ngIf+" "),h={clone:c},a.enter(c,d.parent(),d)}):(j&&(j.remove(),j=null),i&&(i.$destroy(),i=null),h&&(j=ia(h.clone),a.leave(j).then(function(){j=null}),h=null))})}}}],hf=["$templateRequest","$anchorScroll","$animate","$sce",function(a,b,c,d){return{restrict:"ECA",priority:400,terminal:!0,transclude:"element",controller:id.noop,compile:function(e,f){var g=f.ngInclude||f.src,h=f.onload||"",i=f.autoscroll;return function(e,f,j,k,l){var m,n,o,p=0,q=function(){n&&(n.remove(),n=null),m&&(m.$destroy(),m=null),o&&(c.leave(o).then(function(){n=null}),n=o,o=null)};e.$watch(d.parseAsResourceUrl(g),function(d){var g=function(){!s(i)||i&&!e.$eval(i)||b()},j=++p;d?(a(d,!0).then(function(a){if(j===p){var b=e.$new();k.template=a;var i=l(b,function(a){q(),c.enter(a,null,f).then(g)});m=b,o=i,m.$emit("$includeContentLoaded",d),e.$eval(h)}},function(){j===p&&(q(),e.$emit("$includeContentError",d))}),e.$emit("$includeContentRequested",d)):(q(),k.template=null)})}}}}],jf=["$compile",function(a){return{restrict:"ECA",priority:-400,require:"ngInclude",link:function(c,d,e,f){return/SVG/.test(d[0].toString())?(d.empty(),void a(sa(f.template,b).childNodes)(c,function(a){d.append(a)},{futureParentElement:d})):(d.html(f.template),void a(d.contents())(c))}}}],kf=Bc({priority:450,compile:function(){return{pre:function(a,b,c){a.$eval(c.ngInit)}}}}),lf=function(){return{restrict:"A",priority:100,require:"ngModel",link:function(a,b,d,e){var g=b.attr(d.$attr.ngList)||", ",h="false"!==d.ngTrim,i=h?md(g):g,j=function(a){if(!r(a)){var b=[];return a&&f(a.split(i),function(a){a&&b.push(h?md(a):a)}),b}};e.$parsers.push(j),e.$formatters.push(function(a){return ld(a)?a.join(g):c}),e.$isEmpty=function(a){return!a||!a.length}}}},mf="ng-valid",nf="ng-invalid",of="ng-pristine",pf="ng-dirty",qf="ng-untouched",rf="ng-touched",sf="ng-pending",tf=new d("ngModel"),uf=["$scope","$exceptionHandler","$attrs","$element","$parse","$animate","$timeout","$rootScope","$q","$interpolate",function(a,b,d,e,g,h,i,j,k,l){this.$viewValue=Number.NaN,this.$modelValue=Number.NaN,this.$$rawModelValue=c,this.$validators={},this.$asyncValidators={},this.$parsers=[],this.$formatters=[],this.$viewChangeListeners=[],this.$untouched=!0,this.$touched=!1,this.$pristine=!0,this.$dirty=!1,this.$valid=!0,this.$invalid=!1,this.$error={},this.$$success={},this.$pending=c,this.$name=l(d.name||"",!1)(a);var m,n=g(d.ngModel),p=n.assign,q=n,t=p,u=null,w=this;this.$$setOptions=function(a){if(w.$options=a,a&&a.getterSetter){var b=g(d.ngModel+"()"),c=g(d.ngModel+"($$$p)");q=function(a){var c=n(a);return x(c)&&(c=b(a)),c},t=function(a,b){x(n(a))?c(a,{$$$p:w.$modelValue}):p(a,w.$modelValue)}}else if(!n.assign)throw tf("nonassign","Expression '{0}' is non-assignable. Element: {1}",d.ngModel,T(e))},this.$render=o,this.$isEmpty=function(a){return r(a)||""===a||null===a||a!==a};var y=e.inheritedData("$formController")||Fe,z=0;Sc({ctrl:this,$element:e,set:function(a,b){a[b]=!0},unset:function(a,b){delete a[b]},parentForm:y,$animate:h}),this.$setPristine=function(){w.$dirty=!1,w.$pristine=!0,h.removeClass(e,pf),h.addClass(e,of)},this.$setDirty=function(){w.$dirty=!0,w.$pristine=!1,h.removeClass(e,of),h.addClass(e,pf),y.$setDirty()},this.$setUntouched=function(){w.$touched=!1,w.$untouched=!0,h.setClass(e,qf,rf)},this.$setTouched=function(){w.$touched=!0,w.$untouched=!1,h.setClass(e,rf,qf)},this.$rollbackViewValue=function(){i.cancel(u),w.$viewValue=w.$$lastCommittedViewValue,w.$render()},this.$validate=function(){if(!v(w.$modelValue)||!isNaN(w.$modelValue)){var a=w.$$lastCommittedViewValue,b=w.$$rawModelValue,d=w.$valid,e=w.$modelValue,f=w.$options&&w.$options.allowInvalid;w.$$runValidators(b,a,function(a){f||d===a||(w.$modelValue=a?b:c,w.$modelValue!==e&&w.$$writeModelToScope())})}},this.$$runValidators=function(a,b,d){function e(){var a=w.$$parserName||"parse";return m!==c?(m||(f(w.$validators,function(a,b){i(b,null)}),f(w.$asyncValidators,function(a,b){i(b,null)})),i(a,m),m):(i(a,null),!0)}function g(){var c=!0;return f(w.$validators,function(d,e){var f=d(a,b);c=c&&f,i(e,f)}),c?!0:(f(w.$asyncValidators,function(a,b){i(b,null)}),!1)}function h(){var d=[],e=!0;f(w.$asyncValidators,function(f,g){var h=f(a,b);if(!F(h))throw tf("$asyncValidators","Expected asynchronous validator to return a promise but got '{0}' instead.",h);i(g,c),d.push(h.then(function(){i(g,!0)},function(a){e=!1,i(g,!1)}))}),d.length?k.all(d).then(function(){j(e)},o):j(!0)}function i(a,b){l===z&&w.$setValidity(a,b)}function j(a){l===z&&d(a)}z++;var l=z;return e()&&g()?void h():void j(!1)},this.$commitViewValue=function(){var a=w.$viewValue;i.cancel(u),
(w.$$lastCommittedViewValue!==a||""===a&&w.$$hasNativeValidators)&&(w.$$lastCommittedViewValue=a,w.$pristine&&this.$setDirty(),this.$$parseAndValidate())},this.$$parseAndValidate=function(){function b(){w.$modelValue!==g&&w.$$writeModelToScope()}var d=w.$$lastCommittedViewValue,e=d;if(m=r(e)?c:!0)for(var f=0;f<w.$parsers.length;f++)if(e=w.$parsers[f](e),r(e)){m=!1;break}v(w.$modelValue)&&isNaN(w.$modelValue)&&(w.$modelValue=q(a));var g=w.$modelValue,h=w.$options&&w.$options.allowInvalid;w.$$rawModelValue=e,h&&(w.$modelValue=e,b()),w.$$runValidators(e,w.$$lastCommittedViewValue,function(a){h||(w.$modelValue=a?e:c,b())})},this.$$writeModelToScope=function(){t(a,w.$modelValue),f(w.$viewChangeListeners,function(a){try{a()}catch(c){b(c)}})},this.$setViewValue=function(a,b){w.$viewValue=a,(!w.$options||w.$options.updateOnDefault)&&w.$$debounceViewValueCommit(b)},this.$$debounceViewValueCommit=function(b){var c,d=0,e=w.$options;e&&s(e.debounce)&&(c=e.debounce,v(c)?d=c:v(c[b])?d=c[b]:v(c["default"])&&(d=c["default"])),i.cancel(u),d?u=i(function(){w.$commitViewValue()},d):j.$$phase?w.$commitViewValue():a.$apply(function(){w.$commitViewValue()})},a.$watch(function(){var b=q(a);if(b!==w.$modelValue){w.$modelValue=w.$$rawModelValue=b,m=c;for(var d=w.$formatters,e=d.length,f=b;e--;)f=d[e](f);w.$viewValue!==f&&(w.$viewValue=w.$$lastCommittedViewValue=f,w.$render(),w.$$runValidators(b,f,o))}return b})}],vf=["$rootScope",function(a){return{restrict:"A",require:["ngModel","^?form","^?ngModelOptions"],controller:uf,priority:1,compile:function(b){return b.addClass(of).addClass(qf).addClass(mf),{pre:function(a,b,c,d){var e=d[0],f=d[1]||Fe;e.$$setOptions(d[2]&&d[2].$options),f.$addControl(e),c.$observe("name",function(a){e.$name!==a&&f.$$renameControl(e,a)}),a.$on("$destroy",function(){f.$removeControl(e)})},post:function(b,c,d,e){var f=e[0];f.$options&&f.$options.updateOn&&c.on(f.$options.updateOn,function(a){f.$$debounceViewValueCommit(a&&a.type)}),c.on("blur",function(c){f.$touched||(a.$$phase?b.$evalAsync(f.$setTouched):b.$apply(f.$setTouched))})}}}}}],wf=/(\s+|^)default(\s+|$)/,xf=function(){return{restrict:"A",controller:["$scope","$attrs",function(a,b){var d=this;this.$options=a.$eval(b.ngModelOptions),this.$options.updateOn!==c?(this.$options.updateOnDefault=!1,this.$options.updateOn=md(this.$options.updateOn.replace(wf,function(){return d.$options.updateOnDefault=!0," "}))):this.$options.updateOnDefault=!0}]}},yf=Bc({terminal:!0,priority:1e3}),zf=["$locale","$interpolate",function(a,b){var c=/{}/g,d=/^when(Minus)?(.+)$/;return{restrict:"EA",link:function(e,g,h){function i(a){g.text(a||"")}var j,k=h.count,l=h.$attr.when&&g.attr(h.$attr.when),m=h.offset||0,n=e.$eval(l)||{},o={},p=b.startSymbol(),q=b.endSymbol(),r=p+k+"-"+m+q,s=id.noop;f(h,function(a,b){var c=d.exec(b);if(c){var e=(c[1]?"-":"")+Wc(c[2]);n[e]=g.attr(h.$attr[b])}}),f(n,function(a,d){o[d]=b(a.replace(c,r))}),e.$watch(k,function(b){var c=parseFloat(b),d=isNaN(c);d||c in n||(c=a.pluralCat(c-m)),c===j||d&&isNaN(j)||(s(),s=e.$watch(o[c],i),j=c)})}}}],Af=["$parse","$animate",function(a,g){var h="$$NG_REMOVED",i=d("ngRepeat"),j=function(a,b,c,d,e,f,g){a[c]=d,e&&(a[e]=f),a.$index=b,a.$first=0===b,a.$last=b===g-1,a.$middle=!(a.$first||a.$last),a.$odd=!(a.$even=0===(1&b))},k=function(a){return a.clone[0]},l=function(a){return a.clone[a.clone.length-1]};return{restrict:"A",multiElement:!0,transclude:"element",priority:1e3,terminal:!0,$$tlb:!0,compile:function(d,m){var n=m.ngRepeat,o=b.createComment(" end ngRepeat: "+n+" "),p=n.match(/^\s*([\s\S]+?)\s+in\s+([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+track\s+by\s+([\s\S]+?))?\s*$/);if(!p)throw i("iexp","Expected expression in form of '_item_ in _collection_[ track by _id_]' but got '{0}'.",n);var q=p[1],r=p[2],s=p[3],t=p[4];if(p=q.match(/^(?:(\s*[\$\w]+)|\(\s*([\$\w]+)\s*,\s*([\$\w]+)\s*\))$/),!p)throw i("iidexp","'_item_' in '_item_ in _collection_' should be an identifier or '(_key_, _value_)' expression, but got '{0}'.",q);var u=p[3]||p[1],v=p[2];if(s&&(!/^[$a-zA-Z_][$a-zA-Z0-9_]*$/.test(s)||/^(null|undefined|this|\$index|\$first|\$middle|\$last|\$even|\$odd|\$parent|\$root|\$id)$/.test(s)))throw i("badident","alias '{0}' is invalid --- must be a valid JS identifier which is not a reserved name.",s);var w,x,y,z,A={$id:Oa};return t?w=a(t):(y=function(a,b){return Oa(b)},z=function(a){return a}),function(a,b,d,m,p){w&&(x=function(b,c,d){return v&&(A[v]=b),A[u]=c,A.$index=d,w(a,A)});var q=ja();a.$watchCollection(r,function(d){var m,r,t,w,A,B,C,D,E,F,G,H,I=b[0],J=ja();if(s&&(a[s]=d),e(d))E=d,D=x||y;else{D=x||z,E=[];for(var K in d)d.hasOwnProperty(K)&&"$"!=K.charAt(0)&&E.push(K);E.sort()}for(w=E.length,G=new Array(w),m=0;w>m;m++)if(A=d===E?m:E[m],B=d[A],C=D(A,B,m),q[C])F=q[C],delete q[C],J[C]=F,G[m]=F;else{if(J[C])throw f(G,function(a){a&&a.scope&&(q[a.id]=a)}),i("dupes","Duplicates in a repeater are not allowed. Use 'track by' expression to specify unique keys. Repeater: {0}, Duplicate key: {1}, Duplicate value: {2}",n,C,B);G[m]={id:C,scope:c,clone:c},J[C]=!0}for(var L in q){if(F=q[L],H=ia(F.clone),g.leave(H),H[0].parentNode)for(m=0,r=H.length;r>m;m++)H[m][h]=!0;F.scope.$destroy()}for(m=0;w>m;m++)if(A=d===E?m:E[m],B=d[A],F=G[m],F.scope){t=I;do t=t.nextSibling;while(t&&t[h]);k(F)!=t&&g.move(ia(F.clone),null,ad(I)),I=l(F),j(F.scope,m,u,B,v,A,w)}else p(function(a,b){F.scope=b;var c=o.cloneNode(!1);a[a.length++]=c,g.enter(a,null,ad(I)),I=c,F.clone=a,J[F.id]=F,j(F.scope,m,u,B,v,A,w)});q=J})}}}}],Bf="ng-hide",Cf="ng-hide-animate",Df=["$animate",function(a){return{restrict:"A",multiElement:!0,link:function(b,c,d){b.$watch(d.ngShow,function(b){a[b?"removeClass":"addClass"](c,Bf,{tempClasses:Cf})})}}}],Ef=["$animate",function(a){return{restrict:"A",multiElement:!0,link:function(b,c,d){b.$watch(d.ngHide,function(b){a[b?"addClass":"removeClass"](c,Bf,{tempClasses:Cf})})}}}],Ff=Bc(function(a,b,c){a.$watchCollection(c.ngStyle,function(a,c){c&&a!==c&&f(c,function(a,c){b.css(c,"")}),a&&b.css(a)})}),Gf=["$animate",function(a){return{restrict:"EA",require:"ngSwitch",controller:["$scope",function(){this.cases={}}],link:function(c,d,e,g){var h=e.ngSwitch||e.on,i=[],j=[],k=[],l=[],m=function(a,b){return function(){a.splice(b,1)}};c.$watch(h,function(c){var d,e;for(d=0,e=k.length;e>d;++d)a.cancel(k[d]);for(k.length=0,d=0,e=l.length;e>d;++d){var h=ia(j[d].clone);l[d].$destroy();var n=k[d]=a.leave(h);n.then(m(k,d))}j.length=0,l.length=0,(i=g.cases["!"+c]||g.cases["?"])&&f(i,function(c){c.transclude(function(d,e){l.push(e);var f=c.element;d[d.length++]=b.createComment(" end ngSwitchWhen: ");var g={clone:d};j.push(g),a.enter(d,f.parent(),f)})})})}}}],Hf=Bc({transclude:"element",priority:1200,require:"^ngSwitch",multiElement:!0,link:function(a,b,c,d,e){d.cases["!"+c.ngSwitchWhen]=d.cases["!"+c.ngSwitchWhen]||[],d.cases["!"+c.ngSwitchWhen].push({transclude:e,element:b})}}),If=Bc({transclude:"element",priority:1200,require:"^ngSwitch",multiElement:!0,link:function(a,b,c,d,e){d.cases["?"]=d.cases["?"]||[],d.cases["?"].push({transclude:e,element:b})}}),Jf=Bc({restrict:"EAC",link:function(a,b,c,e,f){if(!f)throw d("ngTransclude")("orphan","Illegal use of ngTransclude directive in the template! No parent directive that requires a transclusion found. Element: {0}",T(b));f(function(a){b.empty(),b.append(a)})}}),Kf=["$templateCache",function(a){return{restrict:"E",terminal:!0,compile:function(b,c){if("text/ng-template"==c.type){var d=c.id,e=b[0].text;a.put(d,e)}}}}],Lf=d("ngOptions"),Mf=q({restrict:"A",terminal:!0}),Nf=["$compile","$parse",function(a,d){var e=/^\s*([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+group\s+by\s+([\s\S]+?))?\s+for\s+(?:([\$\w][\$\w]*)|(?:\(\s*([\$\w][\$\w]*)\s*,\s*([\$\w][\$\w]*)\s*\)))\s+in\s+([\s\S]+?)(?:\s+track\s+by\s+([\s\S]+?))?$/,h={$setViewValue:o};return{restrict:"E",require:["select","?ngModel"],controller:["$element","$scope","$attrs",function(a,b,c){var d,e,f=this,g={},i=h;f.databound=c.ngModel,f.init=function(a,b,c){i=a,d=b,e=c},f.addOption=function(b,c){ga(b,'"option value"'),g[b]=!0,i.$viewValue==b&&(a.val(b),e.parent()&&e.remove()),c&&c[0].hasAttribute("selected")&&(c[0].selected=!0)},f.removeOption=function(a){this.hasOption(a)&&(delete g[a],i.$viewValue===a&&this.renderUnknownOption(a))},f.renderUnknownOption=function(b){var c="? "+Oa(b)+" ?";e.val(c),a.prepend(e),a.val(c),e.prop("selected",!0)},f.hasOption=function(a){return g.hasOwnProperty(a)},b.$on("$destroy",function(){f.renderUnknownOption=o})}],link:function(h,i,j,k){function l(a,b,c,d){c.$render=function(){var a=c.$viewValue;d.hasOption(a)?(z.parent()&&z.remove(),b.val(a),""===a&&o.prop("selected",!0)):r(a)&&o?b.val(""):d.renderUnknownOption(a)},b.on("change",function(){a.$apply(function(){z.parent()&&z.remove(),c.$setViewValue(b.val())})})}function m(a,b,c){var d;c.$render=function(){var a=new Pa(c.$viewValue);f(b.find("option"),function(b){b.selected=s(a.get(b.value))})},a.$watch(function(){M(d,c.$viewValue)||(d=L(c.$viewValue),c.$render())}),b.on("change",function(){a.$apply(function(){var a=[];f(b.find("option"),function(b){b.selected&&a.push(b.value)}),c.$setViewValue(a)})})}function n(b,h,i){function j(a,c,d){return M[B]=d,E&&(M[E]=c),a(b,M)}function k(){b.$apply(function(){var a,c=H(b)||[];if(t)a=[],f(h.val(),function(b){b=J?K[b]:b,a.push(l(b,c[b]))});else{var d=J?K[h.val()]:h.val();a=l(d,c[d])}i.$setViewValue(a),r()})}function l(a,b){if("?"===a)return c;if(""===a)return null;var d=D?D:G;return j(d,a,b)}function m(){var a,c=H(b);if(c&&ld(c)){a=new Array(c.length);for(var d=0,e=c.length;e>d;d++)a[d]=j(A,d,c[d]);return a}if(c){a={};for(var f in c)c.hasOwnProperty(f)&&(a[f]=j(A,f,c[f]))}return a}function n(a){var b;if(t)if(J&&ld(a)){b=new Pa([]);for(var c=0;c<a.length;c++)b.put(j(J,null,a[c]),!0)}else b=new Pa(a);else J&&(a=j(J,null,a));return function(c,d){var e;return e=J?J:D?D:G,t?s(b.remove(j(e,c,d))):a===j(e,c,d)}}function o(){w||(b.$$postDigest(r),w=!0)}function q(a,b,c){a[b]=a[b]||0,a[b]+=c?1:-1}function r(){w=!1;var a,c,d,e,k,l,m,o,r,u,z,B,C,D,G,I,N,O={"":[]},P=[""],Q=i.$viewValue,R=H(b)||[],S=E?g(R):R,T={},U=n(Q),V=!1;for(K={},B=0;u=S.length,u>B;B++)m=B,E&&(m=S[B],"$"===m.charAt(0))||(o=R[m],a=j(F,m,o)||"",(c=O[a])||(c=O[a]=[],P.push(a)),C=U(m,o),V=V||C,I=j(A,m,o),I=s(I)?I:"",N=J?J(b,M):E?S[B]:B,J&&(K[N]=m),c.push({id:N,label:I,selected:C}));for(t||(v||null===Q?O[""].unshift({id:"",label:"",selected:!V}):V||O[""].unshift({id:"?",label:"",selected:!0})),z=0,r=P.length;r>z;z++){for(a=P[z],c=O[a],L.length<=z?(e={element:y.clone().attr("label",a),label:c.label},k=[e],L.push(k),h.append(e.element)):(k=L[z],e=k[0],e.label!=a&&e.element.attr("label",e.label=a)),D=null,B=0,u=c.length;u>B;B++)d=c[B],(l=k[B+1])?(D=l.element,l.label!==d.label&&(q(T,l.label,!1),q(T,d.label,!0),D.text(l.label=d.label),D.prop("label",l.label)),l.id!==d.id&&D.val(l.id=d.id),D[0].selected!==d.selected&&(D.prop("selected",l.selected=d.selected),_c&&D.prop("selected",l.selected))):(""===d.id&&v?G=v:(G=x.clone()).val(d.id).prop("selected",d.selected).attr("selected",d.selected).prop("label",d.label).text(d.label),k.push(l={element:G,label:d.label,id:d.id,selected:d.selected}),q(T,d.label,!0),D?D.after(G):e.element.append(G),D=G);for(B++;k.length>B;)d=k.pop(),q(T,d.label,!1),d.element.remove()}for(;L.length>z;){for(c=L.pop(),B=1;B<c.length;++B)q(T,c[B].label,!1);c[0].element.remove()}f(T,function(a,b){a>0?p.addOption(b):0>a&&p.removeOption(b)})}var z;if(!(z=u.match(e)))throw Lf("iexp","Expected expression in form of '_select_ (as _label_)? for (_key_,)?_value_ in _collection_' but got '{0}'. Element: {1}",u,T(h));var A=d(z[2]||z[1]),B=z[4]||z[6],C=/ as /.test(z[0])&&z[1],D=C?d(C):null,E=z[5],F=d(z[3]||""),G=d(z[2]?z[1]:B),H=d(z[7]),I=z[8],J=I?d(z[8]):null,K={},L=[[{element:h,label:""}]],M={};v&&(a(v)(b),v.removeClass("ng-scope"),v.remove()),h.empty(),h.on("change",k),i.$render=r,b.$watchCollection(H,o),b.$watchCollection(m,o),t&&b.$watchCollection(function(){return i.$modelValue},o)}if(k[1]){for(var o,p=k[0],q=k[1],t=j.multiple,u=j.ngOptions,v=!1,w=!1,x=ad(b.createElement("option")),y=ad(b.createElement("optgroup")),z=x.clone(),A=0,B=i.children(),C=B.length;C>A;A++)if(""===B[A].value){o=v=B.eq(A);break}p.init(q,v,z),t&&(q.$isEmpty=function(a){return!a||0===a.length}),u?n(h,i,q):t?m(h,i,q):l(h,i,q,p)}}}}],Of=["$interpolate",function(a){var b={addOption:o,removeOption:o};return{restrict:"E",priority:100,compile:function(c,d){if(r(d.value)){var e=a(c.text(),!0);e||d.$set("value",c.text())}return function(a,c,d){var f="$selectController",g=c.parent(),h=g.data(f)||g.parent().data(f);h&&h.databound||(h=b),e?a.$watch(e,function(a,b){d.$set("value",a),b!==a&&h.removeOption(b),h.addOption(a,c)}):h.addOption(d.value,c),c.on("$destroy",function(){h.removeOption(d.value)})}}}}],Pf=q({restrict:"E",terminal:!1}),Qf=function(){return{restrict:"A",require:"?ngModel",link:function(a,b,c,d){d&&(c.required=!0,d.$validators.required=function(a,b){return!c.required||!d.$isEmpty(b)},c.$observe("required",function(){d.$validate()}))}}},Rf=function(){return{restrict:"A",require:"?ngModel",link:function(a,b,e,f){if(f){var g,h=e.ngPattern||e.pattern;e.$observe("pattern",function(a){if(u(a)&&a.length>0&&(a=new RegExp("^"+a+"$")),a&&!a.test)throw d("ngPattern")("noregexp","Expected {0} to be a RegExp but was {1}. Element: {2}",h,a,T(b));g=a||c,f.$validate()}),f.$validators.pattern=function(a){return f.$isEmpty(a)||r(g)||g.test(a)}}}}},Sf=function(){return{restrict:"A",require:"?ngModel",link:function(a,b,c,d){if(d){var e=-1;c.$observe("maxlength",function(a){var b=m(a);e=isNaN(b)?-1:b,d.$validate()}),d.$validators.maxlength=function(a,b){return 0>e||d.$isEmpty(b)||b.length<=e}}}}},Tf=function(){return{restrict:"A",require:"?ngModel",link:function(a,b,c,d){if(d){var e=0;c.$observe("minlength",function(a){e=m(a)||0,d.$validate()}),d.$validators.minlength=function(a,b){return d.$isEmpty(b)||b.length>=e}}}}};return a.angular.bootstrap?void console.log("WARNING: Tried to load angular more than once."):(da(),na(id),void ad(b).ready(function(){$(b,_)}))}(window,document),!window.angular.$$csp()&&window.angular.element(document).find("head").prepend('<style type="text/css">@charset "UTF-8";[ng\\:cloak],[ng-cloak],[data-ng-cloak],[x-ng-cloak],.ng-cloak,.x-ng-cloak,.ng-hide:not(.ng-hide-animate){display:none !important;}ng\\:form{display:block;}</style>'),function(a,b,c){"use strict";b.module("ngAnimate",["ng"]).directive("ngAnimateChildren",function(){return function(a,c,d){d=d.ngAnimateChildren,b.isString(d)&&0===d.length?c.data("$$ngAnimateChildren",!0):a.$watch(d,function(a){c.data("$$ngAnimateChildren",!!a)})}}).factory("$$animateReflow",["$$rAF","$document",function(a,b){return function(b){return a(function(){b()})}}]).config(["$provide","$animateProvider",function(d,e){function f(a){for(var b=0;b<a.length;b++){var c=a[b];if(1==c.nodeType)return c}}function g(a,b){return f(a)==f(b)}var h=b.noop,i=b.forEach,j=e.$$selectors,k=b.isArray,l=b.isString,m=b.isObject,n={running:!0};d.decorator("$animate",["$delegate","$$q","$injector","$sniffer","$rootElement","$$asyncCallback","$rootScope","$document","$templateRequest",function(a,c,d,o,p,q,r,s,t){function u(a,b){var c=a.data("$$ngAnimateState")||{};return b&&(c.running=!0,c.structural=!0,a.data("$$ngAnimateState",c)),c.disabled||c.running&&c.structural}function v(a){var b,d=c.defer();return d.promise.$$cancelFn=function(){b&&b()},r.$$postDigest(function(){b=a(function(){d.resolve()})}),d.promise}function w(a){return m(a)?(a.tempClasses&&l(a.tempClasses)&&(a.tempClasses=a.tempClasses.split(/\s+/)),a):void 0}function x(a,b,c){c=c||{};var d={};i(c,function(a,b){i(b.split(" "),function(b){d[b]=a})});var e=Object.create(null);i((a.attr("class")||"").split(/\s+/),function(a){e[a]=!0});var f=[],g=[];return i(b&&b.classes||[],function(a,b){var c=e[b],h=d[b]||{};!1===a?(c||"addClass"==h.event)&&g.push(b):!0===a&&(c&&"removeClass"!=h.event||f.push(b))}),0<f.length+g.length&&[f.join(" "),g.join(" ")]}function y(a){if(a){var b=[],c={};a=a.substr(1).split("."),(o.transitions||o.animations)&&b.push(d.get(j[""]));for(var e=0;e<a.length;e++){var f=a[e],g=j[f];g&&!c[f]&&(b.push(d.get(g)),c[f]=!0)}return b}}function z(a,c,d,e){function f(a,b){var c=a[b],d=a["before"+b.charAt(0).toUpperCase()+b.substr(1)];return c||d?("leave"==b&&(d=c,c=null),v.push({event:b,fn:c}),s.push({event:b,fn:d}),!0):void 0}function g(b,c,f){var g=[];i(b,function(a){a.fn&&g.push(a)});var j=0;i(g,function(b,i){var k=function(){a:{if(c){if((c[i]||h)(),++j<g.length)break a;c=null}f()}};switch(b.event){case"setClass":c.push(b.fn(a,l,m,k,e));break;case"animate":c.push(b.fn(a,d,e.from,e.to,k));break;case"addClass":c.push(b.fn(a,l||d,k,e));break;case"removeClass":c.push(b.fn(a,m||d,k,e));break;default:c.push(b.fn(a,k,e))}}),c&&0===c.length&&f()}var j=a[0];if(j){e&&(e.to=e.to||{},e.from=e.from||{});var l,m;k(d)&&(l=d[0],m=d[1],l?m?d=l+" "+m:(d=l,c="addClass"):(d=m,c="removeClass"));var n="setClass"==c,o=n||"addClass"==c||"removeClass"==c||"animate"==c,p=a.attr("class")+" "+d;if(H(p)){var q=h,r=[],s=[],t=h,u=[],v=[],p=(" "+p).replace(/\s+/g,".");return i(y(p),function(a){!f(a,c)&&n&&(f(a,"addClass"),f(a,"removeClass"))}),{node:j,event:c,className:d,isClassBased:o,isSetClassOperation:n,applyStyles:function(){e&&a.css(b.extend(e.from||{},e.to||{}))},before:function(a){q=a,g(s,r,function(){q=h,a()})},after:function(a){t=a,g(v,u,function(){t=h,a()})},cancel:function(){r&&(i(r,function(a){(a||h)(!0)}),q(!0)),u&&(i(u,function(a){(a||h)(!0)}),t(!0))}}}}}function A(a,c,d,e,f,g,j,k){function l(b){var e="$animate:"+b;s&&s[e]&&0<s[e].length&&q(function(){d.triggerHandler(e,{event:a,className:c})})}function m(){l("before")}function n(){l("after")}function o(){o.hasBeenRun||(o.hasBeenRun=!0,g())}function p(){if(!p.hasBeenRun){r&&r.applyStyles(),p.hasBeenRun=!0,j&&j.tempClasses&&i(j.tempClasses,function(a){d.removeClass(a)});var b=d.data("$$ngAnimateState");b&&(r&&r.isClassBased?C(d,c):(q(function(){var b=d.data("$$ngAnimateState")||{};x==b.index&&C(d,c,a)}),d.data("$$ngAnimateState",b))),l("close"),k()}}var r=z(d,a,c,j);if(!r)return o(),m(),n(),p(),h;a=r.event,c=r.className;var s=b.element._data(r.node),s=s&&s.events;if(e||(e=f?f.parent():d.parent()),D(d,e))return o(),m(),n(),p(),h;e=d.data("$$ngAnimateState")||{};var t=e.active||{},u=e.totalActive||0,v=e.last;if(f=!1,u>0){if(u=[],r.isClassBased)"setClass"==v.event?(u.push(v),C(d,c)):t[c]&&(w=t[c],w.event==a?f=!0:(u.push(w),C(d,c)));else if("leave"==a&&t["ng-leave"])f=!0;else{for(var w in t)u.push(t[w]);e={},C(d,!0)}0<u.length&&i(u,function(a){a.cancel()})}if(!r.isClassBased||r.isSetClassOperation||"animate"==a||f||(f="addClass"==a==d.hasClass(c)),f)return o(),m(),n(),l("close"),k(),h;t=e.active||{},u=e.totalActive||0,"leave"==a&&d.one("$destroy",function(a){a=b.element(this);var c=a.data("$$ngAnimateState");c&&(c=c.active["ng-leave"])&&(c.cancel(),C(a,"ng-leave"))}),d.addClass("ng-animate"),j&&j.tempClasses&&i(j.tempClasses,function(a){d.addClass(a)});var x=F++;return u++,t[c]=r,d.data("$$ngAnimateState",{last:r,active:t,index:x,totalActive:u}),m(),r.before(function(b){var e=d.data("$$ngAnimateState");b=b||!e||!e.active[c]||r.isClassBased&&e.active[c].event!=a,o(),!0===b?p():(n(),r.after(p))}),r.cancel}function B(a){(a=f(a))&&(a=b.isFunction(a.getElementsByClassName)?a.getElementsByClassName("ng-animate"):a.querySelectorAll(".ng-animate"),i(a,function(a){a=b.element(a),(a=a.data("$$ngAnimateState"))&&a.active&&i(a.active,function(a){a.cancel()})}))}function C(a,b){if(g(a,p))n.disabled||(n.running=!1,n.structural=!1);else if(b){var c=a.data("$$ngAnimateState")||{},d=!0===b;!d&&c.active&&c.active[b]&&(c.totalActive--,delete c.active[b]),(d||!c.totalActive)&&(a.removeClass("ng-animate"),a.removeData("$$ngAnimateState"))}}function D(a,c){if(n.disabled)return!0;if(g(a,p))return n.running;var d,e,f;do{if(0===c.length)break;var h=g(c,p),i=h?n:c.data("$$ngAnimateState")||{};if(i.disabled)return!0;h&&(f=!0),!1!==d&&(h=c.data("$$ngAnimateChildren"),b.isDefined(h)&&(d=h)),e=e||i.running||i.last&&!i.last.isClassBased}while(c=c.parent());return!f||!d&&e}p.data("$$ngAnimateState",n);var E=r.$watch(function(){return t.totalPendingRequests},function(a,b){0===a&&(E(),r.$$postDigest(function(){r.$$postDigest(function(){n.running=!1})}))}),F=0,G=e.classNameFilter(),H=G?function(a){return G.test(a)}:function(){return!0};return{animate:function(a,c,d,e,g){return e=e||"ng-inline-animate",g=w(g)||{},g.from=d?c:null,g.to=d?d:c,v(function(c){return A("animate",e,b.element(f(a)),null,null,h,g,c)})},enter:function(c,d,e,g){return g=w(g),c=b.element(c),d=d&&b.element(d),e=e&&b.element(e),u(c,!0),a.enter(c,d,e),v(function(a){return A("enter","ng-enter",b.element(f(c)),d,e,h,g,a)})},leave:function(c,d){return d=w(d),c=b.element(c),B(c),u(c,!0),v(function(e){return A("leave","ng-leave",b.element(f(c)),null,null,function(){a.leave(c)},d,e)})},move:function(c,d,e,g){return g=w(g),c=b.element(c),d=d&&b.element(d),e=e&&b.element(e),B(c),u(c,!0),a.move(c,d,e),v(function(a){return A("move","ng-move",b.element(f(c)),d,e,h,g,a)})},addClass:function(a,b,c){return this.setClass(a,b,[],c)},removeClass:function(a,b,c){return this.setClass(a,[],b,c)},setClass:function(c,d,e,g){if(g=w(g),c=b.element(c),c=b.element(f(c)),u(c))return a.$$setClassImmediately(c,d,e,g);var h,j=c.data("$$animateClasses"),l=!!j;return j||(j={classes:{}}),h=j.classes,d=k(d)?d:d.split(" "),i(d,function(a){a&&a.length&&(h[a]=!0)}),e=k(e)?e:e.split(" "),i(e,function(a){a&&a.length&&(h[a]=!1)}),l?(g&&j.options&&(j.options=b.extend(j.options||{},g)),j.promise):(c.data("$$animateClasses",j={classes:h,options:g}),j.promise=v(function(b){var d=c.parent(),e=f(c),g=e.parentNode;if(g&&!g.$$NG_REMOVED&&!e.$$NG_REMOVED){e=c.data("$$animateClasses"),c.removeData("$$animateClasses");var g=c.data("$$ngAnimateState")||{},h=x(c,e,g.active);return h?A("setClass",h,c,d,null,function(){h[0]&&a.$$addClassImmediately(c,h[0]),h[1]&&a.$$removeClassImmediately(c,h[1])},e.options,b):b()}b()}))},cancel:function(a){a.$$cancelFn()},enabled:function(a,b){switch(arguments.length){case 2:if(a)C(b);else{var c=b.data("$$ngAnimateState")||{};c.disabled=!0,b.data("$$ngAnimateState",c)}break;case 1:n.disabled=!a;break;default:a=!n.disabled}return!!a}}}]),e.register("",["$window","$sniffer","$timeout","$$animateReflow",function(d,e,g,j){function m(){F||(F=j(function(){I=[],F=null,G={}}))}function n(a,b){F&&F(),I.push(b),F=j(function(){i(I,function(a){a()}),I=[],F=null,G={}})}function o(a,c){var d=f(a);a=b.element(d),L.push(a),d=Date.now()+c,K>=d||(g.cancel(J),K=d,J=g(function(){p(L),L=[]},c,!1))}function p(a){i(a,function(a){(a=a.data("$$ngAnimateCSS3Data"))&&i(a.closeAnimationFns,function(a){a()})})}function q(a,b){var c=b?G[b]:null;if(!c){var e=0,f=0,g=0,h=0;i(a,function(a){if(1==a.nodeType){a=d.getComputedStyle(a)||{},e=Math.max(r(a[A+"Duration"]),e),f=Math.max(r(a[A+"Delay"]),f),h=Math.max(r(a[C+"Delay"]),h);var b=r(a[C+"Duration"]);b>0&&(b*=parseInt(a[C+"IterationCount"],10)||1),g=Math.max(b,g)}}),c={total:0,transitionDelay:f,transitionDuration:e,animationDelay:h,animationDuration:g},b&&(G[b]=c)}return c}function r(a){var b=0;return a=l(a)?a.split(/\s*,\s*/):[],i(a,function(a){b=Math.max(parseFloat(a)||0,b)}),b}function s(a,b,c,d){a=0<=["ng-enter","ng-leave","ng-move"].indexOf(c);var e,g=b.parent(),h=g.data("$$ngAnimateKey");h||(g.data("$$ngAnimateKey",++H),h=H),e=h+"-"+f(b).getAttribute("class");var g=e+" "+c,h=G[g]?++G[g].total:0,i={};if(h>0){var j=c+"-stagger",i=e+" "+j;(e=!G[i])&&b.addClass(j),i=q(b,i),e&&b.removeClass(j)}b.addClass(c);var j=b.data("$$ngAnimateCSS3Data")||{},k=q(b,g);return e=k.transitionDuration,k=k.animationDuration,a&&0===e&&0===k?(b.removeClass(c),!1):(c=d||a&&e>0,a=k>0&&0<i.animationDelay&&0===i.animationDuration,b.data("$$ngAnimateCSS3Data",{stagger:i,cacheKey:g,running:j.running||0,itemIndex:h,blockTransition:c,closeAnimationFns:j.closeAnimationFns||[]}),g=f(b),c&&(u(g,!0),d&&b.css(d)),a&&(g.style[C+"PlayState"]="paused"),!0)}function t(a,b,c,d,e){function h(){b.off(F,j),b.removeClass(l),b.removeClass(m),z&&g.cancel(z),y(b,c);var a,d=f(b);for(a in n)d.style.removeProperty(n[a])}function j(a){a.stopPropagation();var b=a.originalEvent||a;a=b.$manualTimeStamp||b.timeStamp||Date.now(),b=parseFloat(b.elapsedTime.toFixed(3)),Math.max(a-A,0)>=x&&b>=w&&d()}var k=f(b);if(a=b.data("$$ngAnimateCSS3Data"),-1!=k.getAttribute("class").indexOf(c)&&a){var l="",m="";i(c.split(" "),function(a,b){var c=(b>0?" ":"")+a;l+=c+"-active",m+=c+"-pending"});var n=[],p=a.itemIndex,r=a.stagger,s=0;if(p>0){s=0,0<r.transitionDelay&&0===r.transitionDuration&&(s=r.transitionDelay*p);var t=0;0<r.animationDelay&&0===r.animationDuration&&(t=r.animationDelay*p,n.push(E+"animation-play-state")),s=Math.round(100*Math.max(s,t))/100}s||(b.addClass(l),a.blockTransition&&u(k,!1));var v=q(b,a.cacheKey+" "+l),w=Math.max(v.transitionDuration,v.animationDuration);if(0!==w){!s&&e&&(v.transitionDuration||(b.css("transition",v.animationDuration+"s linear all"),n.push("transition")),b.css(e));var p=Math.max(v.transitionDelay,v.animationDelay),x=1e3*p;0<n.length&&(r=k.getAttribute("style")||"",";"!==r.charAt(r.length-1)&&(r+=";"),k.setAttribute("style",r+" "));var z,A=Date.now(),F=D+" "+B,p=1e3*(s+1.5*(p+w));return s>0&&(b.addClass(m),z=g(function(){z=null,0<v.transitionDuration&&u(k,!1),0<v.animationDuration&&(k.style[C+"PlayState"]=""),b.addClass(l),b.removeClass(m),e&&(0===v.transitionDuration&&b.css("transition",v.animationDuration+"s linear all"),b.css(e),n.push("transition"))},1e3*s,!1)),b.on(F,j),a.closeAnimationFns.push(function(){h(),d()}),a.running++,o(b,p),h}b.removeClass(l),y(b,c),d()}else d()}function u(a,b){a.style[A+"Property"]=b?"none":""}function v(a,b,c,d){return s(a,b,c,d)?function(a){a&&y(b,c)}:void 0}function w(a,b,c,d,e){return b.data("$$ngAnimateCSS3Data")?t(a,b,c,d,e):(y(b,c),void d())}function x(a,b,c,d,e){var f=v(a,b,c,e.from);if(f){var g=f;return n(b,function(){g=w(a,b,c,d,e.to)}),function(a){(g||h)(a)}}m(),d()}function y(a,b){a.removeClass(b);var c=a.data("$$ngAnimateCSS3Data");c&&(c.running&&c.running--,c.running&&0!==c.running||a.removeData("$$ngAnimateCSS3Data"))}function z(a,b){var c="";return a=k(a)?a:a.split(/\s+/),i(a,function(a,d){a&&0<a.length&&(c+=(d>0?" ":"")+a+b)}),c}var A,B,C,D,E="";a.ontransitionend===c&&a.onwebkittransitionend!==c?(E="-webkit-",A="WebkitTransition",B="webkitTransitionEnd transitionend"):(A="transition",B="transitionend"),a.onanimationend===c&&a.onwebkitanimationend!==c?(E="-webkit-",C="WebkitAnimation",D="webkitAnimationEnd animationend"):(C="animation",D="animationend");var F,G={},H=0,I=[],J=null,K=0,L=[];return{animate:function(a,b,c,d,e,f){return f=f||{},f.from=c,f.to=d,x("animate",a,b,e,f)},enter:function(a,b,c){return c=c||{},x("enter",a,"ng-enter",b,c)},leave:function(a,b,c){return c=c||{},x("leave",a,"ng-leave",b,c)},move:function(a,b,c){return c=c||{},x("move",a,"ng-move",b,c)},beforeSetClass:function(a,b,c,d,e){return e=e||{},b=z(c,"-remove")+" "+z(b,"-add"),(e=v("setClass",a,b,e.from))?(n(a,d),e):(m(),void d())},beforeAddClass:function(a,b,c,d){return d=d||{},(b=v("addClass",a,z(b,"-add"),d.from))?(n(a,c),b):(m(),void c())},beforeRemoveClass:function(a,b,c,d){return d=d||{},(b=v("removeClass",a,z(b,"-remove"),d.from))?(n(a,c),b):(m(),void c())},setClass:function(a,b,c,d,e){return e=e||{},c=z(c,"-remove"),b=z(b,"-add"),w("setClass",a,c+" "+b,d,e.to)},addClass:function(a,b,c,d){return d=d||{},w("addClass",a,z(b,"-add"),c,d.to)},removeClass:function(a,b,c,d){return d=d||{},w("removeClass",a,z(b,"-remove"),c,d.to)}}}])}])}(window,window.angular),"undefined"!=typeof module&&"undefined"!=typeof exports&&module.exports===exports&&(module.exports="ui.router"),function(a,b,c){"use strict";function d(a,b){return M(new(M(function(){},{prototype:a})),b)}function e(a){return L(arguments,function(b){b!==a&&L(b,function(b,c){a.hasOwnProperty(c)||(a[c]=b)})}),a}function f(a,b){var c=[];for(var d in a.path){if(a.path[d]!==b.path[d])break;c.push(a.path[d])}return c}function g(a){if(Object.keys)return Object.keys(a);var c=[];return b.forEach(a,function(a,b){c.push(b)}),c}function h(a,b){if(Array.prototype.indexOf)return a.indexOf(b,Number(arguments[2])||0);var c=a.length>>>0,d=Number(arguments[2])||0;for(d=0>d?Math.ceil(d):Math.floor(d),0>d&&(d+=c);c>d;d++)if(d in a&&a[d]===b)return d;return-1}function i(a,b,c,d){var e,i=f(c,d),j={},k=[];for(var l in i)if(i[l].params&&(e=g(i[l].params),e.length))for(var m in e)h(k,e[m])>=0||(k.push(e[m]),j[e[m]]=a[e[m]]);return M({},j,b)}function j(a,b,c){if(!c){c=[];for(var d in a)c.push(d)}for(var e=0;e<c.length;e++){var f=c[e];if(a[f]!=b[f])return!1}return!0}function k(a,b){var c={};return L(a,function(a){c[a]=b[a]}),c}function l(a){var b={},c=Array.prototype.concat.apply(Array.prototype,Array.prototype.slice.call(arguments,1));for(var d in a)-1==h(c,d)&&(b[d]=a[d]);return b}function m(a,b){var c=K(a),d=c?[]:{};return L(a,function(a,e){b(a,e)&&(d[c?d.length:e]=a)}),d}function n(a,b){var c=K(a)?[]:{};return L(a,function(a,d){c[d]=b(a,d)}),c}function o(a,b){var d=1,f=2,i={},j=[],k=i,m=M(a.when(i),{$$promises:i,$$values:i});this.study=function(i){function n(a,c){if(s[c]!==f){if(r.push(c),s[c]===d)throw r.splice(0,h(r,c)),new Error("Cyclic dependency: "+r.join(" -> "));if(s[c]=d,I(a))q.push(c,[function(){return b.get(a)}],j);else{var e=b.annotate(a);L(e,function(a){a!==c&&i.hasOwnProperty(a)&&n(i[a],a)}),q.push(c,a,e)}r.pop(),s[c]=f}}function o(a){return J(a)&&a.then&&a.$$promises}if(!J(i))throw new Error("'invocables' must be an object");var p=g(i||{}),q=[],r=[],s={};return L(i,n),i=r=s=null,function(d,f,g){function h(){--u||(v||e(t,f.$$values),r.$$values=t,r.$$promises=r.$$promises||!0,delete r.$$inheritedValues,n.resolve(t))}function i(a){r.$$failure=a,n.reject(a)}function j(c,e,f){function j(a){l.reject(a),i(a)}function k(){if(!G(r.$$failure))try{l.resolve(b.invoke(e,g,t)),l.promise.then(function(a){t[c]=a,h()},j)}catch(a){j(a)}}var l=a.defer(),m=0;L(f,function(a){s.hasOwnProperty(a)&&!d.hasOwnProperty(a)&&(m++,s[a].then(function(b){t[a]=b,--m||k()},j))}),m||k(),s[c]=l.promise}if(o(d)&&g===c&&(g=f,f=d,d=null),d){if(!J(d))throw new Error("'locals' must be an object")}else d=k;if(f){if(!o(f))throw new Error("'parent' must be a promise returned by $resolve.resolve()")}else f=m;var n=a.defer(),r=n.promise,s=r.$$promises={},t=M({},d),u=1+q.length/3,v=!1;if(G(f.$$failure))return i(f.$$failure),r;f.$$inheritedValues&&e(t,l(f.$$inheritedValues,p)),M(s,f.$$promises),f.$$values?(v=e(t,l(f.$$values,p)),r.$$inheritedValues=l(f.$$values,p),h()):(f.$$inheritedValues&&(r.$$inheritedValues=l(f.$$inheritedValues,p)),f.then(h,i));for(var w=0,x=q.length;x>w;w+=3)d.hasOwnProperty(q[w])?h():j(q[w],q[w+1],q[w+2]);return r}},this.resolve=function(a,b,c,d){return this.study(a)(b,c,d)}}function p(a,b,c){this.fromConfig=function(a,b,c){return G(a.template)?this.fromString(a.template,b):G(a.templateUrl)?this.fromUrl(a.templateUrl,b):G(a.templateProvider)?this.fromProvider(a.templateProvider,b,c):null},this.fromString=function(a,b){return H(a)?a(b):a},this.fromUrl=function(c,d){return H(c)&&(c=c(d)),null==c?null:a.get(c,{cache:b,headers:{Accept:"text/html"}}).then(function(a){return a.data})},this.fromProvider=function(a,b,d){return c.invoke(a,null,d||{params:b})}}function q(a,b,e){function f(b,c,d,e){if(q.push(b),o[b])return o[b];if(!/^\w+(-+\w+)*(?:\[\])?$/.test(b))throw new Error("Invalid parameter name '"+b+"' in pattern '"+a+"'");if(p[b])throw new Error("Duplicate parameter name '"+b+"' in pattern '"+a+"'");return p[b]=new O.Param(b,c,d,e),p[b]}function g(a,b,c){var d=["",""],e=a.replace(/[\\\[\]\^$*+?.()|{}]/g,"\\$&");if(!b)return e;switch(c){case!1:d=["(",")"];break;case!0:d=["?(",")?"];break;default:d=["("+c+"|",")?"]}return e+d[0]+b+d[1]}function h(c,e){var f,g,h,i,j;return f=c[2]||c[3],j=b.params[f],h=a.substring(m,c.index),g=e?c[4]:c[4]||("*"==c[1]?".*":null),i=O.type(g||"string")||d(O.type("string"),{pattern:new RegExp(g)}),{id:f,regexp:g,segment:h,type:i,cfg:j}}b=M({params:{}},J(b)?b:{});var i,j=/([:*])([\w\[\]]+)|\{([\w\[\]]+)(?:\:((?:[^{}\\]+|\\.|\{(?:[^{}\\]+|\\.)*\})+))?\}/g,k=/([:]?)([\w\[\]-]+)|\{([\w\[\]-]+)(?:\:((?:[^{}\\]+|\\.|\{(?:[^{}\\]+|\\.)*\})+))?\}/g,l="^",m=0,n=this.segments=[],o=e?e.params:{},p=this.params=e?e.params.$$new():new O.ParamSet,q=[];
this.source=a;for(var r,s,t;(i=j.exec(a))&&(r=h(i,!1),!(r.segment.indexOf("?")>=0));)s=f(r.id,r.type,r.cfg,"path"),l+=g(r.segment,s.type.pattern.source,s.squash),n.push(r.segment),m=j.lastIndex;t=a.substring(m);var u=t.indexOf("?");if(u>=0){var v=this.sourceSearch=t.substring(u);if(t=t.substring(0,u),this.sourcePath=a.substring(0,m+u),v.length>0)for(m=0;i=k.exec(v);)r=h(i,!0),s=f(r.id,r.type,r.cfg,"search"),m=j.lastIndex}else this.sourcePath=a,this.sourceSearch="";l+=g(t)+(b.strict===!1?"/?":"")+"$",n.push(t),this.regexp=new RegExp(l,b.caseInsensitive?"i":c),this.prefix=n[0],this.$$paramNames=q}function r(a){M(this,a)}function s(){function a(a){return null!=a?a.toString().replace(/\//g,"%2F"):a}function e(a){return null!=a?a.toString().replace(/%2F/g,"/"):a}function f(a){return this.pattern.test(a)}function i(){return{strict:t,caseInsensitive:p}}function j(a){return H(a)||K(a)&&H(a[a.length-1])}function k(){for(;x.length;){var a=x.shift();if(a.pattern)throw new Error("You cannot override a type's .pattern at runtime.");b.extend(v[a.name],o.invoke(a.def))}}function l(a){M(this,a||{})}O=this;var o,p=!1,t=!0,u=!1,v={},w=!0,x=[],y={string:{encode:a,decode:e,is:f,pattern:/[^\/]*/},"int":{encode:a,decode:function(a){return parseInt(a,10)},is:function(a){return G(a)&&this.decode(a.toString())===a},pattern:/\d+/},bool:{encode:function(a){return a?1:0},decode:function(a){return 0!==parseInt(a,10)},is:function(a){return a===!0||a===!1},pattern:/0|1/},date:{encode:function(a){return this.is(a)?[a.getFullYear(),("0"+(a.getMonth()+1)).slice(-2),("0"+a.getDate()).slice(-2)].join("-"):c},decode:function(a){if(this.is(a))return a;var b=this.capture.exec(a);return b?new Date(b[1],b[2]-1,b[3]):c},is:function(a){return a instanceof Date&&!isNaN(a.valueOf())},equals:function(a,b){return this.is(a)&&this.is(b)&&a.toISOString()===b.toISOString()},pattern:/[0-9]{4}-(?:0[1-9]|1[0-2])-(?:0[1-9]|[1-2][0-9]|3[0-1])/,capture:/([0-9]{4})-(0[1-9]|1[0-2])-(0[1-9]|[1-2][0-9]|3[0-1])/},json:{encode:b.toJson,decode:b.fromJson,is:b.isObject,equals:b.equals,pattern:/[^\/]*/},any:{encode:b.identity,decode:b.identity,is:b.identity,equals:b.equals,pattern:/.*/}};s.$$getDefaultValue=function(a){if(!j(a.value))return a.value;if(!o)throw new Error("Injectable functions cannot be called at configuration time");return o.invoke(a.value)},this.caseInsensitive=function(a){return G(a)&&(p=a),p},this.strictMode=function(a){return G(a)&&(t=a),t},this.defaultSquashPolicy=function(a){if(!G(a))return u;if(a!==!0&&a!==!1&&!I(a))throw new Error("Invalid squash policy: "+a+". Valid policies: false, true, arbitrary-string");return u=a,a},this.compile=function(a,b){return new q(a,M(i(),b))},this.isMatcher=function(a){if(!J(a))return!1;var b=!0;return L(q.prototype,function(c,d){H(c)&&(b=b&&G(a[d])&&H(a[d]))}),b},this.type=function(a,b,c){if(!G(b))return v[a];if(v.hasOwnProperty(a))throw new Error("A type named '"+a+"' has already been defined.");return v[a]=new r(M({name:a},b)),c&&(x.push({name:a,def:c}),w||k()),this},L(y,function(a,b){v[b]=new r(M({name:b},a))}),v=d(v,{}),this.$get=["$injector",function(a){return o=a,w=!1,k(),L(y,function(a,b){v[b]||(v[b]=new r(a))}),this}],this.Param=function(a,b,d,e){function f(a){var b=J(a)?g(a):[],c=-1===h(b,"value")&&-1===h(b,"type")&&-1===h(b,"squash")&&-1===h(b,"array");return c&&(a={value:a}),a.$$fn=j(a.value)?a.value:function(){return a.value},a}function i(b,c,d){if(b.type&&c)throw new Error("Param '"+a+"' has two type configurations.");return c?c:b.type?b.type instanceof r?b.type:new r(b.type):"config"===d?v.any:v.string}function k(){var b={array:"search"===e?"auto":!1},c=a.match(/\[\]$/)?{array:!0}:{};return M(b,c,d).array}function l(a,b){var c=a.squash;if(!b||c===!1)return!1;if(!G(c)||null==c)return u;if(c===!0||I(c))return c;throw new Error("Invalid squash policy: '"+c+"'. Valid policies: false, true, or arbitrary string")}function p(a,b,d,e){var f,g,i=[{from:"",to:d||b?c:""},{from:null,to:d||b?c:""}];return f=K(a.replace)?a.replace:[],I(e)&&f.push({from:e,to:c}),g=n(f,function(a){return a.from}),m(i,function(a){return-1===h(g,a.from)}).concat(f)}function q(){if(!o)throw new Error("Injectable functions cannot be called at configuration time");return o.invoke(d.$$fn)}function s(a){function b(a){return function(b){return b.from===a}}function c(a){var c=n(m(w.replace,b(a)),function(a){return a.to});return c.length?c[0]:a}return a=c(a),G(a)?w.type.decode(a):q()}function t(){return"{Param:"+a+" "+b+" squash: '"+z+"' optional: "+y+"}"}var w=this;d=f(d),b=i(d,b,e);var x=k();b=x?b.$asArray(x,"search"===e):b,"string"!==b.name||x||"path"!==e||d.value!==c||(d.value="");var y=d.value!==c,z=l(d,y),A=p(d,x,y,z);M(this,{id:a,type:b,location:e,array:x,squash:z,replace:A,isOptional:y,value:s,dynamic:c,config:d,toString:t})},l.prototype={$$new:function(){return d(this,M(new l,{$$parent:this}))},$$keys:function(){for(var a=[],b=[],c=this,d=g(l.prototype);c;)b.push(c),c=c.$$parent;return b.reverse(),L(b,function(b){L(g(b),function(b){-1===h(a,b)&&-1===h(d,b)&&a.push(b)})}),a},$$values:function(a){var b={},c=this;return L(c.$$keys(),function(d){b[d]=c[d].value(a&&a[d])}),b},$$equals:function(a,b){var c=!0,d=this;return L(d.$$keys(),function(e){var f=a&&a[e],g=b&&b[e];d[e].type.equals(f,g)||(c=!1)}),c},$$validates:function(a){var b,c,d,e=!0,f=this;return L(this.$$keys(),function(g){d=f[g],c=a[g],b=!c&&d.isOptional,e=e&&(b||!!d.type.is(c))}),e},$$parent:c},this.ParamSet=l}function t(a,d){function e(a){var b=/^\^((?:\\[^a-zA-Z0-9]|[^\\\[\]\^$*+?.()|{}]+)*)/.exec(a.source);return null!=b?b[1].replace(/\\(.)/g,"$1"):""}function f(a,b){return a.replace(/\$(\$|\d{1,2})/,function(a,c){return b["$"===c?0:Number(c)]})}function g(a,b,c){if(!c)return!1;var d=a.invoke(b,b,{$match:c});return G(d)?d:!0}function h(d,e,f,g){function h(a,b,c){return"/"===p?a:b?p.slice(0,-1)+a:c?p.slice(1)+a:a}function m(a){function b(a){var b=a(f,d);return b?(I(b)&&d.replace().url(b),!0):!1}if(!a||!a.defaultPrevented){var e=o&&d.url()===o;if(o=c,e)return!0;var g,h=j.length;for(g=0;h>g;g++)if(b(j[g]))return;k&&b(k)}}function n(){return i=i||e.$on("$locationChangeSuccess",m)}var o,p=g.baseHref(),q=d.url();return l||n(),{sync:function(){m()},listen:function(){return n()},update:function(a){return a?void(q=d.url()):void(d.url()!==q&&(d.url(q),d.replace()))},push:function(a,b,e){d.url(a.format(b||{})),o=e&&e.$$avoidResync?d.url():c,e&&e.replace&&d.replace()},href:function(c,e,f){if(!c.validates(e))return null;var g=a.html5Mode();b.isObject(g)&&(g=g.enabled);var i=c.format(e);if(f=f||{},g||null===i||(i="#"+a.hashPrefix()+i),i=h(i,g,f.absolute),!f.absolute||!i)return i;var j=!g&&i?"/":"",k=d.port();return k=80===k||443===k?"":":"+k,[d.protocol(),"://",d.host(),k,j,i].join("")}}}var i,j=[],k=null,l=!1;this.rule=function(a){if(!H(a))throw new Error("'rule' must be a function");return j.push(a),this},this.otherwise=function(a){if(I(a)){var b=a;a=function(){return b}}else if(!H(a))throw new Error("'rule' must be a function");return k=a,this},this.when=function(a,b){var c,h=I(b);if(I(a)&&(a=d.compile(a)),!h&&!H(b)&&!K(b))throw new Error("invalid 'handler' in when()");var i={matcher:function(a,b){return h&&(c=d.compile(b),b=["$match",function(a){return c.format(a)}]),M(function(c,d){return g(c,b,a.exec(d.path(),d.search()))},{prefix:I(a.prefix)?a.prefix:""})},regex:function(a,b){if(a.global||a.sticky)throw new Error("when() RegExp must not be global or sticky");return h&&(c=b,b=["$match",function(a){return f(c,a)}]),M(function(c,d){return g(c,b,a.exec(d.path()))},{prefix:e(a)})}},j={matcher:d.isMatcher(a),regex:a instanceof RegExp};for(var k in j)if(j[k])return this.rule(i[k](a,b));throw new Error("invalid 'what' in when()")},this.deferIntercept=function(a){a===c&&(a=!0),l=a},this.$get=h,h.$inject=["$location","$rootScope","$injector","$browser"]}function u(a,e){function f(a){return 0===a.indexOf(".")||0===a.indexOf("^")}function l(a,b){if(!a)return c;var d=I(a),e=d?a:a.name,g=f(e);if(g){if(!b)throw new Error("No reference point given for path '"+e+"'");b=l(b);for(var h=e.split("."),i=0,j=h.length,k=b;j>i;i++)if(""!==h[i]||0!==i){if("^"!==h[i])break;if(!k.parent)throw new Error("Path '"+e+"' not valid for state '"+b.name+"'");k=k.parent}else k=b;h=h.slice(i).join("."),e=k.name+(k.name&&h?".":"")+h}var m=y[e];return!m||!d&&(d||m!==a&&m.self!==a)?c:m}function m(a,b){z[a]||(z[a]=[]),z[a].push(b)}function o(a){for(var b=z[a]||[];b.length;)p(b.shift())}function p(b){b=d(b,{self:b,resolve:b.resolve||{},toString:function(){return this.name}});var c=b.name;if(!I(c)||c.indexOf("@")>=0)throw new Error("State must have a valid name");if(y.hasOwnProperty(c))throw new Error("State '"+c+"'' is already defined");var e=-1!==c.indexOf(".")?c.substring(0,c.lastIndexOf(".")):I(b.parent)?b.parent:J(b.parent)&&I(b.parent.name)?b.parent.name:"";if(e&&!y[e])return m(e,b.self);for(var f in B)H(B[f])&&(b[f]=B[f](b,B.$delegates[f]));return y[c]=b,!b[A]&&b.url&&a.when(b.url,["$match","$stateParams",function(a,c){x.$current.navigable==b&&j(a,c)||x.transitionTo(b,a,{inherit:!0,location:!1})}]),o(c),b}function q(a){return a.indexOf("*")>-1}function r(a){var b=a.split("."),c=x.$current.name.split(".");if("**"===b[0]&&(c=c.slice(h(c,b[1])),c.unshift("**")),"**"===b[b.length-1]&&(c.splice(h(c,b[b.length-2])+1,Number.MAX_VALUE),c.push("**")),b.length!=c.length)return!1;for(var d=0,e=b.length;e>d;d++)"*"===b[d]&&(c[d]="*");return c.join("")===b.join("")}function s(a,b){return I(a)&&!G(b)?B[a]:H(b)&&I(a)?(B[a]&&!B.$delegates[a]&&(B.$delegates[a]=B[a]),B[a]=b,this):this}function t(a,b){return J(a)?b=a:b.name=a,p(b),this}function u(a,e,f,h,m,o,p){function s(b,c,d,f){var g=a.$broadcast("$stateNotFound",b,c,d);if(g.defaultPrevented)return p.update(),B;if(!g.retry)return null;if(f.$retry)return p.update(),C;var h=x.transition=e.when(g.retry);return h.then(function(){return h!==x.transition?u:(b.options.$retry=!0,x.transitionTo(b.to,b.toParams,b.options))},function(){return B}),p.update(),h}function t(a,c,d,g,i,j){var l=d?c:k(a.params.$$keys(),c),n={$stateParams:l};i.resolve=m.resolve(a.resolve,n,i.resolve,a);var o=[i.resolve.then(function(a){i.globals=a})];return g&&o.push(g),L(a.views,function(c,d){var e=c.resolve&&c.resolve!==a.resolve?c.resolve:{};e.$template=[function(){return f.load(d,{view:c,locals:n,params:l,notify:j.notify})||""}],o.push(m.resolve(e,n,i.resolve,a).then(function(f){if(H(c.controllerProvider)||K(c.controllerProvider)){var g=b.extend({},e,n);f.$$controller=h.invoke(c.controllerProvider,null,g)}else f.$$controller=c.controller;f.$$state=a,f.$$controllerAs=c.controllerAs,i[d]=f}))}),e.all(o).then(function(){return i})}var u=e.reject(new Error("transition superseded")),z=e.reject(new Error("transition prevented")),B=e.reject(new Error("transition aborted")),C=e.reject(new Error("transition failed"));return w.locals={resolve:null,globals:{$stateParams:{}}},x={params:{},current:w.self,$current:w,transition:null},x.reload=function(){return x.transitionTo(x.current,o,{reload:!0,inherit:!1,notify:!0})},x.go=function(a,b,c){return x.transitionTo(a,b,M({inherit:!0,relative:x.$current},c))},x.transitionTo=function(b,c,f){c=c||{},f=M({location:!0,inherit:!1,relative:null,notify:!0,reload:!1,$retry:!1},f||{});var g,j=x.$current,m=x.params,n=j.path,q=l(b,f.relative);if(!G(q)){var r={to:b,toParams:c,options:f},y=s(r,j.self,m,f);if(y)return y;if(b=r.to,c=r.toParams,f=r.options,q=l(b,f.relative),!G(q)){if(!f.relative)throw new Error("No such state '"+b+"'");throw new Error("Could not resolve '"+b+"' from state '"+f.relative+"'")}}if(q[A])throw new Error("Cannot transition to abstract state '"+b+"'");if(f.inherit&&(c=i(o,c||{},x.$current,q)),!q.params.$$validates(c))return C;c=q.params.$$values(c),b=q;var B=b.path,D=0,E=B[D],F=w.locals,H=[];if(!f.reload)for(;E&&E===n[D]&&E.ownParams.$$equals(c,m);)F=H[D]=E.locals,D++,E=B[D];if(v(b,j,F,f))return b.self.reloadOnSearch!==!1&&p.update(),x.transition=null,e.when(x.current);if(c=k(b.params.$$keys(),c||{}),f.notify&&a.$broadcast("$stateChangeStart",b.self,c,j.self,m).defaultPrevented)return p.update(),z;for(var I=e.when(F),J=D;J<B.length;J++,E=B[J])F=H[J]=d(F),I=t(E,c,E===b,I,F,f);var K=x.transition=I.then(function(){var d,e,g;if(x.transition!==K)return u;for(d=n.length-1;d>=D;d--)g=n[d],g.self.onExit&&h.invoke(g.self.onExit,g.self,g.locals.globals),g.locals=null;for(d=D;d<B.length;d++)e=B[d],e.locals=H[d],e.self.onEnter&&h.invoke(e.self.onEnter,e.self,e.locals.globals);return x.transition!==K?u:(x.$current=b,x.current=b.self,x.params=c,N(x.params,o),x.transition=null,f.location&&b.navigable&&p.push(b.navigable.url,b.navigable.locals.globals.$stateParams,{$$avoidResync:!0,replace:"replace"===f.location}),f.notify&&a.$broadcast("$stateChangeSuccess",b.self,c,j.self,m),p.update(!0),x.current)},function(d){return x.transition!==K?u:(x.transition=null,g=a.$broadcast("$stateChangeError",b.self,c,j.self,m,d),g.defaultPrevented||p.update(),e.reject(d))});return K},x.is=function(a,b,d){d=M({relative:x.$current},d||{});var e=l(a,d.relative);return G(e)?x.$current!==e?!1:b?j(e.params.$$values(b),o):!0:c},x.includes=function(a,b,d){if(d=M({relative:x.$current},d||{}),I(a)&&q(a)){if(!r(a))return!1;a=x.$current.name}var e=l(a,d.relative);return G(e)?G(x.$current.includes[e.name])?b?j(e.params.$$values(b),o,g(b)):!0:!1:c},x.href=function(a,b,d){d=M({lossy:!0,inherit:!0,absolute:!1,relative:x.$current},d||{});var e=l(a,d.relative);if(!G(e))return null;d.inherit&&(b=i(o,b||{},x.$current,e));var f=e&&d.lossy?e.navigable:e;return f&&f.url!==c&&null!==f.url?p.href(f.url,k(e.params.$$keys(),b||{}),{absolute:d.absolute}):null},x.get=function(a,b){if(0===arguments.length)return n(g(y),function(a){return y[a].self});var c=l(a,b||x.$current);return c&&c.self?c.self:null},x}function v(a,b,c,d){return a!==b||(c!==b.locals||d.reload)&&a.self.reloadOnSearch!==!1?void 0:!0}var w,x,y={},z={},A="abstract",B={parent:function(a){if(G(a.parent)&&a.parent)return l(a.parent);var b=/^(.+)\.[^.]+$/.exec(a.name);return b?l(b[1]):w},data:function(a){return a.parent&&a.parent.data&&(a.data=a.self.data=M({},a.parent.data,a.data)),a.data},url:function(a){var b=a.url,c={params:a.params||{}};if(I(b))return"^"==b.charAt(0)?e.compile(b.substring(1),c):(a.parent.navigable||w).url.concat(b,c);if(!b||e.isMatcher(b))return b;throw new Error("Invalid url '"+b+"' in state '"+a+"'")},navigable:function(a){return a.url?a:a.parent?a.parent.navigable:null},ownParams:function(a){var b=a.url&&a.url.params||new O.ParamSet;return L(a.params||{},function(a,c){b[c]||(b[c]=new O.Param(c,null,a,"config"))}),b},params:function(a){return a.parent&&a.parent.params?M(a.parent.params.$$new(),a.ownParams):new O.ParamSet},views:function(a){var b={};return L(G(a.views)?a.views:{"":a},function(c,d){d.indexOf("@")<0&&(d+="@"+a.parent.name),b[d]=c}),b},path:function(a){return a.parent?a.parent.path.concat(a):[]},includes:function(a){var b=a.parent?M({},a.parent.includes):{};return b[a.name]=!0,b},$delegates:{}};w=p({name:"",url:"^",views:null,"abstract":!0}),w.navigable=null,this.decorator=s,this.state=t,this.$get=u,u.$inject=["$rootScope","$q","$view","$injector","$resolve","$stateParams","$urlRouter","$location","$urlMatcherFactory"]}function v(){function a(a,b){return{load:function(c,d){var e,f={template:null,controller:null,view:null,locals:null,notify:!0,async:!0,params:{}};return d=M(f,d),d.view&&(e=b.fromConfig(d.view,d.params,d.locals)),e&&d.notify&&a.$broadcast("$viewContentLoading",d),e}}}this.$get=a,a.$inject=["$rootScope","$templateFactory"]}function w(){var a=!1;this.useAnchorScroll=function(){a=!0},this.$get=["$anchorScroll","$timeout",function(b,c){return a?b:function(a){c(function(){a[0].scrollIntoView()},0,!1)}}]}function x(a,c,d,e){function f(){return c.has?function(a){return c.has(a)?c.get(a):null}:function(a){try{return c.get(a)}catch(b){return null}}}function g(a,b){var c=function(){return{enter:function(a,b,c){b.after(a),c()},leave:function(a,b){a.remove(),b()}}};if(j)return{enter:function(a,b,c){var d=j.enter(a,null,b,c);d&&d.then&&d.then(c)},leave:function(a,b){var c=j.leave(a,b);c&&c.then&&c.then(b)}};if(i){var d=i&&i(b,a);return{enter:function(a,b,c){d.enter(a,null,b),c()},leave:function(a,b){d.leave(a),b()}}}return c()}var h=f(),i=h("$animator"),j=h("$animate"),k={restrict:"ECA",terminal:!0,priority:400,transclude:"element",compile:function(c,f,h){return function(c,f,i){function j(){l&&(l.remove(),l=null),n&&(n.$destroy(),n=null),m&&(r.leave(m,function(){l=null}),l=m,m=null)}function k(g){var k,l=z(c,i,f,e),s=l&&a.$current&&a.$current.locals[l];if(g||s!==o){k=c.$new(),o=a.$current.locals[l];var t=h(k,function(a){r.enter(a,f,function(){n&&n.$emit("$viewContentAnimationEnded"),(b.isDefined(q)&&!q||c.$eval(q))&&d(a)}),j()});m=t,n=k,n.$emit("$viewContentLoaded"),n.$eval(p)}}var l,m,n,o,p=i.onload||"",q=i.autoscroll,r=g(i,c);c.$on("$stateChangeSuccess",function(){k(!1)}),c.$on("$viewContentLoading",function(){k(!1)}),k(!0)}}};return k}function y(a,b,c,d){return{restrict:"ECA",priority:-400,compile:function(e){var f=e.html();return function(e,g,h){var i=c.$current,j=z(e,h,g,d),k=i&&i.locals[j];if(k){g.data("$uiView",{name:j,state:k.$$state}),g.html(k.$template?k.$template:f);var l=a(g.contents());if(k.$$controller){k.$scope=e;var m=b(k.$$controller,k);k.$$controllerAs&&(e[k.$$controllerAs]=m),g.data("$ngControllerController",m),g.children().data("$ngControllerController",m)}l(e)}}}}}function z(a,b,c,d){var e=d(b.uiView||b.name||"")(a),f=c.inheritedData("$uiView");return e.indexOf("@")>=0?e:e+"@"+(f?f.state.name:"")}function A(a,b){var c,d=a.match(/^\s*({[^}]*})\s*$/);if(d&&(a=b+"("+d[1]+")"),c=a.replace(/\n/g," ").match(/^([^(]+?)\s*(\((.*)\))?$/),!c||4!==c.length)throw new Error("Invalid state ref '"+a+"'");return{state:c[1],paramExpr:c[3]||null}}function B(a){var b=a.parent().inheritedData("$uiView");return b&&b.state&&b.state.name?b.state:void 0}function C(a,c){var d=["location","inherit","reload"];return{restrict:"A",require:["?^uiSrefActive","?^uiSrefActiveEq"],link:function(e,f,g,h){var i=A(g.uiSref,a.current.name),j=null,k=B(f)||a.$current,l=null,m="A"===f.prop("tagName"),n="FORM"===f[0].nodeName,o=n?"action":"href",p=!0,q={relative:k,inherit:!0},r=e.$eval(g.uiSrefOpts)||{};b.forEach(d,function(a){a in r&&(q[a]=r[a])});var s=function(c){if(c&&(j=b.copy(c)),p){l=a.href(i.state,j,q);var d=h[1]||h[0];return d&&d.$$setStateInfo(i.state,j),null===l?(p=!1,!1):void g.$set(o,l)}};i.paramExpr&&(e.$watch(i.paramExpr,function(a){a!==j&&s(a)},!0),j=b.copy(e.$eval(i.paramExpr))),s(),n||f.bind("click",function(b){var d=b.which||b.button;if(!(d>1||b.ctrlKey||b.metaKey||b.shiftKey||f.attr("target"))){var e=c(function(){a.go(i.state,j,q)});b.preventDefault();var g=m&&!l?1:0;b.preventDefault=function(){g--<=0&&c.cancel(e)}}})}}}function D(a,b,c){return{restrict:"A",controller:["$scope","$element","$attrs",function(b,d,e){function f(){g()?d.addClass(j):d.removeClass(j)}function g(){return"undefined"!=typeof e.uiSrefActiveEq?h&&a.is(h.name,i):h&&a.includes(h.name,i)}var h,i,j;j=c(e.uiSrefActiveEq||e.uiSrefActive||"",!1)(b),this.$$setStateInfo=function(b,c){h=a.get(b,B(d)),i=c,f()},b.$on("$stateChangeSuccess",f)}]}}function E(a){var b=function(b){return a.is(b)};return b.$stateful=!0,b}function F(a){var b=function(b){return a.includes(b)};return b.$stateful=!0,b}var G=b.isDefined,H=b.isFunction,I=b.isString,J=b.isObject,K=b.isArray,L=b.forEach,M=b.extend,N=b.copy;b.module("ui.router.util",["ng"]),b.module("ui.router.router",["ui.router.util"]),b.module("ui.router.state",["ui.router.router","ui.router.util"]),b.module("ui.router",["ui.router.state"]),b.module("ui.router.compat",["ui.router"]),o.$inject=["$q","$injector"],b.module("ui.router.util").service("$resolve",o),p.$inject=["$http","$templateCache","$injector"],b.module("ui.router.util").service("$templateFactory",p);var O;q.prototype.concat=function(a,b){var c={caseInsensitive:O.caseInsensitive(),strict:O.strictMode(),squash:O.defaultSquashPolicy()};return new q(this.sourcePath+a+this.sourceSearch,M(c,b),this)},q.prototype.toString=function(){return this.source},q.prototype.exec=function(a,b){function c(a){function b(a){return a.split("").reverse().join("")}function c(a){return a.replace(/\\-/,"-")}var d=b(a).split(/-(?!\\)/),e=n(d,b);return n(e,c).reverse()}var d=this.regexp.exec(a);if(!d)return null;b=b||{};var e,f,g,h=this.parameters(),i=h.length,j=this.segments.length-1,k={};if(j!==d.length-1)throw new Error("Unbalanced capture group in route '"+this.source+"'");for(e=0;j>e;e++){g=h[e];var l=this.params[g],m=d[e+1];for(f=0;f<l.replace;f++)l.replace[f].from===m&&(m=l.replace[f].to);m&&l.array===!0&&(m=c(m)),k[g]=l.value(m)}for(;i>e;e++)g=h[e],k[g]=this.params[g].value(b[g]);return k},q.prototype.parameters=function(a){return G(a)?this.params[a]||null:this.$$paramNames},q.prototype.validates=function(a){return this.params.$$validates(a)},q.prototype.format=function(a){function b(a){return encodeURIComponent(a).replace(/-/g,function(a){return"%5C%"+a.charCodeAt(0).toString(16).toUpperCase()})}a=a||{};var c=this.segments,d=this.parameters(),e=this.params;if(!this.validates(a))return null;var f,g=!1,h=c.length-1,i=d.length,j=c[0];for(f=0;i>f;f++){var k=h>f,l=d[f],m=e[l],o=m.value(a[l]),p=m.isOptional&&m.type.equals(m.value(),o),q=p?m.squash:!1,r=m.type.encode(o);if(k){var s=c[f+1];if(q===!1)null!=r&&(j+=K(r)?n(r,b).join("-"):encodeURIComponent(r)),j+=s;else if(q===!0){var t=j.match(/\/$/)?/\/?(.*)/:/(.*)/;j+=s.match(t)[1]}else I(q)&&(j+=q+s)}else{if(null==r||p&&q!==!1)continue;K(r)||(r=[r]),r=n(r,encodeURIComponent).join("&"+l+"="),j+=(g?"&":"?")+(l+"="+r),g=!0}}return j},r.prototype.is=function(){return!0},r.prototype.encode=function(a){return a},r.prototype.decode=function(a){return a},r.prototype.equals=function(a,b){return a==b},r.prototype.$subPattern=function(){var a=this.pattern.toString();return a.substr(1,a.length-2)},r.prototype.pattern=/.*/,r.prototype.toString=function(){return"{Type:"+this.name+"}"},r.prototype.$asArray=function(a,b){function d(a,b){function d(a,b){return function(){return a[b].apply(a,arguments)}}function e(a){return K(a)?a:G(a)?[a]:[]}function f(a){switch(a.length){case 0:return c;case 1:return"auto"===b?a[0]:a;default:return a}}function g(a){return!a}function h(a,b){return function(c){c=e(c);var d=n(c,a);return b===!0?0===m(d,g).length:f(d)}}function i(a){return function(b,c){var d=e(b),f=e(c);if(d.length!==f.length)return!1;for(var g=0;g<d.length;g++)if(!a(d[g],f[g]))return!1;return!0}}this.encode=h(d(a,"encode")),this.decode=h(d(a,"decode")),this.is=h(d(a,"is"),!0),this.equals=i(d(a,"equals")),this.pattern=a.pattern,this.$arrayMode=b}if(!a)return this;if("auto"===a&&!b)throw new Error("'auto' array mode is for query parameters only");return new d(this,a)},b.module("ui.router.util").provider("$urlMatcherFactory",s),b.module("ui.router.util").run(["$urlMatcherFactory",function(){}]),t.$inject=["$locationProvider","$urlMatcherFactoryProvider"],b.module("ui.router.router").provider("$urlRouter",t),u.$inject=["$urlRouterProvider","$urlMatcherFactoryProvider"],b.module("ui.router.state").value("$stateParams",{}).provider("$state",u),v.$inject=[],b.module("ui.router.state").provider("$view",v),b.module("ui.router.state").provider("$uiViewScroll",w),x.$inject=["$state","$injector","$uiViewScroll","$interpolate"],y.$inject=["$compile","$controller","$state","$interpolate"],b.module("ui.router.state").directive("uiView",x),b.module("ui.router.state").directive("uiView",y),C.$inject=["$state","$timeout"],D.$inject=["$state","$stateParams","$interpolate"],b.module("ui.router.state").directive("uiSref",C).directive("uiSrefActive",D).directive("uiSrefActiveEq",D),E.$inject=["$state"],F.$inject=["$state"],b.module("ui.router.state").filter("isState",E).filter("includedByState",F)}(window,window.angular),"undefined"==typeof jQuery)throw new Error("Bootstrap's JavaScript requires jQuery");+function(a){"use strict";var b=a.fn.jquery.split(" ")[0].split(".");if(b[0]<2&&b[1]<9||1==b[0]&&9==b[1]&&b[2]<1)throw new Error("Bootstrap's JavaScript requires jQuery version 1.9.1 or higher")}(jQuery),+function(a){"use strict";function b(){var a=document.createElement("bootstrap"),b={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var c in b)if(void 0!==a.style[c])return{end:b[c]};return!1}a.fn.emulateTransitionEnd=function(b){var c=!1,d=this;a(this).one("bsTransitionEnd",function(){c=!0});var e=function(){c||a(d).trigger(a.support.transition.end)};return setTimeout(e,b),this},a(function(){a.support.transition=b(),a.support.transition&&(a.event.special.bsTransitionEnd={bindType:a.support.transition.end,delegateType:a.support.transition.end,handle:function(b){return a(b.target).is(this)?b.handleObj.handler.apply(this,arguments):void 0}})})}(jQuery),+function(a){"use strict";function b(b){return this.each(function(){var c=a(this),e=c.data("bs.alert");e||c.data("bs.alert",e=new d(this)),"string"==typeof b&&e[b].call(c)})}var c='[data-dismiss="alert"]',d=function(b){a(b).on("click",c,this.close)};d.VERSION="3.3.4",d.TRANSITION_DURATION=150,d.prototype.close=function(b){function c(){g.detach().trigger("closed.bs.alert").remove()}var e=a(this),f=e.attr("data-target");f||(f=e.attr("href"),f=f&&f.replace(/.*(?=#[^\s]*$)/,""));var g=a(f);b&&b.preventDefault(),g.length||(g=e.closest(".alert")),g.trigger(b=a.Event("close.bs.alert")),b.isDefaultPrevented()||(g.removeClass("in"),a.support.transition&&g.hasClass("fade")?g.one("bsTransitionEnd",c).emulateTransitionEnd(d.TRANSITION_DURATION):c())};var e=a.fn.alert;a.fn.alert=b,a.fn.alert.Constructor=d,a.fn.alert.noConflict=function(){return a.fn.alert=e,this},a(document).on("click.bs.alert.data-api",c,d.prototype.close)}(jQuery),+function(a){"use strict";function b(b){return this.each(function(){var d=a(this),e=d.data("bs.button"),f="object"==typeof b&&b;e||d.data("bs.button",e=new c(this,f)),"toggle"==b?e.toggle():b&&e.setState(b)})}var c=function(b,d){this.$element=a(b),this.options=a.extend({},c.DEFAULTS,d),this.isLoading=!1};c.VERSION="3.3.4",c.DEFAULTS={loadingText:"loading..."},c.prototype.setState=function(b){var c="disabled",d=this.$element,e=d.is("input")?"val":"html",f=d.data();b+="Text",null==f.resetText&&d.data("resetText",d[e]()),setTimeout(a.proxy(function(){d[e](null==f[b]?this.options[b]:f[b]),"loadingText"==b?(this.isLoading=!0,d.addClass(c).attr(c,c)):this.isLoading&&(this.isLoading=!1,d.removeClass(c).removeAttr(c))},this),0)},c.prototype.toggle=function(){var a=!0,b=this.$element.closest('[data-toggle="buttons"]');if(b.length){var c=this.$element.find("input");"radio"==c.prop("type")&&(c.prop("checked")&&this.$element.hasClass("active")?a=!1:b.find(".active").removeClass("active")),a&&c.prop("checked",!this.$element.hasClass("active")).trigger("change")}else this.$element.attr("aria-pressed",!this.$element.hasClass("active"));a&&this.$element.toggleClass("active")};var d=a.fn.button;a.fn.button=b,a.fn.button.Constructor=c,a.fn.button.noConflict=function(){return a.fn.button=d,this},a(document).on("click.bs.button.data-api",'[data-toggle^="button"]',function(c){var d=a(c.target);d.hasClass("btn")||(d=d.closest(".btn")),b.call(d,"toggle"),c.preventDefault()}).on("focus.bs.button.data-api blur.bs.button.data-api",'[data-toggle^="button"]',function(b){a(b.target).closest(".btn").toggleClass("focus",/^focus(in)?$/.test(b.type))})}(jQuery),+function(a){"use strict";function b(b){return this.each(function(){var d=a(this),e=d.data("bs.carousel"),f=a.extend({},c.DEFAULTS,d.data(),"object"==typeof b&&b),g="string"==typeof b?b:f.slide;e||d.data("bs.carousel",e=new c(this,f)),"number"==typeof b?e.to(b):g?e[g]():f.interval&&e.pause().cycle()})}var c=function(b,c){this.$element=a(b),this.$indicators=this.$element.find(".carousel-indicators"),this.options=c,this.paused=null,this.sliding=null,this.interval=null,this.$active=null,this.$items=null,this.options.keyboard&&this.$element.on("keydown.bs.carousel",a.proxy(this.keydown,this)),"hover"==this.options.pause&&!("ontouchstart"in document.documentElement)&&this.$element.on("mouseenter.bs.carousel",a.proxy(this.pause,this)).on("mouseleave.bs.carousel",a.proxy(this.cycle,this))};c.VERSION="3.3.4",c.TRANSITION_DURATION=600,c.DEFAULTS={interval:5e3,pause:"hover",wrap:!0,keyboard:!0},c.prototype.keydown=function(a){if(!/input|textarea/i.test(a.target.tagName)){switch(a.which){case 37:this.prev();break;case 39:this.next();break;default:return}a.preventDefault()}},c.prototype.cycle=function(b){return b||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(a.proxy(this.next,this),this.options.interval)),this},c.prototype.getItemIndex=function(a){return this.$items=a.parent().children(".item"),this.$items.index(a||this.$active)},c.prototype.getItemForDirection=function(a,b){var c=this.getItemIndex(b),d="prev"==a&&0===c||"next"==a&&c==this.$items.length-1;if(d&&!this.options.wrap)return b;var e="prev"==a?-1:1,f=(c+e)%this.$items.length;return this.$items.eq(f)},c.prototype.to=function(a){var b=this,c=this.getItemIndex(this.$active=this.$element.find(".item.active"));return a>this.$items.length-1||0>a?void 0:this.sliding?this.$element.one("slid.bs.carousel",function(){b.to(a)}):c==a?this.pause().cycle():this.slide(a>c?"next":"prev",this.$items.eq(a))},c.prototype.pause=function(b){return b||(this.paused=!0),this.$element.find(".next, .prev").length&&a.support.transition&&(this.$element.trigger(a.support.transition.end),this.cycle(!0)),this.interval=clearInterval(this.interval),this},c.prototype.next=function(){return this.sliding?void 0:this.slide("next")},c.prototype.prev=function(){return this.sliding?void 0:this.slide("prev")},c.prototype.slide=function(b,d){var e=this.$element.find(".item.active"),f=d||this.getItemForDirection(b,e),g=this.interval,h="next"==b?"left":"right",i=this;if(f.hasClass("active"))return this.sliding=!1;var j=f[0],k=a.Event("slide.bs.carousel",{relatedTarget:j,direction:h});if(this.$element.trigger(k),!k.isDefaultPrevented()){if(this.sliding=!0,g&&this.pause(),this.$indicators.length){this.$indicators.find(".active").removeClass("active");var l=a(this.$indicators.children()[this.getItemIndex(f)]);l&&l.addClass("active")}var m=a.Event("slid.bs.carousel",{relatedTarget:j,direction:h});return a.support.transition&&this.$element.hasClass("slide")?(f.addClass(b),f[0].offsetWidth,e.addClass(h),f.addClass(h),e.one("bsTransitionEnd",function(){f.removeClass([b,h].join(" ")).addClass("active"),e.removeClass(["active",h].join(" ")),i.sliding=!1,setTimeout(function(){i.$element.trigger(m)},0)}).emulateTransitionEnd(c.TRANSITION_DURATION)):(e.removeClass("active"),f.addClass("active"),this.sliding=!1,this.$element.trigger(m)),g&&this.cycle(),this}};var d=a.fn.carousel;a.fn.carousel=b,a.fn.carousel.Constructor=c,a.fn.carousel.noConflict=function(){return a.fn.carousel=d,this};var e=function(c){var d,e=a(this),f=a(e.attr("data-target")||(d=e.attr("href"))&&d.replace(/.*(?=#[^\s]+$)/,""));if(f.hasClass("carousel")){var g=a.extend({},f.data(),e.data()),h=e.attr("data-slide-to");h&&(g.interval=!1),b.call(f,g),h&&f.data("bs.carousel").to(h),c.preventDefault()}};a(document).on("click.bs.carousel.data-api","[data-slide]",e).on("click.bs.carousel.data-api","[data-slide-to]",e),a(window).on("load",function(){a('[data-ride="carousel"]').each(function(){var c=a(this);b.call(c,c.data())})})}(jQuery),+function(a){"use strict";function b(b){var c,d=b.attr("data-target")||(c=b.attr("href"))&&c.replace(/.*(?=#[^\s]+$)/,"");return a(d)}function c(b){return this.each(function(){var c=a(this),e=c.data("bs.collapse"),f=a.extend({},d.DEFAULTS,c.data(),"object"==typeof b&&b);!e&&f.toggle&&/show|hide/.test(b)&&(f.toggle=!1),e||c.data("bs.collapse",e=new d(this,f)),"string"==typeof b&&e[b]()})}var d=function(b,c){this.$element=a(b),this.options=a.extend({},d.DEFAULTS,c),this.$trigger=a('[data-toggle="collapse"][href="#'+b.id+'"],[data-toggle="collapse"][data-target="#'+b.id+'"]'),
this.transitioning=null,this.options.parent?this.$parent=this.getParent():this.addAriaAndCollapsedClass(this.$element,this.$trigger),this.options.toggle&&this.toggle()};d.VERSION="3.3.4",d.TRANSITION_DURATION=350,d.DEFAULTS={toggle:!0},d.prototype.dimension=function(){var a=this.$element.hasClass("width");return a?"width":"height"},d.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var b,e=this.$parent&&this.$parent.children(".panel").children(".in, .collapsing");if(!(e&&e.length&&(b=e.data("bs.collapse"),b&&b.transitioning))){var f=a.Event("show.bs.collapse");if(this.$element.trigger(f),!f.isDefaultPrevented()){e&&e.length&&(c.call(e,"hide"),b||e.data("bs.collapse",null));var g=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[g](0).attr("aria-expanded",!0),this.$trigger.removeClass("collapsed").attr("aria-expanded",!0),this.transitioning=1;var h=function(){this.$element.removeClass("collapsing").addClass("collapse in")[g](""),this.transitioning=0,this.$element.trigger("shown.bs.collapse")};if(!a.support.transition)return h.call(this);var i=a.camelCase(["scroll",g].join("-"));this.$element.one("bsTransitionEnd",a.proxy(h,this)).emulateTransitionEnd(d.TRANSITION_DURATION)[g](this.$element[0][i])}}}},d.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var b=a.Event("hide.bs.collapse");if(this.$element.trigger(b),!b.isDefaultPrevented()){var c=this.dimension();this.$element[c](this.$element[c]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse in").attr("aria-expanded",!1),this.$trigger.addClass("collapsed").attr("aria-expanded",!1),this.transitioning=1;var e=function(){this.transitioning=0,this.$element.removeClass("collapsing").addClass("collapse").trigger("hidden.bs.collapse")};return a.support.transition?void this.$element[c](0).one("bsTransitionEnd",a.proxy(e,this)).emulateTransitionEnd(d.TRANSITION_DURATION):e.call(this)}}},d.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()},d.prototype.getParent=function(){return a(this.options.parent).find('[data-toggle="collapse"][data-parent="'+this.options.parent+'"]').each(a.proxy(function(c,d){var e=a(d);this.addAriaAndCollapsedClass(b(e),e)},this)).end()},d.prototype.addAriaAndCollapsedClass=function(a,b){var c=a.hasClass("in");a.attr("aria-expanded",c),b.toggleClass("collapsed",!c).attr("aria-expanded",c)};var e=a.fn.collapse;a.fn.collapse=c,a.fn.collapse.Constructor=d,a.fn.collapse.noConflict=function(){return a.fn.collapse=e,this},a(document).on("click.bs.collapse.data-api",'[data-toggle="collapse"]',function(d){var e=a(this);e.attr("data-target")||d.preventDefault();var f=b(e),g=f.data("bs.collapse"),h=g?"toggle":e.data();c.call(f,h)})}(jQuery),+function(a){"use strict";function b(b){b&&3===b.which||(a(e).remove(),a(f).each(function(){var d=a(this),e=c(d),f={relatedTarget:this};e.hasClass("open")&&(e.trigger(b=a.Event("hide.bs.dropdown",f)),b.isDefaultPrevented()||(d.attr("aria-expanded","false"),e.removeClass("open").trigger("hidden.bs.dropdown",f)))}))}function c(b){var c=b.attr("data-target");c||(c=b.attr("href"),c=c&&/#[A-Za-z]/.test(c)&&c.replace(/.*(?=#[^\s]*$)/,""));var d=c&&a(c);return d&&d.length?d:b.parent()}function d(b){return this.each(function(){var c=a(this),d=c.data("bs.dropdown");d||c.data("bs.dropdown",d=new g(this)),"string"==typeof b&&d[b].call(c)})}var e=".dropdown-backdrop",f='[data-toggle="dropdown"]',g=function(b){a(b).on("click.bs.dropdown",this.toggle)};g.VERSION="3.3.4",g.prototype.toggle=function(d){var e=a(this);if(!e.is(".disabled, :disabled")){var f=c(e),g=f.hasClass("open");if(b(),!g){"ontouchstart"in document.documentElement&&!f.closest(".navbar-nav").length&&a('<div class="dropdown-backdrop"/>').insertAfter(a(this)).on("click",b);var h={relatedTarget:this};if(f.trigger(d=a.Event("show.bs.dropdown",h)),d.isDefaultPrevented())return;e.trigger("focus").attr("aria-expanded","true"),f.toggleClass("open").trigger("shown.bs.dropdown",h)}return!1}},g.prototype.keydown=function(b){if(/(38|40|27|32)/.test(b.which)&&!/input|textarea/i.test(b.target.tagName)){var d=a(this);if(b.preventDefault(),b.stopPropagation(),!d.is(".disabled, :disabled")){var e=c(d),g=e.hasClass("open");if(!g&&27!=b.which||g&&27==b.which)return 27==b.which&&e.find(f).trigger("focus"),d.trigger("click");var h=" li:not(.disabled):visible a",i=e.find('[role="menu"]'+h+', [role="listbox"]'+h);if(i.length){var j=i.index(b.target);38==b.which&&j>0&&j--,40==b.which&&j<i.length-1&&j++,~j||(j=0),i.eq(j).trigger("focus")}}}};var h=a.fn.dropdown;a.fn.dropdown=d,a.fn.dropdown.Constructor=g,a.fn.dropdown.noConflict=function(){return a.fn.dropdown=h,this},a(document).on("click.bs.dropdown.data-api",b).on("click.bs.dropdown.data-api",".dropdown form",function(a){a.stopPropagation()}).on("click.bs.dropdown.data-api",f,g.prototype.toggle).on("keydown.bs.dropdown.data-api",f,g.prototype.keydown).on("keydown.bs.dropdown.data-api",'[role="menu"]',g.prototype.keydown).on("keydown.bs.dropdown.data-api",'[role="listbox"]',g.prototype.keydown)}(jQuery),+function(a){"use strict";function b(b,d){return this.each(function(){var e=a(this),f=e.data("bs.modal"),g=a.extend({},c.DEFAULTS,e.data(),"object"==typeof b&&b);f||e.data("bs.modal",f=new c(this,g)),"string"==typeof b?f[b](d):g.show&&f.show(d)})}var c=function(b,c){this.options=c,this.$body=a(document.body),this.$element=a(b),this.$dialog=this.$element.find(".modal-dialog"),this.$backdrop=null,this.isShown=null,this.originalBodyPad=null,this.scrollbarWidth=0,this.ignoreBackdropClick=!1,this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,a.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))};c.VERSION="3.3.4",c.TRANSITION_DURATION=300,c.BACKDROP_TRANSITION_DURATION=150,c.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},c.prototype.toggle=function(a){return this.isShown?this.hide():this.show(a)},c.prototype.show=function(b){var d=this,e=a.Event("show.bs.modal",{relatedTarget:b});this.$element.trigger(e),this.isShown||e.isDefaultPrevented()||(this.isShown=!0,this.checkScrollbar(),this.setScrollbar(),this.$body.addClass("modal-open"),this.escape(),this.resize(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',a.proxy(this.hide,this)),this.$dialog.on("mousedown.dismiss.bs.modal",function(){d.$element.one("mouseup.dismiss.bs.modal",function(b){a(b.target).is(d.$element)&&(d.ignoreBackdropClick=!0)})}),this.backdrop(function(){var e=a.support.transition&&d.$element.hasClass("fade");d.$element.parent().length||d.$element.appendTo(d.$body),d.$element.show().scrollTop(0),d.adjustDialog(),e&&d.$element[0].offsetWidth,d.$element.addClass("in").attr("aria-hidden",!1),d.enforceFocus();var f=a.Event("shown.bs.modal",{relatedTarget:b});e?d.$dialog.one("bsTransitionEnd",function(){d.$element.trigger("focus").trigger(f)}).emulateTransitionEnd(c.TRANSITION_DURATION):d.$element.trigger("focus").trigger(f)}))},c.prototype.hide=function(b){b&&b.preventDefault(),b=a.Event("hide.bs.modal"),this.$element.trigger(b),this.isShown&&!b.isDefaultPrevented()&&(this.isShown=!1,this.escape(),this.resize(),a(document).off("focusin.bs.modal"),this.$element.removeClass("in").attr("aria-hidden",!0).off("click.dismiss.bs.modal").off("mouseup.dismiss.bs.modal"),this.$dialog.off("mousedown.dismiss.bs.modal"),a.support.transition&&this.$element.hasClass("fade")?this.$element.one("bsTransitionEnd",a.proxy(this.hideModal,this)).emulateTransitionEnd(c.TRANSITION_DURATION):this.hideModal())},c.prototype.enforceFocus=function(){a(document).off("focusin.bs.modal").on("focusin.bs.modal",a.proxy(function(a){this.$element[0]===a.target||this.$element.has(a.target).length||this.$element.trigger("focus")},this))},c.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keydown.dismiss.bs.modal",a.proxy(function(a){27==a.which&&this.hide()},this)):this.isShown||this.$element.off("keydown.dismiss.bs.modal")},c.prototype.resize=function(){this.isShown?a(window).on("resize.bs.modal",a.proxy(this.handleUpdate,this)):a(window).off("resize.bs.modal")},c.prototype.hideModal=function(){var a=this;this.$element.hide(),this.backdrop(function(){a.$body.removeClass("modal-open"),a.resetAdjustments(),a.resetScrollbar(),a.$element.trigger("hidden.bs.modal")})},c.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},c.prototype.backdrop=function(b){var d=this,e=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var f=a.support.transition&&e;if(this.$backdrop=a('<div class="modal-backdrop '+e+'" />').appendTo(this.$body),this.$element.on("click.dismiss.bs.modal",a.proxy(function(a){return this.ignoreBackdropClick?void(this.ignoreBackdropClick=!1):void(a.target===a.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus():this.hide()))},this)),f&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!b)return;f?this.$backdrop.one("bsTransitionEnd",b).emulateTransitionEnd(c.BACKDROP_TRANSITION_DURATION):b()}else if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass("in");var g=function(){d.removeBackdrop(),b&&b()};a.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one("bsTransitionEnd",g).emulateTransitionEnd(c.BACKDROP_TRANSITION_DURATION):g()}else b&&b()},c.prototype.handleUpdate=function(){this.adjustDialog()},c.prototype.adjustDialog=function(){var a=this.$element[0].scrollHeight>document.documentElement.clientHeight;this.$element.css({paddingLeft:!this.bodyIsOverflowing&&a?this.scrollbarWidth:"",paddingRight:this.bodyIsOverflowing&&!a?this.scrollbarWidth:""})},c.prototype.resetAdjustments=function(){this.$element.css({paddingLeft:"",paddingRight:""})},c.prototype.checkScrollbar=function(){var a=window.innerWidth;if(!a){var b=document.documentElement.getBoundingClientRect();a=b.right-Math.abs(b.left)}this.bodyIsOverflowing=document.body.clientWidth<a,this.scrollbarWidth=this.measureScrollbar()},c.prototype.setScrollbar=function(){var a=parseInt(this.$body.css("padding-right")||0,10);this.originalBodyPad=document.body.style.paddingRight||"",this.bodyIsOverflowing&&this.$body.css("padding-right",a+this.scrollbarWidth)},c.prototype.resetScrollbar=function(){this.$body.css("padding-right",this.originalBodyPad)},c.prototype.measureScrollbar=function(){var a=document.createElement("div");a.className="modal-scrollbar-measure",this.$body.append(a);var b=a.offsetWidth-a.clientWidth;return this.$body[0].removeChild(a),b};var d=a.fn.modal;a.fn.modal=b,a.fn.modal.Constructor=c,a.fn.modal.noConflict=function(){return a.fn.modal=d,this},a(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(c){var d=a(this),e=d.attr("href"),f=a(d.attr("data-target")||e&&e.replace(/.*(?=#[^\s]+$)/,"")),g=f.data("bs.modal")?"toggle":a.extend({remote:!/#/.test(e)&&e},f.data(),d.data());d.is("a")&&c.preventDefault(),f.one("show.bs.modal",function(a){a.isDefaultPrevented()||f.one("hidden.bs.modal",function(){d.is(":visible")&&d.trigger("focus")})}),b.call(f,g,this)})}(jQuery),+function(a){"use strict";function b(b){return this.each(function(){var d=a(this),e=d.data("bs.tooltip"),f="object"==typeof b&&b;(e||!/destroy|hide/.test(b))&&(e||d.data("bs.tooltip",e=new c(this,f)),"string"==typeof b&&e[b]())})}var c=function(a,b){this.type=null,this.options=null,this.enabled=null,this.timeout=null,this.hoverState=null,this.$element=null,this.init("tooltip",a,b)};c.VERSION="3.3.4",c.TRANSITION_DURATION=150,c.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1,viewport:{selector:"body",padding:0}},c.prototype.init=function(b,c,d){if(this.enabled=!0,this.type=b,this.$element=a(c),this.options=this.getOptions(d),this.$viewport=this.options.viewport&&a(this.options.viewport.selector||this.options.viewport),this.$element[0]instanceof document.constructor&&!this.options.selector)throw new Error("`selector` option must be specified when initializing "+this.type+" on the window.document object!");for(var e=this.options.trigger.split(" "),f=e.length;f--;){var g=e[f];if("click"==g)this.$element.on("click."+this.type,this.options.selector,a.proxy(this.toggle,this));else if("manual"!=g){var h="hover"==g?"mouseenter":"focusin",i="hover"==g?"mouseleave":"focusout";this.$element.on(h+"."+this.type,this.options.selector,a.proxy(this.enter,this)),this.$element.on(i+"."+this.type,this.options.selector,a.proxy(this.leave,this))}}this.options.selector?this._options=a.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},c.prototype.getDefaults=function(){return c.DEFAULTS},c.prototype.getOptions=function(b){return b=a.extend({},this.getDefaults(),this.$element.data(),b),b.delay&&"number"==typeof b.delay&&(b.delay={show:b.delay,hide:b.delay}),b},c.prototype.getDelegateOptions=function(){var b={},c=this.getDefaults();return this._options&&a.each(this._options,function(a,d){c[a]!=d&&(b[a]=d)}),b},c.prototype.enter=function(b){var c=b instanceof this.constructor?b:a(b.currentTarget).data("bs."+this.type);return c&&c.$tip&&c.$tip.is(":visible")?void(c.hoverState="in"):(c||(c=new this.constructor(b.currentTarget,this.getDelegateOptions()),a(b.currentTarget).data("bs."+this.type,c)),clearTimeout(c.timeout),c.hoverState="in",c.options.delay&&c.options.delay.show?void(c.timeout=setTimeout(function(){"in"==c.hoverState&&c.show()},c.options.delay.show)):c.show())},c.prototype.leave=function(b){var c=b instanceof this.constructor?b:a(b.currentTarget).data("bs."+this.type);return c||(c=new this.constructor(b.currentTarget,this.getDelegateOptions()),a(b.currentTarget).data("bs."+this.type,c)),clearTimeout(c.timeout),c.hoverState="out",c.options.delay&&c.options.delay.hide?void(c.timeout=setTimeout(function(){"out"==c.hoverState&&c.hide()},c.options.delay.hide)):c.hide()},c.prototype.show=function(){var b=a.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){this.$element.trigger(b);var d=a.contains(this.$element[0].ownerDocument.documentElement,this.$element[0]);if(b.isDefaultPrevented()||!d)return;var e=this,f=this.tip(),g=this.getUID(this.type);this.setContent(),f.attr("id",g),this.$element.attr("aria-describedby",g),this.options.animation&&f.addClass("fade");var h="function"==typeof this.options.placement?this.options.placement.call(this,f[0],this.$element[0]):this.options.placement,i=/\s?auto?\s?/i,j=i.test(h);j&&(h=h.replace(i,"")||"top"),f.detach().css({top:0,left:0,display:"block"}).addClass(h).data("bs."+this.type,this),this.options.container?f.appendTo(this.options.container):f.insertAfter(this.$element);var k=this.getPosition(),l=f[0].offsetWidth,m=f[0].offsetHeight;if(j){var n=h,o=this.options.container?a(this.options.container):this.$element.parent(),p=this.getPosition(o);h="bottom"==h&&k.bottom+m>p.bottom?"top":"top"==h&&k.top-m<p.top?"bottom":"right"==h&&k.right+l>p.width?"left":"left"==h&&k.left-l<p.left?"right":h,f.removeClass(n).addClass(h)}var q=this.getCalculatedOffset(h,k,l,m);this.applyPlacement(q,h);var r=function(){var a=e.hoverState;e.$element.trigger("shown.bs."+e.type),e.hoverState=null,"out"==a&&e.leave(e)};a.support.transition&&this.$tip.hasClass("fade")?f.one("bsTransitionEnd",r).emulateTransitionEnd(c.TRANSITION_DURATION):r()}},c.prototype.applyPlacement=function(b,c){var d=this.tip(),e=d[0].offsetWidth,f=d[0].offsetHeight,g=parseInt(d.css("margin-top"),10),h=parseInt(d.css("margin-left"),10);isNaN(g)&&(g=0),isNaN(h)&&(h=0),b.top=b.top+g,b.left=b.left+h,a.offset.setOffset(d[0],a.extend({using:function(a){d.css({top:Math.round(a.top),left:Math.round(a.left)})}},b),0),d.addClass("in");var i=d[0].offsetWidth,j=d[0].offsetHeight;"top"==c&&j!=f&&(b.top=b.top+f-j);var k=this.getViewportAdjustedDelta(c,b,i,j);k.left?b.left+=k.left:b.top+=k.top;var l=/top|bottom/.test(c),m=l?2*k.left-e+i:2*k.top-f+j,n=l?"offsetWidth":"offsetHeight";d.offset(b),this.replaceArrow(m,d[0][n],l)},c.prototype.replaceArrow=function(a,b,c){this.arrow().css(c?"left":"top",50*(1-a/b)+"%").css(c?"top":"left","")},c.prototype.setContent=function(){var a=this.tip(),b=this.getTitle();a.find(".tooltip-inner")[this.options.html?"html":"text"](b),a.removeClass("fade in top bottom left right")},c.prototype.hide=function(b){function d(){"in"!=e.hoverState&&f.detach(),e.$element.removeAttr("aria-describedby").trigger("hidden.bs."+e.type),b&&b()}var e=this,f=a(this.$tip),g=a.Event("hide.bs."+this.type);return this.$element.trigger(g),g.isDefaultPrevented()?void 0:(f.removeClass("in"),a.support.transition&&f.hasClass("fade")?f.one("bsTransitionEnd",d).emulateTransitionEnd(c.TRANSITION_DURATION):d(),this.hoverState=null,this)},c.prototype.fixTitle=function(){var a=this.$element;(a.attr("title")||"string"!=typeof a.attr("data-original-title"))&&a.attr("data-original-title",a.attr("title")||"").attr("title","")},c.prototype.hasContent=function(){return this.getTitle()},c.prototype.getPosition=function(b){b=b||this.$element;var c=b[0],d="BODY"==c.tagName,e=c.getBoundingClientRect();null==e.width&&(e=a.extend({},e,{width:e.right-e.left,height:e.bottom-e.top}));var f=d?{top:0,left:0}:b.offset(),g={scroll:d?document.documentElement.scrollTop||document.body.scrollTop:b.scrollTop()},h=d?{width:a(window).width(),height:a(window).height()}:null;return a.extend({},e,g,h,f)},c.prototype.getCalculatedOffset=function(a,b,c,d){return"bottom"==a?{top:b.top+b.height,left:b.left+b.width/2-c/2}:"top"==a?{top:b.top-d,left:b.left+b.width/2-c/2}:"left"==a?{top:b.top+b.height/2-d/2,left:b.left-c}:{top:b.top+b.height/2-d/2,left:b.left+b.width}},c.prototype.getViewportAdjustedDelta=function(a,b,c,d){var e={top:0,left:0};if(!this.$viewport)return e;var f=this.options.viewport&&this.options.viewport.padding||0,g=this.getPosition(this.$viewport);if(/right|left/.test(a)){var h=b.top-f-g.scroll,i=b.top+f-g.scroll+d;h<g.top?e.top=g.top-h:i>g.top+g.height&&(e.top=g.top+g.height-i)}else{var j=b.left-f,k=b.left+f+c;j<g.left?e.left=g.left-j:k>g.width&&(e.left=g.left+g.width-k)}return e},c.prototype.getTitle=function(){var a,b=this.$element,c=this.options;return a=b.attr("data-original-title")||("function"==typeof c.title?c.title.call(b[0]):c.title)},c.prototype.getUID=function(a){do a+=~~(1e6*Math.random());while(document.getElementById(a));return a},c.prototype.tip=function(){return this.$tip=this.$tip||a(this.options.template)},c.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},c.prototype.enable=function(){this.enabled=!0},c.prototype.disable=function(){this.enabled=!1},c.prototype.toggleEnabled=function(){this.enabled=!this.enabled},c.prototype.toggle=function(b){var c=this;b&&(c=a(b.currentTarget).data("bs."+this.type),c||(c=new this.constructor(b.currentTarget,this.getDelegateOptions()),a(b.currentTarget).data("bs."+this.type,c))),c.tip().hasClass("in")?c.leave(c):c.enter(c)},c.prototype.destroy=function(){var a=this;clearTimeout(this.timeout),this.hide(function(){a.$element.off("."+a.type).removeData("bs."+a.type)})};var d=a.fn.tooltip;a.fn.tooltip=b,a.fn.tooltip.Constructor=c,a.fn.tooltip.noConflict=function(){return a.fn.tooltip=d,this}}(jQuery),+function(a){"use strict";function b(b){return this.each(function(){var d=a(this),e=d.data("bs.popover"),f="object"==typeof b&&b;(e||!/destroy|hide/.test(b))&&(e||d.data("bs.popover",e=new c(this,f)),"string"==typeof b&&e[b]())})}var c=function(a,b){this.init("popover",a,b)};if(!a.fn.tooltip)throw new Error("Popover requires tooltip.js");c.VERSION="3.3.4",c.DEFAULTS=a.extend({},a.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),c.prototype=a.extend({},a.fn.tooltip.Constructor.prototype),c.prototype.constructor=c,c.prototype.getDefaults=function(){return c.DEFAULTS},c.prototype.setContent=function(){var a=this.tip(),b=this.getTitle(),c=this.getContent();a.find(".popover-title")[this.options.html?"html":"text"](b),a.find(".popover-content").children().detach().end()[this.options.html?"string"==typeof c?"html":"append":"text"](c),a.removeClass("fade top bottom left right in"),a.find(".popover-title").html()||a.find(".popover-title").hide()},c.prototype.hasContent=function(){return this.getTitle()||this.getContent()},c.prototype.getContent=function(){var a=this.$element,b=this.options;return a.attr("data-content")||("function"==typeof b.content?b.content.call(a[0]):b.content)},c.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")};var d=a.fn.popover;a.fn.popover=b,a.fn.popover.Constructor=c,a.fn.popover.noConflict=function(){return a.fn.popover=d,this}}(jQuery),+function(a){"use strict";function b(c,d){this.$body=a(document.body),this.$scrollElement=a(a(c).is(document.body)?window:c),this.options=a.extend({},b.DEFAULTS,d),this.selector=(this.options.target||"")+" .nav li > a",this.offsets=[],this.targets=[],this.activeTarget=null,this.scrollHeight=0,this.$scrollElement.on("scroll.bs.scrollspy",a.proxy(this.process,this)),this.refresh(),this.process()}function c(c){return this.each(function(){var d=a(this),e=d.data("bs.scrollspy"),f="object"==typeof c&&c;e||d.data("bs.scrollspy",e=new b(this,f)),"string"==typeof c&&e[c]()})}b.VERSION="3.3.4",b.DEFAULTS={offset:10},b.prototype.getScrollHeight=function(){return this.$scrollElement[0].scrollHeight||Math.max(this.$body[0].scrollHeight,document.documentElement.scrollHeight)},b.prototype.refresh=function(){var b=this,c="offset",d=0;this.offsets=[],this.targets=[],this.scrollHeight=this.getScrollHeight(),a.isWindow(this.$scrollElement[0])||(c="position",d=this.$scrollElement.scrollTop()),this.$body.find(this.selector).map(function(){var b=a(this),e=b.data("target")||b.attr("href"),f=/^#./.test(e)&&a(e);return f&&f.length&&f.is(":visible")&&[[f[c]().top+d,e]]||null}).sort(function(a,b){return a[0]-b[0]}).each(function(){b.offsets.push(this[0]),b.targets.push(this[1])})},b.prototype.process=function(){var a,b=this.$scrollElement.scrollTop()+this.options.offset,c=this.getScrollHeight(),d=this.options.offset+c-this.$scrollElement.height(),e=this.offsets,f=this.targets,g=this.activeTarget;if(this.scrollHeight!=c&&this.refresh(),b>=d)return g!=(a=f[f.length-1])&&this.activate(a);if(g&&b<e[0])return this.activeTarget=null,this.clear();for(a=e.length;a--;)g!=f[a]&&b>=e[a]&&(void 0===e[a+1]||b<e[a+1])&&this.activate(f[a])},b.prototype.activate=function(b){this.activeTarget=b,this.clear();var c=this.selector+'[data-target="'+b+'"],'+this.selector+'[href="'+b+'"]',d=a(c).parents("li").addClass("active");d.parent(".dropdown-menu").length&&(d=d.closest("li.dropdown").addClass("active")),d.trigger("activate.bs.scrollspy")},b.prototype.clear=function(){a(this.selector).parentsUntil(this.options.target,".active").removeClass("active")};var d=a.fn.scrollspy;a.fn.scrollspy=c,a.fn.scrollspy.Constructor=b,a.fn.scrollspy.noConflict=function(){return a.fn.scrollspy=d,this},a(window).on("load.bs.scrollspy.data-api",function(){a('[data-spy="scroll"]').each(function(){var b=a(this);c.call(b,b.data())})})}(jQuery),+function(a){"use strict";function b(b){return this.each(function(){var d=a(this),e=d.data("bs.tab");e||d.data("bs.tab",e=new c(this)),"string"==typeof b&&e[b]()})}var c=function(b){this.element=a(b)};c.VERSION="3.3.4",c.TRANSITION_DURATION=150,c.prototype.show=function(){var b=this.element,c=b.closest("ul:not(.dropdown-menu)"),d=b.data("target");if(d||(d=b.attr("href"),d=d&&d.replace(/.*(?=#[^\s]*$)/,"")),!b.parent("li").hasClass("active")){var e=c.find(".active:last a"),f=a.Event("hide.bs.tab",{relatedTarget:b[0]}),g=a.Event("show.bs.tab",{relatedTarget:e[0]});if(e.trigger(f),b.trigger(g),!g.isDefaultPrevented()&&!f.isDefaultPrevented()){var h=a(d);this.activate(b.closest("li"),c),this.activate(h,h.parent(),function(){e.trigger({type:"hidden.bs.tab",relatedTarget:b[0]}),b.trigger({type:"shown.bs.tab",relatedTarget:e[0]})})}}},c.prototype.activate=function(b,d,e){function f(){g.removeClass("active").find("> .dropdown-menu > .active").removeClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!1),b.addClass("active").find('[data-toggle="tab"]').attr("aria-expanded",!0),h?(b[0].offsetWidth,b.addClass("in")):b.removeClass("fade"),b.parent(".dropdown-menu").length&&b.closest("li.dropdown").addClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!0),e&&e()}var g=d.find("> .active"),h=e&&a.support.transition&&(g.length&&g.hasClass("fade")||!!d.find("> .fade").length);g.length&&h?g.one("bsTransitionEnd",f).emulateTransitionEnd(c.TRANSITION_DURATION):f(),g.removeClass("in")};var d=a.fn.tab;a.fn.tab=b,a.fn.tab.Constructor=c,a.fn.tab.noConflict=function(){return a.fn.tab=d,this};var e=function(c){c.preventDefault(),b.call(a(this),"show")};a(document).on("click.bs.tab.data-api",'[data-toggle="tab"]',e).on("click.bs.tab.data-api",'[data-toggle="pill"]',e)}(jQuery),+function(a){"use strict";function b(b){return this.each(function(){var d=a(this),e=d.data("bs.affix"),f="object"==typeof b&&b;e||d.data("bs.affix",e=new c(this,f)),"string"==typeof b&&e[b]()})}var c=function(b,d){this.options=a.extend({},c.DEFAULTS,d),this.$target=a(this.options.target).on("scroll.bs.affix.data-api",a.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",a.proxy(this.checkPositionWithEventLoop,this)),this.$element=a(b),this.affixed=null,this.unpin=null,this.pinnedOffset=null,this.checkPosition()};c.VERSION="3.3.4",c.RESET="affix affix-top affix-bottom",c.DEFAULTS={offset:0,target:window},c.prototype.getState=function(a,b,c,d){var e=this.$target.scrollTop(),f=this.$element.offset(),g=this.$target.height();if(null!=c&&"top"==this.affixed)return c>e?"top":!1;if("bottom"==this.affixed)return null!=c?e+this.unpin<=f.top?!1:"bottom":a-d>=e+g?!1:"bottom";var h=null==this.affixed,i=h?e:f.top,j=h?g:b;return null!=c&&c>=e?"top":null!=d&&i+j>=a-d?"bottom":!1},c.prototype.getPinnedOffset=function(){if(this.pinnedOffset)return this.pinnedOffset;this.$element.removeClass(c.RESET).addClass("affix");var a=this.$target.scrollTop(),b=this.$element.offset();return this.pinnedOffset=b.top-a},c.prototype.checkPositionWithEventLoop=function(){setTimeout(a.proxy(this.checkPosition,this),1)},c.prototype.checkPosition=function(){if(this.$element.is(":visible")){var b=this.$element.height(),d=this.options.offset,e=d.top,f=d.bottom,g=a(document.body).height();"object"!=typeof d&&(f=e=d),"function"==typeof e&&(e=d.top(this.$element)),"function"==typeof f&&(f=d.bottom(this.$element));var h=this.getState(g,b,e,f);if(this.affixed!=h){null!=this.unpin&&this.$element.css("top","");var i="affix"+(h?"-"+h:""),j=a.Event(i+".bs.affix");if(this.$element.trigger(j),j.isDefaultPrevented())return;this.affixed=h,this.unpin="bottom"==h?this.getPinnedOffset():null,this.$element.removeClass(c.RESET).addClass(i).trigger(i.replace("affix","affixed")+".bs.affix")}"bottom"==h&&this.$element.offset({top:g-b-f})}};var d=a.fn.affix;a.fn.affix=b,a.fn.affix.Constructor=c,a.fn.affix.noConflict=function(){return a.fn.affix=d,this},a(window).on("load",function(){a('[data-spy="affix"]').each(function(){var c=a(this),d=c.data();d.offset=d.offset||{},null!=d.offsetBottom&&(d.offset.bottom=d.offsetBottom),null!=d.offsetTop&&(d.offset.top=d.offsetTop),b.call(c,d)})})}(jQuery),!function(a){"use strict";var b=37,c=null,d=function(a){var b=arguments,c=!0,d=1;return a=a.replace(/%s/g,function(){var a=b[d++];return"undefined"==typeof a?(c=!1,""):a}),c?a:""},e=function(b,c,d,e){var f="";return a.each(b,function(a,b){return b[c]===e?(f=b[d],!1):!0}),f},f=function(b,c){var d=-1;return a.each(b,function(a,b){return b.field===c?(d=a,!1):!0}),d},g=function(){if(null===c){var b,d,e=a("<p/>").addClass("fixed-table-scroll-inner"),f=a("<div/>").addClass("fixed-table-scroll-outer");f.append(e),a("body").append(f),b=e[0].offsetWidth,f.css("overflow","scroll"),d=e[0].offsetWidth,b===d&&(d=f[0].clientWidth),f.remove(),c=b-d}return c},h=function(b,c,d,e){if("string"==typeof c){var f=c.split(".");f.length>1?(c=window,a.each(f,function(a,b){c=c[b]})):c=window[c]}return"object"==typeof c?c:"function"==typeof c?c.apply(b,d):e},i=function(a){return"string"==typeof a?a.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;"):a},j=function(b,c){this.options=c,this.$el=a(b),this.$el_=this.$el.clone(),this.timeoutId_=0,this.timeoutFooter_=0,this.init()};j.DEFAULTS={classes:"table table-hover",height:void 0,undefinedText:"-",sortName:void 0,sortOrder:"asc",striped:!1,columns:[],data:[],method:"get",url:void 0,cache:!0,contentType:"application/json",dataType:"json",ajaxOptions:{},queryParams:function(a){return a},queryParamsType:"limit",responseHandler:function(a){return a},pagination:!1,sidePagination:"client",totalRows:0,pageNumber:1,pageSize:10,pageList:[10,25,50,100],paginationHAlign:"right",paginationVAlign:"bottom",paginationDetailHAlign:"left",search:!1,searchAlign:"right",selectItemName:"btSelectItem",showHeader:!0,showFooter:!1,showColumns:!1,showPaginationSwitch:!1,showRefresh:!1,showToggle:!1,buttonsAlign:"right",smartDisplay:!0,minimumCountColumns:1,idField:void 0,uniqueId:void 0,cardView:!1,trimOnSearch:!0,clickToSelect:!1,singleSelect:!1,toolbar:void 0,toolbarAlign:"left",checkboxHeader:!0,sortable:!0,maintainSelected:!1,searchTimeOut:500,keyEvents:!1,searchText:"",iconSize:void 0,iconsPrefix:"glyphicon",icons:{paginationSwitchDown:"glyphicon-collapse-down icon-chevron-down",paginationSwitchUp:"glyphicon-collapse-up icon-chevron-up",refresh:"glyphicon-refresh icon-refresh",toggle:"glyphicon-list-alt icon-list-alt",columns:"glyphicon-th icon-th"},rowStyle:function(){return{}},rowAttributes:function(){return{}},onAll:function(){return!1},onClickRow:function(){return!1},onDblClickRow:function(){return!1},onSort:function(){return!1},onCheck:function(){return!1},onUncheck:function(){return!1},onCheckAll:function(){return!1},onUncheckAll:function(){return!1},onLoadSuccess:function(){return!1},onLoadError:function(){return!1},onColumnSwitch:function(){return!1},onColumnSearch:function(){return!1},onPageChange:function(){return!1},onSearch:function(){return!1},onPreBody:function(){return!1},onPostBody:function(){return!1},onPostHeader:function(){return!1}},j.LOCALES=[],j.LOCALES["en-US"]={formatLoadingMessage:function(){return"Loading, please wait..."},formatRecordsPerPage:function(a){return d("%s records per page",a)},formatShowingRows:function(a,b,c){return d("Showing %s to %s of %s rows",a,b,c)},formatSearch:function(){return"Search"},formatNoMatches:function(){return"No matching records found"},formatPaginationSwitch:function(){return"Hide/Show pagination"},formatRefresh:function(){return"Refresh"},formatToggle:function(){return"Toggle"},formatColumns:function(){return"Columns"},formatAllRows:function(){return"All"}},a.extend(j.DEFAULTS,j.LOCALES["en-US"]),j.COLUMN_DEFAULTS={radio:!1,checkbox:!1,checkboxEnabled:!0,field:void 0,title:void 0,"class":void 0,align:void 0,halign:void 0,falign:void 0,valign:void 0,width:void 0,sortable:!1,order:"asc",visible:!0,switchable:!0,clickToSelect:!0,formatter:void 0,footerFormatter:void 0,events:void 0,sorter:void 0,cellStyle:void 0,searchable:!0,cardVisible:!0,filterControl:void 0},j.EVENTS={"all.bs.table":"onAll","click-row.bs.table":"onClickRow","dbl-click-row.bs.table":"onDblClickRow","sort.bs.table":"onSort","check.bs.table":"onCheck","uncheck.bs.table":"onUncheck","check-all.bs.table":"onCheckAll","uncheck-all.bs.table":"onUncheckAll","load-success.bs.table":"onLoadSuccess","load-error.bs.table":"onLoadError","column-switch.bs.table":"onColumnSwitch","column-search.bs.table":"onColumnSearch","page-change.bs.table":"onPageChange","search.bs.table":"onSearch","pre-body.bs.table":"onPreBody","post-body.bs.table":"onPostBody",
"post-header.bs.table":"onPostHeader"},j.prototype.init=function(){this.initContainer(),this.initTable(),this.initHeader(),this.initData(),this.initFooter(),this.initToolbar(),this.initPagination(),this.initBody(),this.initServer(),this.initKeyEvents()},j.prototype.initContainer=function(){this.$container=a(['<div class="bootstrap-table">','<div class="fixed-table-toolbar"></div>',"top"===this.options.paginationVAlign||"both"===this.options.paginationVAlign?'<div class="fixed-table-pagination" style="clear: both;"></div>':"",'<div class="fixed-table-container">','<div class="fixed-table-header"><table></table></div>','<div class="fixed-table-body">','<div class="fixed-table-loading">',this.options.formatLoadingMessage(),"</div>","</div>",'<div class="fixed-table-footer"><table><tr></tr></table></div>',"bottom"===this.options.paginationVAlign||"both"===this.options.paginationVAlign?'<div class="fixed-table-pagination"></div>':"","</div>","</div>"].join("")),this.$container.insertAfter(this.$el),this.$container.find(".fixed-table-body").append(this.$el),this.$container.after('<div class="clearfix"></div>'),this.$loading=this.$container.find(".fixed-table-loading"),this.$el.addClass(this.options.classes),this.options.striped&&this.$el.addClass("table-striped")},j.prototype.initTable=function(){var b=this,c=[],d=[];this.$header=this.$el.find("thead"),this.$header.length||(this.$header=a("<thead></thead>").appendTo(this.$el)),this.$header.find("tr").length||this.$header.append("<tr></tr>"),this.$header.find("th").each(function(){var b=a.extend({},{title:a(this).html(),"class":a(this).attr("class")},a(this).data());c.push(b)}),this.options.columns=a.extend(!0,[],c,this.options.columns),a.each(this.options.columns,function(c,d){b.options.columns[c]=a.extend({},j.COLUMN_DEFAULTS,{field:c},d)}),this.options.data.length||(this.$el.find("tbody tr").each(function(){var c={};c._id=a(this).attr("id"),c._class=a(this).attr("class"),a(this).find("td").each(function(d){var e=b.options.columns[d].field;c[e]=a(this).html(),c["_"+e+"_id"]=a(this).attr("id"),c["_"+e+"_class"]=a(this).attr("class"),c["_"+e+"_data"]=a(this).data()}),d.push(c)}),this.options.data=d)},j.prototype.initHeader=function(){var c=this,e=[],f=[],g=!1,h=0;this.header={fields:[],styles:[],classes:[],formatters:[],events:[],sorters:[],cellStyles:[],clickToSelects:[],searchables:[]},a.each(this.options.columns,function(a,b){var h="",i="",j="",k="",l=d(' class="%s"',b["class"]),m=(c.options.sortOrder||b.order,"px"),n="hidden";if(b.visible&&(!c.options.cardView||b.cardVisible)){if(void 0!==b.width&&"string"==typeof b.width&&(b.width.indexOf("%")>-1&&(m="%"),b.width=b.width.replace("%","").replace("px","")),i=d("text-align: %s; ",b.halign?b.halign:b.align),j=d("text-align: %s; ",b.align),k=d("vertical-align: %s; ",b.valign),k+=d("width: %s"+m+"; ",b.checkbox||b.radio?36:b.width),e.push(b),c.header.fields.push(b.field),c.header.styles.push(j+k),c.header.classes.push(l),c.header.formatters.push(b.formatter),c.header.events.push(b.events),c.header.sorters.push(b.sorter),c.header.cellStyles.push(b.cellStyle),c.header.clickToSelects.push(b.clickToSelect),c.header.searchables.push(b.searchable),f.push("<th",b.checkbox||b.radio?d(' class="bs-checkbox %s"',b["class"]||""):l,d(' style="%s"',i+k),">"),f.push(d('<div class="th-inner %s">',c.options.sortable&&b.sortable?"sortable":"")),h=b.title,c.options.sortName===b.field&&c.options.sortable&&b.sortable&&(h+=c.getCaretHtml()),b.checkbox&&(!c.options.singleSelect&&c.options.checkboxHeader&&(h='<input name="btSelectAll" type="checkbox" />'),c.header.stateField=b.field),b.radio&&(h="",c.header.stateField=b.field,c.options.singleSelect=!0),f.push(h),f.push("</div>"),f.push('<div class="fht-cell"></div>'),f.push('<div style="margin: 0px 2px 2px 2px;" class="filterControl">'),b.filterControl&&b.searchable&&(g=!0,n="visible"),void 0!==b.filterControl)switch(b.filterControl.toLowerCase()){case"input":f.push(d('<input type="text" class="form-control" style="width: 100%; visibility: %s">',n));break;case"select":f.push(d('<select class="%s form-control" style="width: 100%; visibility: %s"></select>',b.field,n))}else f.push('<div style="height: 34px;"></div>');f.push("</div>"),f.push("</th>")}}),this.$header.find("tr").html(f.join("")),this.$header.find("th").each(function(b){a(this).data(e[b])}),this.$container.off("click",".th-inner").on("click",".th-inner",function(b){c.options.sortable&&a(this).parent().data().sortable&&c.onSort(b)}),!this.options.showHeader||this.options.cardView?(this.$header.hide(),this.$container.find(".fixed-table-header").hide(),this.$loading.css("top",0)):(this.$header.show(),this.$container.find(".fixed-table-header").show(),this.$loading.css("top",b+"px")),this.$selectAll=this.$header.find('[name="btSelectAll"]'),this.$container.off("click",'[name="btSelectAll"]').on("click",'[name="btSelectAll"]',function(){var b=a(this).prop("checked");c[b?"checkAll":"uncheckAll"]()}),g?(this.$header.off("keyup","input").on("keyup","input",function(a){clearTimeout(h),h=setTimeout(function(){c.onColumnSearch(a)},c.options.searchTimeOut)}),this.$header.off("change","select").on("change","select",function(a){clearTimeout(h),h=setTimeout(function(){c.onColumnSearch(a)},c.options.searchTimeOut)})):this.$header.find(".filterControl").hide()},j.prototype.initFooter=function(){this.$footer=this.$container.find(".fixed-table-footer"),!this.options.showFooter||this.options.cardView?this.$footer.hide():this.$footer.show()},j.prototype.initData=function(a,b){this.data="append"===b?this.data.concat(a):"prepend"===b?[].concat(a).concat(this.data):a||this.options.data,this.options.data=this.data,"server"!==this.options.sidePagination&&this.initSort()},j.prototype.initSort=function(){var b=this,c=this.options.sortName,d="desc"===this.options.sortOrder?-1:1,e=a.inArray(this.options.sortName,this.header.fields);-1!==e&&this.data.sort(function(f,g){var i=f[c],j=g[c],k=h(b.header,b.header.sorters[e],[i,j]);return void 0!==k?d*k:void 0!==k?d*k:((void 0===i||null===i)&&(i=""),(void 0===j||null===j)&&(j=""),a.isNumeric(i)&&a.isNumeric(j)?(i=parseFloat(i),j=parseFloat(j),j>i?-1*d:d):i===j?0:("string"!=typeof i&&(i=i.toString()),-1===i.localeCompare(j)?-1*d:d))})},j.prototype.onSort=function(b){var c=a(b.currentTarget).parent(),d=this.$header.find("th").eq(c.index());return this.$header.add(this.$header_).find("span.order").remove(),this.options.sortName===c.data("field")?this.options.sortOrder="asc"===this.options.sortOrder?"desc":"asc":(this.options.sortName=c.data("field"),this.options.sortOrder="asc"===c.data("order")?"desc":"asc"),this.trigger("sort",this.options.sortName,this.options.sortOrder),c.add(d).data("order",this.options.sortOrder).find(".th-inner").append(this.getCaretHtml()),"server"===this.options.sidePagination?void this.initServer():(this.initSort(),void this.initBody())},j.prototype.initToolbar=function(){var b,c,e=this,f=[],g=0,i=0;this.$toolbar=this.$container.find(".fixed-table-toolbar").html(""),"string"==typeof this.options.toolbar&&a(d('<div class="bars pull-%s"></div>',this.options.toolbarAlign)).appendTo(this.$toolbar).append(a(this.options.toolbar)),f=[d('<div class="columns columns-%s btn-group pull-%s">',this.options.buttonsAlign,this.options.buttonsAlign)],"string"==typeof this.options.icons&&(this.options.icons=h(null,this.options.icons)),this.options.showPaginationSwitch&&f.push(d('<button class="btn btn-default" type="button" name="paginationSwitch" title="%s">',this.options.formatPaginationSwitch()),d('<i class="%s %s"></i>',this.options.iconsPrefix,this.options.icons.paginationSwitchDown),"</button>"),this.options.showRefresh&&f.push(d('<button class="btn btn-default'+(void 0===this.options.iconSize?"":" btn-"+this.options.iconSize)+'" type="button" name="refresh" title="%s">',this.options.formatRefresh()),d('<i class="%s %s"></i>',this.options.iconsPrefix,this.options.icons.refresh),"</button>"),this.options.showToggle&&f.push(d('<button class="btn btn-default'+(void 0===this.options.iconSize?"":" btn-"+this.options.iconSize)+'" type="button" name="toggle" title="%s">',this.options.formatToggle()),d('<i class="%s %s"></i>',this.options.iconsPrefix,this.options.icons.toggle),"</button>"),this.options.showColumns&&(f.push(d('<div class="keep-open btn-group" title="%s">',this.options.formatColumns()),'<button type="button" class="btn btn-default'+(void 0==this.options.iconSize?"":" btn-"+this.options.iconSize)+' dropdown-toggle" data-toggle="dropdown">',d('<i class="%s %s"></i>',this.options.iconsPrefix,this.options.icons.columns),' <span class="caret"></span>',"</button>",'<ul class="dropdown-menu" role="menu">'),a.each(this.options.columns,function(a,b){if(!(b.radio||b.checkbox||e.options.cardView&&!b.cardVisible)){var c=b.visible?' checked="checked"':"";b.switchable&&(f.push(d('<li><label><input type="checkbox" data-field="%s" value="%s"%s> %s</label></li>',b.field,a,c,b.title)),i++)}}),f.push("</ul>","</div>")),f.push("</div>"),(this.showToolbar||f.length>2)&&this.$toolbar.append(f.join("")),this.options.showPaginationSwitch&&this.$toolbar.find('button[name="paginationSwitch"]').off("click").on("click",a.proxy(this.togglePagination,this)),this.options.showRefresh&&this.$toolbar.find('button[name="refresh"]').off("click").on("click",a.proxy(this.refresh,this)),this.options.showToggle&&this.$toolbar.find('button[name="toggle"]').off("click").on("click",function(){e.toggleView()}),this.options.showColumns&&(b=this.$toolbar.find(".keep-open"),i<=this.options.minimumCountColumns&&b.find("input").prop("disabled",!0),b.find("li").off("click").on("click",function(a){a.stopImmediatePropagation()}),b.find("input").off("click").on("click",function(){var b=a(this);e.toggleColumn(b.val(),b.prop("checked"),!1),e.trigger("column-switch",a(this).data("field"),b.prop("checked"))})),this.options.search&&(f=[],f.push('<div class="pull-'+this.options.searchAlign+' search">',d('<input class="form-control'+(void 0===this.options.iconSize?"":" input-"+this.options.iconSize)+'" type="text" placeholder="%s">',this.options.formatSearch()),"</div>"),this.$toolbar.append(f.join("")),c=this.$toolbar.find(".search input"),c.off("keyup").on("keyup",function(a){clearTimeout(g),g=setTimeout(function(){e.onSearch(a)},e.options.searchTimeOut)}),""!==this.options.searchText&&(c.val(this.options.searchText),clearTimeout(g),g=setTimeout(function(){c.trigger("keyup")},e.options.searchTimeOut)))},j.prototype.onSearch=function(b){var c=a.trim(a(b.currentTarget).val());this.options.trimOnSearch&&a(b.currentTarget).val()!==c&&a(b.currentTarget).val(c),c!==this.searchText&&(this.searchText=c,this.options.pageNumber=1,this.initSearch(),this.updatePagination(),this.trigger("search",c))},j.prototype.onColumnSearch=function(b){var c=a.trim(a(b.currentTarget).val()),d=a(b.currentTarget).parent().parent().data("field");a.isEmptyObject(this.filterColumnsPartial)&&(this.filterColumnsPartial={}),c?this.filterColumnsPartial[d]=c:delete this.filterColumnsPartial[d],this.options.pageNumber=1,this.initSearch(),this.updatePagination()},j.prototype.initSearch=function(){var b=this;if("server"!==this.options.sidePagination){var c=this.searchText&&this.searchText.toLowerCase(),d=a.isEmptyObject(this.filterColumns)?null:this.filterColumns,e=a.isEmptyObject(this.filterColumnsPartial)?null:this.filterColumnsPartial;this.data=d?a.grep(this.options.data,function(a){for(var b in d)if(a[b]!==d[b])return!1;return!0}):this.options.data,this.data=e?a.grep(this.data,function(c,d){for(var f in e){var g=e[f].toLowerCase(),i=c[f];if(i=h(b.header,b.header.formatters[a.inArray(f,b.header.fields)],[i,c,d],i),-1===a.inArray(f,b.header.fields)||"string"!=typeof i&&"number"!=typeof i||-1===(i+"").toLowerCase().indexOf(g))return!1}return!0}):this.data,this.data=c?a.grep(this.data,function(d,e){for(var f in d){f=a.isNumeric(f)?parseInt(f,10):f;var g=d[f];g=h(b.header,b.header.formatters[a.inArray(f,b.header.fields)],[g,d,e],g);var i=a.inArray(f,b.header.fields);if(-1!==i&&b.header.searchables[i]&&("string"==typeof g||"number"==typeof g)&&-1!==(g+"").toLowerCase().indexOf(c))return!0}return!1}):this.data}},j.prototype.initPagination=function(){if(this.$pagination=this.$container.find(".fixed-table-pagination"),!this.options.pagination)return void this.$pagination.hide();this.$pagination.show();var b,c,e,f,g,h,i,j,k,l=this,m=[],n=!1,o=this.getData();if("server"!==this.options.sidePagination&&(this.options.totalRows=o.length),this.totalPages=0,this.options.totalRows){if(this.options.pageSize===this.options.formatAllRows())this.options.pageSize=this.options.totalRows,n=!0;else if(this.options.pageSize===this.options.totalRows){var p="string"==typeof this.options.pageList?this.options.pageList.replace("[","").replace("]","").replace(/ /g,"").toLowerCase().split(","):this.options.pageList;p.indexOf(this.options.formatAllRows().toLowerCase())>-1&&(n=!0)}this.totalPages=~~((this.options.totalRows-1)/this.options.pageSize)+1,this.options.totalPages=this.totalPages}this.totalPages>0&&this.options.pageNumber>this.totalPages&&(this.options.pageNumber=this.totalPages),this.pageFrom=(this.options.pageNumber-1)*this.options.pageSize+1,this.pageTo=this.options.pageNumber*this.options.pageSize,this.pageTo>this.options.totalRows&&(this.pageTo=this.options.totalRows),m.push('<div class="pull-'+this.options.paginationDetailHAlign+' pagination-detail">','<span class="pagination-info">',this.options.formatShowingRows(this.pageFrom,this.pageTo,this.options.totalRows),"</span>"),m.push('<span class="page-list">');var q=[d('<span class="btn-group %s">',"top"===this.options.paginationVAlign||"both"===this.options.paginationVAlign?"dropdown":"dropup"),'<button type="button" class="btn btn-default '+(void 0===this.options.iconSize?"":" btn-"+this.options.iconSize)+' dropdown-toggle" data-toggle="dropdown">','<span class="page-size">',n?this.options.formatAllRows():this.options.pageSize,"</span>",' <span class="caret"></span>',"</button>",'<ul class="dropdown-menu" role="menu">'],r=this.options.pageList;if("string"==typeof this.options.pageList){var s=this.options.pageList.replace("[","").replace("]","").replace(/ /g,"").split(",");r=[],a.each(s,function(a,b){r.push(b.toUpperCase()===l.options.formatAllRows().toUpperCase()?l.options.formatAllRows():+b)})}for(a.each(r,function(a,b){if(!l.options.smartDisplay||0===a||r[a-1]<=l.options.totalRows){var c;c=n?b===l.options.formatAllRows()?' class="active"':"":b===l.options.pageSize?' class="active"':"",q.push(d('<li%s><a href="javascript:void(0)">%s</a></li>',c,b))}}),q.push("</ul></span>"),m.push(this.options.formatRecordsPerPage(q.join(""))),m.push("</span>"),m.push("</div>",'<div class="pull-'+this.options.paginationHAlign+'">','<ul class="pagination'+(void 0===this.options.iconSize?"":" pagination-"+this.options.iconSize)+'">','<li class="page-first"><a href="javascript:void(0)">&lt;&lt;</a></li>','<li class="page-pre"><a href="javascript:void(0)">&lt;</a></li>'),this.totalPages<5?(c=1,e=this.totalPages):(c=this.options.pageNumber-2,e=c+4,1>c&&(c=1,e=5),e>this.totalPages&&(e=this.totalPages,c=e-4)),b=c;e>=b;b++)m.push('<li class="page-number'+(b===this.options.pageNumber?" active":"")+'">','<a href="javascript:void(0)">',b,"</a>","</li>");m.push('<li class="page-next"><a href="javascript:void(0)">&gt;</a></li>','<li class="page-last"><a href="javascript:void(0)">&gt;&gt;</a></li>',"</ul>","</div>"),this.$pagination.html(m.join("")),f=this.$pagination.find(".page-list a"),g=this.$pagination.find(".page-first"),h=this.$pagination.find(".page-pre"),i=this.$pagination.find(".page-next"),j=this.$pagination.find(".page-last"),k=this.$pagination.find(".page-number"),this.options.pageNumber<=1&&(g.addClass("disabled"),h.addClass("disabled")),this.options.pageNumber>=this.totalPages&&(i.addClass("disabled"),j.addClass("disabled")),this.options.smartDisplay&&(this.totalPages<=1&&this.$pagination.find("div.pagination").hide(),(r.length<2||this.options.totalRows<=r[0])&&this.$pagination.find("span.page-list").hide(),this.$pagination[this.getData().length?"show":"hide"]()),n&&(this.options.pageSize=this.options.formatAllRows()),f.off("click").on("click",a.proxy(this.onPageListChange,this)),g.off("click").on("click",a.proxy(this.onPageFirst,this)),h.off("click").on("click",a.proxy(this.onPagePre,this)),i.off("click").on("click",a.proxy(this.onPageNext,this)),j.off("click").on("click",a.proxy(this.onPageLast,this)),k.off("click").on("click",a.proxy(this.onPageNumber,this))},j.prototype.updatePagination=function(b){b&&a(b.currentTarget).hasClass("disabled")||(this.options.maintainSelected||this.resetRows(),this.initPagination(),"server"===this.options.sidePagination?this.initServer():this.initBody(),this.trigger("page-change",this.options.pageNumber,this.options.pageSize))},j.prototype.onPageListChange=function(b){var c=a(b.currentTarget);c.parent().addClass("active").siblings().removeClass("active"),this.options.pageSize=c.text().toUpperCase()===this.options.formatAllRows().toUpperCase()?this.options.formatAllRows():+c.text(),this.$toolbar.find(".page-size").text(this.options.pageSize),this.updatePagination(b)},j.prototype.onPageFirst=function(a){this.options.pageNumber=1,this.updatePagination(a)},j.prototype.onPagePre=function(a){this.options.pageNumber--,this.updatePagination(a)},j.prototype.onPageNext=function(a){this.options.pageNumber++,this.updatePagination(a)},j.prototype.onPageLast=function(a){this.options.pageNumber=this.totalPages,this.updatePagination(a)},j.prototype.onPageNumber=function(b){this.options.pageNumber!==+a(b.currentTarget).text()&&(this.options.pageNumber=+a(b.currentTarget).text(),this.updatePagination(b))},j.prototype.initBody=function(b){var c=this,g=[],j=this.getData();this.trigger("pre-body",j),this.$body=this.$el.find("tbody"),this.$body.length||(this.$body=a("<tbody></tbody>").appendTo(this.$el)),this.options.pagination&&"server"!==this.options.sidePagination||(this.pageFrom=1,this.pageTo=j.length);for(var k=this.pageFrom-1;k<this.pageTo;k++){var l,m=j[k],n={},o=[],p={},q=[];if(n=h(this.options,this.options.rowStyle,[m,k],n),n&&n.css)for(l in n.css)o.push(l+": "+n.css[l]);if(p=h(this.options,this.options.rowAttributes,[m,k],p))for(l in p)q.push(d('%s="%s"',l,i(p[l])));g.push("<tr",d(" %s",q.join(" ")),d(' id="%s"',a.isArray(m)?void 0:m._id),d(' class="%s"',n.classes||(a.isArray(m)?void 0:m._class)),d(' data-index="%s"',k),d(' data-unique-id="%s"',m[this.options.uniqueId]),">"),this.options.cardView&&g.push(d('<td colspan="%s">',this.header.fields.length)),a.each(this.header.fields,function(b,i){var j="",l=m[i],p="",q={},r="",s=c.header.classes[b],t="",u=c.options.columns[f(c.options.columns,i)];if(n=d('style="%s"',o.concat(c.header.styles[b]).join("; ")),l=h(c.header,c.header.formatters[b],[l,m,k],l),m["_"+i+"_id"]&&(r=d(' id="%s"',m["_"+i+"_id"])),m["_"+i+"_class"]&&(s=d(' class="%s"',m["_"+i+"_class"])),q=h(c.header,c.header.cellStyles[b],[l,m,k],q),q.classes&&(s=d(' class="%s"',q.classes)),q.css){var v=[];for(var w in q.css)v.push(w+": "+q.css[w]);n=d('style="%s"',v.concat(c.header.styles[b]).join("; "))}if(m["_"+i+"_data"]&&!a.isEmptyObject(m["_"+i+"_data"])&&a.each(m["_"+i+"_data"],function(a,b){"index"!==a&&(t+=d(' data-%s="%s"',a,b))}),u.checkbox||u.radio)p=u.checkbox?"checkbox":p,p=u.radio?"radio":p,j=[c.options.cardView?'<div class="card-view">':'<td class="bs-checkbox">',"<input"+d(' data-index="%s"',k)+d(' name="%s"',c.options.selectItemName)+d(' type="%s"',p)+d(' value="%s"',m[c.options.idField])+d(' checked="%s"',l===!0||l&&l.checked?"checked":void 0)+d(' disabled="%s"',!u.checkboxEnabled||l&&l.disabled?"disabled":void 0)+" />",c.options.cardView?"</div>":"</td>"].join("");else{if(l="undefined"==typeof l||null===l?c.options.undefinedText:l,j=c.options.cardView?['<div class="card-view">',c.options.showHeader?d('<span class="title" %s>%s</span>',n,e(c.options.columns,"field","title",i)):"",d('<span class="value">%s</span>',l),"</div>"].join(""):[d("<td%s %s %s %s>",r,s,n,t),l,"</td>"].join(""),void 0!==u.filterControl&&"select"===u.filterControl.toLowerCase()&&u.searchable){var x,y=a("."+u.field),z=0,A=!1;if(void 0!==y)if(x=y.get(0).options,0===x.length)y.append(a("<option></option>").attr("value","").text("")),y.append(a("<option></option>").attr("value",l).text(l));else{for(;z<x.length;z++)if(x[z].value===l){A=!0;break}A||y.append(a("<option></option>").attr("value",l).text(l))}}c.options.cardView&&c.options.smartDisplay&&""===l&&(j="")}g.push(j)}),this.options.cardView&&g.push("</td>"),g.push("</tr>")}g.length||g.push('<tr class="no-records-found">',d('<td colspan="%s">%s</td>',this.header.fields.length,this.options.formatNoMatches()),"</tr>"),this.$body.html(g.join("")),b||this.scrollTo(0),this.$body.find("> tr > td").off("click").on("click",function(){var b=a(this).parent();c.trigger("click-row",c.data[b.data("index")],b),c.options.clickToSelect&&c.header.clickToSelects[b.children().index(a(this))]&&b.find(d('[name="%s"]',c.options.selectItemName))[0].click()}),this.$body.find("tr").off("dblclick").on("dblclick",function(){c.trigger("dbl-click-row",c.data[a(this).data("index")],a(this))}),this.$selectItem=this.$body.find(d('[name="%s"]',this.options.selectItemName)),this.$selectItem.off("click").on("click",function(b){b.stopImmediatePropagation();var d=a(this).prop("checked"),e=c.data[a(this).data("index")];e[c.header.stateField]=d,c.trigger(d?"check":"uncheck",e),c.options.singleSelect&&(c.$selectItem.not(this).each(function(){c.data[a(this).data("index")][c.header.stateField]=!1}),c.$selectItem.filter(":checked").not(this).prop("checked",!1)),c.updateSelected()}),a.each(this.header.events,function(b,d){if(d){"string"==typeof d&&(d=h(null,d));for(var e in d)c.$body.find("tr").each(function(){var f=a(this),g=f.find(c.options.cardView?".card-view":"td").eq(b),h=e.indexOf(" "),i=e.substring(0,h),j=e.substring(h+1),k=d[e];g.find(j).off(i).on(i,function(a){var d=f.data("index"),e=c.data[d],g=e[c.header.fields[b]];k.apply(this,[a,g,e,d])})})}}),this.updateSelected(),this.resetView(),this.trigger("post-body")},j.prototype.initServer=function(b,c){var d=this,e={},f={pageSize:this.options.pageSize===this.options.formatAllRows()?this.options.totalRows:this.options.pageSize,pageNumber:this.options.pageNumber,searchText:this.searchText,sortName:this.options.sortName,sortOrder:this.options.sortOrder};this.options.url&&("limit"===this.options.queryParamsType&&(f={search:f.searchText,sort:f.sortName,order:f.sortOrder},this.options.pagination&&(f.limit=this.options.pageSize===this.options.formatAllRows()?this.options.totalRows:this.options.pageSize,f.offset=this.options.pageSize===this.options.formatAllRows()?0:this.options.pageSize*(this.options.pageNumber-1))),a.isEmptyObject(this.filterColumnsPartial)||(f.filter=JSON.stringify(this.filterColumnsPartial,null)),e=h(this.options,this.options.queryParams,[f],e),a.extend(e,c||{}),e!==!1&&(b||this.$loading.show(),a.ajax(a.extend({},h(null,this.options.ajaxOptions),{type:this.options.method,url:this.options.url,data:"application/json"===this.options.contentType&&"post"===this.options.method?JSON.stringify(e):e,cache:this.options.cache,contentType:this.options.contentType,dataType:this.options.dataType,success:function(a){a=h(d.options,d.options.responseHandler,[a],a),d.load(a),d.trigger("load-success",a)},error:function(a){d.trigger("load-error",a.status)},complete:function(){b||d.$loading.hide()}}))))},j.prototype.initKeyEvents=function(){if(this.options.keyEvents){var b=this;a(document).off("keypress").on("keypress",function(a){var c=b.$toolbar.find(".search input"),d=b.$toolbar.find('button[name="refresh"]'),e=b.$toolbar.find('button[name="toggle"]'),f=b.$toolbar.find('button[name="paginationSwitch"]');switch(a.keyCode){case 115:case 83:if(!b.options.search)return;return document.activeElement===c.get(0)?!0:(c.focus(),!1);case 114:case 82:if(!b.options.showRefresh)return;return document.activeElement===c.get(0)?!0:(d.click(),!1);case 116:case 84:if(!b.options.showToggle)return;return document.activeElement===c.get(0)?!0:(e.click(),!1);case 112:case 80:if(!b.options.showPaginationSwitch)return;return document.activeElement===c.get(0)?!0:(f.click(),!1)}})}},j.prototype.getCaretHtml=function(){return['<span class="order'+("desc"===this.options.sortOrder?"":" dropup")+'">','<span class="caret" style="margin: 10px 5px;"></span>',"</span>"].join("")},j.prototype.updateSelected=function(){var b=this.$selectItem.filter(":enabled").length===this.$selectItem.filter(":enabled").filter(":checked").length;this.$selectAll.add(this.$selectAll_).prop("checked",b),this.$selectItem.each(function(){a(this).parents("tr")[a(this).prop("checked")?"addClass":"removeClass"]("selected")})},j.prototype.updateRows=function(b){var c=this;this.$selectItem.each(function(){c.data[a(this).data("index")][c.header.stateField]=b})},j.prototype.resetRows=function(){var b=this;a.each(this.data,function(a,c){b.$selectAll.prop("checked",!1),b.$selectItem.prop("checked",!1),c[b.header.stateField]=!1})},j.prototype.trigger=function(b){var c=Array.prototype.slice.call(arguments,1);b+=".bs.table",this.options[j.EVENTS[b]].apply(this.options,c),this.$el.trigger(a.Event(b),c),this.options.onAll(b,c),this.$el.trigger(a.Event("all.bs.table"),[b,c])},j.prototype.resetHeader=function(){this.$el.css("margin-top",-this.$header.height()),clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(a.proxy(this.fitHeader,this),this.$el.is(":hidden")?100:0)},j.prototype.fitHeader=function(){var b,c,d,e=this;return e.$el.is(":hidden")?void(e.timeoutFooter_=setTimeout(a.proxy(e.fitHeader,e),100)):(b=e.$container.find(".fixed-table-header"),c=e.$container.find(".fixed-table-body"),d=e.$el.width()>c.width()?g():0,e.$header_=e.$header.clone(!0,!0),e.$selectAll_=e.$header_.find('[name="btSelectAll"]'),b.css({"margin-right":d}).find("table").css("width",e.$el.css("width")).html("").attr("class",e.$el.attr("class")).append(e.$header_),e.$header.find("th").each(function(b){e.$header_.find("th").eq(b).data(a(this).data())}),e.$body.find("tr:first-child:not(.no-records-found) > *").each(function(b){e.$header_.find("div.fht-cell").eq(b).width(a(this).innerWidth())}),c.off("scroll").on("scroll",function(){b.scrollLeft(a(this).scrollLeft())}),void e.trigger("post-header"))},j.prototype.resetFooter=function(){var b=this,c=b.getData(),e=[];this.options.showFooter&&!this.options.cardView&&(a.each(this.options.columns,function(a,f){var g="",i="",j=d(' class="%s"',f["class"]);f.visible&&(!b.options.cardView||f.cardVisible)&&(g=d("text-align: %s; ",f.falign?f.falign:f.align),i=d("vertical-align: %s; ",f.valign),e.push("<td",j,d(' style="%s"',g+i),">"),e.push(h(f,f.footerFormatter,[c],"&nbsp;")||"&nbsp;"),e.push("</td>"))}),this.$footer.find("tr").html(e.join("")),clearTimeout(this.timeoutFooter_),this.timeoutFooter_=setTimeout(a.proxy(this.fitFooter,this),this.$el.is(":hidden")?100:0))},j.prototype.fitFooter=function(){var b,c,d,e;return clearTimeout(this.timeoutFooter_),this.$el.is(":hidden")?void(this.timeoutFooter_=setTimeout(a.proxy(this.fitFooter,this),100)):(b=this.$container.find(".fixed-table-body"),d=this.$el.css("width"),e=d>b.width()?g():0,this.$footer.css({"margin-right":e}).find("table").css("width",d).attr("class",this.$el.attr("class")),c=this.$footer.find("td"),void b.find("tbody tr:first-child:not(.no-records-found) > td").each(function(b){c.eq(b).outerWidth(a(this).outerWidth())}))},j.prototype.toggleColumn=function(a,b,c){if(-1!==a&&(this.options.columns[a].visible=b,this.initHeader(),this.initSearch(),this.initPagination(),this.initBody(),this.options.showColumns)){var e=this.$toolbar.find(".keep-open input").prop("disabled",!1);c&&e.filter(d('[value="%s"]',a)).prop("checked",b),e.filter(":checked").length<=this.options.minimumCountColumns&&e.filter(":checked").prop("disabled",!0)}},j.prototype.toggleRow=function(b,c,e){-1!==b&&a(this.$body[0]).children().filter(d(c?'[value="%s"]':'[data-index="%s"]',b))[e?"show":"hide"]()},j.prototype.resetView=function(a){var c=this,d=0,e=c.$container.find(".fixed-table-container");if(a&&a.height&&(this.options.height=a.height),this.$selectAll.prop("checked",this.$selectItem.length>0&&this.$selectItem.length===this.$selectItem.filter(":checked").length),this.options.height){var f=+this.$toolbar.children().outerHeight(!0),g=+this.$pagination.children().outerHeight(!0),h=this.options.height-f-g;e.css("height",h+"px")}return this.options.cardView?(c.$el.css("margin-top","0"),void e.css("padding-bottom","0")):(this.options.showHeader&&this.options.height?(this.$container.find(".fixed-table-header").show(),this.resetHeader(),d+=b):(this.$container.find(".fixed-table-header").hide(),this.trigger("post-header")),this.options.showFooter&&(this.resetFooter(),this.options.height&&(d+=b)),void e.css("padding-bottom",d+"px"))},j.prototype.getData=function(){return!this.searchText&&a.isEmptyObject(this.filterColumns)&&a.isEmptyObject(this.filterColumnsPartial)?this.options.data:this.data},j.prototype.load=function(b){var c=!1;"server"===this.options.sidePagination?(this.options.totalRows=b.total,c=b.fixedScroll,b=b.rows):a.isArray(b)||(c=b.fixedScroll,b=b.data),this.initData(b),this.initSearch(),this.initPagination(),this.initBody(c)},j.prototype.append=function(a){this.initData(a,"append"),this.initSearch(),this.initPagination(),this.initBody(!0)},j.prototype.prepend=function(a){this.initData(a,"prepend"),this.initSearch(),this.initPagination(),this.initBody(!0)},j.prototype.remove=function(b){var c,d,e=this.options.data.length;if(b.hasOwnProperty("field")&&b.hasOwnProperty("values")){for(c=e-1;c>=0;c--)d=this.options.data[c],d.hasOwnProperty(b.field)&&-1!==a.inArray(d[b.field],b.values)&&this.options.data.splice(c,1);e!==this.options.data.length&&(this.initSearch(),this.initPagination(),this.initBody(!0))}},j.prototype.insertRow=function(a){a.hasOwnProperty("index")&&a.hasOwnProperty("row")&&(this.data.splice(a.index,0,a.row),this.initSearch(),this.initPagination(),this.initBody(!0))},j.prototype.updateRow=function(b){b.hasOwnProperty("index")&&b.hasOwnProperty("row")&&(a.extend(this.data[b.index],b.row),this.initBody(!0))},j.prototype.showRow=function(a){a.hasOwnProperty("index")&&this.toggleRow(a.index,void 0===a.isIdField?!1:!0,!0)},j.prototype.hideRow=function(a){a.hasOwnProperty("index")&&this.toggleRow(a.index,void 0===a.isIdField?!1:!0,!1)},j.prototype.getRowsHidden=function(b){var c=a(this.$body[0]).children().filter(":hidden"),d=0;if(b)for(;d<c.length;d++)a(c[d]).show();return c},j.prototype.mergeCells=function(b){var c,d,e=b.index,f=a.inArray(b.field,this.header.fields),g=b.rowspan||1,h=b.colspan||1,i=this.$body.find("tr"),j=i.eq(e).find("td").eq(f);if(!(0>e||0>f||e>=this.data.length)){for(c=e;e+g>c;c++)for(d=f;f+h>d;d++)i.eq(c).find("td").eq(d).hide();j.attr("rowspan",g).attr("colspan",h).show()}},j.prototype.getOptions=function(){return this.options},j.prototype.getSelections=function(){var b=this;return a.grep(this.data,function(a){return a[b.header.stateField]})},j.prototype.checkAll=function(){this.checkAll_(!0)},j.prototype.uncheckAll=function(){this.checkAll_(!1)},j.prototype.checkAll_=function(a){var b;a||(b=this.getSelections()),this.$selectItem.filter(":enabled").prop("checked",a),this.updateRows(a),this.updateSelected(),a&&(b=this.getSelections()),this.trigger(a?"check-all":"uncheck-all",b)},j.prototype.check=function(a){this.check_(!0,a)},j.prototype.uncheck=function(a){this.check_(!1,a)},j.prototype.check_=function(a,b){this.$selectItem.filter(d('[data-index="%s"]',b)).prop("checked",a),this.data[b][this.header.stateField]=a,this.updateSelected(),this.trigger(a?"check":"uncheck",this.data[b])},j.prototype.checkBy=function(a){this.checkBy_(!0,a)},j.prototype.uncheckBy=function(a){this.checkBy_(!1,a)},j.prototype.checkBy_=function(b,c){if(c.hasOwnProperty("field")&&c.hasOwnProperty("values")){var e=this;a.each(this.options.data,function(f,g){return g.hasOwnProperty(c.field)?void(-1!==a.inArray(g[c.field],c.values)&&(e.$selectItem.filter(d('[data-index="%s"]',f)).prop("checked",b),
g[e.header.stateField]=b,e.trigger(b?"check":"uncheck",g))):!1}),this.updateSelected()}},j.prototype.destroy=function(){this.$el.insertBefore(this.$container),a(this.options.toolbar).insertBefore(this.$el),this.$container.next().remove(),this.$container.remove(),this.$el.html(this.$el_.html()).css("margin-top","0").attr("class",this.$el_.attr("class")||"")},j.prototype.showLoading=function(){this.$loading.show()},j.prototype.hideLoading=function(){this.$loading.hide()},j.prototype.togglePagination=function(){this.options.pagination=!this.options.pagination;var a=this.$toolbar.find('button[name="paginationSwitch"] i');this.options.pagination?a.attr("class",this.options.iconsPrefix+" "+this.options.icons.paginationSwitchDown):a.attr("class",this.options.iconsPrefix+" "+this.options.icons.paginationSwitchUp),this.updatePagination()},j.prototype.refresh=function(a){a&&a.url&&(this.options.url=a.url,this.options.pageNumber=1),this.initServer(a&&a.silent,a&&a.query)},j.prototype.showColumn=function(a){this.toggleColumn(f(this.options.columns,a),!0,!0)},j.prototype.hideColumn=function(a){this.toggleColumn(f(this.options.columns,a),!1,!0)},j.prototype.filterBy=function(b){this.filterColumns=a.isEmptyObject(b)?{}:b,this.options.pageNumber=1,this.initSearch(),this.updatePagination()},j.prototype.scrollTo=function(a){var b=this.$container.find(".fixed-table-body");"string"==typeof a&&(a="bottom"===a?b[0].scrollHeight:0),"number"==typeof a&&b.scrollTop(a)},j.prototype.selectPage=function(a){a>0&&a<=this.options.totalPages&&(this.options.pageNumber=a,this.updatePagination())},j.prototype.prevPage=function(){this.options.pageNumber>1&&(this.options.pageNumber--,this.updatePagination())},j.prototype.nextPage=function(){this.options.pageNumber<this.options.totalPages&&(this.options.pageNumber++,this.updatePagination())},j.prototype.toggleView=function(){this.options.cardView=!this.options.cardView,this.initHeader(),this.initBody()};var k=["getOptions","getSelections","getData","load","append","prepend","remove","insertRow","updateRow","showRow","hideRow","getRowsHidden","mergeCells","checkAll","uncheckAll","check","uncheck","checkBy","uncheckBy","refresh","resetView","destroy","showLoading","hideLoading","showColumn","hideColumn","filterBy","scrollTo","selectPage","prevPage","nextPage","togglePagination","toggleView"];a.fn.bootstrapTable=function(b,c){var d;return this.each(function(){var e=a(this),f=e.data("bootstrap.table"),g=a.extend({},j.DEFAULTS,e.data(),"object"==typeof b&&b);if("string"==typeof b){if(a.inArray(b,k)<0)throw"Unknown method: "+b;if(!f)return;d=f[b](c),"destroy"===b&&e.removeData("bootstrap.table")}f||e.data("bootstrap.table",f=new j(this,g))}),"undefined"==typeof d?this:d},a.fn.bootstrapTable.Constructor=j,a.fn.bootstrapTable.defaults=j.DEFAULTS,a.fn.bootstrapTable.columnDefaults=j.COLUMN_DEFAULTS,a.fn.bootstrapTable.locales=j.LOCALES,a.fn.bootstrapTable.methods=k,a(function(){a('[data-toggle="table"]').bootstrapTable()})}(jQuery),!function(a){"use strict";a.fn.bootstrapTable.locales["zh-CN"]={formatLoadingMessage:function(){return"正在努力地加载数据中，请稍候……"},formatRecordsPerPage:function(a){return"每页显示 "+a+" 条记录"},formatShowingRows:function(a,b,c){return"显示第 "+a+" 到第 "+b+" 条记录，总共 "+c+" 条记录"},formatSearch:function(){return"搜索"},formatNoMatches:function(){return"没有找到匹配的记录"},formatPaginationSwitch:function(){return"隐藏/显示分页"},formatRefresh:function(){return"刷新"},formatToggle:function(){return"切换"},formatColumns:function(){return"列"}},a.extend(a.fn.bootstrapTable.defaults,a.fn.bootstrapTable.locales["zh-CN"])}(jQuery),!function(a){function b(){return new Date(Date.UTC.apply(Date,arguments))}var c=function(b,c){var d=this;this.element=a(b),this.container=c.container||"body",this.language=c.language||this.element.data("date-language")||"en",this.language=this.language in e?this.language:"en",this.isRTL=e[this.language].rtl||!1,this.formatType=c.formatType||this.element.data("format-type")||"standard",this.format=f.parseFormat(c.format||this.element.data("date-format")||e[this.language].format||f.getDefaultFormat(this.formatType,"input"),this.formatType),this.isInline=!1,this.isVisible=!1,this.isInput=this.element.is("input"),this.fontAwesome=c.fontAwesome||this.element.data("font-awesome")||!1,this.bootcssVer=c.bootcssVer||(this.isInput?this.element.is(".form-control")?3:2:this.bootcssVer=this.element.is(".input-group")?3:2),this.component=this.element.is(".date")?3==this.bootcssVer?this.element.find(".input-group-addon .glyphicon-th, .input-group-addon .glyphicon-time, .input-group-addon .glyphicon-calendar, .input-group-addon .glyphicon-calendar, .input-group-addon .fa-calendar, .input-group-addon .fa-clock-o").parent():this.element.find(".add-on .icon-th, .add-on .icon-time, .add-on .icon-calendar .fa-calendar .fa-clock-o").parent():!1,this.componentReset=this.element.is(".date")?3==this.bootcssVer?this.element.find(".input-group-addon .glyphicon-remove, .input-group-addon .fa-times").parent():this.element.find(".add-on .icon-remove, .add-on .fa-times").parent():!1,this.hasInput=this.component&&this.element.find("input").length,this.component&&0===this.component.length&&(this.component=!1),this.linkField=c.linkField||this.element.data("link-field")||!1,this.linkFormat=f.parseFormat(c.linkFormat||this.element.data("link-format")||f.getDefaultFormat(this.formatType,"link"),this.formatType),this.minuteStep=c.minuteStep||this.element.data("minute-step")||5,this.pickerPosition=c.pickerPosition||this.element.data("picker-position")||"bottom-right",this.showMeridian=c.showMeridian||this.element.data("show-meridian")||!1,this.initialDate=c.initialDate||new Date,this.zIndex=c.zIndex||this.element.data("z-index")||void 0,this.icons={leftArrow:this.fontAwesome?"fa-arrow-left":3===this.bootcssVer?"glyphicon-arrow-left":"icon-arrow-left",rightArrow:this.fontAwesome?"fa-arrow-right":3===this.bootcssVer?"glyphicon-arrow-right":"icon-arrow-right"},this.icontype=this.fontAwesome?"fa":"glyphicon",this._attachEvents(),this.formatViewType="datetime","formatViewType"in c?this.formatViewType=c.formatViewType:"formatViewType"in this.element.data()&&(this.formatViewType=this.element.data("formatViewType")),this.minView=0,"minView"in c?this.minView=c.minView:"minView"in this.element.data()&&(this.minView=this.element.data("min-view")),this.minView=f.convertViewMode(this.minView),this.maxView=f.modes.length-1,"maxView"in c?this.maxView=c.maxView:"maxView"in this.element.data()&&(this.maxView=this.element.data("max-view")),this.maxView=f.convertViewMode(this.maxView),this.wheelViewModeNavigation=!1,"wheelViewModeNavigation"in c?this.wheelViewModeNavigation=c.wheelViewModeNavigation:"wheelViewModeNavigation"in this.element.data()&&(this.wheelViewModeNavigation=this.element.data("view-mode-wheel-navigation")),this.wheelViewModeNavigationInverseDirection=!1,"wheelViewModeNavigationInverseDirection"in c?this.wheelViewModeNavigationInverseDirection=c.wheelViewModeNavigationInverseDirection:"wheelViewModeNavigationInverseDirection"in this.element.data()&&(this.wheelViewModeNavigationInverseDirection=this.element.data("view-mode-wheel-navigation-inverse-dir")),this.wheelViewModeNavigationDelay=100,"wheelViewModeNavigationDelay"in c?this.wheelViewModeNavigationDelay=c.wheelViewModeNavigationDelay:"wheelViewModeNavigationDelay"in this.element.data()&&(this.wheelViewModeNavigationDelay=this.element.data("view-mode-wheel-navigation-delay")),this.startViewMode=2,"startView"in c?this.startViewMode=c.startView:"startView"in this.element.data()&&(this.startViewMode=this.element.data("start-view")),this.startViewMode=f.convertViewMode(this.startViewMode),this.viewMode=this.startViewMode,this.viewSelect=this.minView,"viewSelect"in c?this.viewSelect=c.viewSelect:"viewSelect"in this.element.data()&&(this.viewSelect=this.element.data("view-select")),this.viewSelect=f.convertViewMode(this.viewSelect),this.forceParse=!0,"forceParse"in c?this.forceParse=c.forceParse:"dateForceParse"in this.element.data()&&(this.forceParse=this.element.data("date-force-parse"));for(var g=3===this.bootcssVer?f.templateV3:f.template;-1!==g.indexOf("{iconType}");)g=g.replace("{iconType}",this.icontype);for(;-1!==g.indexOf("{leftArrow}");)g=g.replace("{leftArrow}",this.icons.leftArrow);for(;-1!==g.indexOf("{rightArrow}");)g=g.replace("{rightArrow}",this.icons.rightArrow);if(this.picker=a(g).appendTo(this.isInline?this.element:this.container).on({click:a.proxy(this.click,this),mousedown:a.proxy(this.mousedown,this)}),this.wheelViewModeNavigation&&(a.fn.mousewheel?this.picker.on({mousewheel:a.proxy(this.mousewheel,this)}):console.log("Mouse Wheel event is not supported. Please include the jQuery Mouse Wheel plugin before enabling this option")),this.isInline?this.picker.addClass("datetimepicker-inline"):this.picker.addClass("datetimepicker-dropdown-"+this.pickerPosition+" dropdown-menu"),this.isRTL){this.picker.addClass("datetimepicker-rtl");var h=3===this.bootcssVer?".prev span, .next span":".prev i, .next i";this.picker.find(h).toggleClass(this.icons.leftArrow+" "+this.icons.rightArrow)}a(document).on("mousedown",function(b){0===a(b.target).closest(".datetimepicker").length&&d.hide()}),this.autoclose=!1,"autoclose"in c?this.autoclose=c.autoclose:"dateAutoclose"in this.element.data()&&(this.autoclose=this.element.data("date-autoclose")),this.keyboardNavigation=!0,"keyboardNavigation"in c?this.keyboardNavigation=c.keyboardNavigation:"dateKeyboardNavigation"in this.element.data()&&(this.keyboardNavigation=this.element.data("date-keyboard-navigation")),this.todayBtn=c.todayBtn||this.element.data("date-today-btn")||!1,this.todayHighlight=c.todayHighlight||this.element.data("date-today-highlight")||!1,this.weekStart=(c.weekStart||this.element.data("date-weekstart")||e[this.language].weekStart||0)%7,this.weekEnd=(this.weekStart+6)%7,this.startDate=-(1/0),this.endDate=1/0,this.daysOfWeekDisabled=[],this.setStartDate(c.startDate||this.element.data("date-startdate")),this.setEndDate(c.endDate||this.element.data("date-enddate")),this.setDaysOfWeekDisabled(c.daysOfWeekDisabled||this.element.data("date-days-of-week-disabled")),this.setMinutesDisabled(c.minutesDisabled||this.element.data("date-minute-disabled")),this.setHoursDisabled(c.hoursDisabled||this.element.data("date-hour-disabled")),this.fillDow(),this.fillMonths(),this.update(),this.showMode(),this.isInline&&this.show()};c.prototype={constructor:c,_events:[],_attachEvents:function(){this._detachEvents(),this.isInput?this._events=[[this.element,{focus:a.proxy(this.show,this),keyup:a.proxy(this.update,this),keydown:a.proxy(this.keydown,this)}]]:this.component&&this.hasInput?(this._events=[[this.element.find("input"),{focus:a.proxy(this.show,this),keyup:a.proxy(this.update,this),keydown:a.proxy(this.keydown,this)}],[this.component,{click:a.proxy(this.show,this)}]],this.componentReset&&this._events.push([this.componentReset,{click:a.proxy(this.reset,this)}])):this.element.is("div")?this.isInline=!0:this._events=[[this.element,{click:a.proxy(this.show,this)}]];for(var b,c,d=0;d<this._events.length;d++)b=this._events[d][0],c=this._events[d][1],b.on(c)},_detachEvents:function(){for(var a,b,c=0;c<this._events.length;c++)a=this._events[c][0],b=this._events[c][1],a.off(b);this._events=[]},show:function(b){this.picker.show(),this.height=this.component?this.component.outerHeight():this.element.outerHeight(),this.forceParse&&this.update(),this.place(),a(window).on("resize",a.proxy(this.place,this)),b&&(b.stopPropagation(),b.preventDefault()),this.isVisible=!0,this.element.trigger({type:"show",date:this.date})},hide:function(b){this.isVisible&&(this.isInline||(this.picker.hide(),a(window).off("resize",this.place),this.viewMode=this.startViewMode,this.showMode(),this.isInput||a(document).off("mousedown",this.hide),this.forceParse&&(this.isInput&&this.element.val()||this.hasInput&&this.element.find("input").val())&&this.setValue(),this.isVisible=!1,this.element.trigger({type:"hide",date:this.date})))},remove:function(){this._detachEvents(),this.picker.remove(),delete this.picker,delete this.element.data().datetimepicker},getDate:function(){var a=this.getUTCDate();return new Date(a.getTime()+6e4*a.getTimezoneOffset())},getUTCDate:function(){return this.date},setDate:function(a){this.setUTCDate(new Date(a.getTime()-6e4*a.getTimezoneOffset()))},setUTCDate:function(a){a>=this.startDate&&a<=this.endDate?(this.date=a,this.setValue(),this.viewDate=this.date,this.fill()):this.element.trigger({type:"outOfRange",date:a,startDate:this.startDate,endDate:this.endDate})},setFormat:function(a){this.format=f.parseFormat(a,this.formatType);var b;this.isInput?b=this.element:this.component&&(b=this.element.find("input")),b&&b.val()&&this.setValue()},setValue:function(){var b=this.getFormattedDate();this.isInput?this.element.val(b):(this.component&&this.element.find("input").val(b),this.element.data("date",b)),this.linkField&&a("#"+this.linkField).val(this.getFormattedDate(this.linkFormat))},getFormattedDate:function(a){return void 0==a&&(a=this.format),f.formatDate(this.date,a,this.language,this.formatType)},setStartDate:function(a){this.startDate=a||-(1/0),this.startDate!==-(1/0)&&(this.startDate=f.parseDate(this.startDate,this.format,this.language,this.formatType)),this.update(),this.updateNavArrows()},setEndDate:function(a){this.endDate=a||1/0,this.endDate!==1/0&&(this.endDate=f.parseDate(this.endDate,this.format,this.language,this.formatType)),this.update(),this.updateNavArrows()},setDaysOfWeekDisabled:function(b){this.daysOfWeekDisabled=b||[],a.isArray(this.daysOfWeekDisabled)||(this.daysOfWeekDisabled=this.daysOfWeekDisabled.split(/,\s*/)),this.daysOfWeekDisabled=a.map(this.daysOfWeekDisabled,function(a){return parseInt(a,10)}),this.update(),this.updateNavArrows()},setMinutesDisabled:function(b){this.minutesDisabled=b||[],a.isArray(this.minutesDisabled)||(this.minutesDisabled=this.minutesDisabled.split(/,\s*/)),this.minutesDisabled=a.map(this.minutesDisabled,function(a){return parseInt(a,10)}),this.update(),this.updateNavArrows()},setHoursDisabled:function(b){this.hoursDisabled=b||[],a.isArray(this.hoursDisabled)||(this.hoursDisabled=this.hoursDisabled.split(/,\s*/)),this.hoursDisabled=a.map(this.hoursDisabled,function(a){return parseInt(a,10)}),this.update(),this.updateNavArrows()},place:function(){if(!this.isInline){if(!this.zIndex){var b=0;a("div").each(function(){var c=parseInt(a(this).css("zIndex"),10);c>b&&(b=c)}),this.zIndex=b+10}var c,d,e,f;f=this.container instanceof a?this.container.offset():a(this.container).offset(),this.component?(c=this.component.offset(),e=c.left,("bottom-left"==this.pickerPosition||"top-left"==this.pickerPosition)&&(e+=this.component.outerWidth()-this.picker.outerWidth())):(c=this.element.offset(),e=c.left),e+220>document.body.clientWidth&&(e=document.body.clientWidth-220),d="top-left"==this.pickerPosition||"top-right"==this.pickerPosition?c.top-this.picker.outerHeight():c.top+this.height,d-=f.top,e-=f.left,"body"!=this.container&&(d+=document.body.scrollTop),this.picker.css({top:d,left:e,zIndex:this.zIndex})}},update:function(){var a,b=!1;arguments&&arguments.length&&("string"==typeof arguments[0]||arguments[0]instanceof Date)?(a=arguments[0],b=!0):(a=(this.isInput?this.element.val():this.element.find("input").val())||this.element.data("date")||this.initialDate,("string"==typeof a||a instanceof String)&&(a=a.replace(/^\s+|\s+$/g,""))),a||(a=new Date,b=!1),this.date=f.parseDate(a,this.format,this.language,this.formatType),b&&this.setValue(),this.date<this.startDate?this.viewDate=new Date(this.startDate):this.date>this.endDate?this.viewDate=new Date(this.endDate):this.viewDate=new Date(this.date),this.fill()},fillDow:function(){for(var a=this.weekStart,b="<tr>";a<this.weekStart+7;)b+='<th class="dow">'+e[this.language].daysMin[a++%7]+"</th>";b+="</tr>",this.picker.find(".datetimepicker-days thead").append(b)},fillMonths:function(){for(var a="",b=0;12>b;)a+='<span class="month">'+e[this.language].monthsShort[b++]+"</span>";this.picker.find(".datetimepicker-months td").html(a)},fill:function(){if(null!=this.date&&null!=this.viewDate){var c=new Date(this.viewDate),d=c.getUTCFullYear(),g=c.getUTCMonth(),h=c.getUTCDate(),i=c.getUTCHours(),j=c.getUTCMinutes(),k=this.startDate!==-(1/0)?this.startDate.getUTCFullYear():-(1/0),l=this.startDate!==-(1/0)?this.startDate.getUTCMonth()+1:-(1/0),m=this.endDate!==1/0?this.endDate.getUTCFullYear():1/0,n=this.endDate!==1/0?this.endDate.getUTCMonth()+1:1/0,o=new b(this.date.getUTCFullYear(),this.date.getUTCMonth(),this.date.getUTCDate()).valueOf(),p=new Date;if(this.picker.find(".datetimepicker-days thead th:eq(1)").text(e[this.language].months[g]+" "+d),"time"==this.formatViewType){var q=this.getFormattedDate();this.picker.find(".datetimepicker-hours thead th:eq(1)").text(q),this.picker.find(".datetimepicker-minutes thead th:eq(1)").text(q)}else this.picker.find(".datetimepicker-hours thead th:eq(1)").text(h+" "+e[this.language].months[g]+" "+d),this.picker.find(".datetimepicker-minutes thead th:eq(1)").text(h+" "+e[this.language].months[g]+" "+d);this.picker.find("tfoot th.today").text(e[this.language].today).toggle(this.todayBtn!==!1),this.updateNavArrows(),this.fillMonths();var r=b(d,g-1,28,0,0,0,0),s=f.getDaysInMonth(r.getUTCFullYear(),r.getUTCMonth());r.setUTCDate(s),r.setUTCDate(s-(r.getUTCDay()-this.weekStart+7)%7);var t=new Date(r);t.setUTCDate(t.getUTCDate()+42),t=t.valueOf();for(var u,v=[];r.valueOf()<t;)r.getUTCDay()==this.weekStart&&v.push("<tr>"),u="",r.getUTCFullYear()<d||r.getUTCFullYear()==d&&r.getUTCMonth()<g?u+=" old":(r.getUTCFullYear()>d||r.getUTCFullYear()==d&&r.getUTCMonth()>g)&&(u+=" new"),this.todayHighlight&&r.getUTCFullYear()==p.getFullYear()&&r.getUTCMonth()==p.getMonth()&&r.getUTCDate()==p.getDate()&&(u+=" today"),r.valueOf()==o&&(u+=" active"),(r.valueOf()+864e5<=this.startDate||r.valueOf()>this.endDate||-1!==a.inArray(r.getUTCDay(),this.daysOfWeekDisabled))&&(u+=" disabled"),v.push('<td class="day'+u+'">'+r.getUTCDate()+"</td>"),r.getUTCDay()==this.weekEnd&&v.push("</tr>"),r.setUTCDate(r.getUTCDate()+1);this.picker.find(".datetimepicker-days tbody").empty().append(v.join("")),v=[];for(var w="",x="",y="",z=this.hoursDisabled||[],A=0;24>A;A++)if(-1===z.indexOf(A)){var B=b(d,g,h,A);u="",B.valueOf()+36e5<=this.startDate||B.valueOf()>this.endDate?u+=" disabled":i==A&&(u+=" active"),this.showMeridian&&2==e[this.language].meridiem.length?(x=12>A?e[this.language].meridiem[0]:e[this.language].meridiem[1],x!=y&&(""!=y&&v.push("</fieldset>"),v.push('<fieldset class="hour"><legend>'+x.toUpperCase()+"</legend>")),y=x,w=A%12?A%12:12,v.push('<span class="hour'+u+" hour_"+(12>A?"am":"pm")+'">'+w+"</span>"),23==A&&v.push("</fieldset>")):(w=A+":00",v.push('<span class="hour'+u+'">'+w+"</span>"))}this.picker.find(".datetimepicker-hours td").html(v.join("")),v=[],w="",x="",y="";for(var C=this.minutesDisabled||[],A=0;60>A;A+=this.minuteStep)if(-1===C.indexOf(A)){var B=b(d,g,h,i,A,0);u="",B.valueOf()<this.startDate||B.valueOf()>this.endDate?u+=" disabled":Math.floor(j/this.minuteStep)==Math.floor(A/this.minuteStep)&&(u+=" active"),this.showMeridian&&2==e[this.language].meridiem.length?(x=12>i?e[this.language].meridiem[0]:e[this.language].meridiem[1],x!=y&&(""!=y&&v.push("</fieldset>"),v.push('<fieldset class="minute"><legend>'+x.toUpperCase()+"</legend>")),y=x,w=i%12?i%12:12,v.push('<span class="minute'+u+'">'+w+":"+(10>A?"0"+A:A)+"</span>"),59==A&&v.push("</fieldset>")):(w=A+":00",v.push('<span class="minute'+u+'">'+i+":"+(10>A?"0"+A:A)+"</span>"))}this.picker.find(".datetimepicker-minutes td").html(v.join(""));var D=this.date.getUTCFullYear(),E=this.picker.find(".datetimepicker-months").find("th:eq(1)").text(d).end().find("span").removeClass("active");D==d&&E.eq(this.date.getUTCMonth()+2).addClass("active"),(k>d||d>m)&&E.addClass("disabled"),d==k&&E.slice(0,l+1).addClass("disabled"),d==m&&E.slice(n).addClass("disabled"),v="",d=10*parseInt(d/10,10);var F=this.picker.find(".datetimepicker-years").find("th:eq(1)").text(d+"-"+(d+9)).end().find("td");d-=1;for(var A=-1;11>A;A++)v+='<span class="year'+(-1==A||10==A?" old":"")+(D==d?" active":"")+(k>d||d>m?" disabled":"")+'">'+d+"</span>",d+=1;F.html(v),this.place()}},updateNavArrows:function(){var a=new Date(this.viewDate),b=a.getUTCFullYear(),c=a.getUTCMonth(),d=a.getUTCDate(),e=a.getUTCHours();switch(this.viewMode){case 0:this.startDate!==-(1/0)&&b<=this.startDate.getUTCFullYear()&&c<=this.startDate.getUTCMonth()&&d<=this.startDate.getUTCDate()&&e<=this.startDate.getUTCHours()?this.picker.find(".prev").css({visibility:"hidden"}):this.picker.find(".prev").css({visibility:"visible"}),this.endDate!==1/0&&b>=this.endDate.getUTCFullYear()&&c>=this.endDate.getUTCMonth()&&d>=this.endDate.getUTCDate()&&e>=this.endDate.getUTCHours()?this.picker.find(".next").css({visibility:"hidden"}):this.picker.find(".next").css({visibility:"visible"});break;case 1:this.startDate!==-(1/0)&&b<=this.startDate.getUTCFullYear()&&c<=this.startDate.getUTCMonth()&&d<=this.startDate.getUTCDate()?this.picker.find(".prev").css({visibility:"hidden"}):this.picker.find(".prev").css({visibility:"visible"}),this.endDate!==1/0&&b>=this.endDate.getUTCFullYear()&&c>=this.endDate.getUTCMonth()&&d>=this.endDate.getUTCDate()?this.picker.find(".next").css({visibility:"hidden"}):this.picker.find(".next").css({visibility:"visible"});break;case 2:this.startDate!==-(1/0)&&b<=this.startDate.getUTCFullYear()&&c<=this.startDate.getUTCMonth()?this.picker.find(".prev").css({visibility:"hidden"}):this.picker.find(".prev").css({visibility:"visible"}),this.endDate!==1/0&&b>=this.endDate.getUTCFullYear()&&c>=this.endDate.getUTCMonth()?this.picker.find(".next").css({visibility:"hidden"}):this.picker.find(".next").css({visibility:"visible"});break;case 3:case 4:this.startDate!==-(1/0)&&b<=this.startDate.getUTCFullYear()?this.picker.find(".prev").css({visibility:"hidden"}):this.picker.find(".prev").css({visibility:"visible"}),this.endDate!==1/0&&b>=this.endDate.getUTCFullYear()?this.picker.find(".next").css({visibility:"hidden"}):this.picker.find(".next").css({visibility:"visible"})}},mousewheel:function(b){if(b.preventDefault(),b.stopPropagation(),!this.wheelPause){this.wheelPause=!0;var c=b.originalEvent,d=c.wheelDelta,e=d>0?1:0===d?0:-1;this.wheelViewModeNavigationInverseDirection&&(e=-e),this.showMode(e),setTimeout(a.proxy(function(){this.wheelPause=!1},this),this.wheelViewModeNavigationDelay)}},click:function(c){c.stopPropagation(),c.preventDefault();var d=a(c.target).closest("span, td, th, legend");if(d.is("."+this.icontype)&&(d=a(d).parent().closest("span, td, th, legend")),1==d.length){if(d.is(".disabled"))return void this.element.trigger({type:"outOfRange",date:this.viewDate,startDate:this.startDate,endDate:this.endDate});switch(d[0].nodeName.toLowerCase()){case"th":switch(d[0].className){case"switch":this.showMode(1);break;case"prev":case"next":var e=f.modes[this.viewMode].navStep*("prev"==d[0].className?-1:1);switch(this.viewMode){case 0:this.viewDate=this.moveHour(this.viewDate,e);break;case 1:this.viewDate=this.moveDate(this.viewDate,e);break;case 2:this.viewDate=this.moveMonth(this.viewDate,e);break;case 3:case 4:this.viewDate=this.moveYear(this.viewDate,e)}this.fill(),this.element.trigger({type:d[0].className+":"+this.convertViewModeText(this.viewMode),date:this.viewDate,startDate:this.startDate,endDate:this.endDate});break;case"today":var g=new Date;g=b(g.getFullYear(),g.getMonth(),g.getDate(),g.getHours(),g.getMinutes(),g.getSeconds(),0),g<this.startDate?g=this.startDate:g>this.endDate&&(g=this.endDate),this.viewMode=this.startViewMode,this.showMode(0),this._setDate(g),this.fill(),this.autoclose&&this.hide()}break;case"span":if(!d.is(".disabled")){var h=this.viewDate.getUTCFullYear(),i=this.viewDate.getUTCMonth(),j=this.viewDate.getUTCDate(),k=this.viewDate.getUTCHours(),l=this.viewDate.getUTCMinutes(),m=this.viewDate.getUTCSeconds();if(d.is(".month")?(this.viewDate.setUTCDate(1),i=d.parent().find("span").index(d),j=this.viewDate.getUTCDate(),this.viewDate.setUTCMonth(i),this.element.trigger({type:"changeMonth",date:this.viewDate}),this.viewSelect>=3&&this._setDate(b(h,i,j,k,l,m,0))):d.is(".year")?(this.viewDate.setUTCDate(1),h=parseInt(d.text(),10)||0,this.viewDate.setUTCFullYear(h),this.element.trigger({type:"changeYear",date:this.viewDate}),this.viewSelect>=4&&this._setDate(b(h,i,j,k,l,m,0))):d.is(".hour")?(k=parseInt(d.text(),10)||0,(d.hasClass("hour_am")||d.hasClass("hour_pm"))&&(12==k&&d.hasClass("hour_am")?k=0:12!=k&&d.hasClass("hour_pm")&&(k+=12)),this.viewDate.setUTCHours(k),this.element.trigger({type:"changeHour",date:this.viewDate}),this.viewSelect>=1&&this._setDate(b(h,i,j,k,l,m,0))):d.is(".minute")&&(l=parseInt(d.text().substr(d.text().indexOf(":")+1),10)||0,this.viewDate.setUTCMinutes(l),this.element.trigger({type:"changeMinute",date:this.viewDate}),this.viewSelect>=0&&this._setDate(b(h,i,j,k,l,m,0))),0!=this.viewMode){var n=this.viewMode;this.showMode(-1),this.fill(),n==this.viewMode&&this.autoclose&&this.hide()}else this.fill(),this.autoclose&&this.hide()}break;case"td":if(d.is(".day")&&!d.is(".disabled")){var j=parseInt(d.text(),10)||1,h=this.viewDate.getUTCFullYear(),i=this.viewDate.getUTCMonth(),k=this.viewDate.getUTCHours(),l=this.viewDate.getUTCMinutes(),m=this.viewDate.getUTCSeconds();d.is(".old")?0===i?(i=11,h-=1):i-=1:d.is(".new")&&(11==i?(i=0,h+=1):i+=1),this.viewDate.setUTCFullYear(h),this.viewDate.setUTCMonth(i,j),this.element.trigger({type:"changeDay",date:this.viewDate}),this.viewSelect>=2&&this._setDate(b(h,i,j,k,l,m,0))}var n=this.viewMode;this.showMode(-1),this.fill(),n==this.viewMode&&this.autoclose&&this.hide()}}},_setDate:function(a,b){b&&"date"!=b||(this.date=a),b&&"view"!=b||(this.viewDate=a),this.fill(),this.setValue();var c;this.isInput?c=this.element:this.component&&(c=this.element.find("input")),c&&(c.change(),this.autoclose&&(!b||"date"==b)),this.element.trigger({type:"changeDate",date:this.date})},moveMinute:function(a,b){if(!b)return a;var c=new Date(a.valueOf());return c.setUTCMinutes(c.getUTCMinutes()+b*this.minuteStep),c},moveHour:function(a,b){if(!b)return a;var c=new Date(a.valueOf());return c.setUTCHours(c.getUTCHours()+b),c},moveDate:function(a,b){if(!b)return a;var c=new Date(a.valueOf());return c.setUTCDate(c.getUTCDate()+b),c},moveMonth:function(a,b){if(!b)return a;var c,d,e=new Date(a.valueOf()),f=e.getUTCDate(),g=e.getUTCMonth(),h=Math.abs(b);if(b=b>0?1:-1,1==h)d=-1==b?function(){return e.getUTCMonth()==g}:function(){return e.getUTCMonth()!=c},c=g+b,e.setUTCMonth(c),(0>c||c>11)&&(c=(c+12)%12);else{for(var i=0;h>i;i++)e=this.moveMonth(e,b);c=e.getUTCMonth(),e.setUTCDate(f),d=function(){return c!=e.getUTCMonth()}}for(;d();)e.setUTCDate(--f),e.setUTCMonth(c);return e},moveYear:function(a,b){return this.moveMonth(a,12*b)},dateWithinRange:function(a){return a>=this.startDate&&a<=this.endDate},keydown:function(a){if(this.picker.is(":not(:visible)"))return void(27==a.keyCode&&this.show());var b,c,d,e=!1;switch(a.keyCode){case 27:this.hide(),a.preventDefault();break;case 37:case 39:if(!this.keyboardNavigation)break;b=37==a.keyCode?-1:1,viewMode=this.viewMode,a.ctrlKey?viewMode+=2:a.shiftKey&&(viewMode+=1),4==viewMode?(c=this.moveYear(this.date,b),d=this.moveYear(this.viewDate,b)):3==viewMode?(c=this.moveMonth(this.date,b),d=this.moveMonth(this.viewDate,b)):2==viewMode?(c=this.moveDate(this.date,b),d=this.moveDate(this.viewDate,b)):1==viewMode?(c=this.moveHour(this.date,b),d=this.moveHour(this.viewDate,b)):0==viewMode&&(c=this.moveMinute(this.date,b),d=this.moveMinute(this.viewDate,b)),this.dateWithinRange(c)&&(this.date=c,this.viewDate=d,this.setValue(),this.update(),a.preventDefault(),e=!0);break;case 38:case 40:if(!this.keyboardNavigation)break;b=38==a.keyCode?-1:1,viewMode=this.viewMode,a.ctrlKey?viewMode+=2:a.shiftKey&&(viewMode+=1),4==viewMode?(c=this.moveYear(this.date,b),d=this.moveYear(this.viewDate,b)):3==viewMode?(c=this.moveMonth(this.date,b),d=this.moveMonth(this.viewDate,b)):2==viewMode?(c=this.moveDate(this.date,7*b),d=this.moveDate(this.viewDate,7*b)):1==viewMode?this.showMeridian?(c=this.moveHour(this.date,6*b),d=this.moveHour(this.viewDate,6*b)):(c=this.moveHour(this.date,4*b),d=this.moveHour(this.viewDate,4*b)):0==viewMode&&(c=this.moveMinute(this.date,4*b),d=this.moveMinute(this.viewDate,4*b)),this.dateWithinRange(c)&&(this.date=c,this.viewDate=d,this.setValue(),this.update(),a.preventDefault(),e=!0);break;case 13:if(0!=this.viewMode){var f=this.viewMode;this.showMode(-1),this.fill(),f==this.viewMode&&this.autoclose&&this.hide()}else this.fill(),this.autoclose&&this.hide();a.preventDefault();break;case 9:this.hide()}if(e){var g;this.isInput?g=this.element:this.component&&(g=this.element.find("input")),g&&g.change(),this.element.trigger({type:"changeDate",date:this.date})}},showMode:function(a){if(a){var b=Math.max(0,Math.min(f.modes.length-1,this.viewMode+a));b>=this.minView&&b<=this.maxView&&(this.element.trigger({type:"changeMode",date:this.viewDate,oldViewMode:this.viewMode,newViewMode:b}),this.viewMode=b)}this.picker.find(">div").hide().filter(".datetimepicker-"+f.modes[this.viewMode].clsName).css("display","block"),this.updateNavArrows()},reset:function(a){this._setDate(null,"date")},convertViewModeText:function(a){switch(a){case 4:return"decade";case 3:return"year";case 2:return"month";case 1:return"day";case 0:return"hour"}}};var d=a.fn.datetimepicker;a.fn.datetimepicker=function(b){var d=Array.apply(null,arguments);d.shift();var e;return this.each(function(){var f=a(this),g=f.data("datetimepicker"),h="object"==typeof b&&b;return g||f.data("datetimepicker",g=new c(this,a.extend({},a.fn.datetimepicker.defaults,h))),"string"==typeof b&&"function"==typeof g[b]&&(e=g[b].apply(g,d),void 0!==e)?!1:void 0}),void 0!==e?e:this},a.fn.datetimepicker.defaults={},a.fn.datetimepicker.Constructor=c;var e=a.fn.datetimepicker.dates={en:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sun"],daysMin:["Su","Mo","Tu","We","Th","Fr","Sa","Su"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],meridiem:["am","pm"],suffix:["st","nd","rd","th"],today:"Today"}},f={modes:[{clsName:"minutes",navFnc:"Hours",navStep:1},{clsName:"hours",navFnc:"Date",navStep:1},{clsName:"days",navFnc:"Month",navStep:1},{clsName:"months",navFnc:"FullYear",navStep:1},{clsName:"years",navFnc:"FullYear",navStep:10}],isLeapYear:function(a){return a%4===0&&a%100!==0||a%400===0},getDaysInMonth:function(a,b){return[31,f.isLeapYear(a)?29:28,31,30,31,30,31,31,30,31,30,31][b]},getDefaultFormat:function(a,b){if("standard"==a)return"input"==b?"yyyy-mm-dd hh:ii":"yyyy-mm-dd hh:ii:ss";if("php"==a)return"input"==b?"Y-m-d H:i":"Y-m-d H:i:s";throw new Error("Invalid format type.")},validParts:function(a){if("standard"==a)return/hh?|HH?|p|P|ii?|ss?|dd?|DD?|mm?|MM?|yy(?:yy)?/g;if("php"==a)return/[dDjlNwzFmMnStyYaABgGhHis]/g;throw new Error("Invalid format type.")},nonpunctuation:/[^ -\/:-@\[-`{-~\t\n\rTZ]+/g,parseFormat:function(a,b){var c=a.replace(this.validParts(b),"\x00").split("\x00"),d=a.match(this.validParts(b));if(!c||!c.length||!d||0==d.length)throw new Error("Invalid date format.");return{separators:c,parts:d}},parseDate:function(d,f,g,h){if(d instanceof Date){var i=new Date(d.valueOf()-6e4*d.getTimezoneOffset());return i.setMilliseconds(0),i}if(/^\d{4}\-\d{1,2}\-\d{1,2}$/.test(d)&&(f=this.parseFormat("yyyy-mm-dd",h)),/^\d{4}\-\d{1,2}\-\d{1,2}[T ]\d{1,2}\:\d{1,2}$/.test(d)&&(f=this.parseFormat("yyyy-mm-dd hh:ii",h)),/^\d{4}\-\d{1,2}\-\d{1,2}[T ]\d{1,2}\:\d{1,2}\:\d{1,2}[Z]{0,1}$/.test(d)&&(f=this.parseFormat("yyyy-mm-dd hh:ii:ss",h)),/^[-+]\d+[dmwy]([\s,]+[-+]\d+[dmwy])*$/.test(d)){var j,k,l=/([-+]\d+)([dmwy])/,m=d.match(/([-+]\d+)([dmwy])/g);d=new Date;for(var n=0;n<m.length;n++)switch(j=l.exec(m[n]),k=parseInt(j[1]),
j[2]){case"d":d.setUTCDate(d.getUTCDate()+k);break;case"m":d=c.prototype.moveMonth.call(c.prototype,d,k);break;case"w":d.setUTCDate(d.getUTCDate()+7*k);break;case"y":d=c.prototype.moveYear.call(c.prototype,d,k)}return b(d.getUTCFullYear(),d.getUTCMonth(),d.getUTCDate(),d.getUTCHours(),d.getUTCMinutes(),d.getUTCSeconds(),0)}var o,p,j,m=d&&d.toString().match(this.nonpunctuation)||[],d=new Date(0,0,0,0,0,0,0),q={},r=["hh","h","ii","i","ss","s","yyyy","yy","M","MM","m","mm","D","DD","d","dd","H","HH","p","P"],s={hh:function(a,b){return a.setUTCHours(b)},h:function(a,b){return a.setUTCHours(b)},HH:function(a,b){return a.setUTCHours(12==b?0:b)},H:function(a,b){return a.setUTCHours(12==b?0:b)},ii:function(a,b){return a.setUTCMinutes(b)},i:function(a,b){return a.setUTCMinutes(b)},ss:function(a,b){return a.setUTCSeconds(b)},s:function(a,b){return a.setUTCSeconds(b)},yyyy:function(a,b){return a.setUTCFullYear(b)},yy:function(a,b){return a.setUTCFullYear(2e3+b)},m:function(a,b){for(b-=1;0>b;)b+=12;for(b%=12,a.setUTCMonth(b);a.getUTCMonth()!=b;){if(isNaN(a.getUTCMonth()))return a;a.setUTCDate(a.getUTCDate()-1)}return a},d:function(a,b){return a.setUTCDate(b)},p:function(a,b){return a.setUTCHours(1==b?a.getUTCHours()+12:a.getUTCHours())}};if(s.M=s.MM=s.mm=s.m,s.dd=s.d,s.P=s.p,d=b(d.getFullYear(),d.getMonth(),d.getDate(),d.getHours(),d.getMinutes(),d.getSeconds()),m.length==f.parts.length){for(var n=0,t=f.parts.length;t>n;n++){if(o=parseInt(m[n],10),j=f.parts[n],isNaN(o))switch(j){case"MM":p=a(e[g].months).filter(function(){var a=this.slice(0,m[n].length),b=m[n].slice(0,a.length);return a==b}),o=a.inArray(p[0],e[g].months)+1;break;case"M":p=a(e[g].monthsShort).filter(function(){var a=this.slice(0,m[n].length),b=m[n].slice(0,a.length);return a.toLowerCase()==b.toLowerCase()}),o=a.inArray(p[0],e[g].monthsShort)+1;break;case"p":case"P":o=a.inArray(m[n].toLowerCase(),e[g].meridiem)}q[j]=o}for(var u,n=0;n<r.length;n++)u=r[n],u in q&&!isNaN(q[u])&&s[u](d,q[u])}return d},formatDate:function(b,c,d,g){if(null==b)return"";var h;if("standard"==g)h={yy:b.getUTCFullYear().toString().substring(2),yyyy:b.getUTCFullYear(),m:b.getUTCMonth()+1,M:e[d].monthsShort[b.getUTCMonth()],MM:e[d].months[b.getUTCMonth()],d:b.getUTCDate(),D:e[d].daysShort[b.getUTCDay()],DD:e[d].days[b.getUTCDay()],p:2==e[d].meridiem.length?e[d].meridiem[b.getUTCHours()<12?0:1]:"",h:b.getUTCHours(),i:b.getUTCMinutes(),s:b.getUTCSeconds()},2==e[d].meridiem.length?h.H=h.h%12==0?12:h.h%12:h.H=h.h,h.HH=(h.H<10?"0":"")+h.H,h.P=h.p.toUpperCase(),h.hh=(h.h<10?"0":"")+h.h,h.ii=(h.i<10?"0":"")+h.i,h.ss=(h.s<10?"0":"")+h.s,h.dd=(h.d<10?"0":"")+h.d,h.mm=(h.m<10?"0":"")+h.m;else{if("php"!=g)throw new Error("Invalid format type.");h={y:b.getUTCFullYear().toString().substring(2),Y:b.getUTCFullYear(),F:e[d].months[b.getUTCMonth()],M:e[d].monthsShort[b.getUTCMonth()],n:b.getUTCMonth()+1,t:f.getDaysInMonth(b.getUTCFullYear(),b.getUTCMonth()),j:b.getUTCDate(),l:e[d].days[b.getUTCDay()],D:e[d].daysShort[b.getUTCDay()],w:b.getUTCDay(),N:0==b.getUTCDay()?7:b.getUTCDay(),S:b.getUTCDate()%10<=e[d].suffix.length?e[d].suffix[b.getUTCDate()%10-1]:"",a:2==e[d].meridiem.length?e[d].meridiem[b.getUTCHours()<12?0:1]:"",g:b.getUTCHours()%12==0?12:b.getUTCHours()%12,G:b.getUTCHours(),i:b.getUTCMinutes(),s:b.getUTCSeconds()},h.m=(h.n<10?"0":"")+h.n,h.d=(h.j<10?"0":"")+h.j,h.A=h.a.toString().toUpperCase(),h.h=(h.g<10?"0":"")+h.g,h.H=(h.G<10?"0":"")+h.G,h.i=(h.i<10?"0":"")+h.i,h.s=(h.s<10?"0":"")+h.s}for(var b=[],i=a.extend([],c.separators),j=0,k=c.parts.length;k>j;j++)i.length&&b.push(i.shift()),b.push(h[c.parts[j]]);return i.length&&b.push(i.shift()),b.join("")},convertViewMode:function(a){switch(a){case 4:case"decade":a=4;break;case 3:case"year":a=3;break;case 2:case"month":a=2;break;case 1:case"day":a=1;break;case 0:case"hour":a=0}return a},headTemplate:'<thead><tr><th class="prev"><i class="{leftArrow}"/></th><th colspan="5" class="switch"></th><th class="next"><i class="{rightArrow}"/></th></tr></thead>',headTemplateV3:'<thead><tr><th class="prev"><span class="{iconType} {leftArrow}"></span> </th><th colspan="5" class="switch"></th><th class="next"><span class="{iconType} {rightArrow}"></span> </th></tr></thead>',contTemplate:'<tbody><tr><td colspan="7"></td></tr></tbody>',footTemplate:'<tfoot><tr><th colspan="7" class="today"></th></tr></tfoot>'};f.template='<div class="datetimepicker"><div class="datetimepicker-minutes"><table class=" table-condensed">'+f.headTemplate+f.contTemplate+f.footTemplate+'</table></div><div class="datetimepicker-hours"><table class=" table-condensed">'+f.headTemplate+f.contTemplate+f.footTemplate+'</table></div><div class="datetimepicker-days"><table class=" table-condensed">'+f.headTemplate+"<tbody></tbody>"+f.footTemplate+'</table></div><div class="datetimepicker-months"><table class="table-condensed">'+f.headTemplate+f.contTemplate+f.footTemplate+'</table></div><div class="datetimepicker-years"><table class="table-condensed">'+f.headTemplate+f.contTemplate+f.footTemplate+"</table></div></div>",f.templateV3='<div class="datetimepicker"><div class="datetimepicker-minutes"><table class=" table-condensed">'+f.headTemplateV3+f.contTemplate+f.footTemplate+'</table></div><div class="datetimepicker-hours"><table class=" table-condensed">'+f.headTemplateV3+f.contTemplate+f.footTemplate+'</table></div><div class="datetimepicker-days"><table class=" table-condensed">'+f.headTemplateV3+"<tbody></tbody>"+f.footTemplate+'</table></div><div class="datetimepicker-months"><table class="table-condensed">'+f.headTemplateV3+f.contTemplate+f.footTemplate+'</table></div><div class="datetimepicker-years"><table class="table-condensed">'+f.headTemplateV3+f.contTemplate+f.footTemplate+"</table></div></div>",a.fn.datetimepicker.DPGlobal=f,a.fn.datetimepicker.noConflict=function(){return a.fn.datetimepicker=d,this},a(document).on("focus.datetimepicker.data-api click.datetimepicker.data-api",'[data-provide="datetimepicker"]',function(b){var c=a(this);c.data("datetimepicker")||(b.preventDefault(),c.datetimepicker("show"))}),a(function(){a('[data-provide="datetimepicker-inline"]').datetimepicker()})}(window.jQuery),function(a){a.fn.datetimepicker.dates["zh-CN"]={days:["星期日","星期一","星期二","星期三","星期四","星期五","星期六","星期日"],daysShort:["周日","周一","周二","周三","周四","周五","周六","周日"],daysMin:["日","一","二","三","四","五","六","日"],months:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],monthsShort:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],today:"今天",suffix:[],meridiem:["上午","下午"]}}(jQuery),!function(a){"use strict";function b(a,b){return a.toUpperCase().indexOf(b.toUpperCase())>-1}function c(b){var c=[{re:/[\xC0-\xC6]/g,ch:"A"},{re:/[\xE0-\xE6]/g,ch:"a"},{re:/[\xC8-\xCB]/g,ch:"E"},{re:/[\xE8-\xEB]/g,ch:"e"},{re:/[\xCC-\xCF]/g,ch:"I"},{re:/[\xEC-\xEF]/g,ch:"i"},{re:/[\xD2-\xD6]/g,ch:"O"},{re:/[\xF2-\xF6]/g,ch:"o"},{re:/[\xD9-\xDC]/g,ch:"U"},{re:/[\xF9-\xFC]/g,ch:"u"},{re:/[\xC7-\xE7]/g,ch:"c"},{re:/[\xD1]/g,ch:"N"},{re:/[\xF1]/g,ch:"n"}];return a.each(c,function(){b=b.replace(this.re,this.ch)}),b}function d(a){var b={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},c="(?:"+Object.keys(b).join("|")+")",d=new RegExp(c),e=new RegExp(c,"g"),f=null==a?"":""+a;return d.test(f)?f.replace(e,function(a){return b[a]}):f}function e(b,c){var d=arguments,e=b,b=d[0],c=d[1];[].shift.apply(d),"undefined"==typeof b&&(b=e);var g,h=this.each(function(){var e=a(this);if(e.is("select")){var h=e.data("selectpicker"),i="object"==typeof b&&b;if(h){if(i)for(var j in i)i.hasOwnProperty(j)&&(h.options[j]=i[j])}else{var k=a.extend({},f.DEFAULTS,a.fn.selectpicker.defaults||{},e.data(),i);e.data("selectpicker",h=new f(this,k,c))}"string"==typeof b&&(g=h[b]instanceof Function?h[b].apply(h,d):h.options[b])}});return"undefined"!=typeof g?g:h}a.expr[":"].icontains=function(c,d,e){return b(a(c).text(),e[3])},a.expr[":"].aicontains=function(c,d,e){return b(a(c).data("normalizedText")||a(c).text(),e[3])};var f=function(b,c,d){d&&(d.stopPropagation(),d.preventDefault()),this.$element=a(b),this.$newElement=null,this.$button=null,this.$menu=null,this.$lis=null,this.options=c,null===this.options.title&&(this.options.title=this.$element.attr("title")),this.val=f.prototype.val,this.render=f.prototype.render,this.refresh=f.prototype.refresh,this.setStyle=f.prototype.setStyle,this.selectAll=f.prototype.selectAll,this.deselectAll=f.prototype.deselectAll,this.destroy=f.prototype.remove,this.remove=f.prototype.remove,this.show=f.prototype.show,this.hide=f.prototype.hide,this.init()};f.VERSION="1.6.3",f.DEFAULTS={noneSelectedText:"Nothing selected",noneResultsText:"No results match",countSelectedText:function(a){return 1==a?"{0} item selected":"{0} items selected"},maxOptionsText:function(a,b){var c=[];return c[0]=1==a?"Limit reached ({n} item max)":"Limit reached ({n} items max)",c[1]=1==b?"Group limit reached ({n} item max)":"Group limit reached ({n} items max)",c},selectAllText:"Select All",deselectAllText:"Deselect All",multipleSeparator:", ",style:"btn-default",size:"auto",title:null,selectedTextFormat:"values",width:!1,container:!1,hideDisabled:!1,showSubtext:!1,showIcon:!0,showContent:!0,dropupAuto:!0,header:!1,liveSearch:!1,actionsBox:!1,iconBase:"glyphicon",tickIcon:"glyphicon-ok",maxOptions:!1,mobile:!1,selectOnTab:!1,dropdownAlignRight:!1,searchAccentInsensitive:!1},f.prototype={constructor:f,init:function(){var b=this,c=this.$element.attr("id");this.$element.hide(),this.multiple=this.$element.prop("multiple"),this.autofocus=this.$element.prop("autofocus"),this.$newElement=this.createView(),this.$element.after(this.$newElement),this.$menu=this.$newElement.find("> .dropdown-menu"),this.$button=this.$newElement.find("> button"),this.$searchbox=this.$newElement.find("input"),this.options.dropdownAlignRight&&this.$menu.addClass("dropdown-menu-right"),"undefined"!=typeof c&&(this.$button.attr("data-id",c),a('label[for="'+c+'"]').click(function(a){a.preventDefault(),b.$button.focus()})),this.checkDisabled(),this.clickListener(),this.options.liveSearch&&this.liveSearchListener(),this.render(),this.liHeight(),this.setStyle(),this.setWidth(),this.options.container&&this.selectPosition(),this.$menu.data("this",this),this.$newElement.data("this",this),this.options.mobile&&this.mobile()},createDropdown:function(){var b=this.multiple?" show-tick":"",c=this.$element.parent().hasClass("input-group")?" input-group-btn":"",d=this.autofocus?" autofocus":"",e=this.$element.parents().hasClass("form-group-lg")?" btn-lg":this.$element.parents().hasClass("form-group-sm")?" btn-sm":"",f=this.options.header?'<div class="popover-title"><button type="button" class="close" aria-hidden="true">&times;</button>'+this.options.header+"</div>":"",g=this.options.liveSearch?'<div class="bs-searchbox"><input type="text" class="input-block-level form-control" autocomplete="off" /></div>':"",h=this.options.actionsBox?'<div class="bs-actionsbox"><div class="btn-group btn-block"><button class="actions-btn bs-select-all btn btn-sm btn-default">'+this.options.selectAllText+'</button><button class="actions-btn bs-deselect-all btn btn-sm btn-default">'+this.options.deselectAllText+"</button></div></div>":"",i='<div class="btn-group bootstrap-select'+b+c+'"><button type="button" class="btn dropdown-toggle selectpicker'+e+'" data-toggle="dropdown"'+d+'><span class="filter-option pull-left"></span>&nbsp;<span class="caret"></span></button><div class="dropdown-menu open">'+f+g+h+'<ul class="dropdown-menu inner selectpicker" role="menu"></ul></div></div>';return a(i)},createView:function(){var a=this.createDropdown(),b=this.createLi();return a.find("ul").append(b),a},reloadLi:function(){this.destroyLi();var a=this.createLi();this.$menu.find("ul").append(a)},destroyLi:function(){this.$menu.find("li").remove()},createLi:function(){var b=this,e=[],f=0,g=function(a,b,c){return"<li"+("undefined"!=typeof c?' class="'+c+'"':"")+("undefined"!=typeof b|null===b?' data-original-index="'+b+'"':"")+">"+a+"</li>"},h=function(a,e,f,g){var h=c(d(a));return'<a tabindex="0"'+("undefined"!=typeof e?' class="'+e+'"':"")+("undefined"!=typeof f?' style="'+f+'"':"")+("undefined"!=typeof g?'data-optgroup="'+g+'"':"")+' data-normalized-text="'+h+'">'+a+'<span class="'+b.options.iconBase+" "+b.options.tickIcon+' check-mark"></span></a>'};return this.$element.find("option").each(function(){var c=a(this),d=c.attr("class")||"",i=c.attr("style"),j=c.data("content")?c.data("content"):c.html(),k="undefined"!=typeof c.data("subtext")?'<small class="muted text-muted">'+c.data("subtext")+"</small>":"",l="undefined"!=typeof c.data("icon")?'<span class="'+b.options.iconBase+" "+c.data("icon")+'"></span> ':"",m=c.is(":disabled")||c.parent().is(":disabled"),n=c[0].index;if(""!==l&&m&&(l="<span>"+l+"</span>"),c.data("content")||(j=l+'<span class="text">'+j+k+"</span>"),!b.options.hideDisabled||!m)if(c.parent().is("optgroup")&&c.data("divider")!==!0){if(0===c.index()){f+=1;var o=c.parent().attr("label"),p="undefined"!=typeof c.parent().data("subtext")?'<small class="muted text-muted">'+c.parent().data("subtext")+"</small>":"",q=c.parent().data("icon")?'<span class="'+b.options.iconBase+" "+c.parent().data("icon")+'"></span> ':"";o=q+'<span class="text">'+o+p+"</span>",0!==n&&e.length>0&&e.push(g("",null,"divider")),e.push(g(o,null,"dropdown-header"))}e.push(g(h(j,"opt "+d,i,f),n))}else e.push(c.data("divider")===!0?g("",n,"divider"):c.data("hidden")===!0?g(h(j,d,i),n,"hide is-hidden"):g(h(j,d,i),n))}),this.multiple||0!==this.$element.find("option:selected").length||this.options.title||this.$element.find("option").eq(0).prop("selected",!0).attr("selected","selected"),a(e.join(""))},findLis:function(){return null==this.$lis&&(this.$lis=this.$menu.find("li")),this.$lis},render:function(b){var c=this;b!==!1&&this.$element.find("option").each(function(b){c.setDisabled(b,a(this).is(":disabled")||a(this).parent().is(":disabled")),c.setSelected(b,a(this).is(":selected"))}),this.tabIndex();var e=this.options.hideDisabled?":not([disabled])":"",f=this.$element.find("option:selected"+e).map(function(){var b,d=a(this),e=d.data("icon")&&c.options.showIcon?'<i class="'+c.options.iconBase+" "+d.data("icon")+'"></i> ':"";return b=c.options.showSubtext&&d.attr("data-subtext")&&!c.multiple?' <small class="muted text-muted">'+d.data("subtext")+"</small>":"",d.data("content")&&c.options.showContent?d.data("content"):"undefined"!=typeof d.attr("title")?d.attr("title"):e+d.html()+b}).toArray(),g=this.multiple?f.join(this.options.multipleSeparator):f[0];if(this.multiple&&this.options.selectedTextFormat.indexOf("count")>-1){var h=this.options.selectedTextFormat.split(">");if(h.length>1&&f.length>h[1]||1==h.length&&f.length>=2){e=this.options.hideDisabled?", [disabled]":"";var i=this.$element.find("option").not('[data-divider="true"], [data-hidden="true"]'+e).length,j="function"==typeof this.options.countSelectedText?this.options.countSelectedText(f.length,i):this.options.countSelectedText;g=j.replace("{0}",f.length.toString()).replace("{1}",i.toString())}}this.options.title=this.$element.attr("title"),"static"==this.options.selectedTextFormat&&(g=this.options.title),g||(g="undefined"!=typeof this.options.title?this.options.title:this.options.noneSelectedText),this.$button.attr("title",d(g)),this.$newElement.find(".filter-option").html(g)},setStyle:function(a,b){this.$element.attr("class")&&this.$newElement.addClass(this.$element.attr("class").replace(/selectpicker|mobile-device|validate\[.*\]/gi,""));var c=a?a:this.options.style;"add"==b?this.$button.addClass(c):"remove"==b?this.$button.removeClass(c):(this.$button.removeClass(this.options.style),this.$button.addClass(c))},liHeight:function(){if(this.options.size!==!1){var a=this.$menu.parent().clone().find("> .dropdown-toggle").prop("autofocus",!1).end().appendTo("body"),b=a.addClass("open").find("> .dropdown-menu"),c=b.find("li").not(".divider").not(".dropdown-header").filter(":visible").children("a").outerHeight(),d=this.options.header?b.find(".popover-title").outerHeight():0,e=this.options.liveSearch?b.find(".bs-searchbox").outerHeight():0,f=this.options.actionsBox?b.find(".bs-actionsbox").outerHeight():0;a.remove(),this.$newElement.data("liHeight",c).data("headerHeight",d).data("searchHeight",e).data("actionsHeight",f)}},setSize:function(){this.findLis();var b,c,d,e=this,f=this.$menu,g=f.find(".inner"),h=this.$newElement.outerHeight(),i=this.$newElement.data("liHeight"),j=this.$newElement.data("headerHeight"),k=this.$newElement.data("searchHeight"),l=this.$newElement.data("actionsHeight"),m=this.$lis.filter(".divider").outerHeight(!0),n=parseInt(f.css("padding-top"))+parseInt(f.css("padding-bottom"))+parseInt(f.css("border-top-width"))+parseInt(f.css("border-bottom-width")),o=this.options.hideDisabled?", .disabled":"",p=a(window),q=n+parseInt(f.css("margin-top"))+parseInt(f.css("margin-bottom"))+2,r=function(){c=e.$newElement.offset().top-p.scrollTop(),d=p.height()-c-h};if(r(),this.options.header&&f.css("padding-top",0),"auto"==this.options.size){var s=function(){var a,h=e.$lis.not(".hide");r(),b=d-q,e.options.dropupAuto&&e.$newElement.toggleClass("dropup",c>d&&b-q<f.height()),e.$newElement.hasClass("dropup")&&(b=c-q),a=h.length+h.filter(".dropdown-header").length>3?3*i+q-2:0,f.css({"max-height":b+"px",overflow:"hidden","min-height":a+j+k+l+"px"}),g.css({"max-height":b-j-k-l-n+"px","overflow-y":"auto","min-height":Math.max(a-n,0)+"px"})};s(),this.$searchbox.off("input.getSize propertychange.getSize").on("input.getSize propertychange.getSize",s),a(window).off("resize.getSize").on("resize.getSize",s),a(window).off("scroll.getSize").on("scroll.getSize",s)}else if(this.options.size&&"auto"!=this.options.size&&f.find("li"+o).length>this.options.size){var t=this.$lis.not(".divider"+o).find(" > *").slice(0,this.options.size).last().parent().index(),u=this.$lis.slice(0,t+1).filter(".divider").length;b=i*this.options.size+u*m+n,e.options.dropupAuto&&this.$newElement.toggleClass("dropup",c>d&&b<f.height()),f.css({"max-height":b+j+k+l+"px",overflow:"hidden"}),g.css({"max-height":b-n+"px","overflow-y":"auto"})}},setWidth:function(){if("auto"==this.options.width){this.$menu.css("min-width","0");var a=this.$newElement.clone().appendTo("body"),b=a.find("> .dropdown-menu").css("width"),c=a.css("width","auto").find("> button").css("width");a.remove(),this.$newElement.css("width",Math.max(parseInt(b),parseInt(c))+"px")}else"fit"==this.options.width?(this.$menu.css("min-width",""),this.$newElement.css("width","").addClass("fit-width")):this.options.width?(this.$menu.css("min-width",""),this.$newElement.css("width",this.options.width)):(this.$menu.css("min-width",""),this.$newElement.css("width",""));this.$newElement.hasClass("fit-width")&&"fit"!==this.options.width&&this.$newElement.removeClass("fit-width")},selectPosition:function(){var b,c,d=this,e="<div />",f=a(e),g=function(a){f.addClass(a.attr("class").replace(/form-control/gi,"")).toggleClass("dropup",a.hasClass("dropup")),b=a.offset(),c=a.hasClass("dropup")?0:a[0].offsetHeight,f.css({top:b.top+c,left:b.left,width:a[0].offsetWidth,position:"absolute"})};this.$newElement.on("click",function(){d.isDisabled()||(g(a(this)),f.appendTo(d.options.container),f.toggleClass("open",!a(this).hasClass("open")),f.append(d.$menu))}),a(window).resize(function(){g(d.$newElement)}),a(window).on("scroll",function(){g(d.$newElement)}),a("html").on("click",function(b){a(b.target).closest(d.$newElement).length<1&&f.removeClass("open")})},setSelected:function(a,b){this.findLis(),this.$lis.filter('[data-original-index="'+a+'"]').toggleClass("selected",b)},setDisabled:function(a,b){this.findLis(),b?this.$lis.filter('[data-original-index="'+a+'"]').addClass("disabled").find("a").attr("href","#").attr("tabindex",-1):this.$lis.filter('[data-original-index="'+a+'"]').removeClass("disabled").find("a").removeAttr("href").attr("tabindex",0)},isDisabled:function(){return this.$element.is(":disabled")},checkDisabled:function(){var a=this;this.isDisabled()?this.$button.addClass("disabled").attr("tabindex",-1):(this.$button.hasClass("disabled")&&this.$button.removeClass("disabled"),-1==this.$button.attr("tabindex")&&(this.$element.data("tabindex")||this.$button.removeAttr("tabindex"))),this.$button.click(function(){return!a.isDisabled()})},tabIndex:function(){this.$element.is("[tabindex]")&&(this.$element.data("tabindex",this.$element.attr("tabindex")),this.$button.attr("tabindex",this.$element.data("tabindex")))},clickListener:function(){var b=this;this.$newElement.on("touchstart.dropdown",".dropdown-menu",function(a){a.stopPropagation()}),this.$newElement.on("click",function(){b.setSize(),b.options.liveSearch||b.multiple||setTimeout(function(){b.$menu.find(".selected a").focus()},10)}),this.$menu.on("click","li a",function(c){var d=a(this),e=d.parent().data("originalIndex"),f=b.$element.val(),g=b.$element.prop("selectedIndex");if(b.multiple&&c.stopPropagation(),c.preventDefault(),!b.isDisabled()&&!d.parent().hasClass("disabled")){var h=b.$element.find("option"),i=h.eq(e),j=i.prop("selected"),k=i.parent("optgroup"),l=b.options.maxOptions,m=k.data("maxOptions")||!1;if(b.multiple){if(i.prop("selected",!j),b.setSelected(e,!j),d.blur(),l!==!1||m!==!1){var n=l<h.filter(":selected").length,o=m<k.find("option:selected").length;if(l&&n||m&&o)if(l&&1==l)h.prop("selected",!1),i.prop("selected",!0),b.$menu.find(".selected").removeClass("selected"),b.setSelected(e,!0);else if(m&&1==m){k.find("option:selected").prop("selected",!1),i.prop("selected",!0);var p=d.data("optgroup");b.$menu.find(".selected").has('a[data-optgroup="'+p+'"]').removeClass("selected"),b.setSelected(e,!0)}else{var q="function"==typeof b.options.maxOptionsText?b.options.maxOptionsText(l,m):b.options.maxOptionsText,r=q[0].replace("{n}",l),s=q[1].replace("{n}",m),t=a('<div class="notify"></div>');q[2]&&(r=r.replace("{var}",q[2][l>1?0:1]),s=s.replace("{var}",q[2][m>1?0:1])),i.prop("selected",!1),b.$menu.append(t),l&&n&&(t.append(a("<div>"+r+"</div>")),b.$element.trigger("maxReached.bs.select")),m&&o&&(t.append(a("<div>"+s+"</div>")),b.$element.trigger("maxReachedGrp.bs.select")),setTimeout(function(){b.setSelected(e,!1)},10),t.delay(750).fadeOut(300,function(){a(this).remove()})}}}else h.prop("selected",!1),i.prop("selected",!0),b.$menu.find(".selected").removeClass("selected"),b.setSelected(e,!0);b.multiple?b.options.liveSearch&&b.$searchbox.focus():b.$button.focus(),(f!=b.$element.val()&&b.multiple||g!=b.$element.prop("selectedIndex")&&!b.multiple)&&b.$element.change()}}),this.$menu.on("click","li.disabled a, .popover-title, .popover-title :not(.close)",function(a){a.target==this&&(a.preventDefault(),a.stopPropagation(),b.options.liveSearch?b.$searchbox.focus():b.$button.focus())}),this.$menu.on("click","li.divider, li.dropdown-header",function(a){a.preventDefault(),a.stopPropagation(),b.options.liveSearch?b.$searchbox.focus():b.$button.focus()}),this.$menu.on("click",".popover-title .close",function(){b.$button.focus()}),this.$searchbox.on("click",function(a){a.stopPropagation()}),this.$menu.on("click",".actions-btn",function(c){b.options.liveSearch?b.$searchbox.focus():b.$button.focus(),c.preventDefault(),c.stopPropagation(),a(this).is(".bs-select-all")?b.selectAll():b.deselectAll(),b.$element.change()}),this.$element.change(function(){b.render(!1)})},liveSearchListener:function(){var b=this,e=a('<li class="no-results"></li>');this.$newElement.on("click.dropdown.data-api touchstart.dropdown.data-api",function(){b.$menu.find(".active").removeClass("active"),b.$searchbox.val()&&(b.$searchbox.val(""),b.$lis.not(".is-hidden").removeClass("hide"),e.parent().length&&e.remove()),b.multiple||b.$menu.find(".selected").addClass("active"),setTimeout(function(){b.$searchbox.focus()},10)}),this.$searchbox.on("click.dropdown.data-api focus.dropdown.data-api touchend.dropdown.data-api",function(a){a.stopPropagation()}),this.$searchbox.on("input propertychange",function(){b.$searchbox.val()?(b.options.searchAccentInsensitive?b.$lis.not(".is-hidden").removeClass("hide").find("a").not(":aicontains("+c(b.$searchbox.val())+")").parent().addClass("hide"):b.$lis.not(".is-hidden").removeClass("hide").find("a").not(":icontains("+b.$searchbox.val()+")").parent().addClass("hide"),b.$menu.find("li").filter(":visible:not(.no-results)").length?e.parent().length&&e.remove():(e.parent().length&&e.remove(),e.html(b.options.noneResultsText+' "'+d(b.$searchbox.val())+'"').show(),b.$menu.find("li").last().after(e))):(b.$lis.not(".is-hidden").removeClass("hide"),e.parent().length&&e.remove()),b.$menu.find("li.active").removeClass("active"),b.$menu.find("li").filter(":visible:not(.divider)").eq(0).addClass("active").find("a").focus(),a(this).focus()})},val:function(a){return"undefined"!=typeof a?(this.$element.val(a),this.render(),this.$element):this.$element.val()},selectAll:function(){this.findLis(),this.$lis.not(".divider").not(".disabled").not(".selected").filter(":visible").find("a").click()},deselectAll:function(){this.findLis(),this.$lis.not(".divider").not(".disabled").filter(".selected").filter(":visible").find("a").click()},keydown:function(b){var d,e,f,g,h,i,j,k,l,m=a(this),n=m.is("input")?m.parent().parent():m.parent(),o=n.data("this"),p={32:" ",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",59:";",65:"a",66:"b",67:"c",68:"d",69:"e",70:"f",71:"g",72:"h",73:"i",74:"j",75:"k",76:"l",77:"m",78:"n",79:"o",80:"p",81:"q",82:"r",83:"s",84:"t",85:"u",86:"v",87:"w",88:"x",89:"y",90:"z",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9"};if(o.options.liveSearch&&(n=m.parent().parent()),o.options.container&&(n=o.$menu),d=a("[role=menu] li a",n),l=o.$menu.parent().hasClass("open"),!l&&/([0-9]|[A-z])/.test(String.fromCharCode(b.keyCode))&&(o.options.container?o.$newElement.trigger("click"):(o.setSize(),o.$menu.parent().addClass("open"),l=!0),o.$searchbox.focus()),o.options.liveSearch&&(/(^9$|27)/.test(b.keyCode.toString(10))&&l&&0===o.$menu.find(".active").length&&(b.preventDefault(),o.$menu.parent().removeClass("open"),o.$button.focus()),d=a("[role=menu] li:not(.divider):not(.dropdown-header):visible",n),m.val()||/(38|40)/.test(b.keyCode.toString(10))||0===d.filter(".active").length&&(d=o.$newElement.find("li").filter(o.options.searchAccentInsensitive?":aicontains("+c(p[b.keyCode])+")":":icontains("+p[b.keyCode]+")"))),d.length){if(/(38|40)/.test(b.keyCode.toString(10)))e=d.index(d.filter(":focus")),g=d.parent(":not(.disabled):visible").first().index(),h=d.parent(":not(.disabled):visible").last().index(),f=d.eq(e).parent().nextAll(":not(.disabled):visible").eq(0).index(),i=d.eq(e).parent().prevAll(":not(.disabled):visible").eq(0).index(),j=d.eq(f).parent().prevAll(":not(.disabled):visible").eq(0).index(),o.options.liveSearch&&(d.each(function(b){a(this).is(":not(.disabled)")&&a(this).data("index",b)}),e=d.index(d.filter(".active")),g=d.filter(":not(.disabled):visible").first().data("index"),h=d.filter(":not(.disabled):visible").last().data("index"),f=d.eq(e).nextAll(":not(.disabled):visible").eq(0).data("index"),i=d.eq(e).prevAll(":not(.disabled):visible").eq(0).data("index"),j=d.eq(f).prevAll(":not(.disabled):visible").eq(0).data("index")),k=m.data("prevIndex"),38==b.keyCode&&(o.options.liveSearch&&(e-=1),e!=j&&e>i&&(e=i),g>e&&(e=g),e==k&&(e=h)),40==b.keyCode&&(o.options.liveSearch&&(e+=1),-1==e&&(e=0),e!=j&&f>e&&(e=f),e>h&&(e=h),e==k&&(e=g)),m.data("prevIndex",e),o.options.liveSearch?(b.preventDefault(),m.is(".dropdown-toggle")||(d.removeClass("active"),d.eq(e).addClass("active").find("a").focus(),m.focus())):d.eq(e).focus();else if(!m.is("input")){var q,r,s=[];d.each(function(){a(this).parent().is(":not(.disabled)")&&a.trim(a(this).text().toLowerCase()).substring(0,1)==p[b.keyCode]&&s.push(a(this).parent().index())}),q=a(document).data("keycount"),q++,a(document).data("keycount",q),r=a.trim(a(":focus").text().toLowerCase()).substring(0,1),r!=p[b.keyCode]?(q=1,a(document).data("keycount",q)):q>=s.length&&(a(document).data("keycount",0),q>s.length&&(q=1)),d.eq(s[q-1]).focus()}(/(13|32)/.test(b.keyCode.toString(10))||/(^9$)/.test(b.keyCode.toString(10))&&o.options.selectOnTab)&&l&&(/(32)/.test(b.keyCode.toString(10))||b.preventDefault(),o.options.liveSearch?/(32)/.test(b.keyCode.toString(10))||(o.$menu.find(".active a").click(),m.focus()):a(":focus").click(),a(document).data("keycount",0)),(/(^9$|27)/.test(b.keyCode.toString(10))&&l&&(o.multiple||o.options.liveSearch)||/(27)/.test(b.keyCode.toString(10))&&!l)&&(o.$menu.parent().removeClass("open"),o.$button.focus())}},mobile:function(){this.$element.addClass("mobile-device").appendTo(this.$newElement),this.options.container&&this.$menu.hide()},refresh:function(){this.$lis=null,this.reloadLi(),this.render(),this.setWidth(),this.setStyle(),this.checkDisabled(),this.liHeight()},update:function(){this.reloadLi(),this.setWidth(),this.setStyle(),this.checkDisabled(),this.liHeight()},hide:function(){this.$newElement.hide()},show:function(){this.$newElement.show()},remove:function(){this.$newElement.remove(),this.$element.remove()}};var g=a.fn.selectpicker;a.fn.selectpicker=e,a.fn.selectpicker.Constructor=f,a.fn.selectpicker.noConflict=function(){return a.fn.selectpicker=g,this},a(document).data("keycount",0).on("keydown",".bootstrap-select [data-toggle=dropdown], .bootstrap-select [role=menu], .bs-searchbox input",f.prototype.keydown).on("focusin.modal",".bootstrap-select [data-toggle=dropdown], .bootstrap-select [role=menu], .bs-searchbox input",function(a){a.stopPropagation()}),a(window).on("load.bs.select.data-api",function(){a(".selectpicker").each(function(){var b=a(this);e.call(b,b.data())})})}(jQuery),!function(a){a.fn.selectpicker.defaults={noneSelectedText:"没有选中任何项",noneResultsText:"没有找到匹配项",countSelectedText:"选中{1}中的{0}项",maxOptionsText:["超出限制 (最多选择{n}项)","组选择超出限制(最多选择{n}组)"],multipleSeparator:", "}}(jQuery),angular.module("ngLocale",[],["$provide",function(a){var b={ZERO:"zero",ONE:"one",TWO:"two",FEW:"few",MANY:"many",OTHER:"other"};a.value("$locale",{DATETIME_FORMATS:{AMPMS:["上午","下午"],DAY:["星期日","星期一","星期二","星期三","星期四","星期五","星期六"],MONTH:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],SHORTDAY:["周日","周一","周二","周三","周四","周五","周六"],SHORTMONTH:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"],fullDate:"y年M月d日EEEE",longDate:"y年M月d日",medium:"y年M月d日 ah:mm:ss",mediumDate:"y年M月d日",mediumTime:"ah:mm:ss","short":"yy/M/d ah:mm",shortDate:"yy/M/d",shortTime:"ah:mm"},NUMBER_FORMATS:{CURRENCY_SYM:"¥",DECIMAL_SEP:".",GROUP_SEP:",",PATTERNS:[{gSize:3,lgSize:3,maxFrac:3,minFrac:0,minInt:1,negPre:"-",negSuf:"",posPre:"",posSuf:""},{gSize:3,lgSize:3,maxFrac:2,minFrac:2,minInt:1,negPre:"¤ -",negSuf:"",posPre:"¤ ",posSuf:""}]},id:"zh-cn",pluralCat:function(a,c){return b.OTHER}})}]),function(){var a,b=window.Messenger;a=window.Messenger=function(){return a._call.apply(this,arguments)},window.Messenger.noConflict=function(){return window.Messenger=b,a}}(),window.Messenger._=function(){if(window._)return window._;var a=Array.prototype,b=Object.prototype,c=Function.prototype,d=(a.push,a.slice),e=(a.concat,b.toString);b.hasOwnProperty;var f=a.forEach,g=(a.map,a.reduce,a.reduceRight,a.filter),h=(a.every,a.some,a.indexOf,a.lastIndexOf,Array.isArray,Object.keys),i=c.bind,j={},k={},l=j.each=j.forEach=function(a,b,c){if(null!=a)if(f&&a.forEach===f)a.forEach(b,c);else if(a.length===+a.length){for(var d=0,e=a.length;e>d;d++)if(b.call(c,a[d],d,a)===k)return}else for(var g in a)if(j.has(a,g)&&b.call(c,a[g],g,a)===k)return};j.result=function(a,b){if(null==a)return null;var c=a[b];return j.isFunction(c)?c.call(a):c},j.once=function(a){var b,c=!1;return function(){return c?b:(c=!0,b=a.apply(this,arguments),a=null,b)}};var m=0;return j.uniqueId=function(a){var b=++m+"";return a?a+b:b},j.filter=j.select=function(a,b,c){var d=[];return null==a?d:g&&a.filter===g?a.filter(b,c):(l(a,function(a,e,f){b.call(c,a,e,f)&&(d[d.length]=a)}),d)},l(["Arguments","Function","String","Number","Date","RegExp"],function(a){
j["is"+a]=function(b){return e.call(b)=="[object "+a+"]"}}),j.defaults=function(a){return l(d.call(arguments,1),function(b){if(b)for(var c in b)null==a[c]&&(a[c]=b[c])}),a},j.extend=function(a){return l(d.call(arguments,1),function(b){if(b)for(var c in b)a[c]=b[c]}),a},j.keys=h||function(a){if(a!==Object(a))throw new TypeError("Invalid object");var b=[];for(var c in a)j.has(a,c)&&(b[b.length]=c);return b},j.bind=function(a,b){if(a.bind===i&&i)return i.apply(a,d.call(arguments,1));var c=d.call(arguments,2);return function(){return a.apply(b,c.concat(d.call(arguments)))}},j.isObject=function(a){return a===Object(a)},j}(),window.Messenger.Events=function(){if(window.Backbone&&Backbone.Events)return Backbone.Events;var a=function(){var a=/\s+/,b=function(b,c,d,e){if(!d)return!0;if("object"==typeof d)for(var f in d)b[c].apply(b,[f,d[f]].concat(e));else{if(!a.test(d))return!0;for(var g=d.split(a),h=0,i=g.length;i>h;h++)b[c].apply(b,[g[h]].concat(e))}},c=function(a,b){var c,d=-1,e=a.length;switch(b.length){case 0:for(;e>++d;)(c=a[d]).callback.call(c.ctx);return;case 1:for(;e>++d;)(c=a[d]).callback.call(c.ctx,b[0]);return;case 2:for(;e>++d;)(c=a[d]).callback.call(c.ctx,b[0],b[1]);return;case 3:for(;e>++d;)(c=a[d]).callback.call(c.ctx,b[0],b[1],b[2]);return;default:for(;e>++d;)(c=a[d]).callback.apply(c.ctx,b)}},d={on:function(a,c,d){if(!b(this,"on",a,[c,d])||!c)return this;this._events||(this._events={});var e=this._events[a]||(this._events[a]=[]);return e.push({callback:c,context:d,ctx:d||this}),this},once:function(a,c,d){if(!b(this,"once",a,[c,d])||!c)return this;var e=this,f=_.once(function(){e.off(a,f),c.apply(this,arguments)});return f._callback=c,this.on(a,f,d),this},off:function(a,c,d){var e,f,g,h,i,j,k,l;if(!this._events||!b(this,"off",a,[c,d]))return this;if(!a&&!c&&!d)return this._events={},this;for(h=a?[a]:_.keys(this._events),i=0,j=h.length;j>i;i++)if(a=h[i],e=this._events[a]){if(g=[],c||d)for(k=0,l=e.length;l>k;k++)f=e[k],(c&&c!==f.callback&&c!==f.callback._callback||d&&d!==f.context)&&g.push(f);this._events[a]=g}return this},trigger:function(a){if(!this._events)return this;var d=Array.prototype.slice.call(arguments,1);if(!b(this,"trigger",a,d))return this;var e=this._events[a],f=this._events.all;return e&&c(e,d),f&&c(f,arguments),this},listenTo:function(a,b,c){var d=this._listeners||(this._listeners={}),e=a._listenerId||(a._listenerId=_.uniqueId("l"));return d[e]=a,a.on(b,"object"==typeof b?this:c,this),this},stopListening:function(a,b,c){var d=this._listeners;if(d){if(a)a.off(b,"object"==typeof b?this:c,this),b||c||delete d[a._listenerId];else{"object"==typeof b&&(c=this);for(var e in d)d[e].off(b,c,this);this._listeners={}}return this}}};return d.bind=d.on,d.unbind=d.off,d};return a()}(),function(){var a,b,c,d,e,f,g,h,i,j,k,l={}.hasOwnProperty,m=function(a,b){function c(){this.constructor=a}for(var d in b)l.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a},n=[].slice,o=[].indexOf||function(a){for(var b=0,c=this.length;c>b;b++)if(b in this&&this[b]===a)return b;return-1};a=jQuery,f=null!=(i=window._)?i:window.Messenger._,d=null!=(j="undefined"!=typeof Backbone&&null!==Backbone?Backbone.Events:void 0)?j:window.Messenger.Events,c=function(){function b(b){a.extend(this,d),f.isObject(b)&&(b.el&&this.setElement(b.el),this.model=b.model),this.initialize.apply(this,arguments)}return b.prototype.setElement=function(b){return this.$el=a(b),this.el=this.$el[0]},b.prototype.delegateEvents=function(a){var b,c,d,e,g,h,i;if(a||(a=f.result(this,"events"))){this.undelegateEvents(),b=/^(\S+)\s*(.*)$/,i=[];for(d in a){if(g=a[d],f.isFunction(g)||(g=this[a[d]]),!g)throw Error('Method "'+a[d]+'" does not exist');e=d.match(b),c=e[1],h=e[2],g=f.bind(g,this),c+=".delegateEvents"+this.cid,""===h?i.push(this.jqon(c,g)):i.push(this.jqon(c,h,g))}return i}},b.prototype.jqon=function(a,b,c){var d;return null!=this.$el.on?(d=this.$el).on.apply(d,arguments):(null==c&&(c=b,b=void 0),null!=b?this.$el.delegate(b,a,c):this.$el.bind(a,c))},b.prototype.jqoff=function(a){var b;return null!=this.$el.off?(b=this.$el).off.apply(b,arguments):(this.$el.undelegate(),this.$el.unbind(a))},b.prototype.undelegateEvents=function(){return this.jqoff(".delegateEvents"+this.cid)},b.prototype.remove=function(){return this.undelegateEvents(),this.$el.remove()},b}(),g=function(b){function c(){return c.__super__.constructor.apply(this,arguments)}return m(c,b),c.prototype.defaults={hideAfter:10,scroll:!0,closeButtonText:"&times;"},c.prototype.initialize=function(b){return null==b&&(b={}),this.shown=!1,this.rendered=!1,this.messenger=b.messenger,this.options=a.extend({},this.options,b,this.defaults)},c.prototype.show=function(){var a;return this.rendered||this.render(),this.$message.removeClass("messenger-hidden"),a=this.shown,this.shown=!0,a?void 0:this.trigger("show")},c.prototype.hide=function(){var a;return this.rendered?(this.$message.addClass("messenger-hidden"),a=this.shown,this.shown=!1,a?this.trigger("hide"):void 0):void 0},c.prototype.cancel=function(){return this.hide()},c.prototype.update=function(b){var c,d=this;return f.isString(b)&&(b={message:b}),a.extend(this.options,b),this.lastUpdate=new Date,this.rendered=!1,this.events=null!=(c=this.options.events)?c:{},this.render(),this.actionsToEvents(),this.delegateEvents(),this.checkClickable(),this.options.hideAfter?(this.$message.addClass("messenger-will-hide-after"),null!=this._hideTimeout&&clearTimeout(this._hideTimeout),this._hideTimeout=setTimeout(function(){return d.hide()},1e3*this.options.hideAfter)):this.$message.removeClass("messenger-will-hide-after"),this.options.hideOnNavigate?(this.$message.addClass("messenger-will-hide-on-navigate"),null!=("undefined"!=typeof Backbone&&null!==Backbone?Backbone.history:void 0)&&Backbone.history.on("route",function(){return d.hide()})):this.$message.removeClass("messenger-will-hide-on-navigate"),this.trigger("update",this)},c.prototype.scrollTo=function(){return this.options.scroll?a.scrollTo(this.$el,{duration:400,offset:{left:0,top:-20}}):void 0},c.prototype.timeSinceUpdate=function(){return this.lastUpdate?new Date-this.lastUpdate:null},c.prototype.actionsToEvents=function(){var a,b,c,d,e=this;c=this.options.actions,d=[];for(b in c)a=c[b],d.push(this.events['click [data-action="'+b+'"] a']=function(a){return function(c){return c.preventDefault(),c.stopPropagation(),e.trigger("action:"+b,a,c),a.action.call(e,c,e)}}(a));return d},c.prototype.checkClickable=function(){var a,b,c,d;c=this.events,d=[];for(b in c)a=c[b],"click"===b?d.push(this.$message.addClass("messenger-clickable")):d.push(void 0);return d},c.prototype.undelegateEvents=function(){var a;return c.__super__.undelegateEvents.apply(this,arguments),null!=(a=this.$message)?a.removeClass("messenger-clickable"):void 0},c.prototype.parseActions=function(){var b,c,d,e,f,g;c=[],f=this.options.actions;for(e in f)b=f[e],d=a.extend({},b),d.name=e,null==(g=d.label)&&(d.label=e),c.push(d);return c},c.prototype.template=function(b){var c,d,e,f,g,h,i,j,k,l,m=this;for(g=a("<div class='messenger-message message alert "+b.type+" message-"+b.type+" alert-"+b.type+"'>"),b.showCloseButton&&(e=a('<button type="button" class="messenger-close" data-dismiss="alert">'),e.html(b.closeButtonText),e.click(function(){return m.cancel(),!0}),g.append(e)),h=a('<div class="messenger-message-inner">'+b.message+"</div>"),g.append(h),b.actions.length&&(d=a('<div class="messenger-actions">')),l=b.actions,j=0,k=l.length;k>j;j++)i=l[j],c=a("<span>"),c.attr("data-action",""+i.name),f=a("<a>"),f.html(i.label),c.append(a('<span class="messenger-phrase">')),c.append(f),d.append(c);return g.append(d),g},c.prototype.render=function(){var b;return this.rendered?void 0:(this._hasSlot||(this.setElement(this.messenger._reserveMessageSlot(this)),this._hasSlot=!0),b=a.extend({},this.options,{actions:this.parseActions()}),this.$message=a(this.template(b)),this.$el.html(this.$message),this.shown=!0,this.rendered=!0,this.trigger("render"))},c}(c),e=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}return m(b,a),b.prototype.initialize=function(){return b.__super__.initialize.apply(this,arguments),this._timers={}},b.prototype.cancel=function(){return this.clearTimers(),this.hide(),null!=this._actionInstance&&null!=this._actionInstance.abort?this._actionInstance.abort():void 0},b.prototype.clearTimers=function(){var a,b,c,d;c=this._timers;for(a in c)b=c[a],clearTimeout(b);return this._timers={},null!=(d=this.$message)?d.removeClass("messenger-retry-soon messenger-retry-later"):void 0},b.prototype.render=function(){var a,c,d,e;b.__super__.render.apply(this,arguments),this.clearTimers(),d=this.options.actions,e=[];for(c in d)a=d[c],a.auto?e.push(this.startCountdown(c,a)):e.push(void 0);return e},b.prototype.renderPhrase=function(a,b){var c;return c=a.phrase.replace("TIME",this.formatTime(b))},b.prototype.formatTime=function(a){var b;return b=function(a,b){return a=Math.floor(a),1!==a&&(b+="s"),"in "+a+" "+b},0===Math.floor(a)?"now...":60>a?b(a,"second"):(a/=60,60>a?b(a,"minute"):(a/=60,b(a,"hour")))},b.prototype.startCountdown=function(a,b){var c,d,e,f,g=this;return null==this._timers[a]?(c=this.$message.find("[data-action='"+a+"'] .messenger-phrase"),d=null!=(f=b.delay)?f:3,10>=d?(this.$message.removeClass("messenger-retry-later"),this.$message.addClass("messenger-retry-soon")):(this.$message.removeClass("messenger-retry-soon"),this.$message.addClass("messenger-retry-later")),(e=function(){var f;return c.text(g.renderPhrase(b,d)),d>0?(f=Math.min(d,1),d-=f,g._timers[a]=setTimeout(e,1e3*f)):(g.$message.removeClass("messenger-retry-soon messenger-retry-later"),delete g._timers[a],b.action())})()):void 0},b}(g),h=function(b){function c(){return c.__super__.constructor.apply(this,arguments)}return m(c,b),c.prototype.tagName="ul",c.prototype.className="messenger",c.prototype.messageDefaults={type:"info"},c.prototype.initialize=function(b){return this.options=null!=b?b:{},this.history=[],this.messageDefaults=a.extend({},this.messageDefaults,this.options.messageDefaults)},c.prototype.render=function(){return this.updateMessageSlotClasses()},c.prototype.findById=function(a){return f.filter(this.history,function(b){return b.msg.options.id===a})},c.prototype._reserveMessageSlot=function(b){var c,d,e=this;for(c=a("<li>"),c.addClass("messenger-message-slot"),this.$el.prepend(c),this.history.push({msg:b,$slot:c}),this._enforceIdConstraint(b),b.on("update",function(){return e._enforceIdConstraint(b)});this.options.maxMessages&&this.history.length>this.options.maxMessages;)d=this.history.shift(),d.msg.remove(),d.$slot.remove();return c},c.prototype._enforceIdConstraint=function(a){var b,c,d,e,f;if(null!=a.options.id)for(f=this.history,c=0,d=f.length;d>c;c++)if(b=f[c],e=b.msg,null!=e.options.id&&e.options.id===a.options.id&&a!==e){if(a.options.singleton)return void a.hide();e.hide()}},c.prototype.newMessage=function(a){var b,c,d,f,h=this;return null==a&&(a={}),a.messenger=this,g=null!=(c=null!=(d=Messenger.themes[null!=(f=a.theme)?f:this.options.theme])?d.Message:void 0)?c:e,b=new g(a),b.on("show",function(){return a.scrollTo&&"fixed"!==h.$el.css("position")?b.scrollTo():void 0}),b.on("hide show render",this.updateMessageSlotClasses,this),b},c.prototype.updateMessageSlotClasses=function(){var a,b,c,d,e,f,g;for(d=!0,b=null,a=!1,g=this.history,e=0,f=g.length;f>e;e++)c=g[e],c.$slot.removeClass("messenger-first messenger-last messenger-shown"),c.msg.shown&&c.msg.rendered&&(c.$slot.addClass("messenger-shown"),a=!0,b=c,d&&(d=!1,c.$slot.addClass("messenger-first")));return null!=b&&b.$slot.addClass("messenger-last"),this.$el[""+(a?"remove":"add")+"Class"]("messenger-empty")},c.prototype.hideAll=function(){var a,b,c,d,e;for(d=this.history,e=[],b=0,c=d.length;c>b;b++)a=d[b],e.push(a.msg.hide());return e},c.prototype.post=function(b){var c;return f.isString(b)&&(b={message:b}),b=a.extend(!0,{},this.messageDefaults,b),c=this.newMessage(b),c.update(b),c},c}(c),b=function(b){function c(){return c.__super__.constructor.apply(this,arguments)}return m(c,b),c.prototype.doDefaults={progressMessage:null,successMessage:null,errorMessage:"Error connecting to the server.",showSuccessWithoutError:!0,retry:{auto:!0,allow:!0},action:a.ajax},c.prototype.hookBackboneAjax=function(b){var c,d=this;if(null==b&&(b={}),null==window.Backbone)throw"Expected Backbone to be defined";return b=f.defaults(b,{id:"BACKBONE_ACTION",errorMessage:!1,successMessage:"Request completed successfully.",showSuccessWithoutError:!1}),c=function(a){var c;return c=f.extend({},b,a.messenger),d["do"](c,a)},null!=Backbone.ajax?(Backbone.ajax._withoutMessenger&&(Backbone.ajax=Backbone.ajax._withoutMessenger),(null==b.action||b.action===this.doDefaults.action)&&(b.action=Backbone.ajax),c._withoutMessenger=Backbone.ajax,Backbone.ajax=c):Backbone.sync=f.wrap(Backbone.sync,function(){var b,d,e;return e=arguments[0],b=arguments.length>=2?n.call(arguments,1):[],d=a.ajax,a.ajax=c,e.call.apply(e,[this].concat(n.call(b))),a.ajax=d})},c.prototype._getHandlerResponse=function(a){return a===!1?!1:a===!0||null==a?!0:a},c.prototype._parseEvents=function(a){var b,c,d,e,f,g,h;null==a&&(a={}),f={};for(e in a)d=a[e],c=e.indexOf(" "),g=e.substring(0,c),b=e.substring(c+1),null==(h=f[g])&&(f[g]={}),f[g][b]=d;return f},c.prototype._normalizeResponse=function(){var a,b,c,d,e,g,h;for(c=arguments.length>=1?n.call(arguments,0):[],d=null,e=null,a=null,g=0,h=c.length;h>g;g++)b=c[g],"success"===b||"timeout"===b||"abort"===b?d=b:null!=(null!=b?b.readyState:void 0)&&null!=(null!=b?b.responseText:void 0)?e=b:f.isObject(b)&&(a=b);return[d,a,e]},c.prototype.run=function(){var b,c,d,e,g,h,i,j,k,l,m,p=this;if(h=arguments[0],k=arguments[1],b=arguments.length>=3?n.call(arguments,2):[],null==k&&(k={}),h=a.extend(!0,{},this.messageDefaults,this.doDefaults,null!=h?h:{}),c=this._parseEvents(h.events),d=function(a,b){var c;return c=h[a+"Message"],f.isFunction(c)?c.call(p,a,b):c},i=null!=(m=h.messageInstance)?m:this.newMessage(h),null!=h.id&&(i.options.id=h.id),null!=h.progressMessage&&i.update(a.extend({},h,{message:d("progress",null),type:"info"})),g={},f.each(["error","success"],function(e){var j;return j=k[e],g[e]=function(){var g,l,m,q,r,s,t,u,v,w,x,y,z,A,B;return s=arguments.length>=1?n.call(arguments,0):[],v=p._normalizeResponse.apply(p,s),r=v[0],g=v[1],u=v[2],"success"===e&&null==i.errorCount&&h.showSuccessWithoutError===!1&&(h.successMessage=null),"error"===e&&(null==(w=h.errorCount)&&(h.errorCount=0),h.errorCount+=1),m=h.returnsPromise?s[0]:"function"==typeof j?j.apply(null,s):void 0,t=p._getHandlerResponse(m),f.isString(t)&&(t={message:t}),"error"!==e||0!==(null!=u?u.status:void 0)&&"abort"!==r?"error"===e&&null!=h.ignoredErrorCodes&&(x=null!=u?u.status:void 0,o.call(h.ignoredErrorCodes,x)>=0)?void i.hide():(l={message:d(e,u),type:e,events:null!=(y=c[e])?y:{},hideOnNavigate:"success"===e},q=a.extend({},h,l,t),"number"==typeof(null!=(z=q.retry)?z.allow:void 0)&&q.retry.allow--,"error"===e&&(null!=u?u.status:void 0)>=500&&(null!=(A=q.retry)?A.allow:void 0)?(null==q.retry.delay&&(q.retry.delay=4>q.errorCount?10:300),q.hideAfter&&(null==(B=q._hideAfter)&&(q._hideAfter=q.hideAfter),q.hideAfter=q._hideAfter+q.retry.delay),q._retryActions=!0,q.actions={retry:{label:"retry now",phrase:"Retrying TIME",auto:q.retry.auto,delay:q.retry.delay,action:function(){return q.messageInstance=i,setTimeout(function(){return p["do"].apply(p,[q,k].concat(n.call(b)))},0)}},cancel:{action:function(){return i.cancel()}}}):q._retryActions&&(delete q.actions.retry,delete q.actions.cancel,delete h._retryActions),i.update(q),t&&q.message?(Messenger(f.extend({},p.options,{instance:p})),i.show()):i.hide()):void i.hide()}}),!h.returnsPromise)for(l in g)e=g[l],j=k[l],k[l]=e;return i._actionInstance=h.action.apply(h,[k].concat(n.call(b))),h.returnsPromise&&i._actionInstance.then(g.success,g.error),i},c.prototype["do"]=c.prototype.run,c.prototype.ajax=function(){var b,c;return c=arguments[0],b=arguments.length>=2?n.call(arguments,1):[],c.action=a.ajax,this.run.apply(this,[c].concat(n.call(b)))},c.prototype.expectPromise=function(a,b){return b=f.extend({},b,{action:a,returnsPromise:!0}),this.run(b)},c.prototype.error=function(a){return null==a&&(a={}),"string"==typeof a&&(a={message:a}),a.type="error",this.post(a)},c.prototype.info=function(a){return null==a&&(a={}),"string"==typeof a&&(a={message:a}),a.type="info",this.post(a)},c.prototype.success=function(a){return null==a&&(a={}),"string"==typeof a&&(a={message:a}),a.type="success",this.post(a)},c}(h),a.fn.messenger=function(){var c,d,e,g,i,j,k,l;return e=arguments[0],d=arguments.length>=2?n.call(arguments,1):[],null==e&&(e={}),c=this,null!=e&&f.isString(e)?(l=c.data("messenger"))[e].apply(l,d):(i=e,null==c.data("messenger")&&(h=null!=(j=null!=(k=Messenger.themes[i.theme])?k.Messenger:void 0)?j:b,c.data("messenger",g=new h(a.extend({el:c},i))),g.render()),c.data("messenger"))},window.Messenger._call=function(b){var c,d,e,f,g,h,i,j,k,l,m;if(h={extraClasses:"messenger-fixed messenger-on-bottom messenger-on-right",theme:"future",maxMessages:9,parentLocations:["body"]},b=a.extend(h,a._messengerDefaults,Messenger.options,b),null!=b.theme&&(b.extraClasses+=" messenger-theme-"+b.theme),i=b.instance||Messenger.instance,null==b.instance){for(k=b.parentLocations,d=null,e=null,l=0,m=k.length;m>l;l++)if(j=k[l],d=a(j),d.length){f=j;break}i?a(i._location).is(a(f))||(i.$el.detach(),d.prepend(i.$el)):(c=a("<ul>"),d.prepend(c),i=c.messenger(b),i._location=f,Messenger.instance=i)}return null!=i._addedClasses&&i.$el.removeClass(i._addedClasses),i.$el.addClass(g=""+i.className+" "+b.extraClasses),i._addedClasses=g,i},a.extend(Messenger,{Message:e,Messenger:b,themes:null!=(k=Messenger.themes)?k:{}}),a.globalMessenger=window.Messenger=Messenger}.call(this),!function(a,b){return"function"==typeof define&&define.amd?void define("angular-file-upload",["angular"],function(a){return b(a)}):b(a)}("undefined"==typeof angular?null:angular,function(a){var b=a.module("angularFileUpload",[]);return b.value("fileUploaderOptions",{url:"/",alias:"file",headers:{},queue:[],progress:0,autoUpload:!1,removeAfterUpload:!1,method:"POST",filters:[],formData:[],queueLimit:Number.MAX_VALUE,withCredentials:!1}).factory("FileUploader",["fileUploaderOptions","$rootScope","$http","$window","$compile",function(b,c,d,e,f){function g(c){var d=a.copy(b);a.extend(this,d,c,{isUploading:!1,_nextIndex:0,_failFilterIndex:-1,_directives:{select:[],drop:[],over:[]}}),this.filters.unshift({name:"queueLimit",fn:this._queueLimitFilter}),this.filters.unshift({name:"folder",fn:this._folderFilter})}function h(b){var c=a.isElement(b),d=c?b.value:b,e=a.isString(d)?"FakePath":"Object",f="_createFrom"+e;this[f](d)}function i(b,c,d){var e=a.isElement(c),f=e?a.element(c):null,h=e?null:c;a.extend(this,{url:b.url,alias:b.alias,headers:a.copy(b.headers),formData:a.copy(b.formData),removeAfterUpload:b.removeAfterUpload,withCredentials:b.withCredentials,method:b.method},d,{uploader:b,file:new g.FileLikeObject(c),isReady:!1,isUploading:!1,isUploaded:!1,isSuccess:!1,isCancel:!1,isError:!1,progress:0,index:null,_file:h,_input:f}),f&&this._replaceNode(f)}function j(b){a.extend(this,b),this.uploader._directives[this.prop].push(this),this._saveLinks(),this.bind()}function k(){k.super_.apply(this,arguments),this.uploader.isHTML5||this.element.removeAttr("multiple"),this.element.prop("value",null)}function l(){l.super_.apply(this,arguments)}function m(){m.super_.apply(this,arguments)}return g.prototype.isHTML5=!(!e.File||!e.FormData),g.prototype.addToQueue=function(b,c,d){var e=this.isArrayLikeObject(b)?b:[b],f=this._getFilters(d),h=this.queue.length,i=[];a.forEach(e,function(a){var b=new g.FileLikeObject(a);if(this._isValidFile(b,f,c)){var d=new g.FileItem(this,a,c);i.push(d),this.queue.push(d),this._onAfterAddingFile(d)}else{var e=this.filters[this._failFilterIndex];this._onWhenAddingFileFailed(b,e,c)}},this),this.queue.length!==h&&(this._onAfterAddingAll(i),this.progress=this._getTotalProgress()),this._render(),this.autoUpload&&this.uploadAll()},g.prototype.removeFromQueue=function(a){var b=this.getIndexOfItem(a),c=this.queue[b];c.isUploading&&c.cancel(),this.queue.splice(b,1),c._destroy(),this.progress=this._getTotalProgress()},g.prototype.clearQueue=function(){for(;this.queue.length;)this.queue[0].remove();this.progress=0},g.prototype.uploadItem=function(a){var b=this.getIndexOfItem(a),c=this.queue[b],d=this.isHTML5?"_xhrTransport":"_iframeTransport";c._prepareToUploading(),this.isUploading||(this.isUploading=!0,this[d](c))},g.prototype.cancelItem=function(a){var b=this.getIndexOfItem(a),c=this.queue[b],d=this.isHTML5?"_xhr":"_form";c&&c.isUploading&&c[d].abort()},g.prototype.uploadAll=function(){var b=this.getNotUploadedItems().filter(function(a){return!a.isUploading});b.length&&(a.forEach(b,function(a){a._prepareToUploading()}),b[0].upload())},g.prototype.cancelAll=function(){var b=this.getNotUploadedItems();a.forEach(b,function(a){a.cancel()})},g.prototype.isFile=function(a){var b=e.File;return b&&a instanceof b},g.prototype.isFileLikeObject=function(a){return a instanceof g.FileLikeObject},g.prototype.isArrayLikeObject=function(b){return a.isObject(b)&&"length"in b},g.prototype.getIndexOfItem=function(b){return a.isNumber(b)?b:this.queue.indexOf(b)},g.prototype.getNotUploadedItems=function(){return this.queue.filter(function(a){return!a.isUploaded})},g.prototype.getReadyItems=function(){return this.queue.filter(function(a){return a.isReady&&!a.isUploading}).sort(function(a,b){return a.index-b.index})},g.prototype.destroy=function(){a.forEach(this._directives,function(b){a.forEach(this._directives[b],function(a){a.destroy()},this)},this)},g.prototype.onAfterAddingAll=function(){},g.prototype.onAfterAddingFile=function(){},g.prototype.onWhenAddingFileFailed=function(){},g.prototype.onBeforeUploadItem=function(){},g.prototype.onProgressItem=function(){},g.prototype.onProgressAll=function(){},g.prototype.onSuccessItem=function(){},g.prototype.onErrorItem=function(){},g.prototype.onCancelItem=function(){},g.prototype.onCompleteItem=function(){},g.prototype.onCompleteAll=function(){},g.prototype._getTotalProgress=function(a){if(this.removeAfterUpload)return a||0;var b=this.getNotUploadedItems().length,c=b?this.queue.length-b:this.queue.length,d=100/this.queue.length,e=(a||0)*d/100;return Math.round(c*d+e)},g.prototype._getFilters=function(b){if(a.isUndefined(b))return this.filters;if(a.isArray(b))return b;var c=b.match(/[^\s,]+/g);return this.filters.filter(function(a){return-1!==c.indexOf(a.name)},this)},g.prototype._render=function(){c.$$phase||c.$apply()},g.prototype._folderFilter=function(a){return!(!a.size&&!a.type)},g.prototype._queueLimitFilter=function(){return this.queue.length<this.queueLimit},g.prototype._isValidFile=function(a,b,c){return this._failFilterIndex=-1,b.length?b.every(function(b){return this._failFilterIndex++,b.fn.call(this,a,c)},this):!0},g.prototype._isSuccessCode=function(a){return a>=200&&300>a||304===a},g.prototype._transformResponse=function(b,c){var e=this._headersGetter(c);return a.forEach(d.defaults.transformResponse,function(a){b=a(b,e)}),b},g.prototype._parseHeaders=function(b){var c,d,e,f={};return b?(a.forEach(b.split("\n"),function(a){e=a.indexOf(":"),c=a.slice(0,e).trim().toLowerCase(),d=a.slice(e+1).trim(),c&&(f[c]=f[c]?f[c]+", "+d:d)}),f):f},g.prototype._headersGetter=function(a){return function(b){return b?a[b.toLowerCase()]||null:a}},g.prototype._xhrTransport=function(b){var c=b._xhr=new XMLHttpRequest,d=new FormData,e=this;e._onBeforeUploadItem(b),a.forEach(b.formData,function(b){a.forEach(b,function(a,b){d.append(b,a)})}),d.append(b.alias,b._file,b.file.name),c.upload.onprogress=function(a){var c=Math.round(a.lengthComputable?100*a.loaded/a.total:0);e._onProgressItem(b,c)},c.onload=function(){var a=e._parseHeaders(c.getAllResponseHeaders()),d=e._transformResponse(c.response,a),f=e._isSuccessCode(c.status)?"Success":"Error",g="_on"+f+"Item";e[g](b,d,c.status,a),e._onCompleteItem(b,d,c.status,a)},c.onerror=function(){var a=e._parseHeaders(c.getAllResponseHeaders()),d=e._transformResponse(c.response,a);e._onErrorItem(b,d,c.status,a),e._onCompleteItem(b,d,c.status,a)},c.onabort=function(){var a=e._parseHeaders(c.getAllResponseHeaders()),d=e._transformResponse(c.response,a);e._onCancelItem(b,d,c.status,a),e._onCompleteItem(b,d,c.status,a)},c.open(b.method,b.url,!0),c.withCredentials=b.withCredentials,a.forEach(b.headers,function(a,b){c.setRequestHeader(b,a)}),c.send(d),this._render()},g.prototype._iframeTransport=function(b){var c=a.element('<form style="display: none;" />'),d=a.element('<iframe name="iframeTransport'+Date.now()+'">'),e=b._input,f=this;b._form&&b._form.replaceWith(e),b._form=c,f._onBeforeUploadItem(b),e.prop("name",b.alias),a.forEach(b.formData,function(b){a.forEach(b,function(b,d){var e=a.element('<input type="hidden" name="'+d+'" />');e.val(b),c.append(e)})}),c.prop({action:b.url,method:"POST",target:d.prop("name"),enctype:"multipart/form-data",encoding:"multipart/form-data"}),d.bind("load",function(){try{var a=d[0].contentDocument.body.innerHTML}catch(c){}var e={response:a,status:200,dummy:!0},g={},h=f._transformResponse(e.response,g);f._onSuccessItem(b,h,e.status,g),f._onCompleteItem(b,h,e.status,g)}),c.abort=function(){var a,g={status:0,dummy:!0},h={};d.unbind("load").prop("src","javascript:false;"),c.replaceWith(e),f._onCancelItem(b,a,g.status,h),f._onCompleteItem(b,a,g.status,h)},e.after(c),c.append(e).append(d),c[0].submit(),this._render()},g.prototype._onWhenAddingFileFailed=function(a,b,c){this.onWhenAddingFileFailed(a,b,c)},g.prototype._onAfterAddingFile=function(a){this.onAfterAddingFile(a)},g.prototype._onAfterAddingAll=function(a){this.onAfterAddingAll(a)},g.prototype._onBeforeUploadItem=function(a){a._onBeforeUpload(),this.onBeforeUploadItem(a)},g.prototype._onProgressItem=function(a,b){var c=this._getTotalProgress(b);this.progress=c,a._onProgress(b),this.onProgressItem(a,b),this.onProgressAll(c),this._render()},g.prototype._onSuccessItem=function(a,b,c,d){a._onSuccess(b,c,d),this.onSuccessItem(a,b,c,d)},g.prototype._onErrorItem=function(a,b,c,d){a._onError(b,c,d),this.onErrorItem(a,b,c,d)},g.prototype._onCancelItem=function(a,b,c,d){a._onCancel(b,c,d),this.onCancelItem(a,b,c,d)},g.prototype._onCompleteItem=function(b,c,d,e){b._onComplete(c,d,e),this.onCompleteItem(b,c,d,e);var f=this.getReadyItems()[0];return this.isUploading=!1,a.isDefined(f)?void f.upload():(this.onCompleteAll(),this.progress=this._getTotalProgress(),void this._render())},g.isFile=g.prototype.isFile,g.isFileLikeObject=g.prototype.isFileLikeObject,g.isArrayLikeObject=g.prototype.isArrayLikeObject,g.isHTML5=g.prototype.isHTML5,g.inherit=function(a,b){a.prototype=Object.create(b.prototype),a.prototype.constructor=a,a.super_=b},g.FileLikeObject=h,g.FileItem=i,g.FileDirective=j,g.FileSelect=k,g.FileDrop=l,g.FileOver=m,h.prototype._createFromFakePath=function(a){this.lastModifiedDate=null,this.size=null,this.type="like/"+a.slice(a.lastIndexOf(".")+1).toLowerCase(),this.name=a.slice(a.lastIndexOf("/")+a.lastIndexOf("\\")+2)},h.prototype._createFromObject=function(b){this.lastModifiedDate=a.copy(b.lastModifiedDate),this.size=b.size,this.type=b.type,this.name=b.name},i.prototype.upload=function(){this.uploader.uploadItem(this)},i.prototype.cancel=function(){this.uploader.cancelItem(this)},i.prototype.remove=function(){this.uploader.removeFromQueue(this)},i.prototype.onBeforeUpload=function(){},i.prototype.onProgress=function(){},i.prototype.onSuccess=function(){},i.prototype.onError=function(){},i.prototype.onCancel=function(){},i.prototype.onComplete=function(){},i.prototype._onBeforeUpload=function(){this.isReady=!0,this.isUploading=!0,this.isUploaded=!1,this.isSuccess=!1,this.isCancel=!1,this.isError=!1,this.progress=0,this.onBeforeUpload()},i.prototype._onProgress=function(a){this.progress=a,this.onProgress(a)},i.prototype._onSuccess=function(a,b,c){this.isReady=!1,this.isUploading=!1,this.isUploaded=!0,this.isSuccess=!0,this.isCancel=!1,this.isError=!1,this.progress=100,this.index=null,this.onSuccess(a,b,c)},i.prototype._onError=function(a,b,c){this.isReady=!1,this.isUploading=!1,this.isUploaded=!0,this.isSuccess=!1,this.isCancel=!1,this.isError=!0,this.progress=0,this.index=null,this.onError(a,b,c)},i.prototype._onCancel=function(a,b,c){this.isReady=!1,this.isUploading=!1,this.isUploaded=!1,this.isSuccess=!1,this.isCancel=!0,this.isError=!1,this.progress=0,this.index=null,this.onCancel(a,b,c)},i.prototype._onComplete=function(a,b,c){this.onComplete(a,b,c),this.removeAfterUpload&&this.remove()},i.prototype._destroy=function(){this._input&&this._input.remove(),this._form&&this._form.remove(),delete this._form,delete this._input},i.prototype._prepareToUploading=function(){this.index=this.index||++this.uploader._nextIndex,this.isReady=!0},i.prototype._replaceNode=function(a){var b=f(a.clone())(a.scope());b.prop("value",null),a.css("display","none"),a.after(b)},j.prototype.events={},j.prototype.bind=function(){for(var a in this.events){var b=this.events[a];this.element.bind(a,this[b])}},j.prototype.unbind=function(){for(var a in this.events)this.element.unbind(a,this.events[a])},j.prototype.destroy=function(){var a=this.uploader._directives[this.prop].indexOf(this);this.uploader._directives[this.prop].splice(a,1),this.unbind()},j.prototype._saveLinks=function(){for(var a in this.events){var b=this.events[a];this[b]=this[b].bind(this)}},g.inherit(k,j),k.prototype.events={$destroy:"destroy",change:"onChange"},k.prototype.prop="select",k.prototype.getOptions=function(){},k.prototype.getFilters=function(){},k.prototype.isEmptyAfterSelection=function(){return!!this.element.attr("multiple")},k.prototype.onChange=function(){var a=this.uploader.isHTML5?this.element[0].files:this.element[0],b=this.getOptions(),c=this.getFilters();this.uploader.isHTML5||this.destroy(),this.uploader.addToQueue(a,b,c),this.isEmptyAfterSelection()&&this.element.prop("value",null)},g.inherit(l,j),l.prototype.events={$destroy:"destroy",drop:"onDrop",dragover:"onDragOver",dragleave:"onDragLeave"},l.prototype.prop="drop",l.prototype.getOptions=function(){},l.prototype.getFilters=function(){},l.prototype.onDrop=function(b){var c=this._getTransfer(b);if(c){var d=this.getOptions(),e=this.getFilters();this._preventAndStop(b),a.forEach(this.uploader._directives.over,this._removeOverClass,this),this.uploader.addToQueue(c.files,d,e)}},l.prototype.onDragOver=function(b){var c=this._getTransfer(b);this._haveFiles(c.types)&&(c.dropEffect="copy",this._preventAndStop(b),a.forEach(this.uploader._directives.over,this._addOverClass,this))},l.prototype.onDragLeave=function(b){b.currentTarget===this.element[0]&&(this._preventAndStop(b),a.forEach(this.uploader._directives.over,this._removeOverClass,this))},l.prototype._getTransfer=function(a){return a.dataTransfer?a.dataTransfer:a.originalEvent.dataTransfer},l.prototype._preventAndStop=function(a){a.preventDefault(),a.stopPropagation()},l.prototype._haveFiles=function(a){return a?a.indexOf?-1!==a.indexOf("Files"):a.contains?a.contains("Files"):!1:!1},l.prototype._addOverClass=function(a){a.addOverClass()},l.prototype._removeOverClass=function(a){a.removeOverClass()},g.inherit(m,j),m.prototype.events={$destroy:"destroy"},m.prototype.prop="over",m.prototype.overClass="nv-file-over",m.prototype.addOverClass=function(){this.element.addClass(this.getOverClass())},m.prototype.removeOverClass=function(){this.element.removeClass(this.getOverClass())},m.prototype.getOverClass=function(){return this.overClass},g}]).directive("nvFileSelect",["$parse","FileUploader",function(a,b){return{link:function(c,d,e){var f=c.$eval(e.uploader);if(!(f instanceof b))throw new TypeError('"Uploader" must be an instance of FileUploader');var g=new b.FileSelect({uploader:f,element:d});g.getOptions=a(e.options).bind(g,c),g.getFilters=function(){return e.filters}}}}]).directive("nvFileDrop",["$parse","FileUploader",function(a,b){
return{link:function(c,d,e){var f=c.$eval(e.uploader);if(!(f instanceof b))throw new TypeError('"Uploader" must be an instance of FileUploader');if(f.isHTML5){var g=new b.FileDrop({uploader:f,element:d});g.getOptions=a(e.options).bind(g,c),g.getFilters=function(){return e.filters}}}}}]).directive("nvFileOver",["FileUploader",function(a){return{link:function(b,c,d){var e=b.$eval(d.uploader);if(!(e instanceof a))throw new TypeError('"Uploader" must be an instance of FileUploader');var f=new a.FileOver({uploader:e,element:c});f.getOverClass=function(){return d.overClass||this.overClass}}}}]),b}),angular.module("ui.bootstrap",["ui.bootstrap.tpls","ui.bootstrap.transition","ui.bootstrap.collapse","ui.bootstrap.accordion","ui.bootstrap.alert","ui.bootstrap.bindHtml","ui.bootstrap.buttons","ui.bootstrap.carousel","ui.bootstrap.dateparser","ui.bootstrap.position","ui.bootstrap.datepicker","ui.bootstrap.dropdown","ui.bootstrap.modal","ui.bootstrap.pagination","ui.bootstrap.tooltip","ui.bootstrap.popover","ui.bootstrap.progressbar","ui.bootstrap.rating","ui.bootstrap.tabs","ui.bootstrap.timepicker","ui.bootstrap.typeahead"]),angular.module("ui.bootstrap.tpls",["template/accordion/accordion-group.html","template/accordion/accordion.html","template/alert/alert.html","template/carousel/carousel.html","template/carousel/slide.html","template/datepicker/datepicker.html","template/datepicker/day.html","template/datepicker/month.html","template/datepicker/popup.html","template/datepicker/year.html","template/modal/backdrop.html","template/modal/window.html","template/pagination/pager.html","template/pagination/pagination.html","template/tooltip/tooltip-html-unsafe-popup.html","template/tooltip/tooltip-popup.html","template/popover/popover.html","template/progressbar/bar.html","template/progressbar/progress.html","template/progressbar/progressbar.html","template/rating/rating.html","template/tabs/tab.html","template/tabs/tabset.html","template/timepicker/timepicker.html","template/typeahead/typeahead-match.html","template/typeahead/typeahead-popup.html"]),angular.module("ui.bootstrap.transition",[]).factory("$transition",["$q","$timeout","$rootScope",function(a,b,c){function d(a){for(var b in a)if(void 0!==f.style[b])return a[b]}var e=function(d,f,g){g=g||{};var h=a.defer(),i=e[g.animation?"animationEndEventName":"transitionEndEventName"],j=function(){c.$apply(function(){d.unbind(i,j),h.resolve(d)})};return i&&d.bind(i,j),b(function(){angular.isString(f)?d.addClass(f):angular.isFunction(f)?f(d):angular.isObject(f)&&d.css(f),i||h.resolve(d)}),h.promise.cancel=function(){i&&d.unbind(i,j),h.reject("Transition cancelled")},h.promise},f=document.createElement("trans"),g={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",transition:"transitionend"},h={WebkitTransition:"webkitAnimationEnd",MozTransition:"animationend",OTransition:"oAnimationEnd",transition:"animationend"};return e.transitionEndEventName=d(g),e.animationEndEventName=d(h),e}]),angular.module("ui.bootstrap.collapse",["ui.bootstrap.transition"]).directive("collapse",["$transition",function(a){return{link:function(b,c,d){function e(b){function d(){j===e&&(j=void 0)}var e=a(c,b);return j&&j.cancel(),j=e,e.then(d,d),e}function f(){k?(k=!1,g()):(c.removeClass("collapse").addClass("collapsing"),e({height:c[0].scrollHeight+"px"}).then(g))}function g(){c.removeClass("collapsing"),c.addClass("collapse in"),c.css({height:"auto"})}function h(){k?(k=!1,i(),c.css({height:0})):(c.css({height:c[0].scrollHeight+"px"}),c[0].offsetWidth,c.removeClass("collapse in").addClass("collapsing"),e({height:0}).then(i))}function i(){c.removeClass("collapsing"),c.addClass("collapse")}var j,k=!0;b.$watch(d.collapse,function(a){a?h():f()})}}}]),angular.module("ui.bootstrap.accordion",["ui.bootstrap.collapse"]).constant("accordionConfig",{closeOthers:!0}).controller("AccordionController",["$scope","$attrs","accordionConfig",function(a,b,c){this.groups=[],this.closeOthers=function(d){var e=angular.isDefined(b.closeOthers)?a.$eval(b.closeOthers):c.closeOthers;e&&angular.forEach(this.groups,function(a){a!==d&&(a.isOpen=!1)})},this.addGroup=function(a){var b=this;this.groups.push(a),a.$on("$destroy",function(){b.removeGroup(a)})},this.removeGroup=function(a){var b=this.groups.indexOf(a);-1!==b&&this.groups.splice(b,1)}}]).directive("accordion",function(){return{restrict:"EA",controller:"AccordionController",transclude:!0,replace:!1,templateUrl:"template/accordion/accordion.html"}}).directive("accordionGroup",function(){return{require:"^accordion",restrict:"EA",transclude:!0,replace:!0,templateUrl:"template/accordion/accordion-group.html",scope:{heading:"@",isOpen:"=?",isDisabled:"=?"},controller:function(){this.setHeading=function(a){this.heading=a}},link:function(a,b,c,d){d.addGroup(a),a.$watch("isOpen",function(b){b&&d.closeOthers(a)}),a.toggleOpen=function(){a.isDisabled||(a.isOpen=!a.isOpen)}}}}).directive("accordionHeading",function(){return{restrict:"EA",transclude:!0,template:"",replace:!0,require:"^accordionGroup",link:function(a,b,c,d,e){d.setHeading(e(a,function(){}))}}}).directive("accordionTransclude",function(){return{require:"^accordionGroup",link:function(a,b,c,d){a.$watch(function(){return d[c.accordionTransclude]},function(a){a&&(b.html(""),b.append(a))})}}}),angular.module("ui.bootstrap.alert",[]).controller("AlertController",["$scope","$attrs",function(a,b){a.closeable="close"in b,this.close=a.close}]).directive("alert",function(){return{restrict:"EA",controller:"AlertController",templateUrl:"template/alert/alert.html",transclude:!0,replace:!0,scope:{type:"@",close:"&"}}}).directive("dismissOnTimeout",["$timeout",function(a){return{require:"alert",link:function(b,c,d,e){a(function(){e.close()},parseInt(d.dismissOnTimeout,10))}}}]),angular.module("ui.bootstrap.bindHtml",[]).directive("bindHtmlUnsafe",function(){return function(a,b,c){b.addClass("ng-binding").data("$binding",c.bindHtmlUnsafe),a.$watch(c.bindHtmlUnsafe,function(a){b.html(a||"")})}}),angular.module("ui.bootstrap.buttons",[]).constant("buttonConfig",{activeClass:"active",toggleEvent:"click"}).controller("ButtonsController",["buttonConfig",function(a){this.activeClass=a.activeClass||"active",this.toggleEvent=a.toggleEvent||"click"}]).directive("btnRadio",function(){return{require:["btnRadio","ngModel"],controller:"ButtonsController",link:function(a,b,c,d){var e=d[0],f=d[1];f.$render=function(){b.toggleClass(e.activeClass,angular.equals(f.$modelValue,a.$eval(c.btnRadio)))},b.bind(e.toggleEvent,function(){var d=b.hasClass(e.activeClass);(!d||angular.isDefined(c.uncheckable))&&a.$apply(function(){f.$setViewValue(d?null:a.$eval(c.btnRadio)),f.$render()})})}}}).directive("btnCheckbox",function(){return{require:["btnCheckbox","ngModel"],controller:"ButtonsController",link:function(a,b,c,d){function e(){return g(c.btnCheckboxTrue,!0)}function f(){return g(c.btnCheckboxFalse,!1)}function g(b,c){var d=a.$eval(b);return angular.isDefined(d)?d:c}var h=d[0],i=d[1];i.$render=function(){b.toggleClass(h.activeClass,angular.equals(i.$modelValue,e()))},b.bind(h.toggleEvent,function(){a.$apply(function(){i.$setViewValue(b.hasClass(h.activeClass)?f():e()),i.$render()})})}}}),angular.module("ui.bootstrap.carousel",["ui.bootstrap.transition"]).controller("CarouselController",["$scope","$timeout","$interval","$transition",function(a,b,c,d){function e(){f();var b=+a.interval;!isNaN(b)&&b>0&&(h=c(g,b))}function f(){h&&(c.cancel(h),h=null)}function g(){var b=+a.interval;i&&!isNaN(b)&&b>0?a.next():a.pause()}var h,i,j=this,k=j.slides=a.slides=[],l=-1;j.currentSlide=null;var m=!1;j.select=a.select=function(c,f){function g(){m||(j.currentSlide&&angular.isString(f)&&!a.noTransition&&c.$element?(c.$element.addClass(f),c.$element[0].offsetWidth,angular.forEach(k,function(a){angular.extend(a,{direction:"",entering:!1,leaving:!1,active:!1})}),angular.extend(c,{direction:f,active:!0,entering:!0}),angular.extend(j.currentSlide||{},{direction:f,leaving:!0}),a.$currentTransition=d(c.$element,{}),function(b,c){a.$currentTransition.then(function(){h(b,c)},function(){h(b,c)})}(c,j.currentSlide)):h(c,j.currentSlide),j.currentSlide=c,l=i,e())}function h(b,c){angular.extend(b,{direction:"",active:!0,leaving:!1,entering:!1}),angular.extend(c||{},{direction:"",active:!1,leaving:!1,entering:!1}),a.$currentTransition=null}var i=k.indexOf(c);void 0===f&&(f=i>l?"next":"prev"),c&&c!==j.currentSlide&&(a.$currentTransition?(a.$currentTransition.cancel(),b(g)):g())},a.$on("$destroy",function(){m=!0}),j.indexOfSlide=function(a){return k.indexOf(a)},a.next=function(){var b=(l+1)%k.length;return a.$currentTransition?void 0:j.select(k[b],"next")},a.prev=function(){var b=0>l-1?k.length-1:l-1;return a.$currentTransition?void 0:j.select(k[b],"prev")},a.isActive=function(a){return j.currentSlide===a},a.$watch("interval",e),a.$on("$destroy",f),a.play=function(){i||(i=!0,e())},a.pause=function(){a.noPause||(i=!1,f())},j.addSlide=function(b,c){b.$element=c,k.push(b),1===k.length||b.active?(j.select(k[k.length-1]),1==k.length&&a.play()):b.active=!1},j.removeSlide=function(a){var b=k.indexOf(a);k.splice(b,1),k.length>0&&a.active?j.select(b>=k.length?k[b-1]:k[b]):l>b&&l--}}]).directive("carousel",[function(){return{restrict:"EA",transclude:!0,replace:!0,controller:"CarouselController",require:"carousel",templateUrl:"template/carousel/carousel.html",scope:{interval:"=",noTransition:"=",noPause:"="}}}]).directive("slide",function(){return{require:"^carousel",restrict:"EA",transclude:!0,replace:!0,templateUrl:"template/carousel/slide.html",scope:{active:"=?"},link:function(a,b,c,d){d.addSlide(a,b),a.$on("$destroy",function(){d.removeSlide(a)}),a.$watch("active",function(b){b&&d.select(a)})}}}),angular.module("ui.bootstrap.dateparser",[]).service("dateParser",["$locale","orderByFilter",function(a,b){function c(a){var c=[],d=a.split("");return angular.forEach(e,function(b,e){var f=a.indexOf(e);if(f>-1){a=a.split(""),d[f]="("+b.regex+")",a[f]="$";for(var g=f+1,h=f+e.length;h>g;g++)d[g]="",a[g]="$";a=a.join(""),c.push({index:f,apply:b.apply})}}),{regex:new RegExp("^"+d.join("")+"$"),map:b(c,"index")}}function d(a,b,c){return 1===b&&c>28?29===c&&(a%4===0&&a%100!==0||a%400===0):3===b||5===b||8===b||10===b?31>c:!0}this.parsers={};var e={yyyy:{regex:"\\d{4}",apply:function(a){this.year=+a}},yy:{regex:"\\d{2}",apply:function(a){this.year=+a+2e3}},y:{regex:"\\d{1,4}",apply:function(a){this.year=+a}},MMMM:{regex:a.DATETIME_FORMATS.MONTH.join("|"),apply:function(b){this.month=a.DATETIME_FORMATS.MONTH.indexOf(b)}},MMM:{regex:a.DATETIME_FORMATS.SHORTMONTH.join("|"),apply:function(b){this.month=a.DATETIME_FORMATS.SHORTMONTH.indexOf(b)}},MM:{regex:"0[1-9]|1[0-2]",apply:function(a){this.month=a-1}},M:{regex:"[1-9]|1[0-2]",apply:function(a){this.month=a-1}},dd:{regex:"[0-2][0-9]{1}|3[0-1]{1}",apply:function(a){this.date=+a}},d:{regex:"[1-2]?[0-9]{1}|3[0-1]{1}",apply:function(a){this.date=+a}},EEEE:{regex:a.DATETIME_FORMATS.DAY.join("|")},EEE:{regex:a.DATETIME_FORMATS.SHORTDAY.join("|")}};this.parse=function(b,e){if(!angular.isString(b)||!e)return b;e=a.DATETIME_FORMATS[e]||e,this.parsers[e]||(this.parsers[e]=c(e));var f=this.parsers[e],g=f.regex,h=f.map,i=b.match(g);if(i&&i.length){for(var j,k={year:1900,month:0,date:1,hours:0},l=1,m=i.length;m>l;l++){var n=h[l-1];n.apply&&n.apply.call(k,i[l])}return d(k.year,k.month,k.date)&&(j=new Date(k.year,k.month,k.date,k.hours)),j}}}]),angular.module("ui.bootstrap.position",[]).factory("$position",["$document","$window",function(a,b){function c(a,c){return a.currentStyle?a.currentStyle[c]:b.getComputedStyle?b.getComputedStyle(a)[c]:a.style[c]}function d(a){return"static"===(c(a,"position")||"static")}var e=function(b){for(var c=a[0],e=b.offsetParent||c;e&&e!==c&&d(e);)e=e.offsetParent;return e||c};return{position:function(b){var c=this.offset(b),d={top:0,left:0},f=e(b[0]);f!=a[0]&&(d=this.offset(angular.element(f)),d.top+=f.clientTop-f.scrollTop,d.left+=f.clientLeft-f.scrollLeft);var g=b[0].getBoundingClientRect();return{width:g.width||b.prop("offsetWidth"),height:g.height||b.prop("offsetHeight"),top:c.top-d.top,left:c.left-d.left}},offset:function(c){var d=c[0].getBoundingClientRect();return{width:d.width||c.prop("offsetWidth"),height:d.height||c.prop("offsetHeight"),top:d.top+(b.pageYOffset||a[0].documentElement.scrollTop),left:d.left+(b.pageXOffset||a[0].documentElement.scrollLeft)}},positionElements:function(a,b,c,d){var e,f,g,h,i=c.split("-"),j=i[0],k=i[1]||"center";e=d?this.offset(a):this.position(a),f=b.prop("offsetWidth"),g=b.prop("offsetHeight");var l={center:function(){return e.left+e.width/2-f/2},left:function(){return e.left},right:function(){return e.left+e.width}},m={center:function(){return e.top+e.height/2-g/2},top:function(){return e.top},bottom:function(){return e.top+e.height}};switch(j){case"right":h={top:m[k](),left:l[j]()};break;case"left":h={top:m[k](),left:e.left-f};break;case"bottom":h={top:m[j](),left:l[k]()};break;default:h={top:e.top-g,left:l[k]()}}return h}}}]),angular.module("ui.bootstrap.datepicker",["ui.bootstrap.dateparser","ui.bootstrap.position"]).constant("datepickerConfig",{formatDay:"dd",formatMonth:"MMMM",formatYear:"yyyy",formatDayHeader:"EEE",formatDayTitle:"MMMM yyyy",formatMonthTitle:"yyyy",datepickerMode:"day",minMode:"day",maxMode:"year",showWeeks:!0,startingDay:0,yearRange:20,minDate:null,maxDate:null}).controller("DatepickerController",["$scope","$attrs","$parse","$interpolate","$timeout","$log","dateFilter","datepickerConfig",function(a,b,c,d,e,f,g,h){var i=this,j={$setViewValue:angular.noop};this.modes=["day","month","year"],angular.forEach(["formatDay","formatMonth","formatYear","formatDayHeader","formatDayTitle","formatMonthTitle","minMode","maxMode","showWeeks","startingDay","yearRange"],function(c,e){i[c]=angular.isDefined(b[c])?8>e?d(b[c])(a.$parent):a.$parent.$eval(b[c]):h[c]}),angular.forEach(["minDate","maxDate"],function(d){b[d]?a.$parent.$watch(c(b[d]),function(a){i[d]=a?new Date(a):null,i.refreshView()}):i[d]=h[d]?new Date(h[d]):null}),a.datepickerMode=a.datepickerMode||h.datepickerMode,a.uniqueId="datepicker-"+a.$id+"-"+Math.floor(1e4*Math.random()),this.activeDate=angular.isDefined(b.initDate)?a.$parent.$eval(b.initDate):new Date,a.isActive=function(b){return 0===i.compare(b.date,i.activeDate)?(a.activeDateId=b.uid,!0):!1},this.init=function(a){j=a,j.$render=function(){i.render()}},this.render=function(){if(j.$modelValue){var a=new Date(j.$modelValue),b=!isNaN(a);b?this.activeDate=a:f.error('Datepicker directive: "ng-model" value must be a Date object, a number of milliseconds since 01.01.1970 or a string representing an RFC2822 or ISO 8601 date.'),j.$setValidity("date",b)}this.refreshView()},this.refreshView=function(){if(this.element){this._refreshView();var a=j.$modelValue?new Date(j.$modelValue):null;j.$setValidity("date-disabled",!a||this.element&&!this.isDisabled(a))}},this.createDateObject=function(a,b){var c=j.$modelValue?new Date(j.$modelValue):null;return{date:a,label:g(a,b),selected:c&&0===this.compare(a,c),disabled:this.isDisabled(a),current:0===this.compare(a,new Date)}},this.isDisabled=function(c){return this.minDate&&this.compare(c,this.minDate)<0||this.maxDate&&this.compare(c,this.maxDate)>0||b.dateDisabled&&a.dateDisabled({date:c,mode:a.datepickerMode})},this.split=function(a,b){for(var c=[];a.length>0;)c.push(a.splice(0,b));return c},a.select=function(b){if(a.datepickerMode===i.minMode){var c=j.$modelValue?new Date(j.$modelValue):new Date(0,0,0,0,0,0,0);c.setFullYear(b.getFullYear(),b.getMonth(),b.getDate()),j.$setViewValue(c),j.$render()}else i.activeDate=b,a.datepickerMode=i.modes[i.modes.indexOf(a.datepickerMode)-1]},a.move=function(a){var b=i.activeDate.getFullYear()+a*(i.step.years||0),c=i.activeDate.getMonth()+a*(i.step.months||0);i.activeDate.setFullYear(b,c,1),i.refreshView()},a.toggleMode=function(b){b=b||1,a.datepickerMode===i.maxMode&&1===b||a.datepickerMode===i.minMode&&-1===b||(a.datepickerMode=i.modes[i.modes.indexOf(a.datepickerMode)+b])},a.keys={13:"enter",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down"};var k=function(){e(function(){i.element[0].focus()},0,!1)};a.$on("datepicker.focus",k),a.keydown=function(b){var c=a.keys[b.which];if(c&&!b.shiftKey&&!b.altKey)if(b.preventDefault(),b.stopPropagation(),"enter"===c||"space"===c){if(i.isDisabled(i.activeDate))return;a.select(i.activeDate),k()}else!b.ctrlKey||"up"!==c&&"down"!==c?(i.handleKeyDown(c,b),i.refreshView()):(a.toggleMode("up"===c?1:-1),k())}}]).directive("datepicker",function(){return{restrict:"EA",replace:!0,templateUrl:"template/datepicker/datepicker.html",scope:{datepickerMode:"=?",dateDisabled:"&"},require:["datepicker","?^ngModel"],controller:"DatepickerController",link:function(a,b,c,d){var e=d[0],f=d[1];f&&e.init(f)}}}).directive("daypicker",["dateFilter",function(a){return{restrict:"EA",replace:!0,templateUrl:"template/datepicker/day.html",require:"^datepicker",link:function(b,c,d,e){function f(a,b){return 1!==b||a%4!==0||a%100===0&&a%400!==0?i[b]:29}function g(a,b){var c=new Array(b),d=new Date(a),e=0;for(d.setHours(12);b>e;)c[e++]=new Date(d),d.setDate(d.getDate()+1);return c}function h(a){var b=new Date(a);b.setDate(b.getDate()+4-(b.getDay()||7));var c=b.getTime();return b.setMonth(0),b.setDate(1),Math.floor(Math.round((c-b)/864e5)/7)+1}b.showWeeks=e.showWeeks,e.step={months:1},e.element=c;var i=[31,28,31,30,31,30,31,31,30,31,30,31];e._refreshView=function(){var c=e.activeDate.getFullYear(),d=e.activeDate.getMonth(),f=new Date(c,d,1),i=e.startingDay-f.getDay(),j=i>0?7-i:-i,k=new Date(f);j>0&&k.setDate(-j+1);for(var l=g(k,42),m=0;42>m;m++)l[m]=angular.extend(e.createDateObject(l[m],e.formatDay),{secondary:l[m].getMonth()!==d,uid:b.uniqueId+"-"+m});b.labels=new Array(7);for(var n=0;7>n;n++)b.labels[n]={abbr:a(l[n].date,e.formatDayHeader),full:a(l[n].date,"EEEE")};if(b.title=a(e.activeDate,e.formatDayTitle),b.rows=e.split(l,7),b.showWeeks){b.weekNumbers=[];for(var o=h(b.rows[0][0].date),p=b.rows.length;b.weekNumbers.push(o++)<p;);}},e.compare=function(a,b){return new Date(a.getFullYear(),a.getMonth(),a.getDate())-new Date(b.getFullYear(),b.getMonth(),b.getDate())},e.handleKeyDown=function(a){var b=e.activeDate.getDate();if("left"===a)b-=1;else if("up"===a)b-=7;else if("right"===a)b+=1;else if("down"===a)b+=7;else if("pageup"===a||"pagedown"===a){var c=e.activeDate.getMonth()+("pageup"===a?-1:1);e.activeDate.setMonth(c,1),b=Math.min(f(e.activeDate.getFullYear(),e.activeDate.getMonth()),b)}else"home"===a?b=1:"end"===a&&(b=f(e.activeDate.getFullYear(),e.activeDate.getMonth()));e.activeDate.setDate(b)},e.refreshView()}}}]).directive("monthpicker",["dateFilter",function(a){return{restrict:"EA",replace:!0,templateUrl:"template/datepicker/month.html",require:"^datepicker",link:function(b,c,d,e){e.step={years:1},e.element=c,e._refreshView=function(){for(var c=new Array(12),d=e.activeDate.getFullYear(),f=0;12>f;f++)c[f]=angular.extend(e.createDateObject(new Date(d,f,1),e.formatMonth),{uid:b.uniqueId+"-"+f});b.title=a(e.activeDate,e.formatMonthTitle),b.rows=e.split(c,3)},e.compare=function(a,b){return new Date(a.getFullYear(),a.getMonth())-new Date(b.getFullYear(),b.getMonth())},e.handleKeyDown=function(a){var b=e.activeDate.getMonth();if("left"===a)b-=1;else if("up"===a)b-=3;else if("right"===a)b+=1;else if("down"===a)b+=3;else if("pageup"===a||"pagedown"===a){var c=e.activeDate.getFullYear()+("pageup"===a?-1:1);e.activeDate.setFullYear(c)}else"home"===a?b=0:"end"===a&&(b=11);e.activeDate.setMonth(b)},e.refreshView()}}}]).directive("yearpicker",["dateFilter",function(){return{restrict:"EA",replace:!0,templateUrl:"template/datepicker/year.html",require:"^datepicker",link:function(a,b,c,d){function e(a){return parseInt((a-1)/f,10)*f+1}var f=d.yearRange;d.step={years:f},d.element=b,d._refreshView=function(){for(var b=new Array(f),c=0,g=e(d.activeDate.getFullYear());f>c;c++)b[c]=angular.extend(d.createDateObject(new Date(g+c,0,1),d.formatYear),{uid:a.uniqueId+"-"+c});a.title=[b[0].label,b[f-1].label].join(" - "),a.rows=d.split(b,5)},d.compare=function(a,b){return a.getFullYear()-b.getFullYear()},d.handleKeyDown=function(a){var b=d.activeDate.getFullYear();"left"===a?b-=1:"up"===a?b-=5:"right"===a?b+=1:"down"===a?b+=5:"pageup"===a||"pagedown"===a?b+=("pageup"===a?-1:1)*d.step.years:"home"===a?b=e(d.activeDate.getFullYear()):"end"===a&&(b=e(d.activeDate.getFullYear())+f-1),d.activeDate.setFullYear(b)},d.refreshView()}}}]).constant("datepickerPopupConfig",{datepickerPopup:"yyyy-MM-dd",currentText:"Today",clearText:"Clear",closeText:"Done",closeOnDateSelection:!0,appendToBody:!1,showButtonBar:!0}).directive("datepickerPopup",["$compile","$parse","$document","$position","dateFilter","dateParser","datepickerPopupConfig",function(a,b,c,d,e,f,g){return{restrict:"EA",require:"ngModel",scope:{isOpen:"=?",currentText:"@",clearText:"@",closeText:"@",dateDisabled:"&"},link:function(h,i,j,k){function l(a){return a.replace(/([A-Z])/g,function(a){return"-"+a.toLowerCase()})}function m(a){if(a){if(angular.isDate(a)&&!isNaN(a))return k.$setValidity("date",!0),a;if(angular.isString(a)){var b=f.parse(a,n)||new Date(a);return isNaN(b)?void k.$setValidity("date",!1):(k.$setValidity("date",!0),b)}return void k.$setValidity("date",!1)}return k.$setValidity("date",!0),null}var n,o=angular.isDefined(j.closeOnDateSelection)?h.$parent.$eval(j.closeOnDateSelection):g.closeOnDateSelection,p=angular.isDefined(j.datepickerAppendToBody)?h.$parent.$eval(j.datepickerAppendToBody):g.appendToBody;h.showButtonBar=angular.isDefined(j.showButtonBar)?h.$parent.$eval(j.showButtonBar):g.showButtonBar,h.getText=function(a){return h[a+"Text"]||g[a+"Text"]},j.$observe("datepickerPopup",function(a){n=a||g.datepickerPopup,k.$render()});var q=angular.element("<div datepicker-popup-wrap><div datepicker></div></div>");q.attr({"ng-model":"date","ng-change":"dateSelection()"});var r=angular.element(q.children()[0]);j.datepickerOptions&&angular.forEach(h.$parent.$eval(j.datepickerOptions),function(a,b){r.attr(l(b),a)}),h.watchData={},angular.forEach(["minDate","maxDate","datepickerMode"],function(a){if(j[a]){var c=b(j[a]);if(h.$parent.$watch(c,function(b){h.watchData[a]=b}),r.attr(l(a),"watchData."+a),"datepickerMode"===a){var d=c.assign;h.$watch("watchData."+a,function(a,b){a!==b&&d(h.$parent,a)})}}}),j.dateDisabled&&r.attr("date-disabled","dateDisabled({ date: date, mode: mode })"),k.$parsers.unshift(m),h.dateSelection=function(a){angular.isDefined(a)&&(h.date=a),k.$setViewValue(h.date),k.$render(),o&&(h.isOpen=!1,i[0].focus())},i.bind("input change keyup",function(){h.$apply(function(){h.date=k.$modelValue})}),k.$render=function(){var a=k.$viewValue?e(k.$viewValue,n):"";i.val(a),h.date=m(k.$modelValue)};var s=function(a){h.isOpen&&a.target!==i[0]&&h.$apply(function(){h.isOpen=!1})},t=function(a){h.keydown(a)};i.bind("keydown",t),h.keydown=function(a){27===a.which?(a.preventDefault(),a.stopPropagation(),h.close()):40!==a.which||h.isOpen||(h.isOpen=!0)},h.$watch("isOpen",function(a){a?(h.$broadcast("datepicker.focus"),h.position=p?d.offset(i):d.position(i),h.position.top=h.position.top+i.prop("offsetHeight"),c.bind("click",s)):c.unbind("click",s)}),h.select=function(a){if("today"===a){var b=new Date;angular.isDate(k.$modelValue)?(a=new Date(k.$modelValue),a.setFullYear(b.getFullYear(),b.getMonth(),b.getDate())):a=new Date(b.setHours(0,0,0,0))}h.dateSelection(a)},h.close=function(){h.isOpen=!1,i[0].focus()};var u=a(q)(h);q.remove(),p?c.find("body").append(u):i.after(u),h.$on("$destroy",function(){u.remove(),i.unbind("keydown",t),c.unbind("click",s)})}}}]).directive("datepickerPopupWrap",function(){return{restrict:"EA",replace:!0,transclude:!0,templateUrl:"template/datepicker/popup.html",link:function(a,b){b.bind("click",function(a){a.preventDefault(),a.stopPropagation()})}}}),angular.module("ui.bootstrap.dropdown",[]).constant("dropdownConfig",{openClass:"open"}).service("dropdownService",["$document",function(a){var b=null;this.open=function(e){b||(a.bind("click",c),a.bind("keydown",d)),b&&b!==e&&(b.isOpen=!1),b=e},this.close=function(e){b===e&&(b=null,a.unbind("click",c),a.unbind("keydown",d))};var c=function(a){if(b){var c=b.getToggleElement();a&&c&&c[0].contains(a.target)||b.$apply(function(){b.isOpen=!1})}},d=function(a){27===a.which&&(b.focusToggleElement(),c())}}]).controller("DropdownController",["$scope","$attrs","$parse","dropdownConfig","dropdownService","$animate",function(a,b,c,d,e,f){var g,h=this,i=a.$new(),j=d.openClass,k=angular.noop,l=b.onToggle?c(b.onToggle):angular.noop;this.init=function(d){h.$element=d,b.isOpen&&(g=c(b.isOpen),k=g.assign,a.$watch(g,function(a){i.isOpen=!!a}))},this.toggle=function(a){return i.isOpen=arguments.length?!!a:!i.isOpen},this.isOpen=function(){return i.isOpen},i.getToggleElement=function(){return h.toggleElement},i.focusToggleElement=function(){h.toggleElement&&h.toggleElement[0].focus()},i.$watch("isOpen",function(b,c){f[b?"addClass":"removeClass"](h.$element,j),b?(i.focusToggleElement(),e.open(i)):e.close(i),k(a,b),angular.isDefined(b)&&b!==c&&l(a,{open:!!b})}),a.$on("$locationChangeSuccess",function(){i.isOpen=!1}),a.$on("$destroy",function(){i.$destroy()})}]).directive("dropdown",function(){return{controller:"DropdownController",link:function(a,b,c,d){d.init(b)}}}).directive("dropdownToggle",function(){return{require:"?^dropdown",link:function(a,b,c,d){if(d){d.toggleElement=b;var e=function(e){e.preventDefault(),b.hasClass("disabled")||c.disabled||a.$apply(function(){d.toggle()})};b.bind("click",e),b.attr({"aria-haspopup":!0,"aria-expanded":!1}),a.$watch(d.isOpen,function(a){b.attr("aria-expanded",!!a)}),a.$on("$destroy",function(){b.unbind("click",e)})}}}}),angular.module("ui.bootstrap.modal",["ui.bootstrap.transition"]).factory("$$stackedMap",function(){return{createNew:function(){var a=[];return{add:function(b,c){a.push({key:b,value:c})},get:function(b){for(var c=0;c<a.length;c++)if(b==a[c].key)return a[c]},keys:function(){for(var b=[],c=0;c<a.length;c++)b.push(a[c].key);return b},top:function(){return a[a.length-1]},remove:function(b){for(var c=-1,d=0;d<a.length;d++)if(b==a[d].key){c=d;break}return a.splice(c,1)[0]},removeTop:function(){return a.splice(a.length-1,1)[0]},length:function(){return a.length}}}}}).directive("modalBackdrop",["$timeout",function(a){return{restrict:"EA",replace:!0,templateUrl:"template/modal/backdrop.html",link:function(b,c,d){b.backdropClass=d.backdropClass||"",b.animate=!1,a(function(){b.animate=!0})}}}]).directive("modalWindow",["$modalStack","$timeout",function(a,b){return{restrict:"EA",scope:{index:"@",animate:"="},replace:!0,transclude:!0,templateUrl:function(a,b){return b.templateUrl||"template/modal/window.html"},link:function(c,d,e){d.addClass(e.windowClass||""),c.size=e.size,b(function(){c.animate=!0,d[0].querySelectorAll("[autofocus]").length||d[0].focus()}),c.close=function(b){var c=a.getTop();c&&c.value.backdrop&&"static"!=c.value.backdrop&&b.target===b.currentTarget&&(b.preventDefault(),b.stopPropagation(),a.dismiss(c.key,"backdrop click"))}}}}]).directive("modalTransclude",function(){return{link:function(a,b,c,d,e){e(a.$parent,function(a){b.empty(),b.append(a)})}}}).factory("$modalStack",["$transition","$timeout","$document","$compile","$rootScope","$$stackedMap",function(a,b,c,d,e,f){function g(){for(var a=-1,b=n.keys(),c=0;c<b.length;c++)n.get(b[c]).value.backdrop&&(a=c);return a}function h(a){var b=c.find("body").eq(0),d=n.get(a).value;n.remove(a),j(d.modalDomEl,d.modalScope,300,function(){d.modalScope.$destroy(),b.toggleClass(m,n.length()>0),i()})}function i(){if(k&&-1==g()){var a=l;j(k,l,150,function(){a.$destroy(),a=null}),k=void 0,l=void 0}}function j(c,d,e,f){function g(){g.done||(g.done=!0,c.remove(),f&&f())}d.animate=!1;var h=a.transitionEndEventName;if(h){var i=b(g,e);c.bind(h,function(){b.cancel(i),g(),d.$apply()})}else b(g)}var k,l,m="modal-open",n=f.createNew(),o={};return e.$watch(g,function(a){l&&(l.index=a)}),c.bind("keydown",function(a){var b;27===a.which&&(b=n.top(),b&&b.value.keyboard&&(a.preventDefault(),e.$apply(function(){o.dismiss(b.key,"escape key press")})))}),o.open=function(a,b){n.add(a,{deferred:b.deferred,modalScope:b.scope,backdrop:b.backdrop,keyboard:b.keyboard});var f=c.find("body").eq(0),h=g();if(h>=0&&!k){l=e.$new(!0),l.index=h;var i=angular.element("<div modal-backdrop></div>");i.attr("backdrop-class",b.backdropClass),k=d(i)(l),f.append(k)}var j=angular.element("<div modal-window></div>");j.attr({"template-url":b.windowTemplateUrl,"window-class":b.windowClass,size:b.size,index:n.length()-1,animate:"animate"}).html(b.content);var o=d(j)(b.scope);n.top().value.modalDomEl=o,f.append(o),f.addClass(m)},o.close=function(a,b){var c=n.get(a);c&&(c.value.deferred.resolve(b),h(a))},o.dismiss=function(a,b){var c=n.get(a);c&&(c.value.deferred.reject(b),h(a))},o.dismissAll=function(a){for(var b=this.getTop();b;)this.dismiss(b.key,a),b=this.getTop()},o.getTop=function(){return n.top()},o}]).provider("$modal",function(){var a={options:{backdrop:!0,keyboard:!0},$get:["$injector","$rootScope","$q","$http","$templateCache","$controller","$modalStack",function(b,c,d,e,f,g,h){function i(a){return a.template?d.when(a.template):e.get(angular.isFunction(a.templateUrl)?a.templateUrl():a.templateUrl,{cache:f}).then(function(a){return a.data})}function j(a){var c=[];return angular.forEach(a,function(a){(angular.isFunction(a)||angular.isArray(a))&&c.push(d.when(b.invoke(a)))}),c}var k={};return k.open=function(b){var e=d.defer(),f=d.defer(),k={result:e.promise,opened:f.promise,close:function(a){h.close(k,a)},dismiss:function(a){h.dismiss(k,a)}};if(b=angular.extend({},a.options,b),b.resolve=b.resolve||{},!b.template&&!b.templateUrl)throw new Error("One of template or templateUrl options is required.");var l=d.all([i(b)].concat(j(b.resolve)));return l.then(function(a){var d=(b.scope||c).$new();d.$close=k.close,d.$dismiss=k.dismiss;var f,i={},j=1;b.controller&&(i.$scope=d,i.$modalInstance=k,angular.forEach(b.resolve,function(b,c){i[c]=a[j++]}),f=g(b.controller,i),b.controllerAs&&(d[b.controllerAs]=f)),h.open(k,{scope:d,deferred:e,content:a[0],backdrop:b.backdrop,keyboard:b.keyboard,backdropClass:b.backdropClass,windowClass:b.windowClass,windowTemplateUrl:b.windowTemplateUrl,size:b.size})},function(a){e.reject(a)}),l.then(function(){f.resolve(!0)},function(){f.reject(!1)}),k},k}]};return a}),angular.module("ui.bootstrap.pagination",[]).controller("PaginationController",["$scope","$attrs","$parse",function(a,b,c){var d=this,e={$setViewValue:angular.noop},f=b.numPages?c(b.numPages).assign:angular.noop;this.init=function(f,g){e=f,this.config=g,e.$render=function(){d.render()},b.itemsPerPage?a.$parent.$watch(c(b.itemsPerPage),function(b){d.itemsPerPage=parseInt(b,10),a.totalPages=d.calculateTotalPages()}):this.itemsPerPage=g.itemsPerPage},this.calculateTotalPages=function(){var b=this.itemsPerPage<1?1:Math.ceil(a.totalItems/this.itemsPerPage);return Math.max(b||0,1)},this.render=function(){a.page=parseInt(e.$viewValue,10)||1},a.selectPage=function(b){a.page!==b&&b>0&&b<=a.totalPages&&(e.$setViewValue(b),e.$render())},a.getText=function(b){return a[b+"Text"]||d.config[b+"Text"]},a.noPrevious=function(){return 1===a.page},a.noNext=function(){return a.page===a.totalPages},a.$watch("totalItems",function(){a.totalPages=d.calculateTotalPages()}),a.$watch("totalPages",function(b){f(a.$parent,b),a.page>b?a.selectPage(b):e.$render()})}]).constant("paginationConfig",{itemsPerPage:10,boundaryLinks:!1,directionLinks:!0,firstText:"First",previousText:"Previous",nextText:"Next",lastText:"Last",rotate:!0}).directive("pagination",["$parse","paginationConfig",function(a,b){return{restrict:"EA",scope:{totalItems:"=",firstText:"@",previousText:"@",nextText:"@",lastText:"@"},require:["pagination","?ngModel"],controller:"PaginationController",templateUrl:"template/pagination/pagination.html",replace:!0,link:function(c,d,e,f){function g(a,b,c){return{number:a,text:b,active:c}}function h(a,b){
var c=[],d=1,e=b,f=angular.isDefined(k)&&b>k;f&&(l?(d=Math.max(a-Math.floor(k/2),1),e=d+k-1,e>b&&(e=b,d=e-k+1)):(d=(Math.ceil(a/k)-1)*k+1,e=Math.min(d+k-1,b)));for(var h=d;e>=h;h++){var i=g(h,h,h===a);c.push(i)}if(f&&!l){if(d>1){var j=g(d-1,"...",!1);c.unshift(j)}if(b>e){var m=g(e+1,"...",!1);c.push(m)}}return c}var i=f[0],j=f[1];if(j){var k=angular.isDefined(e.maxSize)?c.$parent.$eval(e.maxSize):b.maxSize,l=angular.isDefined(e.rotate)?c.$parent.$eval(e.rotate):b.rotate;c.boundaryLinks=angular.isDefined(e.boundaryLinks)?c.$parent.$eval(e.boundaryLinks):b.boundaryLinks,c.directionLinks=angular.isDefined(e.directionLinks)?c.$parent.$eval(e.directionLinks):b.directionLinks,i.init(j,b),e.maxSize&&c.$parent.$watch(a(e.maxSize),function(a){k=parseInt(a,10),i.render()});var m=i.render;i.render=function(){m(),c.page>0&&c.page<=c.totalPages&&(c.pages=h(c.page,c.totalPages))}}}}}]).constant("pagerConfig",{itemsPerPage:10,previousText:"« Previous",nextText:"Next »",align:!0}).directive("pager",["pagerConfig",function(a){return{restrict:"EA",scope:{totalItems:"=",previousText:"@",nextText:"@"},require:["pager","?ngModel"],controller:"PaginationController",templateUrl:"template/pagination/pager.html",replace:!0,link:function(b,c,d,e){var f=e[0],g=e[1];g&&(b.align=angular.isDefined(d.align)?b.$parent.$eval(d.align):a.align,f.init(g,a))}}}]),angular.module("ui.bootstrap.tooltip",["ui.bootstrap.position","ui.bootstrap.bindHtml"]).provider("$tooltip",function(){function a(a){var b=/[A-Z]/g,c="-";return a.replace(b,function(a,b){return(b?c:"")+a.toLowerCase()})}var b={placement:"top",animation:!0,popupDelay:0},c={mouseenter:"mouseleave",click:"click",focus:"blur"},d={};this.options=function(a){angular.extend(d,a)},this.setTriggers=function(a){angular.extend(c,a)},this.$get=["$window","$compile","$timeout","$document","$position","$interpolate",function(e,f,g,h,i,j){return function(e,k,l){function m(a){var b=a||n.trigger||l,d=c[b]||b;return{show:b,hide:d}}var n=angular.extend({},b,d),o=a(e),p=j.startSymbol(),q=j.endSymbol(),r="<div "+o+'-popup title="'+p+"title"+q+'" content="'+p+"content"+q+'" placement="'+p+"placement"+q+'" animation="animation" is-open="isOpen"></div>';return{restrict:"EA",compile:function(){var a=f(r);return function(b,c,d){function f(){D.isOpen?l():j()}function j(){(!C||b.$eval(d[k+"Enable"]))&&(s(),D.popupDelay?z||(z=g(o,D.popupDelay,!1),z.then(function(a){a()})):o()())}function l(){b.$apply(function(){p()})}function o(){return z=null,y&&(g.cancel(y),y=null),D.content?(q(),w.css({top:0,left:0,display:"block"}),D.$digest(),E(),D.isOpen=!0,D.$digest(),E):angular.noop}function p(){D.isOpen=!1,g.cancel(z),z=null,D.animation?y||(y=g(r,500)):r()}function q(){w&&r(),x=D.$new(),w=a(x,function(a){A?h.find("body").append(a):c.after(a)})}function r(){y=null,w&&(w.remove(),w=null),x&&(x.$destroy(),x=null)}function s(){t(),u()}function t(){var a=d[k+"Placement"];D.placement=angular.isDefined(a)?a:n.placement}function u(){var a=d[k+"PopupDelay"],b=parseInt(a,10);D.popupDelay=isNaN(b)?n.popupDelay:b}function v(){var a=d[k+"Trigger"];F(),B=m(a),B.show===B.hide?c.bind(B.show,f):(c.bind(B.show,j),c.bind(B.hide,l))}var w,x,y,z,A=angular.isDefined(n.appendToBody)?n.appendToBody:!1,B=m(void 0),C=angular.isDefined(d[k+"Enable"]),D=b.$new(!0),E=function(){var a=i.positionElements(c,w,D.placement,A);a.top+="px",a.left+="px",w.css(a)};D.isOpen=!1,d.$observe(e,function(a){D.content=a,!a&&D.isOpen&&p()}),d.$observe(k+"Title",function(a){D.title=a});var F=function(){c.unbind(B.show,j),c.unbind(B.hide,l)};v();var G=b.$eval(d[k+"Animation"]);D.animation=angular.isDefined(G)?!!G:n.animation;var H=b.$eval(d[k+"AppendToBody"]);A=angular.isDefined(H)?H:A,A&&b.$on("$locationChangeSuccess",function(){D.isOpen&&p()}),b.$on("$destroy",function(){g.cancel(y),g.cancel(z),F(),r(),D=null})}}}}}]}).directive("tooltipPopup",function(){return{restrict:"EA",replace:!0,scope:{content:"@",placement:"@",animation:"&",isOpen:"&"},templateUrl:"template/tooltip/tooltip-popup.html"}}).directive("tooltip",["$tooltip",function(a){return a("tooltip","tooltip","mouseenter")}]).directive("tooltipHtmlUnsafePopup",function(){return{restrict:"EA",replace:!0,scope:{content:"@",placement:"@",animation:"&",isOpen:"&"},templateUrl:"template/tooltip/tooltip-html-unsafe-popup.html"}}).directive("tooltipHtmlUnsafe",["$tooltip",function(a){return a("tooltipHtmlUnsafe","tooltip","mouseenter")}]),angular.module("ui.bootstrap.popover",["ui.bootstrap.tooltip"]).directive("popoverPopup",function(){return{restrict:"EA",replace:!0,scope:{title:"@",content:"@",placement:"@",animation:"&",isOpen:"&"},templateUrl:"template/popover/popover.html"}}).directive("popover",["$tooltip",function(a){return a("popover","popover","click")}]),angular.module("ui.bootstrap.progressbar",[]).constant("progressConfig",{animate:!0,max:100}).controller("ProgressController",["$scope","$attrs","progressConfig",function(a,b,c){var d=this,e=angular.isDefined(b.animate)?a.$parent.$eval(b.animate):c.animate;this.bars=[],a.max=angular.isDefined(b.max)?a.$parent.$eval(b.max):c.max,this.addBar=function(b,c){e||c.css({transition:"none"}),this.bars.push(b),b.$watch("value",function(c){b.percent=+(100*c/a.max).toFixed(2)}),b.$on("$destroy",function(){c=null,d.removeBar(b)})},this.removeBar=function(a){this.bars.splice(this.bars.indexOf(a),1)}}]).directive("progress",function(){return{restrict:"EA",replace:!0,transclude:!0,controller:"ProgressController",require:"progress",scope:{},templateUrl:"template/progressbar/progress.html"}}).directive("bar",function(){return{restrict:"EA",replace:!0,transclude:!0,require:"^progress",scope:{value:"=",type:"@"},templateUrl:"template/progressbar/bar.html",link:function(a,b,c,d){d.addBar(a,b)}}}).directive("progressbar",function(){return{restrict:"EA",replace:!0,transclude:!0,controller:"ProgressController",scope:{value:"=",type:"@"},templateUrl:"template/progressbar/progressbar.html",link:function(a,b,c,d){d.addBar(a,angular.element(b.children()[0]))}}}),angular.module("ui.bootstrap.rating",[]).constant("ratingConfig",{max:5,stateOn:null,stateOff:null}).controller("RatingController",["$scope","$attrs","ratingConfig",function(a,b,c){var d={$setViewValue:angular.noop};this.init=function(e){d=e,d.$render=this.render,this.stateOn=angular.isDefined(b.stateOn)?a.$parent.$eval(b.stateOn):c.stateOn,this.stateOff=angular.isDefined(b.stateOff)?a.$parent.$eval(b.stateOff):c.stateOff;var f=angular.isDefined(b.ratingStates)?a.$parent.$eval(b.ratingStates):new Array(angular.isDefined(b.max)?a.$parent.$eval(b.max):c.max);a.range=this.buildTemplateObjects(f)},this.buildTemplateObjects=function(a){for(var b=0,c=a.length;c>b;b++)a[b]=angular.extend({index:b},{stateOn:this.stateOn,stateOff:this.stateOff},a[b]);return a},a.rate=function(b){!a.readonly&&b>=0&&b<=a.range.length&&(d.$setViewValue(b),d.$render())},a.enter=function(b){a.readonly||(a.value=b),a.onHover({value:b})},a.reset=function(){a.value=d.$viewValue,a.onLeave()},a.onKeydown=function(b){/(37|38|39|40)/.test(b.which)&&(b.preventDefault(),b.stopPropagation(),a.rate(a.value+(38===b.which||39===b.which?1:-1)))},this.render=function(){a.value=d.$viewValue}}]).directive("rating",function(){return{restrict:"EA",require:["rating","ngModel"],scope:{readonly:"=?",onHover:"&",onLeave:"&"},controller:"RatingController",templateUrl:"template/rating/rating.html",replace:!0,link:function(a,b,c,d){var e=d[0],f=d[1];f&&e.init(f)}}}),angular.module("ui.bootstrap.tabs",[]).controller("TabsetController",["$scope",function(a){var b=this,c=b.tabs=a.tabs=[];b.select=function(a){angular.forEach(c,function(b){b.active&&b!==a&&(b.active=!1,b.onDeselect())}),a.active=!0,a.onSelect()},b.addTab=function(a){c.push(a),1===c.length?a.active=!0:a.active&&b.select(a)},b.removeTab=function(a){var e=c.indexOf(a);if(a.active&&c.length>1&&!d){var f=e==c.length-1?e-1:e+1;b.select(c[f])}c.splice(e,1)};var d;a.$on("$destroy",function(){d=!0})}]).directive("tabset",function(){return{restrict:"EA",transclude:!0,replace:!0,scope:{type:"@"},controller:"TabsetController",templateUrl:"template/tabs/tabset.html",link:function(a,b,c){a.vertical=angular.isDefined(c.vertical)?a.$parent.$eval(c.vertical):!1,a.justified=angular.isDefined(c.justified)?a.$parent.$eval(c.justified):!1}}}).directive("tab",["$parse",function(a){return{require:"^tabset",restrict:"EA",replace:!0,templateUrl:"template/tabs/tab.html",transclude:!0,scope:{active:"=?",heading:"@",onSelect:"&select",onDeselect:"&deselect"},controller:function(){},compile:function(b,c,d){return function(b,c,e,f){b.$watch("active",function(a){a&&f.select(b)}),b.disabled=!1,e.disabled&&b.$parent.$watch(a(e.disabled),function(a){b.disabled=!!a}),b.select=function(){b.disabled||(b.active=!0)},f.addTab(b),b.$on("$destroy",function(){f.removeTab(b)}),b.$transcludeFn=d}}}}]).directive("tabHeadingTransclude",[function(){return{restrict:"A",require:"^tab",link:function(a,b){a.$watch("headingElement",function(a){a&&(b.html(""),b.append(a))})}}}]).directive("tabContentTransclude",function(){function a(a){return a.tagName&&(a.hasAttribute("tab-heading")||a.hasAttribute("data-tab-heading")||"tab-heading"===a.tagName.toLowerCase()||"data-tab-heading"===a.tagName.toLowerCase())}return{restrict:"A",require:"^tabset",link:function(b,c,d){var e=b.$eval(d.tabContentTransclude);e.$transcludeFn(e.$parent,function(b){angular.forEach(b,function(b){a(b)?e.headingElement=b:c.append(b)})})}}}),angular.module("ui.bootstrap.timepicker",[]).constant("timepickerConfig",{hourStep:1,minuteStep:1,showMeridian:!0,meridians:null,readonlyInput:!1,mousewheel:!0}).controller("TimepickerController",["$scope","$attrs","$parse","$log","$locale","timepickerConfig",function(a,b,c,d,e,f){function g(){var b=parseInt(a.hours,10),c=a.showMeridian?b>0&&13>b:b>=0&&24>b;return c?(a.showMeridian&&(12===b&&(b=0),a.meridian===p[1]&&(b+=12)),b):void 0}function h(){var b=parseInt(a.minutes,10);return b>=0&&60>b?b:void 0}function i(a){return angular.isDefined(a)&&a.toString().length<2?"0"+a:a}function j(a){k(),o.$setViewValue(new Date(n)),l(a)}function k(){o.$setValidity("time",!0),a.invalidHours=!1,a.invalidMinutes=!1}function l(b){var c=n.getHours(),d=n.getMinutes();a.showMeridian&&(c=0===c||12===c?12:c%12),a.hours="h"===b?c:i(c),a.minutes="m"===b?d:i(d),a.meridian=n.getHours()<12?p[0]:p[1]}function m(a){var b=new Date(n.getTime()+6e4*a);n.setHours(b.getHours(),b.getMinutes()),j()}var n=new Date,o={$setViewValue:angular.noop},p=angular.isDefined(b.meridians)?a.$parent.$eval(b.meridians):f.meridians||e.DATETIME_FORMATS.AMPMS;this.init=function(c,d){o=c,o.$render=this.render;var e=d.eq(0),g=d.eq(1),h=angular.isDefined(b.mousewheel)?a.$parent.$eval(b.mousewheel):f.mousewheel;h&&this.setupMousewheelEvents(e,g),a.readonlyInput=angular.isDefined(b.readonlyInput)?a.$parent.$eval(b.readonlyInput):f.readonlyInput,this.setupInputEvents(e,g)};var q=f.hourStep;b.hourStep&&a.$parent.$watch(c(b.hourStep),function(a){q=parseInt(a,10)});var r=f.minuteStep;b.minuteStep&&a.$parent.$watch(c(b.minuteStep),function(a){r=parseInt(a,10)}),a.showMeridian=f.showMeridian,b.showMeridian&&a.$parent.$watch(c(b.showMeridian),function(b){if(a.showMeridian=!!b,o.$error.time){var c=g(),d=h();angular.isDefined(c)&&angular.isDefined(d)&&(n.setHours(c),j())}else l()}),this.setupMousewheelEvents=function(b,c){var d=function(a){a.originalEvent&&(a=a.originalEvent);var b=a.wheelDelta?a.wheelDelta:-a.deltaY;return a.detail||b>0};b.bind("mousewheel wheel",function(b){a.$apply(d(b)?a.incrementHours():a.decrementHours()),b.preventDefault()}),c.bind("mousewheel wheel",function(b){a.$apply(d(b)?a.incrementMinutes():a.decrementMinutes()),b.preventDefault()})},this.setupInputEvents=function(b,c){if(a.readonlyInput)return a.updateHours=angular.noop,void(a.updateMinutes=angular.noop);var d=function(b,c){o.$setViewValue(null),o.$setValidity("time",!1),angular.isDefined(b)&&(a.invalidHours=b),angular.isDefined(c)&&(a.invalidMinutes=c)};a.updateHours=function(){var a=g();angular.isDefined(a)?(n.setHours(a),j("h")):d(!0)},b.bind("blur",function(){!a.invalidHours&&a.hours<10&&a.$apply(function(){a.hours=i(a.hours)})}),a.updateMinutes=function(){var a=h();angular.isDefined(a)?(n.setMinutes(a),j("m")):d(void 0,!0)},c.bind("blur",function(){!a.invalidMinutes&&a.minutes<10&&a.$apply(function(){a.minutes=i(a.minutes)})})},this.render=function(){var a=o.$modelValue?new Date(o.$modelValue):null;isNaN(a)?(o.$setValidity("time",!1),d.error('Timepicker directive: "ng-model" value must be a Date object, a number of milliseconds since 01.01.1970 or a string representing an RFC2822 or ISO 8601 date.')):(a&&(n=a),k(),l())},a.incrementHours=function(){m(60*q)},a.decrementHours=function(){m(60*-q)},a.incrementMinutes=function(){m(r)},a.decrementMinutes=function(){m(-r)},a.toggleMeridian=function(){m(720*(n.getHours()<12?1:-1))}}]).directive("timepicker",function(){return{restrict:"EA",require:["timepicker","?^ngModel"],controller:"TimepickerController",replace:!0,scope:{},templateUrl:"template/timepicker/timepicker.html",link:function(a,b,c,d){var e=d[0],f=d[1];f&&e.init(f,b.find("input"))}}}),angular.module("ui.bootstrap.typeahead",["ui.bootstrap.position","ui.bootstrap.bindHtml"]).factory("typeaheadParser",["$parse",function(a){var b=/^\s*([\s\S]+?)(?:\s+as\s+([\s\S]+?))?\s+for\s+(?:([\$\w][\$\w\d]*))\s+in\s+([\s\S]+?)$/;return{parse:function(c){var d=c.match(b);if(!d)throw new Error('Expected typeahead specification in form of "_modelValue_ (as _label_)? for _item_ in _collection_" but got "'+c+'".');return{itemName:d[3],source:a(d[4]),viewMapper:a(d[2]||d[1]),modelMapper:a(d[1])}}}}]).directive("typeahead",["$compile","$parse","$q","$timeout","$document","$position","typeaheadParser",function(a,b,c,d,e,f,g){var h=[9,13,27,38,40];return{require:"ngModel",link:function(i,j,k,l){var m,n=i.$eval(k.typeaheadMinLength)||1,o=i.$eval(k.typeaheadWaitMs)||0,p=i.$eval(k.typeaheadEditable)!==!1,q=b(k.typeaheadLoading).assign||angular.noop,r=b(k.typeaheadOnSelect),s=k.typeaheadInputFormatter?b(k.typeaheadInputFormatter):void 0,t=k.typeaheadAppendToBody?i.$eval(k.typeaheadAppendToBody):!1,u=i.$eval(k.typeaheadFocusFirst)!==!1,v=b(k.ngModel).assign,w=g.parse(k.typeahead),x=i.$new();i.$on("$destroy",function(){x.$destroy()});var y="typeahead-"+x.$id+"-"+Math.floor(1e4*Math.random());j.attr({"aria-autocomplete":"list","aria-expanded":!1,"aria-owns":y});var z=angular.element("<div typeahead-popup></div>");z.attr({id:y,matches:"matches",active:"activeIdx",select:"select(activeIdx)",query:"query",position:"position"}),angular.isDefined(k.typeaheadTemplateUrl)&&z.attr("template-url",k.typeaheadTemplateUrl);var A=function(){x.matches=[],x.activeIdx=-1,j.attr("aria-expanded",!1)},B=function(a){return y+"-option-"+a};x.$watch("activeIdx",function(a){0>a?j.removeAttr("aria-activedescendant"):j.attr("aria-activedescendant",B(a))});var C=function(a){var b={$viewValue:a};q(i,!0),c.when(w.source(i,b)).then(function(c){var d=a===l.$viewValue;if(d&&m)if(c.length>0){x.activeIdx=u?0:-1,x.matches.length=0;for(var e=0;e<c.length;e++)b[w.itemName]=c[e],x.matches.push({id:B(e),label:w.viewMapper(x,b),model:c[e]});x.query=a,x.position=t?f.offset(j):f.position(j),x.position.top=x.position.top+j.prop("offsetHeight"),j.attr("aria-expanded",!0)}else A();d&&q(i,!1)},function(){A(),q(i,!1)})};A(),x.query=void 0;var D,E=function(a){D=d(function(){C(a)},o)},F=function(){D&&d.cancel(D)};l.$parsers.unshift(function(a){return m=!0,a&&a.length>=n?o>0?(F(),E(a)):C(a):(q(i,!1),F(),A()),p?a:a?void l.$setValidity("editable",!1):(l.$setValidity("editable",!0),a)}),l.$formatters.push(function(a){var b,c,d={};return s?(d.$model=a,s(i,d)):(d[w.itemName]=a,b=w.viewMapper(i,d),d[w.itemName]=void 0,c=w.viewMapper(i,d),b!==c?b:a)}),x.select=function(a){var b,c,e={};e[w.itemName]=c=x.matches[a].model,b=w.modelMapper(i,e),v(i,b),l.$setValidity("editable",!0),r(i,{$item:c,$model:b,$label:w.viewMapper(i,e)}),A(),d(function(){j[0].focus()},0,!1)},j.bind("keydown",function(a){0!==x.matches.length&&-1!==h.indexOf(a.which)&&(-1!=x.activeIdx||13!==a.which&&9!==a.which)&&(a.preventDefault(),40===a.which?(x.activeIdx=(x.activeIdx+1)%x.matches.length,x.$digest()):38===a.which?(x.activeIdx=(x.activeIdx>0?x.activeIdx:x.matches.length)-1,x.$digest()):13===a.which||9===a.which?x.$apply(function(){x.select(x.activeIdx)}):27===a.which&&(a.stopPropagation(),A(),x.$digest()))}),j.bind("blur",function(){m=!1});var G=function(a){j[0]!==a.target&&(A(),x.$digest())};e.bind("click",G),i.$on("$destroy",function(){e.unbind("click",G),t&&H.remove()});var H=a(z)(x);t?e.find("body").append(H):j.after(H)}}}]).directive("typeaheadPopup",function(){return{restrict:"EA",scope:{matches:"=",query:"=",active:"=",position:"=",select:"&"},replace:!0,templateUrl:"template/typeahead/typeahead-popup.html",link:function(a,b,c){a.templateUrl=c.templateUrl,a.isOpen=function(){return a.matches.length>0},a.isActive=function(b){return a.active==b},a.selectActive=function(b){a.active=b},a.selectMatch=function(b){a.select({activeIdx:b})}}}}).directive("typeaheadMatch",["$http","$templateCache","$compile","$parse",function(a,b,c,d){return{restrict:"EA",scope:{index:"=",match:"=",query:"="},link:function(e,f,g){var h=d(g.templateUrl)(e.$parent)||"template/typeahead/typeahead-match.html";a.get(h,{cache:b}).success(function(a){f.replaceWith(c(a.trim())(e))})}}}]).filter("typeaheadHighlight",function(){function a(a){return a.replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")}return function(b,c){return c?(""+b).replace(new RegExp(a(c),"gi"),"<strong>$&</strong>"):b}}),angular.module("template/accordion/accordion-group.html",[]).run(["$templateCache",function(a){a.put("template/accordion/accordion-group.html",'<div class="panel panel-default">\n  <div class="panel-heading">\n    <h4 class="panel-title">\n      <a href class="accordion-toggle" ng-click="toggleOpen()" accordion-transclude="heading"><span ng-class="{\'text-muted\': isDisabled}">{{heading}}</span></a>\n    </h4>\n  </div>\n  <div class="panel-collapse" collapse="!isOpen">\n	  <div class="panel-body" ng-transclude></div>\n  </div>\n</div>\n')}]),angular.module("template/accordion/accordion.html",[]).run(["$templateCache",function(a){a.put("template/accordion/accordion.html",'<div class="panel-group" ng-transclude></div>')}]),angular.module("template/alert/alert.html",[]).run(["$templateCache",function(a){a.put("template/alert/alert.html",'<div class="alert" ng-class="[\'alert-\' + (type || \'warning\'), closeable ? \'alert-dismissable\' : null]" role="alert">\n    <button ng-show="closeable" type="button" class="close" ng-click="close()">\n        <span aria-hidden="true">&times;</span>\n        <span class="sr-only">Close</span>\n    </button>\n    <div ng-transclude></div>\n</div>\n')}]),angular.module("template/carousel/carousel.html",[]).run(["$templateCache",function(a){a.put("template/carousel/carousel.html",'<div ng-mouseenter="pause()" ng-mouseleave="play()" class="carousel" ng-swipe-right="prev()" ng-swipe-left="next()">\n    <ol class="carousel-indicators" ng-show="slides.length > 1">\n        <li ng-repeat="slide in slides track by $index" ng-class="{active: isActive(slide)}" ng-click="select(slide)"></li>\n    </ol>\n    <div class="carousel-inner" ng-transclude></div>\n    <a class="left carousel-control" ng-click="prev()" ng-show="slides.length > 1"><span class="glyphicon glyphicon-chevron-left"></span></a>\n    <a class="right carousel-control" ng-click="next()" ng-show="slides.length > 1"><span class="glyphicon glyphicon-chevron-right"></span></a>\n</div>\n')}]),angular.module("template/carousel/slide.html",[]).run(["$templateCache",function(a){a.put("template/carousel/slide.html","<div ng-class=\"{\n    'active': leaving || (active && !entering),\n    'prev': (next || active) && direction=='prev',\n    'next': (next || active) && direction=='next',\n    'right': direction=='prev',\n    'left': direction=='next'\n  }\" class=\"item text-center\" ng-transclude></div>\n")}]),angular.module("template/datepicker/datepicker.html",[]).run(["$templateCache",function(a){a.put("template/datepicker/datepicker.html",'<div ng-switch="datepickerMode" role="application" ng-keydown="keydown($event)">\n  <daypicker ng-switch-when="day" tabindex="0"></daypicker>\n  <monthpicker ng-switch-when="month" tabindex="0"></monthpicker>\n  <yearpicker ng-switch-when="year" tabindex="0"></yearpicker>\n</div>')}]),angular.module("template/datepicker/day.html",[]).run(["$templateCache",function(a){a.put("template/datepicker/day.html",'<table role="grid" aria-labelledby="{{uniqueId}}-title" aria-activedescendant="{{activeDateId}}">\n  <thead>\n    <tr>\n      <th><button type="button" class="btn btn-default btn-sm pull-left" ng-click="move(-1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-left"></i></button></th>\n      <th colspan="{{5 + showWeeks}}"><button id="{{uniqueId}}-title" role="heading" aria-live="assertive" aria-atomic="true" type="button" class="btn btn-default btn-sm" ng-click="toggleMode()" tabindex="-1" style="width:100%;"><strong>{{title}}</strong></button></th>\n      <th><button type="button" class="btn btn-default btn-sm pull-right" ng-click="move(1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-right"></i></button></th>\n    </tr>\n    <tr>\n      <th ng-show="showWeeks" class="text-center"></th>\n      <th ng-repeat="label in labels track by $index" class="text-center"><small aria-label="{{label.full}}">{{label.abbr}}</small></th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr ng-repeat="row in rows track by $index">\n      <td ng-show="showWeeks" class="text-center h6"><em>{{ weekNumbers[$index] }}</em></td>\n      <td ng-repeat="dt in row track by dt.date" class="text-center" role="gridcell" id="{{dt.uid}}" aria-disabled="{{!!dt.disabled}}">\n        <button type="button" style="width:100%;" class="btn btn-default btn-sm" ng-class="{\'btn-info\': dt.selected, active: isActive(dt)}" ng-click="select(dt.date)" ng-disabled="dt.disabled" tabindex="-1"><span ng-class="{\'text-muted\': dt.secondary, \'text-info\': dt.current}">{{dt.label}}</span></button>\n      </td>\n    </tr>\n  </tbody>\n</table>\n')}]),angular.module("template/datepicker/month.html",[]).run(["$templateCache",function(a){a.put("template/datepicker/month.html",'<table role="grid" aria-labelledby="{{uniqueId}}-title" aria-activedescendant="{{activeDateId}}">\n  <thead>\n    <tr>\n      <th><button type="button" class="btn btn-default btn-sm pull-left" ng-click="move(-1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-left"></i></button></th>\n      <th><button id="{{uniqueId}}-title" role="heading" aria-live="assertive" aria-atomic="true" type="button" class="btn btn-default btn-sm" ng-click="toggleMode()" tabindex="-1" style="width:100%;"><strong>{{title}}</strong></button></th>\n      <th><button type="button" class="btn btn-default btn-sm pull-right" ng-click="move(1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-right"></i></button></th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr ng-repeat="row in rows track by $index">\n      <td ng-repeat="dt in row track by dt.date" class="text-center" role="gridcell" id="{{dt.uid}}" aria-disabled="{{!!dt.disabled}}">\n        <button type="button" style="width:100%;" class="btn btn-default" ng-class="{\'btn-info\': dt.selected, active: isActive(dt)}" ng-click="select(dt.date)" ng-disabled="dt.disabled" tabindex="-1"><span ng-class="{\'text-info\': dt.current}">{{dt.label}}</span></button>\n      </td>\n    </tr>\n  </tbody>\n</table>\n')}]),angular.module("template/datepicker/popup.html",[]).run(["$templateCache",function(a){a.put("template/datepicker/popup.html",'<ul class="dropdown-menu" ng-style="{display: (isOpen && \'block\') || \'none\', top: position.top+\'px\', left: position.left+\'px\'}" ng-keydown="keydown($event)">\n	<li ng-transclude></li>\n	<li ng-if="showButtonBar" style="padding:10px 9px 2px">\n		<span class="btn-group pull-left">\n			<button type="button" class="btn btn-sm btn-info" ng-click="select(\'today\')">{{ getText(\'current\') }}</button>\n			<button type="button" class="btn btn-sm btn-danger" ng-click="select(null)">{{ getText(\'clear\') }}</button>\n		</span>\n		<button type="button" class="btn btn-sm btn-success pull-right" ng-click="close()">{{ getText(\'close\') }}</button>\n	</li>\n</ul>\n')}]),angular.module("template/datepicker/year.html",[]).run(["$templateCache",function(a){a.put("template/datepicker/year.html",'<table role="grid" aria-labelledby="{{uniqueId}}-title" aria-activedescendant="{{activeDateId}}">\n  <thead>\n    <tr>\n      <th><button type="button" class="btn btn-default btn-sm pull-left" ng-click="move(-1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-left"></i></button></th>\n      <th colspan="3"><button id="{{uniqueId}}-title" role="heading" aria-live="assertive" aria-atomic="true" type="button" class="btn btn-default btn-sm" ng-click="toggleMode()" tabindex="-1" style="width:100%;"><strong>{{title}}</strong></button></th>\n      <th><button type="button" class="btn btn-default btn-sm pull-right" ng-click="move(1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-right"></i></button></th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr ng-repeat="row in rows track by $index">\n      <td ng-repeat="dt in row track by dt.date" class="text-center" role="gridcell" id="{{dt.uid}}" aria-disabled="{{!!dt.disabled}}">\n        <button type="button" style="width:100%;" class="btn btn-default" ng-class="{\'btn-info\': dt.selected, active: isActive(dt)}" ng-click="select(dt.date)" ng-disabled="dt.disabled" tabindex="-1"><span ng-class="{\'text-info\': dt.current}">{{dt.label}}</span></button>\n      </td>\n    </tr>\n  </tbody>\n</table>\n')}]),angular.module("template/modal/backdrop.html",[]).run(["$templateCache",function(a){a.put("template/modal/backdrop.html",'<div class="modal-backdrop fade {{ backdropClass }}"\n     ng-class="{in: animate}"\n     ng-style="{\'z-index\': 1040 + (index && 1 || 0) + index*10}"\n></div>\n')}]),angular.module("template/modal/window.html",[]).run(["$templateCache",function(a){a.put("template/modal/window.html",'<div tabindex="-1" role="dialog" class="modal fade" ng-class="{in: animate}" ng-style="{\'z-index\': 1050 + index*10, display: \'block\'}" ng-click="close($event)">\n    <div class="modal-dialog" ng-class="{\'modal-sm\': size == \'sm\', \'modal-lg\': size == \'lg\'}"><div class="modal-content" modal-transclude></div></div>\n</div>')}]),angular.module("template/pagination/pager.html",[]).run(["$templateCache",function(a){a.put("template/pagination/pager.html",'<ul class="pager">\n  <li ng-class="{disabled: noPrevious(), previous: align}"><a href ng-click="selectPage(page - 1)">{{getText(\'previous\')}}</a></li>\n  <li ng-class="{disabled: noNext(), next: align}"><a href ng-click="selectPage(page + 1)">{{getText(\'next\')}}</a></li>\n</ul>')}]),angular.module("template/pagination/pagination.html",[]).run(["$templateCache",function(a){a.put("template/pagination/pagination.html",'<ul class="pagination">\n  <li ng-if="boundaryLinks" ng-class="{disabled: noPrevious()}"><a href ng-click="selectPage(1)">{{getText(\'first\')}}</a></li>\n  <li ng-if="directionLinks" ng-class="{disabled: noPrevious()}"><a href ng-click="selectPage(page - 1)">{{getText(\'previous\')}}</a></li>\n  <li ng-repeat="page in pages track by $index" ng-class="{active: page.active}"><a href ng-click="selectPage(page.number)">{{page.text}}</a></li>\n  <li ng-if="directionLinks" ng-class="{disabled: noNext()}"><a href ng-click="selectPage(page + 1)">{{getText(\'next\')}}</a></li>\n  <li ng-if="boundaryLinks" ng-class="{disabled: noNext()}"><a href ng-click="selectPage(totalPages)">{{getText(\'last\')}}</a></li>\n</ul>')}]),angular.module("template/tooltip/tooltip-html-unsafe-popup.html",[]).run(["$templateCache",function(a){a.put("template/tooltip/tooltip-html-unsafe-popup.html",'<div class="tooltip {{placement}}" ng-class="{ in: isOpen(), fade: animation() }">\n  <div class="tooltip-arrow"></div>\n  <div class="tooltip-inner" bind-html-unsafe="content"></div>\n</div>\n')}]),angular.module("template/tooltip/tooltip-popup.html",[]).run(["$templateCache",function(a){a.put("template/tooltip/tooltip-popup.html",'<div class="tooltip {{placement}}" ng-class="{ in: isOpen(), fade: animation() }">\n  <div class="tooltip-arrow"></div>\n  <div class="tooltip-inner" ng-bind="content"></div>\n</div>\n')}]),angular.module("template/popover/popover.html",[]).run(["$templateCache",function(a){a.put("template/popover/popover.html",'<div class="popover {{placement}}" ng-class="{ in: isOpen(), fade: animation() }">\n  <div class="arrow"></div>\n\n  <div class="popover-inner">\n      <h3 class="popover-title" ng-bind="title" ng-show="title"></h3>\n      <div class="popover-content" ng-bind="content"></div>\n  </div>\n</div>\n')}]),angular.module("template/progressbar/bar.html",[]).run(["$templateCache",function(a){a.put("template/progressbar/bar.html",'<div class="progress-bar" ng-class="type && \'progress-bar-\' + type" role="progressbar" aria-valuenow="{{value}}" aria-valuemin="0" aria-valuemax="{{max}}" ng-style="{width: percent + \'%\'}" aria-valuetext="{{percent | number:0}}%" ng-transclude></div>')}]),angular.module("template/progressbar/progress.html",[]).run(["$templateCache",function(a){a.put("template/progressbar/progress.html",'<div class="progress" ng-transclude></div>')}]),angular.module("template/progressbar/progressbar.html",[]).run(["$templateCache",function(a){a.put("template/progressbar/progressbar.html",'<div class="progress">\n  <div class="progress-bar" ng-class="type && \'progress-bar-\' + type" role="progressbar" aria-valuenow="{{value}}" aria-valuemin="0" aria-valuemax="{{max}}" ng-style="{width: percent + \'%\'}" aria-valuetext="{{percent | number:0}}%" ng-transclude></div>\n</div>')}]),angular.module("template/rating/rating.html",[]).run(["$templateCache",function(a){a.put("template/rating/rating.html",'<span ng-mouseleave="reset()" ng-keydown="onKeydown($event)" tabindex="0" role="slider" aria-valuemin="0" aria-valuemax="{{range.length}}" aria-valuenow="{{value}}">\n    <i ng-repeat="r in range track by $index" ng-mouseenter="enter($index + 1)" ng-click="rate($index + 1)" class="glyphicon" ng-class="$index < value && (r.stateOn || \'glyphicon-star\') || (r.stateOff || \'glyphicon-star-empty\')">\n        <span class="sr-only">({{ $index < value ? \'*\' : \' \' }})</span>\n    </i>\n</span>')}]),angular.module("template/tabs/tab.html",[]).run(["$templateCache",function(a){a.put("template/tabs/tab.html",'<li ng-class="{active: active, disabled: disabled}">\n  <a href ng-click="select()" tab-heading-transclude>{{heading}}</a>\n</li>\n')}]),angular.module("template/tabs/tabset.html",[]).run(["$templateCache",function(a){a.put("template/tabs/tabset.html",'<div>\n  <ul class="nav nav-{{type || \'tabs\'}}" ng-class="{\'nav-stacked\': vertical, \'nav-justified\': justified}" ng-transclude></ul>\n  <div class="tab-content">\n    <div class="tab-pane" \n         ng-repeat="tab in tabs" \n         ng-class="{active: tab.active}"\n         tab-content-transclude="tab">\n    </div>\n  </div>\n</div>\n')}]),angular.module("template/timepicker/timepicker.html",[]).run(["$templateCache",function(a){a.put("template/timepicker/timepicker.html",'<table>\n	<tbody>\n		<tr class="text-center">\n			<td><a ng-click="incrementHours()" class="btn btn-link"><span class="glyphicon glyphicon-chevron-up"></span></a></td>\n			<td>&nbsp;</td>\n			<td><a ng-click="incrementMinutes()" class="btn btn-link"><span class="glyphicon glyphicon-chevron-up"></span></a></td>\n			<td ng-show="showMeridian"></td>\n		</tr>\n		<tr>\n			<td style="width:50px;" class="form-group" ng-class="{\'has-error\': invalidHours}">\n				<input type="text" ng-model="hours" ng-change="updateHours()" class="form-control text-center" ng-mousewheel="incrementHours()" ng-readonly="readonlyInput" maxlength="2">\n			</td>\n			<td>:</td>\n			<td style="width:50px;" class="form-group" ng-class="{\'has-error\': invalidMinutes}">\n				<input type="text" ng-model="minutes" ng-change="updateMinutes()" class="form-control text-center" ng-readonly="readonlyInput" maxlength="2">\n			</td>\n			<td ng-show="showMeridian"><button type="button" class="btn btn-default text-center" ng-click="toggleMeridian()">{{meridian}}</button></td>\n		</tr>\n		<tr class="text-center">\n			<td><a ng-click="decrementHours()" class="btn btn-link"><span class="glyphicon glyphicon-chevron-down"></span></a></td>\n			<td>&nbsp;</td>\n			<td><a ng-click="decrementMinutes()" class="btn btn-link"><span class="glyphicon glyphicon-chevron-down"></span></a></td>\n			<td ng-show="showMeridian"></td>\n		</tr>\n	</tbody>\n</table>\n');
}]),angular.module("template/typeahead/typeahead-match.html",[]).run(["$templateCache",function(a){a.put("template/typeahead/typeahead-match.html",'<a tabindex="-1" bind-html-unsafe="match.label | typeaheadHighlight:query"></a>')}]),angular.module("template/typeahead/typeahead-popup.html",[]).run(["$templateCache",function(a){a.put("template/typeahead/typeahead-popup.html",'<ul class="dropdown-menu" ng-show="isOpen()" ng-style="{top: position.top+\'px\', left: position.left+\'px\'}" style="display: block;" role="listbox" aria-hidden="{{!isOpen()}}">\n    <li ng-repeat="match in matches track by $index" ng-class="{active: isActive($index) }" ng-mouseenter="selectActive($index)" ng-click="selectMatch($index)" role="option" id="{{match.id}}">\n        <div typeahead-match index="$index" match="match" query="query" template-url="templateUrl"></div>\n    </li>\n</ul>\n')}]),function(){"use strict";angular.module("ui.grid.i18n",[]),angular.module("ui.grid",["ui.grid.i18n"])}(),function(){"use strict";angular.module("ui.grid").constant("uiGridConstants",{LOG_DEBUG_MESSAGES:!0,LOG_WARN_MESSAGES:!0,LOG_ERROR_MESSAGES:!0,CUSTOM_FILTERS:/CUSTOM_FILTERS/g,COL_FIELD:/COL_FIELD/g,MODEL_COL_FIELD:/MODEL_COL_FIELD/g,TOOLTIP:/title=\"TOOLTIP\"/g,DISPLAY_CELL_TEMPLATE:/DISPLAY_CELL_TEMPLATE/g,TEMPLATE_REGEXP:/<.+>/,FUNC_REGEXP:/(\([^)]*\))?$/,DOT_REGEXP:/\./g,APOS_REGEXP:/'/g,BRACKET_REGEXP:/^(.*)((?:\s*\[\s*\d+\s*\]\s*)|(?:\s*\[\s*"(?:[^"\\]|\\.)*"\s*\]\s*)|(?:\s*\[\s*'(?:[^'\\]|\\.)*'\s*\]\s*))(.*)$/,COL_CLASS_PREFIX:"ui-grid-col",events:{GRID_SCROLL:"uiGridScroll",COLUMN_MENU_SHOWN:"uiGridColMenuShown",ITEM_DRAGGING:"uiGridItemDragStart",COLUMN_HEADER_CLICK:"uiGridColumnHeaderClick"},keymap:{TAB:9,STRG:17,CTRL:17,CTRLRIGHT:18,CTRLR:18,SHIFT:16,RETURN:13,ENTER:13,BACKSPACE:8,BCKSP:8,ALT:18,ALTR:17,ALTRIGHT:17,SPACE:32,WIN:91,MAC:91,FN:null,PG_UP:33,PG_DOWN:34,UP:38,DOWN:40,LEFT:37,RIGHT:39,ESC:27,DEL:46,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123},ASC:"asc",DESC:"desc",filter:{STARTS_WITH:2,ENDS_WITH:4,EXACT:8,CONTAINS:16,GREATER_THAN:32,GREATER_THAN_OR_EQUAL:64,LESS_THAN:128,LESS_THAN_OR_EQUAL:256,NOT_EQUAL:512,SELECT:"select",INPUT:"input"},aggregationTypes:{sum:2,count:4,avg:8,min:16,max:32},CURRENCY_SYMBOLS:["ƒ","$","£","$","¤","¥","៛","₩","₱","฿","₫"],scrollDirection:{UP:"up",DOWN:"down",LEFT:"left",RIGHT:"right",NONE:"none"},dataChange:{ALL:"all",EDIT:"edit",ROW:"row",COLUMN:"column",OPTIONS:"options"},scrollbars:{NEVER:0,ALWAYS:1}})}(),angular.module("ui.grid").directive("uiGridCell",["$compile","$parse","gridUtil","uiGridConstants",function(a,b,c,d){var e={priority:0,scope:!1,require:"?^uiGrid",compile:function(){return{pre:function(b,e,f,g){function h(){var a=b.col.compiledElementFn;a(b,function(a,b){e.append(a)})}if(g&&b.col.compiledElementFn)h();else if(g&&!b.col.compiledElementFn)b.col.getCompiledElementFn().then(function(a){a(b,function(a,b){e.append(a)})});else{var i=b.col.cellTemplate.replace(d.MODEL_COL_FIELD,"row.entity."+c.preEval(b.col.field)).replace(d.COL_FIELD,"grid.getCellValue(row, col)"),j=a(i)(b);e.append(j)}},post:function(a,b,c,e){var f=a.col.getColClass(!1);b.addClass(f);var g,h=function(c){var d=b;g&&(d.removeClass(g),g=null),g=angular.isFunction(a.col.cellClass)?a.col.cellClass(a.grid,a.row,a.col,a.rowRenderIndex,a.colRenderIndex):a.col.cellClass,d.addClass(g)};a.col.cellClass&&h();var i=a.grid.registerDataChangeCallback(h,[d.dataChange.COLUMN,d.dataChange.EDIT]),j=function(c,d){if(c!==d){(g||a.col.cellClass)&&h();var e=a.col.getColClass(!1);e!==f&&(b.removeClass(f),b.addClass(e),f=e)}},k=a.$watch("row",j),l=function(){i(),k()};a.$on("$destroy",l),b.on("$destroy",l)}}}};return e}]),function(){angular.module("ui.grid").service("uiGridColumnMenuService",["i18nService","uiGridConstants","gridUtil",function(a,b,c){var d={initialize:function(a,b){a.grid=b.grid,b.columnMenuScope=a,a.menuShown=!1},setColMenuItemWatch:function(a){var b=a.$watch("col.menuItems",function(b,c){"undefined"!=typeof b&&b&&angular.isArray(b)?(b.forEach(function(b){"undefined"!=typeof b.context&&b.context||(b.context={}),b.context.col=a.col}),a.menuItems=a.defaultMenuItems.concat(b)):a.menuItems=a.defaultMenuItems});a.$on("$destroy",b)},sortable:function(a){return a.grid.options.enableSorting&&"undefined"!=typeof a.col&&a.col&&a.col.enableSorting?!0:!1},isActiveSort:function(a,b){return"undefined"!=typeof a.col&&"undefined"!=typeof a.col.sort&&"undefined"!=typeof a.col.sort.direction&&a.col.sort.direction===b},suppressRemoveSort:function(a){return a.col&&a.col.suppressRemoveSort?!0:!1},hideable:function(a){return"undefined"!=typeof a.col&&a.col&&a.col.colDef&&a.col.colDef.enableHiding===!1?!1:!0},getDefaultMenuItems:function(c){return[{title:a.getSafeText("sort.ascending"),icon:"ui-grid-icon-sort-alt-up",action:function(a){a.stopPropagation(),c.sortColumn(a,b.ASC)},shown:function(){return d.sortable(c)},active:function(){return d.isActiveSort(c,b.ASC)}},{title:a.getSafeText("sort.descending"),icon:"ui-grid-icon-sort-alt-down",action:function(a){a.stopPropagation(),c.sortColumn(a,b.DESC)},shown:function(){return d.sortable(c)},active:function(){return d.isActiveSort(c,b.DESC)}},{title:a.getSafeText("sort.remove"),icon:"ui-grid-icon-cancel",action:function(a){a.stopPropagation(),c.unsortColumn()},shown:function(){return d.sortable(c)&&"undefined"!=typeof c.col&&"undefined"!=typeof c.col.sort&&"undefined"!=typeof c.col.sort.direction&&null!==c.col.sort.direction&&!d.suppressRemoveSort(c)}},{title:a.getSafeText("column.hide"),icon:"ui-grid-icon-cancel",shown:function(){return d.hideable(c)},action:function(a){a.stopPropagation(),c.hideColumn()}}]},getColumnElementPosition:function(a,b,d){var e={};return e.left=d[0].offsetLeft,e.top=d[0].offsetTop,e.parentLeft=d[0].offsetParent.offsetLeft,e.offset=0,b.grid.options.offsetLeft&&(e.offset=b.grid.options.offsetLeft),e.height=c.elementHeight(d,!0),e.width=c.elementWidth(d,!0),e},repositionMenu:function(a,b,d,e,f){var g=e[0].querySelectorAll(".ui-grid-menu"),h=b.renderContainer?b.renderContainer:"body",i=(b.grid.renderContainers[h],c.closestElm(f,".ui-grid-render-container")),j=i.getBoundingClientRect().left-a.grid.element[0].getBoundingClientRect().left,k=i.querySelectorAll(".ui-grid-viewport")[0].scrollLeft,l=b.lastMenuWidth?b.lastMenuWidth:a.lastMenuWidth?a.lastMenuWidth:170,m=b.lastMenuPaddingRight?b.lastMenuPaddingRight:a.lastMenuPaddingRight?a.lastMenuPaddingRight:10;if(0!==g.length){var n=g[0].querySelectorAll(".ui-grid-menu-mid");0===n.length||angular.element(n).hasClass("ng-hide")||(l=c.elementWidth(g,!0),a.lastMenuWidth=l,b.lastMenuWidth=l,m=parseInt(c.getStyles(angular.element(g)[0]).paddingRight,10),a.lastMenuPaddingRight=m,b.lastMenuPaddingRight=m)}var o=d.left+j-k+d.parentLeft+d.width-l+m;o<d.offset&&(o=d.offset),e.css("left",o+"px"),e.css("top",d.top+d.height+"px")}};return d}]).directive("uiGridColumnMenu",["$timeout","gridUtil","uiGridConstants","uiGridColumnMenuService",function(a,b,c,d){var e={priority:0,scope:!0,require:"?^uiGrid",templateUrl:"ui-grid/uiGridColumnMenu",replace:!0,link:function(b,e,f,g){var h=this;d.initialize(b,g),b.defaultMenuItems=d.getDefaultMenuItems(b),b.menuItems=b.defaultMenuItems,d.setColMenuItemWatch(b),b.showMenu=function(a,c,f){b.col=a;var g=d.getColumnElementPosition(b,a,c);b.menuShown?(b.colElement=c,b.colElementPosition=g,b.hideThenShow=!0,b.$broadcast("hide-menu",{originalEvent:f})):(h.shown=b.menuShown=!0,d.repositionMenu(b,a,g,e,c),b.colElement=c,b.colElementPosition=g,b.$broadcast("show-menu",{originalEvent:f}))},b.hideMenu=function(a){b.menuShown=!1,a||b.$broadcast("hide-menu")},b.$on("menu-hidden",function(){b.hideThenShow?(delete b.hideThenShow,d.repositionMenu(b,b.col,b.colElementPosition,e,b.colElement),b.$broadcast("show-menu"),b.menuShown=!0):b.hideMenu(!0)}),b.$on("menu-shown",function(){a(function(){d.repositionMenu(b,b.col,b.colElementPosition,e,b.colElement),delete b.colElementPosition,delete b.columnElement},200)}),b.sortColumn=function(a,c){a.stopPropagation(),b.grid.sortColumn(b.col,c,!0).then(function(){b.grid.refresh(),b.hideMenu()})},b.unsortColumn=function(){b.col.unsort(),b.grid.refresh(),b.hideMenu()},b.hideColumn=function(){b.col.colDef.visible=!1,b.col.visible=!1,b.grid.queueGridRefresh(),b.hideMenu(),b.grid.api.core.notifyDataChange(c.dataChange.COLUMN),b.grid.api.core.raise.columnVisibilityChanged(b.col)}},controller:["$scope",function(a){var b=this;a.$watch("menuItems",function(a,c){b.menuItems=a})}]};return e}])}(),function(){"use strict";angular.module("ui.grid").directive("uiGridFilter",["$compile","$templateCache",function(a,b){return{compile:function(){return{pre:function(b,c,d,e){b.col.updateFilters=function(d){if(c.children().remove(),d){var e=b.col.filterHeaderTemplate;c.append(a(e)(b))}},b.$on("$destroy",function(){delete b.col.updateFilters})}}}}}])}(),function(){"use strict";angular.module("ui.grid").directive("uiGridFooterCell",["$timeout","gridUtil","uiGridConstants","$compile",function(a,b,c,d){var e={priority:0,scope:{col:"=",row:"=",renderIndex:"="},replace:!0,require:"^uiGrid",compile:function(a,b,e){return{pre:function(a,b,c,e){var f=d(a.col.footerCellTemplate)(a);b.append(f)},post:function(a,b,d,e){a.grid=e.grid;var f=a.col.getColClass(!1);b.addClass(f);var g,h=function(c){var d=b;g&&(d.removeClass(g),g=null),g=angular.isFunction(a.col.footerCellClass)?a.col.footerCellClass(a.grid,a.row,a.col,a.rowRenderIndex,a.colRenderIndex):a.col.footerCellClass,d.addClass(g)};a.col.footerCellClass&&h();var i=a.grid.registerDataChangeCallback(h,[c.dataChange.COLUMN]);a.grid.api.core.on.rowsRendered(a,a.col.updateAggregationValue),a.$on("$destroy",i)}}}};return e}])}(),function(){"use strict";angular.module("ui.grid").directive("uiGridFooter",["$templateCache","$compile","uiGridConstants","gridUtil","$timeout",function(a,b,c,d,e){return{restrict:"EA",replace:!0,require:["^uiGrid","^uiGridRenderContainer"],scope:!0,compile:function(a,c){return{pre:function(a,c,e,f){var g=f[0],h=f[1];a.grid=g.grid,a.colContainer=h.colContainer,h.footer=c;var i=a.grid.options.footerTemplate;d.getTemplate(i).then(function(d){var e=angular.element(d),f=b(e)(a);if(c.append(f),h){var g=c[0].getElementsByClassName("ui-grid-footer-viewport")[0];g&&(h.footerViewport=g)}})},post:function(a,b,c,e){var f=e[0],g=e[1];f.grid;d.disableAnimations(b),g.footer=b;var h=b[0].getElementsByClassName("ui-grid-footer-viewport")[0];h&&(g.footerViewport=h)}}}}}])}(),function(){"use strict";angular.module("ui.grid").directive("uiGridGridFooter",["$templateCache","$compile","uiGridConstants","gridUtil","$timeout",function(a,b,c,d,e){return{restrict:"EA",replace:!0,require:"^uiGrid",scope:!0,compile:function(a,c){return{pre:function(a,c,e,f){a.grid=f.grid;var g=a.grid.options.gridFooterTemplate;d.getTemplate(g).then(function(d){var e=angular.element(d),f=b(e)(a);c.append(f)})},post:function(a,b,c,d){}}}}}])}(),function(){"use strict";angular.module("ui.grid").directive("uiGridGroupPanel",["$compile","uiGridConstants","gridUtil",function(a,b,c){var d="ui-grid/ui-grid-group-panel";return{restrict:"EA",replace:!0,require:"?^uiGrid",scope:!1,compile:function(b,e){return{pre:function(b,e,f,g){var h=b.grid.options.groupPanelTemplate||d;c.getTemplate(h).then(function(c){var d=angular.element(c),f=a(d)(b);e.append(f)})},post:function(a,b,c,d){b.bind("$destroy",function(){})}}}}}])}(),function(){"use strict";angular.module("ui.grid").directive("uiGridHeaderCell",["$compile","$timeout","$window","$document","gridUtil","uiGridConstants","ScrollEvent",function(a,b,c,d,e,f,g){var h=500,i=500,j={priority:0,scope:{col:"=",row:"=",renderIndex:"="},require:["?^uiGrid","^uiGridRenderContainer"],replace:!0,compile:function(){return{pre:function(b,c,d){var e=a(b.col.headerCellTemplate)(b);c.append(e)},post:function(a,c,e,g){var j=g[0],k=g[1];a.grid=j.grid,a.renderContainer=j.grid.renderContainers[k.containerId];var l=a.col.getColClass(!1);c.addClass(l),a.menuShown=!1,a.asc=f.ASC,a.desc=f.DESC;var m,n=(angular.element(c[0].querySelectorAll(".ui-grid-header-cell-menu")),angular.element(c[0].querySelectorAll(".ui-grid-cell-contents"))),o=[];a.downFn=function(e){e.stopPropagation(),"undefined"!=typeof e.originalEvent&&void 0!==e.originalEvent&&(e=e.originalEvent),e.button&&0!==e.button||(a.mousedownStartTime=(new Date).getTime(),a.mousedownTimeout=b(function(){},h),a.mousedownTimeout.then(function(){a.colMenu&&j.columnMenuScope.showMenu(a.col,c,e)}),j.fireEvent(f.events.COLUMN_HEADER_CLICK,{event:e,columnName:a.col.colDef.name}),a.offAllEvents(),"touchstart"===e.type?(d.on("touchend",a.upFn),d.on("touchmove",a.moveFn)):"mousedown"===e.type&&(d.on("mouseup",a.upFn),d.on("mousemove",a.moveFn)))},a.upFn=function(c){c.stopPropagation(),b.cancel(a.mousedownTimeout),a.offAllEvents(),a.onDownEvents(c.type);var d=(new Date).getTime(),e=d-a.mousedownStartTime;e>h||a.sortable&&a.handleClick(c)},a.moveFn=function(c){b.cancel(a.mousedownTimeout),a.offAllEvents(),a.onDownEvents(c.type)},a.clickFn=function(b){b.stopPropagation(),n.off("click",a.clickFn)},a.offAllEvents=function(){n.off("touchstart",a.downFn),n.off("mousedown",a.downFn),d.off("touchend",a.upFn),d.off("mouseup",a.upFn),d.off("touchmove",a.moveFn),d.off("mousemove",a.moveFn),n.off("click",a.clickFn)},a.onDownEvents=function(c){switch(c){case"touchmove":case"touchend":n.on("click",a.clickFn),n.on("touchstart",a.downFn),b(function(){n.on("mousedown",a.downFn)},i);break;case"mousemove":case"mouseup":n.on("click",a.clickFn),n.on("mousedown",a.downFn),b(function(){n.on("touchstart",a.downFn)},i);break;default:n.on("click",a.clickFn),n.on("touchstart",a.downFn),n.on("mousedown",a.downFn)}};var p=function(b){var d=c;m&&(d.removeClass(m),m=null),m=angular.isFunction(a.col.headerCellClass)?a.col.headerCellClass(a.grid,a.row,a.col,a.rowRenderIndex,a.colRenderIndex):a.col.headerCellClass,d.addClass(m);var e=a.grid.renderContainers.right?a.grid.renderContainers.right:a.grid.renderContainers.body;a.isLastCol=a.col===e.visibleColumnCache[e.visibleColumnCache.length-1],j.grid.options.enableSorting&&a.col.enableSorting?a.sortable=!0:a.sortable=!1;var g=a.filterable;j.grid.options.enableFiltering&&a.col.enableFiltering?a.filterable=!0:a.filterable=!1,g!==a.filterable&&("undefined"!=typeof a.col.updateFilters&&a.col.updateFilters(a.filterable),a.filterable?(a.col.filters.forEach(function(b,c){o.push(a.$watch("col.filters["+c+"].term",function(a,b){a!==b&&(j.grid.api.core.raise.filterChanged(),j.grid.api.core.notifyDataChange(f.dataChange.COLUMN),j.grid.queueGridRefresh())}))}),a.$on("$destroy",function(){o.forEach(function(a){a()})})):o.forEach(function(a){a()})),a.col.grid.options&&a.col.grid.options.enableColumnMenus!==!1&&a.col.colDef&&a.col.colDef.enableColumnMenu!==!1?a.colMenu=!0:a.colMenu=!1,a.offAllEvents(),(a.sortable||a.colMenu)&&(a.onDownEvents(),a.$on("$destroy",function(){a.offAllEvents()}))};p();var q=a.grid.registerDataChangeCallback(p,[f.dataChange.COLUMN]);a.$on("$destroy",q),a.handleClick=function(b){var c=!1;b.shiftKey&&(c=!0),j.grid.sortColumn(a.col,c).then(function(){j.columnMenuScope&&j.columnMenuScope.hideMenu(),j.grid.refresh()})},a.toggleMenu=function(b){b.stopPropagation(),j.columnMenuScope.menuShown&&j.columnMenuScope.col===a.col?j.columnMenuScope.hideMenu():j.columnMenuScope.showMenu(a.col,c)}}}}};return j}])}(),function(){"use strict";angular.module("ui.grid").directive("uiGridHeader",["$templateCache","$compile","uiGridConstants","gridUtil","$timeout","ScrollEvent",function(a,b,c,d,e,f){var g="ui-grid/ui-grid-header",h="ui-grid/ui-grid-no-header";return{restrict:"EA",replace:!0,require:["^uiGrid","^uiGridRenderContainer"],scope:!0,compile:function(a,c){return{pre:function(a,c,e,i){function j(){m.header=m.colContainer.header=c;var a=c[0].getElementsByClassName("ui-grid-header-canvas");a.length>0?m.headerCanvas=m.colContainer.headerCanvas=a[0]:m.headerCanvas=null}function k(a){if(!l.grid.isScrollingHorizontally){var b=d.normalizeScrollLeft(m.headerViewport,l.grid),c=m.colContainer.scrollHorizontal(b),e=new f(l.grid,null,m.colContainer,f.Sources.ViewPortScroll);e.newScrollLeft=b,c>-1&&(e.x={percentage:c}),l.grid.scrollContainers(null,e)}}var l=i[0],m=i[1];a.grid=l.grid,a.colContainer=m.colContainer,j();var n;n=a.grid.options.showHeader?a.grid.options.headerTemplate?a.grid.options.headerTemplate:g:h,d.getTemplate(n).then(function(d){var e=angular.element(d),f=b(e)(a);if(c.replaceWith(f),c=f,j(),m){var g=c[0].getElementsByClassName("ui-grid-header-viewport")[0];g&&(m.headerViewport=g,angular.element(g).on("scroll",k),a.$on("$destroy",function(){angular.element(g).off("scroll",k)}))}a.grid.queueRefresh()})},post:function(a,b,c,e){function f(){var a=h.colContainer.visibleColumnCache,b="",c=0;return a.forEach(function(a){b+=a.getColClassDefinition(),c+=a.drawnWidth}),h.colContainer.canvasWidth=c,b}var g=e[0],h=e[1];g.grid;d.disableAnimations(b),h.header=b;var i=b[0].getElementsByClassName("ui-grid-header-viewport")[0];i&&(h.headerViewport=i),g&&g.grid.registerStyleComputation({priority:15,func:f})}}}}}])}(),function(){angular.module("ui.grid").service("uiGridGridMenuService",["gridUtil","i18nService","uiGridConstants",function(a,b,c){var d={initialize:function(a,b){b.gridMenuScope=a,a.grid=b,a.registeredMenuItems=[],a.$on("$destroy",function(){a.grid&&a.grid.gridMenuScope&&(a.grid.gridMenuScope=null),a.grid&&(a.grid=null),a.registeredMenuItems&&(a.registeredMenuItems=null)}),a.registeredMenuItems=[],b.api.registerMethod("core","addToGridMenu",d.addToGridMenu),b.api.registerMethod("core","removeFromGridMenu",d.removeFromGridMenu)},addToGridMenu:function(b,c){angular.isArray(c)?b.gridMenuScope?(b.gridMenuScope.registeredMenuItems=b.gridMenuScope.registeredMenuItems?b.gridMenuScope.registeredMenuItems:[],b.gridMenuScope.registeredMenuItems=b.gridMenuScope.registeredMenuItems.concat(c)):a.logError("Asked to addToGridMenu, but gridMenuScope not present.  Timing issue?  Please log issue with ui-grid"):a.logError("addToGridMenu: menuItems must be an array, and is not, not adding any items")},removeFromGridMenu:function(b,c){var d=-1;b&&b.gridMenuScope&&b.gridMenuScope.registeredMenuItems.forEach(function(b,e){b.id===c&&(d>-1?a.logError("removeFromGridMenu: found multiple items with the same id, removing only the last"):d=e)}),d>-1&&b.gridMenuScope.registeredMenuItems.splice(d,1)},getMenuItems:function(b){var c=[];return b.grid.options.gridMenuCustomItems&&(angular.isArray(b.grid.options.gridMenuCustomItems)?c=c.concat(b.grid.options.gridMenuCustomItems):a.logError("gridOptions.gridMenuCustomItems must be an array, and is not")),c=c.concat(b.registeredMenuItems),b.grid.options.gridMenuShowHideColumns!==!1&&(c=c.concat(d.showHideColumns(b))),c.sort(function(a,b){return a.order-b.order}),c},showHideColumns:function(a){var c=[];return a.grid.options.columnDefs&&0!==a.grid.options.columnDefs.length&&0!==a.grid.columns.length?(c.push({title:b.getSafeText("gridMenu.columns"),order:300}),a.grid.options.gridMenuTitleFilter=a.grid.options.gridMenuTitleFilter?a.grid.options.gridMenuTitleFilter:function(a){return a},a.grid.options.columnDefs.forEach(function(b,e){if(b.enableHiding!==!1){var f={icon:"ui-grid-icon-ok",action:function(a){a.stopPropagation(),d.toggleColumnVisibility(this.context.gridCol)},shown:function(){return this.context.gridCol.colDef.visible===!0||void 0===this.context.gridCol.colDef.visible},context:{gridCol:a.grid.getColumn(b.name||b.field)},leaveOpen:!0,order:301+2*e};d.setMenuItemTitle(f,b,a.grid),c.push(f),f={icon:"ui-grid-icon-cancel",action:function(a){a.stopPropagation(),d.toggleColumnVisibility(this.context.gridCol)},shown:function(){return!(this.context.gridCol.colDef.visible===!0||void 0===this.context.gridCol.colDef.visible)},context:{gridCol:a.grid.getColumn(b.name||b.field)},leaveOpen:!0,order:301+2*e+1},d.setMenuItemTitle(f,b,a.grid),c.push(f)}}),c):c},setMenuItemTitle:function(b,c,d){var e=d.options.gridMenuTitleFilter(c.displayName||c.name||c.field);"string"==typeof e?b.title=e:e.then?(b.title="",e.then(function(a){b.title=a},function(a){b.title=a})):(a.logError("Expected gridMenuTitleFilter to return a string or a promise, it has returned neither, bad config"),b.title="badconfig")},toggleColumnVisibility:function(a){a.colDef.visible=!(a.colDef.visible===!0||void 0===a.colDef.visible),a.grid.refresh(),a.grid.api.core.notifyDataChange(c.dataChange.COLUMN),a.grid.api.core.raise.columnVisibilityChanged(a)}};return d}]).directive("uiGridMenuButton",["gridUtil","uiGridConstants","uiGridGridMenuService",function(a,b,c){return{priority:0,scope:!0,require:["?^uiGrid"],templateUrl:"ui-grid/ui-grid-menu-button",replace:!0,link:function(a,b,d,e){var f=e[0];c.initialize(a,f.grid),a.shown=!1,a.toggleMenu=function(){a.shown?(a.$broadcast("hide-menu"),a.shown=!1):(a.menuItems=c.getMenuItems(a),a.$broadcast("show-menu"),a.shown=!0)},a.$on("menu-hidden",function(){a.shown=!1})}}}])}(),function(){angular.module("ui.grid").directive("uiGridMenu",["$compile","$timeout","$window","$document","gridUtil","uiGridConstants",function(a,b,c,d,e,f){var g={priority:0,scope:{menuItems:"=",autoHide:"=?"},require:"?^uiGrid",templateUrl:"ui-grid/uiGridMenu",replace:!1,link:function(a,d,e,g){var h=this;h.showMenu=a.showMenu=function(c,d){a.shown?a.shownMid||(a.shownMid=!0,a.$emit("menu-shown")):(a.shown=!0,b(function(){a.shownMid=!0,a.$emit("menu-shown")}));var e="click";d&&d.originalEvent&&d.originalEvent.type&&"touchstart"===d.originalEvent.type&&(e=d.originalEvent.type),angular.element(document).off("click touchstart",i),b(function(){angular.element(document).on(e,i)})},h.hideMenu=a.hideMenu=function(c,d){a.shown&&(a.shownMid=!1,b(function(){a.shownMid||(a.shown=!1,a.$emit("menu-hidden"))},200)),angular.element(document).off("click touchstart",i)},a.$on("hide-menu",function(b,c){a.hideMenu(b,c)}),a.$on("show-menu",function(b,c){a.showMenu(b,c)});var i=function(){a.shown&&a.$apply(function(){a.hideMenu()})};("undefined"==typeof a.autoHide||void 0===a.autoHide)&&(a.autoHide=!0),a.autoHide&&angular.element(c).on("resize",i),a.$on("$destroy",function(){angular.element(document).off("click touchstart",i)}),a.$on("$destroy",function(){angular.element(c).off("resize",i)}),g&&a.$on("$destroy",g.grid.api.core.on.scrollBegin(a,i)),a.$on("$destroy",a.$on(f.events.ITEM_DRAGGING,i))},controller:["$scope","$element","$attrs",function(a,b,c){}]};return g}]).directive("uiGridMenuItem",["gridUtil","$compile","i18nService",function(a,b,c){var d={priority:0,scope:{name:"=",active:"=",action:"=",icon:"=",shown:"=",context:"=",templateUrl:"=",leaveOpen:"="},require:["?^uiGrid","^uiGridMenu"],templateUrl:"ui-grid/uiGridMenuItem",replace:!0,compile:function(d,e){return{pre:function(c,d,e,f){f[0],f[1];c.templateUrl&&a.getTemplate(c.templateUrl).then(function(a){var e=angular.element(a),f=b(e)(c);d.replaceWith(f)})},post:function(a,b,d,e){var f=e[0];e[1];("undefined"==typeof a.shown||null===a.shown)&&(a.shown=function(){return!0}),a.itemShown=function(){var b={};return a.context&&(b.context=a.context),"undefined"!=typeof f&&f&&(b.grid=f.grid),a.shown.call(b)},a.itemAction=function(b,c){if(b.stopPropagation(),"function"==typeof a.action){var d={};a.context&&(d.context=a.context),"undefined"!=typeof f&&f&&(d.grid=f.grid),a.action.call(d,b,c),a.leaveOpen||a.$emit("hide-menu")}},a.i18n=c.get()}}}};return d}])}(),function(){"use strict";var a=angular.module("ui.grid");a.directive("uiGridRenderContainer",["$timeout","$document","uiGridConstants","gridUtil","ScrollEvent",function(a,b,c,d,e){return{replace:!0,transclude:!0,templateUrl:"ui-grid/uiGridRenderContainer",require:["^uiGrid","uiGridRenderContainer"],scope:{containerId:"=",rowContainerName:"=",colContainerName:"=",bindScrollHorizontal:"=",bindScrollVertical:"=",enableVerticalScrollbar:"=",enableHorizontalScrollbar:"="},controller:"uiGridRenderContainer as RenderContainer",compile:function(){return{pre:function(a,b,c,d){var e=d[0],f=d[1],g=a.grid=e.grid;if(!a.rowContainerName)throw"No row render container name specified";if(!a.colContainerName)throw"No column render container name specified";if(!g.renderContainers[a.rowContainerName])throw"Row render container '"+a.rowContainerName+"' is not registered.";if(!g.renderContainers[a.colContainerName])throw"Column render container '"+a.colContainerName+"' is not registered.";var h=a.rowContainer=g.renderContainers[a.rowContainerName],i=a.colContainer=g.renderContainers[a.colContainerName];f.containerId=a.containerId,f.rowContainer=h,f.colContainer=i},post:function(a,b,c,f){function g(){var b="",c=l.canvasWidth,d=l.getViewportWidth(),e=k.getCanvasHeight();"body"!==a.containerId&&(e+=j.scrollbarHeight);var f,g,i=k.getViewportHeight();return f=g=l.getHeaderViewportWidth(),b+="\n .grid"+h.grid.id+" .ui-grid-render-container-"+a.containerId+" .ui-grid-canvas { width: "+c+"px; height: "+e+"px; }",b+="\n .grid"+h.grid.id+" .ui-grid-render-container-"+a.containerId+" .ui-grid-header-canvas { width: "+(c+j.scrollbarWidth)+"px; }",b+=o.explicitHeaderCanvasHeight?"\n .grid"+h.grid.id+" .ui-grid-render-container-"+a.containerId+" .ui-grid-header-canvas { height: "+o.explicitHeaderCanvasHeight+"px; }":"\n .grid"+h.grid.id+" .ui-grid-render-container-"+a.containerId+" .ui-grid-header-canvas { height: inherit; }",b+="\n .grid"+h.grid.id+" .ui-grid-render-container-"+a.containerId+" .ui-grid-viewport { width: "+d+"px; height: "+i+"px; }",b+="\n .grid"+h.grid.id+" .ui-grid-render-container-"+a.containerId+" .ui-grid-header-viewport { width: "+f+"px; }",b+="\n .grid"+h.grid.id+" .ui-grid-render-container-"+a.containerId+" .ui-grid-footer-canvas { width: "+(c+j.scrollbarWidth)+"px; }",b+="\n .grid"+h.grid.id+" .ui-grid-render-container-"+a.containerId+" .ui-grid-footer-viewport { width: "+g+"px; }"}var h=f[0],i=f[1],j=h.grid,k=i.rowContainer,l=i.colContainer,m=null,n=null,o=j.renderContainers[a.containerId];b.addClass("ui-grid-render-container-"+a.containerId),d.on.mousewheel(b,function(a){var b=new e(j,k,l,e.Sources.RenderContainerMouseWheel);if(0!==a.deltaY){var c=-1*a.deltaY*a.deltaFactor;m=i.viewport[0].scrollTop;var f=(m+c)/k.getVerticalScrollLength();0>f?f=0:f>1&&(f=1),b.y={percentage:f,pixels:c}}if(0!==a.deltaX){var g=a.deltaX*a.deltaFactor;n=d.normalizeScrollLeft(i.viewport,j);var h=(n+g)/(l.getCanvasWidth()-l.getViewportWidth());0>h?h=0:h>1&&(h=1),b.x={percentage:h,pixels:g}}0!==a.deltaY&&(b.atTop(m)||b.atBottom(m))||0!==a.deltaX&&(b.atLeft(n)||b.atRight(n))||(a.preventDefault(),b.fireThrottledScrollingEvent("",b))}),b.bind("$destroy",function(){b.unbind("keydown"),["touchstart","touchmove","touchend","keydown","wheel","mousewheel","DomMouseScroll","MozMousePixelScroll"].forEach(function(a){b.unbind(a)})}),h.grid.registerStyleComputation({priority:6,func:g})}}}}}]),a.controller("uiGridRenderContainer",["$scope","gridUtil",function(a,b){}])}(),function(){"use strict";angular.module("ui.grid").directive("uiGridRow",["gridUtil",function(a){return{replace:!0,require:["^uiGrid","^uiGridRenderContainer"],scope:{row:"=uiGridRow",rowRenderIndex:"="},compile:function(){return{pre:function(a,b,c,d){function e(){a.row.getRowTemplateFn.then(function(c){var d=a.$new();c(d,function(a,c){h&&(h.remove(),i.$destroy()),b.empty().append(a),h=a,i=d})})}var f=d[0],g=d[1];f.grid;a.grid=f.grid,a.colContainer=g.colContainer;var h,i;e(),a.$watch("row.getRowTemplateFn",function(a,b){a!==b&&e()})},post:function(a,b,c,d){}}}}}])}(),function(){angular.module("ui.grid").directive("uiGridStyle",["gridUtil","$interpolate",function(a,b){return{link:function(a,c,d,e){var f=b(c.text(),!0);f&&a.$watch(f,function(a){c.text(a)})}}}])}(),function(){"use strict";angular.module("ui.grid").directive("uiGridViewport",["gridUtil","ScrollEvent","uiGridConstants","$log",function(a,b,c,d){return{replace:!0,scope:{},controllerAs:"Viewport",templateUrl:"ui-grid/uiGridViewport",require:["^uiGrid","^uiGridRenderContainer"],link:function(c,d,e,f){function g(e){var f=d[0].scrollTop,g=a.normalizeScrollLeft(d,p),h=n.scrollVertical(f),i=o.scrollHorizontal(g),j=new b(p,n,o,b.Sources.ViewPortScroll);j.newScrollLeft=g,j.newScrollTop=f,i>-1&&(j.x={percentage:i}),h>-1&&(j.y={percentage:h}),p.scrollContainers(c.$parent.containerId,j)}function h(a){m.prevScrollArgs=a;var b=a.getNewScrollTop(n,m.viewport);d[0].scrollTop=b}function i(b){m.prevScrollArgs=b;var c=b.getNewScrollLeft(o,m.viewport);d[0].scrollLeft=a.denormalizeScrollLeft(m.viewport,c,p)}function j(b){var c=b.getNewScrollLeft(o,m.viewport);m.headerViewport&&(m.headerViewport.scrollLeft=a.denormalizeScrollLeft(m.viewport,c,p))}function k(b){var c=b.getNewScrollLeft(o,m.viewport);m.footerViewport&&(m.footerViewport.scrollLeft=a.denormalizeScrollLeft(m.viewport,c,p))}var l=f[0],m=f[1];c.containerCtrl=m;var n=m.rowContainer,o=m.colContainer,p=l.grid;c.grid=l.grid,c.rowContainer=m.rowContainer,c.colContainer=m.colContainer,m.viewport=d,d.on("scroll",g);c.$parent.bindScrollVertical&&p.addVerticalScrollSync(c.$parent.containerId,h),c.$parent.bindScrollHorizontal&&(p.addHorizontalScrollSync(c.$parent.containerId,i),p.addHorizontalScrollSync(c.$parent.containerId+"header",j),p.addHorizontalScrollSync(c.$parent.containerId+"footer",k))},controller:["$scope",function(a){this.rowStyle=function(b){var c=a.rowContainer,d=a.colContainer,e={};if(0===b&&0!==c.currentTopRow){var f=c.currentTopRow*c.grid.options.rowHeight;e["margin-top"]=f+"px"}return 0!==d.currentFirstColumn&&(d.grid.isRTL()?e["margin-right"]=d.columnOffset+"px":e["margin-left"]=d.columnOffset+"px"),e}}]}}])}(),function(){angular.module("ui.grid").directive("uiGridVisible",function(){return function(a,b,c){a.$watch(c.uiGridVisible,function(a){b[a?"removeClass":"addClass"]("ui-grid-invisible")})}})}(),function(){"use strict";function a(a,b,c,d,e,f){return{templateUrl:"ui-grid/ui-grid",scope:{uiGrid:"="},replace:!0,transclude:!0,controller:"uiGridController",compile:function(){return{post:function(a,b,g,h){function i(){b[0].offsetWidth<=0&&p>q?(setTimeout(i,o),q++):c(k)}function j(){angular.element(d).on("resize",m),b.on("$destroy",function(){angular.element(d).off("resize",m)}),a.$watch(function(){return n.hasLeftContainer()},function(a,b){a!==b&&n.refreshCanvas(!0)}),a.$watch(function(){return n.hasRightContainer()},function(a,b){a!==b&&n.refreshCanvas(!0)})}function k(){n.gridWidth=a.gridWidth=e.elementWidth(b),n.canvasWidth=h.grid.gridWidth,n.gridHeight=a.gridHeight=e.elementHeight(b),n.gridHeight<n.options.rowHeight&&n.options.enableMinHeightCheck&&l(),n.refreshCanvas(!0)}function l(){var c=n.options.minRowsToShow*n.options.rowHeight,d=n.options.showHeader?n.options.headerRowHeight:0,g=n.calcFooterHeight(),h=0;n.options.enableHorizontalScrollbar===f.scrollbars.ALWAYS&&(h=e.getScrollbarWidth());var i=0;angular.forEach(n.options.columnDefs,function(a){a.hasOwnProperty("filter")?1>i&&(i=1):a.hasOwnProperty("filters")&&i<a.filters.length&&(i=a.filters.length)});var j=i*d,k=d+c+g+h+j;b.css("height",k+"px"),n.gridHeight=a.gridHeight=e.elementHeight(b)}function m(c){n.gridWidth=a.gridWidth=e.elementWidth(b),n.gridHeight=a.gridHeight=e.elementHeight(b),n.refreshCanvas(!0)}var n=h.grid;h.scrollbars=[],n.element=b;var o=100,p=20,q=0;j(),k(),n.renderingComplete(),i()}}}}}angular.module("ui.grid").controller("uiGridController",["$scope","$element","$attrs","gridUtil","$q","uiGridConstants","$templateCache","gridClassFactory","$timeout","$parse","$compile",function(a,b,c,d,e,f,g,h,i,j,k){function l(a,b){a&&a!==b&&(n.grid.options.columnDefs=a,n.grid.buildColumns({orderByColumnDefs:!0}).then(function(){n.grid.preCompileCellTemplates(),n.grid.callDataChangeCallbacks(f.dataChange.COLUMN)}))}function m(b){var d=[];n.grid.options.fastWatch&&(b=angular.isString(a.uiGrid.data)?n.grid.appScope[a.uiGrid.data]:a.uiGrid.data),b&&(n.grid.columns.length===(n.grid.rowHeaderColumns?n.grid.rowHeaderColumns.length:0)&&!c.uiGridColumns&&0===n.grid.options.columnDefs.length&&b.length>0&&n.grid.buildColumnDefsFromData(b),(n.grid.options.columnDefs.length>0||b.length>0)&&d.push(n.grid.buildColumns().then(function(){
n.grid.preCompileCellTemplates()})),e.all(d).then(function(){n.grid.modifyRows(b).then(function(){n.grid.redrawInPlace(!0),a.$evalAsync(function(){n.grid.refreshCanvas(!0),n.grid.callDataChangeCallbacks(f.dataChange.ROW)})})}))}var n=this;n.grid=h.createGrid(a.uiGrid),n.grid.appScope=n.grid.appScope||a.$parent,b.addClass("grid"+n.grid.id),n.grid.rtl="rtl"===d.getStyles(b[0]).direction,a.grid=n.grid,c.uiGridColumns&&c.$observe("uiGridColumns",function(a){n.grid.options.columnDefs=a,n.grid.buildColumns().then(function(){n.grid.preCompileCellTemplates(),n.grid.refreshCanvas(!0)})});var o=[];n.grid.options.fastWatch?(n.uiGrid=a.uiGrid,angular.isString(a.uiGrid.data)?(o.push(a.$parent.$watch(a.uiGrid.data,m)),o.push(a.$parent.$watch(function(){return n.grid.appScope[a.uiGrid.data]?n.grid.appScope[a.uiGrid.data].length:void 0},m))):(o.push(a.$parent.$watch(function(){return a.uiGrid.data},m)),o.push(a.$parent.$watch(function(){return a.uiGrid.data.length},m))),o.push(a.$parent.$watch(function(){return a.uiGrid.columnDefs},l)),o.push(a.$parent.$watch(function(){return a.uiGrid.columnDefs.length},l))):(angular.isString(a.uiGrid.data)?o.push(a.$parent.$watchCollection(a.uiGrid.data,m)):o.push(a.$parent.$watchCollection(function(){return a.uiGrid.data},m)),o.push(a.$parent.$watchCollection(function(){return a.uiGrid.columnDefs},l)));var p=a.$watch(function(){return n.grid.styleComputations},function(){n.grid.refreshCanvas(!0)});a.$on("$destroy",function(){o.forEach(function(a){a()}),p()}),n.fireEvent=function(b,c){("undefined"==typeof c||void 0===c)&&(c={}),("undefined"==typeof c.grid||void 0===c.grid)&&(c.grid=n.grid),a.$broadcast(b,c)},n.innerCompile=function(b){k(b)(a)}}]),angular.module("ui.grid").directive("uiGrid",a),a.$inject=["$compile","$templateCache","$timeout","$window","gridUtil","uiGridConstants"]}(),function(){"use strict";angular.module("ui.grid").directive("uiGridPinnedContainer",["gridUtil",function(a){return{restrict:"EA",replace:!0,template:'<div class="ui-grid-pinned-container"><div ui-grid-render-container container-id="side" row-container-name="\'body\'" col-container-name="side" bind-scroll-vertical="true" class="{{ side }} ui-grid-render-container-{{ side }}"></div></div>',scope:{side:"=uiGridPinnedContainer"},require:"^uiGrid",compile:function(){return{post:function(a,b,c,d){function e(){var a=this,b=0;a.visibleColumnCache.forEach(function(a){b+=a.drawnWidth});var c=a.getViewportAdjustment();return b+=c.width}function f(){if("left"===a.side||"right"===a.side){for(var b=h.renderContainers[a.side].visibleColumnCache,c=0,d=0;d<b.length;d++){var e=b[d];c+=e.drawnWidth||e.width||0}return c}}function g(){var c="";if("left"===a.side||"right"===a.side){i=f(),b.attr("style",null);var d=h.renderContainers.body.getViewportHeight();c+=".grid"+h.id+" .ui-grid-pinned-container-"+a.side+", .grid"+h.id+" .ui-grid-pinned-container-"+a.side+" .ui-grid-render-container-"+a.side+" .ui-grid-viewport { width: "+i+"px; height: "+d+"px; } "}return c}var h=d.grid,i=0;b.addClass("ui-grid-pinned-container-"+a.side),("left"===a.side||"right"===a.side)&&(h.renderContainers[a.side].getViewportWidth=e),h.renderContainers.body.registerViewportAdjuster(function(b){return i=f(),b.width-=i,b.side=a.side,b}),h.registerStyleComputation({priority:15,func:g})}}}}}])}(),function(){angular.module("ui.grid").factory("Grid",["$q","$compile","$parse","gridUtil","uiGridConstants","GridOptions","GridColumn","GridRow","GridApi","rowSorter","rowSearcher","GridRenderContainer","$timeout","ScrollEvent",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){function o(){}var p=function(a){function b(a){g.isScrollingVertically=!1,g.api.core.raise.scrollEnd(a),g.scrollDirection=e.scrollDirection.NONE}function c(a){g.isScrollingHorizontally=!1,g.api.core.raise.scrollEnd(a),g.scrollDirection=e.scrollDirection.NONE}var g=this;if(void 0===a||"undefined"==typeof a.id||!a.id)throw new Error("No ID provided. An ID must be given when creating a grid.");if(!/^[_a-zA-Z0-9-]+$/.test(a.id))throw new Error("Grid id '"+a.id+'" is invalid. It must follow CSS selector syntax rules.');g.id=a.id,delete a.id,g.options=f.initialize(a),g.appScope=g.options.appScopeProvider,g.headerHeight=g.options.headerRowHeight,g.footerHeight=g.calcFooterHeight(),g.columnFooterHeight=g.calcColumnFooterHeight(),g.rtl=!1,g.gridHeight=0,g.gridWidth=0,g.columnBuilders=[],g.rowBuilders=[],g.rowsProcessors=[],g.columnsProcessors=[],g.styleComputations=[],g.viewportAdjusters=[],g.rowHeaderColumns=[],g.dataChangeCallbacks={},g.verticalScrollSyncCallBackFns={},g.horizontalScrollSyncCallBackFns={},g.renderContainers={},g.renderContainers.body=new l("body",g),g.cellValueGetterCache={},g.getRowTemplateFn=null,g.rows=[],g.columns=[],g.isScrollingVertically=!1,g.isScrollingHorizontally=!1,g.scrollDirection=e.scrollDirection.NONE;var h=d.debounce(b,g.options.scrollDebounce),k=d.debounce(b,0),m=d.debounce(c,g.options.scrollDebounce),n=d.debounce(c,0);g.flagScrollingVertically=function(a){g.isScrollingVertically||g.isScrollingHorizontally||g.api.core.raise.scrollBegin(a),g.isScrollingVertically=!0,0!==g.options.scrollDebounce&&a.withDelay?h(a):k(a)},g.flagScrollingHorizontally=function(a){g.isScrollingVertically||g.isScrollingHorizontally||g.api.core.raise.scrollBegin(a),g.isScrollingHorizontally=!0,0!==g.options.scrollDebounce&&a.withDelay?m(a):n(a)},g.scrollbarHeight=0,g.scrollbarWidth=0,g.options.enableHorizontalScrollbar===e.scrollbars.ALWAYS&&(g.scrollbarHeight=d.getScrollbarWidth()),g.options.enableVerticalScrollbar===e.scrollbars.ALWAYS&&(g.scrollbarWidth=d.getScrollbarWidth()),g.api=new i(g),g.api.registerMethod("core","refresh",this.refresh),g.api.registerMethod("core","queueGridRefresh",this.queueGridRefresh),g.api.registerMethod("core","refreshRows",this.refreshRows),g.api.registerMethod("core","refreshRows",this.queueRefresh),g.api.registerMethod("core","handleWindowResize",this.handleWindowResize),g.api.registerMethod("core","addRowHeaderColumn",this.addRowHeaderColumn),g.api.registerMethod("core","scrollToIfNecessary",function(a,b){return g.scrollToIfNecessary(a,b)}),g.api.registerMethod("core","scrollTo",function(a,b){return g.scrollTo(a,b)}),g.api.registerMethod("core","registerRowsProcessor",this.registerRowsProcessor),g.api.registerMethod("core","registerColumnsProcessor",this.registerColumnsProcessor),g.api.registerMethod("core","sortHandleNulls",j.handleNulls),g.api.registerEvent("core","sortChanged"),g.api.registerEvent("core","columnVisibilityChanged"),g.api.registerMethod("core","notifyDataChange",this.notifyDataChange),g.api.registerMethod("core","clearAllFilters",this.clearAllFilters),g.registerDataChangeCallback(g.columnRefreshCallback,[e.dataChange.COLUMN]),g.registerDataChangeCallback(g.processRowsCallback,[e.dataChange.EDIT]),g.registerStyleComputation({priority:10,func:g.getFooterStyles})};return p.prototype.calcFooterHeight=function(){if(!this.hasFooter())return 0;var a=0;return this.options.showGridFooter&&(a+=this.options.gridFooterHeight),a+=this.calcColumnFooterHeight()},p.prototype.calcColumnFooterHeight=function(){var a=0;return this.options.showColumnFooter&&(a+=this.options.columnFooterHeight),a},p.prototype.getFooterStyles=function(){var a=".grid"+this.id+" .ui-grid-footer-aggregates-row { height: "+this.options.columnFooterHeight+"px; }";return a+=" .grid"+this.id+" .ui-grid-footer-info { height: "+this.options.gridFooterHeight+"px; }"},p.prototype.hasFooter=function(){return this.options.showGridFooter||this.options.showColumnFooter},p.prototype.isRTL=function(){return this.rtl},p.prototype.registerColumnBuilder=function(a){this.columnBuilders.push(a)},p.prototype.buildColumnDefsFromData=function(a){this.options.columnDefs=d.getColumnsFromData(a,this.options.excludeProperties)},p.prototype.registerRowBuilder=function(a){this.rowBuilders.push(a)},p.prototype.registerDataChangeCallback=function(a,b,c){var f=d.nextUid();b||(b=[e.dataChange.ALL]),Array.isArray(b)||d.logError("Expected types to be an array or null in registerDataChangeCallback, value passed was: "+b),this.dataChangeCallbacks[f]={callback:a,types:b,_this:c};var g=this,h=function(){delete g.dataChangeCallbacks[f]};return h},p.prototype.callDataChangeCallbacks=function(a,b){angular.forEach(this.dataChangeCallbacks,function(b,c){(-1!==b.types.indexOf(e.dataChange.ALL)||-1!==b.types.indexOf(a)||a===e.dataChange.ALL)&&(b._this?b.callback.apply(b._this,this):b.callback(this))},this)},p.prototype.notifyDataChange=function(a){var b=e.dataChange;a===b.ALL||a===b.COLUMN||a===b.EDIT||a===b.ROW||a===b.OPTIONS?this.callDataChangeCallbacks(a):d.logError("Notified of a data change, but the type was not recognised, so no action taken, type was: "+a)},p.prototype.columnRefreshCallback=function(a){a.buildColumns(),a.queueGridRefresh()},p.prototype.processRowsCallback=function(a){a.queueGridRefresh()},p.prototype.getColumn=function(a){var b=this.columns.filter(function(b){return b.colDef.name===a});return b.length>0?b[0]:null},p.prototype.getColDef=function(a){var b=this.options.columnDefs.filter(function(b){return b.name===a});return b.length>0?b[0]:null},p.prototype.assignTypes=function(){var a=this;a.options.columnDefs.forEach(function(b,c){if(!b.type){var e=new g(b,c,a),f=a.rows.length>0?a.rows[0]:null;f?b.type=d.guessType(a.getCellValue(f,e)):(d.logWarn("Unable to assign type from data, so defaulting to string"),b.type="string")}})},p.prototype.isRowHeaderColumn=function(a){return-1!==this.rowHeaderColumns.indexOf(a)},p.prototype.addRowHeaderColumn=function(a){var b=this,c=new g(a,d.nextUid(),b);c.isRowHeader=!0,b.isRTL()?(b.createRightContainer(),c.renderContainer="right"):(b.createLeftContainer(),c.renderContainer="left"),b.columnBuilders[0](a,c,b.options).then(function(){c.enableFiltering=!1,c.enableSorting=!1,c.enableHiding=!1,b.rowHeaderColumns.push(c),b.buildColumns().then(function(){b.preCompileCellTemplates(),b.queueGridRefresh()})})},p.prototype.getOnlyDataColumns=function(){var a=this,b=[];return a.columns.forEach(function(c){-1===a.rowHeaderColumns.indexOf(c)&&b.push(c)}),b},p.prototype.buildColumns=function(b){var c={orderByColumnDefs:!1};angular.extend(c,b);var e,f=this,h=[],i=f.rowHeaderColumns.length;for(e=0;e<f.columns.length;e++)f.getColDef(f.columns[e].name)||(f.columns.splice(e,1),e--);if(f.rowHeaderColumns.forEach(function(a){f.columns.unshift(a)}),f.options.columnDefs.forEach(function(a,b){f.preprocessColDef(a);var c=f.getColumn(a.name);c?c.updateColumnDef(a,!1):(c=new g(a,d.nextUid(),f),f.columns.splice(b+i,0,c)),f.columnBuilders.forEach(function(b){h.push(b.call(f,a,c,f.options))})}),c.orderByColumnDefs){var j=f.columns.slice(0),k=Math.min(f.options.columnDefs.length,f.columns.length);for(e=0;k>e;e++)f.columns[e+i].name!==f.options.columnDefs[e].name?j[e+i]=f.getColumn(f.options.columnDefs[e].name):j[e+i]=f.columns[e+i];f.columns.length=0,Array.prototype.splice.apply(f.columns,[0,0].concat(j))}return a.all(h).then(function(){f.rows.length>0&&f.assignTypes()})},p.prototype.preCompileCellTemplates=function(){var a=this;this.columns.forEach(function(c){var d=c.cellTemplate.replace(e.MODEL_COL_FIELD,a.getQualifiedColField(c));d=d.replace(e.COL_FIELD,"grid.getCellValue(row, col)"),d=c.cellTooltip===!1?d.replace(e.TOOLTIP,""):c.cellFilter?d.replace(e.TOOLTIP,'title="{{col.cellTooltip(row, col) | '+c.cellFilter+'}}"'):d.replace(e.TOOLTIP,'title="{{col.cellTooltip(row, col)}}"');var f=b(d);c.compiledElementFn=f,c.compiledElementFnDefer&&c.compiledElementFnDefer.resolve(c.compiledElementFn)})},p.prototype.getQualifiedColField=function(a){return"row.entity."+d.preEval(a.field)},p.prototype.createLeftContainer=function(){this.hasLeftContainer()||(this.renderContainers.left=new l("left",this,{disableColumnOffset:!0}))},p.prototype.createRightContainer=function(){this.hasRightContainer()||(this.renderContainers.right=new l("right",this,{disableColumnOffset:!0}))},p.prototype.hasLeftContainer=function(){return void 0!==this.renderContainers.left},p.prototype.hasRightContainer=function(){return void 0!==this.renderContainers.right},p.prototype.preprocessColDef=function(a){var b=this;if(!a.field&&!a.name)throw new Error("colDef.name or colDef.field property is required");if(void 0===a.name&&void 0!==a.field){var c=b.getColumn(a.field);if(c){var d=new RegExp("^"+a.field+"(\\d+)$","i"),e=b.columns.filter(function(a){return d.test(a.displayName)}).sort(function(a,b){if(a===b)return 0;var c=a.displayName.match(d)[1],e=b.displayName.match(d)[1];return parseInt(c,10)>parseInt(e,10)?1:-1});if(0===e.length)a.name=a.field+"2";else{var f=e[e.length-1].displayName.match(d)[1];f=parseInt(f,10),a.name=a.field+(f+1)}}else a.name=a.field}},p.prototype.newInN=function(a,b,c,d){for(var e=this,f=[],g=0;g<b.length;g++){for(var h=d?b[g][d]:b[g],i=!1,j=0;j<a.length;j++){var k=c?a[j][c]:a[j];if(e.options.rowEquality(h,k)){i=!0;break}}i||f.push(h)}return f},p.prototype.getRow=function(a,b){var c=this;b="undefined"==typeof b?c.rows:b;var d=b.filter(function(b){return c.options.rowEquality(b.entity,a)});return d.length>0?d[0]:null},p.prototype.modifyRows=function(b){var c=this,d=c.rows.slice(0),e=c.rowHashMap||c.createRowHashMap();c.rowHashMap=c.createRowHashMap(),c.rows.length=0,b.forEach(function(a,b){var f;f=c.options.enableRowHashing?e.get(a):c.getRow(a,d),f||(f=c.processRowBuilders(new h(a,b,c))),c.rows.push(f),c.rowHashMap.put(a,f)}),c.assignTypes();var f=a.when(c.processRowsProcessors(c.rows)).then(function(a){return c.setVisibleRows(a)}),g=a.when(c.processColumnsProcessors(c.columns)).then(function(a){return c.setVisibleColumns(a)});return a.all([f,g])},p.prototype.addRows=function(a){for(var b=this,c=b.rows.length,d=0;d<a.length;d++){var e=b.processRowBuilders(new h(a[d],d+c,b));if(b.options.enableRowHashing){var f=b.rowHashMap.get(e.entity);f&&(f.row=e)}b.rows.push(e)}},p.prototype.processRowBuilders=function(a){var b=this;return b.rowBuilders.forEach(function(c){c.call(b,a,b.options)}),a},p.prototype.registerStyleComputation=function(a){this.styleComputations.push(a)},p.prototype.registerRowsProcessor=function(a,b){if(!angular.isFunction(a))throw"Attempt to register non-function rows processor: "+a;this.rowsProcessors.push({processor:a,priority:b}),this.rowsProcessors.sort(function(a,b){return a.priority-b.priority})},p.prototype.removeRowsProcessor=function(a){var b=-1;this.rowsProcessors.forEach(function(c,d){c.processor===a&&(b=d)}),-1!==b&&this.rowsProcessors.splice(b,1)},p.prototype.processRowsProcessors=function(b){function c(b,e){var g=d.rowsProcessors[b].processor;return a.when(g.call(d,e,d.columns)).then(function(a){if(!a)throw"Processor at index "+b+" did not return a set of renderable rows";if(!angular.isArray(a))throw"Processor at index "+b+" did not return an array";return b++,b<=d.rowsProcessors.length-1?c(b,a):void f.resolve(a)})}var d=this,e=b.slice(0);if(0===d.rowsProcessors.length)return a.when(e);var f=a.defer();return c(0,e),f.promise},p.prototype.setVisibleRows=function(a){var b=this;for(var c in b.renderContainers){var d=b.renderContainers[c];d.canvasHeightShouldUpdate=!0,"undefined"==typeof d.visibleRowCache?d.visibleRowCache=[]:d.visibleRowCache.length=0}for(var e=0;e<a.length;e++){var f=a[e],g="undefined"!=typeof f.renderContainer&&f.renderContainer?f.renderContainer:"body";f.visible&&b.renderContainers[g].visibleRowCache.push(f)}b.api.core.raise.rowsRendered(this.api)},p.prototype.registerColumnsProcessor=function(a,b){if(!angular.isFunction(a))throw"Attempt to register non-function rows processor: "+a;this.columnsProcessors.push({processor:a,priority:b}),this.columnsProcessors.sort(function(a,b){return a.priority-b.priority})},p.prototype.removeColumnsProcessor=function(a){var b=this.columnsProcessors.indexOf(a);"undefined"!=typeof b&&void 0!==b&&this.columnsProcessors.splice(b,1)},p.prototype.processColumnsProcessors=function(b){function c(b,g){var h=d.columnsProcessors[b].processor;return a.when(h.call(d,g,d.rows)).then(function(a){if(!a)throw"Processor at index "+b+" did not return a set of renderable rows";if(!angular.isArray(a))throw"Processor at index "+b+" did not return an array";return b++,b<=d.columnsProcessors.length-1?c(b,e):void f.resolve(e)})}var d=this,e=b.slice(0);if(0===d.columnsProcessors.length)return a.when(e);var f=a.defer();return c(0,e),f.promise},p.prototype.setVisibleColumns=function(a){var b=this;for(var c in b.renderContainers){var d=b.renderContainers[c];d.visibleColumnCache.length=0}for(var e=0;e<a.length;e++){var f=a[e];f.visible&&("undefined"!=typeof f.renderContainer&&f.renderContainer?b.renderContainers[f.renderContainer].visibleColumnCache.push(f):b.renderContainers.body.visibleColumnCache.push(f))}},p.prototype.handleWindowResize=function(a){var b=this;b.gridWidth=d.elementWidth(b.element),b.gridHeight=d.elementHeight(b.element),b.queueRefresh()},p.prototype.queueRefresh=function(){var a=this;return a.refreshCanceller&&m.cancel(a.refreshCanceller),a.refreshCanceller=m(function(){a.refreshCanvas(!0)}),a.refreshCanceller.then(function(){a.refreshCanceller=null}),a.refreshCanceller},p.prototype.queueGridRefresh=function(){var a=this;return a.gridRefreshCanceller&&m.cancel(a.gridRefreshCanceller),a.gridRefreshCanceller=m(function(){a.refresh(!0)}),a.gridRefreshCanceller.then(function(){a.gridRefreshCanceller=null}),a.gridRefreshCanceller},p.prototype.updateCanvasHeight=function(){var a=this;for(var b in a.renderContainers)if(a.renderContainers.hasOwnProperty(b)){var c=a.renderContainers[b];c.canvasHeightShouldUpdate=!0}},p.prototype.buildStyles=function(){var a=this;a.customStyles="",a.styleComputations.sort(function(a,b){return null===a.priority?1:null===b.priority?-1:null===a.priority&&null===b.priority?0:a.priority-b.priority}).forEach(function(b){var c=b.func.call(a);angular.isString(c)&&(a.customStyles+="\n"+c)})},p.prototype.minColumnsToRender=function(){var a=this,b=this.getViewportWidth(),c=0,d=0;return a.columns.forEach(function(e,f){if(b>d)d+=e.drawnWidth,c++;else{for(var g=0,h=f;h>=f-c;h--)g+=a.columns[h].drawnWidth;b>g&&c++}}),c},p.prototype.getBodyHeight=function(){var a=this.getViewportHeight();return a},p.prototype.getViewportHeight=function(){var a=this,b=this.gridHeight-this.headerHeight-this.footerHeight,c=a.getViewportAdjustment();return b+=c.height},p.prototype.getViewportWidth=function(){var a=this,b=this.gridWidth,c=a.getViewportAdjustment();return b+=c.width},p.prototype.getHeaderViewportWidth=function(){var a=this.getViewportWidth();return a},p.prototype.addVerticalScrollSync=function(a,b){this.verticalScrollSyncCallBackFns[a]=b},p.prototype.addHorizontalScrollSync=function(a,b){this.horizontalScrollSyncCallBackFns[a]=b},p.prototype.scrollContainers=function(a,b){if(b.y){var c=["body","left","right"];this.flagScrollingVertically(b),"body"===a?c=["left","right"]:"left"===a?c=["body","right"]:"right"===a&&(c=["body","left"]);for(var d=0;d<c.length;d++){var e=c[d];this.verticalScrollSyncCallBackFns[e]&&this.verticalScrollSyncCallBackFns[e](b)}}if(b.x){var f=["body","bodyheader","bodyfooter"];this.flagScrollingHorizontally(b),"body"===a&&(f=["bodyheader","bodyfooter"]);for(var g=0;g<f.length;g++){var h=f[g];this.horizontalScrollSyncCallBackFns[h]&&this.horizontalScrollSyncCallBackFns[h](b)}}},p.prototype.registerViewportAdjuster=function(a){this.viewportAdjusters.push(a)},p.prototype.removeViewportAdjuster=function(a){var b=this.viewportAdjusters.indexOf(a);"undefined"!=typeof b&&void 0!==b&&this.viewportAdjusters.splice(b,1)},p.prototype.getViewportAdjustment=function(){var a=this,b={height:0,width:0};return a.viewportAdjusters.forEach(function(a){b=a.call(this,b)}),b},p.prototype.getVisibleRowCount=function(){return this.renderContainers.body.visibleRowCache.length},p.prototype.getVisibleRows=function(){return this.renderContainers.body.visibleRowCache},p.prototype.getVisibleColumnCount=function(){return this.renderContainers.body.visibleColumnCache.length},p.prototype.searchRows=function(a){return k.search(this,a,this.columns)},p.prototype.sortByColumn=function(a){return j.sort(this,a,this.columns)},p.prototype.getCellValue=function(a,b){return this.options.flatEntityAccess&&b.field?a.entity[b.field]:(b.cellValueGetterCache||(b.cellValueGetterCache=c(a.getEntityQualifiedColField(b))),b.cellValueGetterCache(a))},p.prototype.getNextColumnSortPriority=function(){var a=this,b=0;return a.columns.forEach(function(a){a.sort&&a.sort.priority&&a.sort.priority>b&&(b=a.sort.priority)}),b+1},p.prototype.resetColumnSorting=function(a){var b=this;b.columns.forEach(function(b){b===a||b.suppressRemoveSort||(b.sort={})})},p.prototype.getColumnSorting=function(){var a,b=this,c=[];return a=b.columns.slice(0),a.sort(j.prioritySort).forEach(function(a){a.sort&&"undefined"!=typeof a.sort.direction&&a.sort.direction&&(a.sort.direction===e.ASC||a.sort.direction===e.DESC)&&c.push(a)}),c},p.prototype.sortColumn=function(b,c,d){var f=this,g=null;if("undefined"==typeof b||!b)throw new Error("No column parameter provided");return"boolean"==typeof c?d=c:g=c,d?b.sort.priority||(b.sort.priority=f.getNextColumnSortPriority()):(f.resetColumnSorting(b),b.sort.priority=0,b.sort.priority=f.getNextColumnSortPriority()),g?b.sort.direction=g:b.sort.direction&&b.sort.direction===e.ASC?b.sort.direction=e.DESC:b.sort.direction&&b.sort.direction===e.DESC?b.colDef&&b.suppressRemoveSort?b.sort.direction=e.ASC:b.sort={}:b.sort.direction=e.ASC,f.api.core.raise.sortChanged(f,f.getColumnSorting()),a.when(b)},p.prototype.renderingComplete=function(){angular.isFunction(this.options.onRegisterApi)&&this.options.onRegisterApi(this.api),this.api.core.raise.renderingComplete(this.api)},p.prototype.createRowHashMap=function(){var a=this,b=new o;return b.grid=a,b},p.prototype.refresh=function(b){var c=this,d=c.processRowsProcessors(c.rows).then(function(a){c.setVisibleRows(a)}),e=c.processColumnsProcessors(c.columns).then(function(a){c.setVisibleColumns(a)});return a.all([d,e]).then(function(){c.redrawInPlace(b),c.refreshCanvas(!0)})},p.prototype.refreshRows=function(){var a=this;return a.processRowsProcessors(a.rows).then(function(b){a.setVisibleRows(b),a.redrawInPlace(),a.refreshCanvas(!0)})},p.prototype.refreshCanvas=function(b){var c=this;b&&c.buildStyles();var e=a.defer(),f=[];for(var g in c.renderContainers)if(c.renderContainers.hasOwnProperty(g)){var h=c.renderContainers[g];if(null===h.canvasWidth||isNaN(h.canvasWidth))continue;(h.header||h.headerCanvas)&&(h.explicitHeaderHeight=null,h.explicitHeaderCanvasHeight=null,f.push(h))}return f.length>0?(b&&c.buildStyles(),m(function(){var a,g,h=!1,i=0,j=0;for(a=0;a<f.length;a++)if(g=f[a],null!==g.canvasWidth&&!isNaN(g.canvasWidth)){if(g.header){var k=g.headerHeight,l=g.headerHeight=parseInt(d.outerElementHeight(g.header),10);k!==l&&(h=!0);var m=d.getBorderSize(g.header,"top"),n=d.getBorderSize(g.header,"bottom"),o=parseInt(l-m-n,10);o=0>o?0:o,g.innerHeaderHeight=o,!g.explicitHeaderHeight&&o>i&&(i=o)}if(g.headerCanvas){var p=g.headerCanvasHeight,q=g.headerCanvasHeight=parseInt(d.outerElementHeight(g.headerCanvas),10);p!==q&&(h=!0),!g.explicitHeaderCanvasHeight&&q>j&&(j=q)}}for(a=0;a<f.length;a++)g=f[a],i>0&&"undefined"!=typeof g.headerHeight&&null!==g.headerHeight&&(g.explicitHeaderHeight||g.headerHeight<i)&&(g.explicitHeaderHeight=i),j>0&&"undefined"!=typeof g.headerCanvasHeight&&null!==g.headerCanvasHeight&&(g.explicitHeaderCanvasHeight||g.headerCanvasHeight<j)&&(g.explicitHeaderCanvasHeight=j);b&&h&&c.buildStyles(),e.resolve()})):m(function(){e.resolve()}),e.promise},p.prototype.redrawInPlace=function(a){var b=this;for(var c in b.renderContainers){var d=b.renderContainers[c];a?(d.adjustRows(d.prevScrollTop,null),d.adjustColumns(d.prevScrollLeft,null)):(d.adjustRows(null,d.prevScrolltopPercentage),d.adjustColumns(null,d.prevScrollleftPercentage))}},p.prototype.hasLeftContainerColumns=function(){return this.hasLeftContainer()&&this.renderContainers.left.renderedColumns.length>0},p.prototype.hasRightContainerColumns=function(){return this.hasRightContainer()&&this.renderContainers.right.renderedColumns.length>0},p.prototype.scrollToIfNecessary=function(b,c){var d=this,e=new n(d,"uiGrid.scrollToIfNecessary"),f=d.renderContainers.body.visibleRowCache,g=d.renderContainers.body.visibleColumnCache,h=d.renderContainers.body.prevScrollTop+d.headerHeight;h=0>h?0:h;var i=d.renderContainers.body.prevScrollLeft,j=d.renderContainers.body.prevScrollTop+d.gridHeight-d.renderContainers.body.headerHeight-d.footerHeight-d.scrollbarWidth,k=d.renderContainers.body.prevScrollLeft+Math.ceil(d.gridWidth);if(null!==b){var l=f.indexOf(b),m=d.renderContainers.body.getCanvasHeight()-d.renderContainers.body.getViewportHeight(),o=(l+1)*d.options.rowHeight;o=0>o?0:o;var p,q;h>o?(p=d.renderContainers.body.prevScrollTop-(h-o),q=p/m,e.y={percentage:q}):o>j&&(p=o-j+d.renderContainers.body.prevScrollTop,q=p/m,e.y={percentage:q})}if(null!==c){for(var r=g.indexOf(c),s=d.renderContainers.body.getCanvasWidth()-d.renderContainers.body.getViewportWidth(),t=0,u=0;r>u;u++){var v=g[u];t+=v.drawnWidth}t=0>t?0:t;var w=t+c.drawnWidth;w=0>w?0:w;var x,y;i>t?(x=d.renderContainers.body.prevScrollLeft-(i-t),y=x/s,y=y>1?1:y,e.x={percentage:y}):w>k&&(x=w-k+d.renderContainers.body.prevScrollLeft,y=x/s,y=y>1?1:y,e.x={percentage:y})}var z=a.defer();if(e.y||e.x){e.withDelay=!1,d.scrollContainers("",e);var A=d.api.core.on.scrollEnd(null,function(){z.resolve(e),A()})}else z.resolve();return z.promise},p.prototype.scrollTo=function(a,b){var c=null,d=null;return null!==a&&"undefined"!=typeof a&&(c=this.getRow(a)),null!==b&&"undefined"!=typeof b&&(d=this.getColumn(b.name?b.name:b.field)),this.scrollToIfNecessary(c,d)},p.prototype.clearAllFilters=function(a,b,c){return void 0===a&&(a=!0),void 0===b&&(b=!1),void 0===c&&(c=!1),this.columns.forEach(function(a){a.filters.forEach(function(a){a.term=void 0,b&&(a.condition=void 0),c&&(a.flags=void 0)})}),a?this.refreshRows():void 0},o.prototype={put:function(a,b){this[this.grid.options.rowIdentity(a)]=b},get:function(a){return this[this.grid.options.rowIdentity(a)]},remove:function(a){var b=this[a=this.grid.options.rowIdentity(a)];return delete this[a],b}},p}])}(),function(){angular.module("ui.grid").factory("GridApi",["$q","$rootScope","gridUtil","uiGridConstants","GridRow","uiGridGridMenuService",function(a,b,c,d,e,f){function g(a,c,d,e){return b.$on(a,function(a){var b=Array.prototype.slice.call(arguments);b.splice(0,1),c.apply(e?e:d.api,b)})}var h=function(a){this.grid=a,this.listeners=[],this.registerEvent("core","renderingComplete"),this.registerEvent("core","filterChanged"),this.registerMethod("core","setRowInvisible",e.prototype.setRowInvisible),this.registerMethod("core","clearRowInvisible",e.prototype.clearRowInvisible),this.registerMethod("core","getVisibleRows",this.grid.getVisibleRows),this.registerEvent("core","rowsVisibleChanged"),this.registerEvent("core","rowsRendered"),this.registerEvent("core","scrollBegin"),this.registerEvent("core","scrollEnd"),this.registerEvent("core","canvasHeightChanged")};return h.prototype.suppressEvents=function(a,b){var c=this,d=angular.isArray(a)?a:[a],e=[];d.forEach(function(a){e=c.listeners.filter(function(b){return a===b.handler})}),e.forEach(function(a){a.dereg()}),b(),e.forEach(function(a){a.dereg=g(a.eventId,a.handler,c.grid,a._this)})},h.prototype.registerEvent=function(a,d){var e=this;e[a]||(e[a]={});var f=e[a];f.on||(f.on={},f.raise={});var h=e.grid.id+a+d;f.raise[d]=function(){b.$emit.apply(b,[h].concat(Array.prototype.slice.call(arguments)))},f.on[d]=function(b,f,i){if(null!==b&&"undefined"==typeof b.$on)return void c.logError("asked to listen on "+a+".on."+d+" but scope wasn't passed in the input parameters.  It is legitimate to pass null, but you've passed something else, so you probably forgot to provide scope rather than did it deliberately, not registering");var j=g(h,f,e.grid,i),k={handler:f,dereg:j,eventId:h,scope:b,_this:i};e.listeners.push(k);var l=function(){k.dereg();var a=e.listeners.indexOf(k);e.listeners.splice(a,1)};return b&&b.$on("$destroy",function(){l()}),l}},h.prototype.registerEventsFromObject=function(a){var b=this,c=[];angular.forEach(a,function(a,b){var d={name:b,events:[]};angular.forEach(a,function(a,b){d.events.push(b)}),c.push(d)}),c.forEach(function(a){a.events.forEach(function(c){b.registerEvent(a.name,c)})})},h.prototype.registerMethod=function(a,b,d,e){this[a]||(this[a]={});var f=this[a];f[b]=c.createBoundedWrapper(e||this.grid,d)},h.prototype.registerMethodsFromObject=function(a,b){var c=this,d=[];angular.forEach(a,function(a,b){var c={name:b,methods:[]};angular.forEach(a,function(a,b){c.methods.push({name:b,fn:a})}),d.push(c)}),d.forEach(function(a){a.methods.forEach(function(d){c.registerMethod(a.name,d.name,d.fn,b)})})},h}])}(),function(){angular.module("ui.grid").factory("GridColumn",["gridUtil","uiGridConstants","i18nService",function(a,b,c){function d(a,c,e){var f=this;f.grid=e,f.uid=c,f.updateColumnDef(a,!0),d.prototype.hideColumn=function(){this.colDef.visible=!1},f.aggregationValue=void 0,f.updateAggregationValue=function(){if(!f.aggregationType)return void(f.aggregationValue=void 0);var a=0,c=f.grid.getVisibleRows(),d=function(){var a=[];return c.forEach(function(b){var c=f.grid.getCellValue(b,f),d=Number(c);isNaN(d)||a.push(d)}),a};angular.isFunction(f.aggregationType)?f.aggregationValue=f.aggregationType(c,f):f.aggregationType===b.aggregationTypes.count?f.aggregationValue=f.grid.getVisibleRowCount():f.aggregationType===b.aggregationTypes.sum?(d().forEach(function(b){a+=b}),f.aggregationValue=a):f.aggregationType===b.aggregationTypes.avg?(d().forEach(function(b){a+=b}),a/=d().length,f.aggregationValue=a):f.aggregationType===b.aggregationTypes.min?f.aggregationValue=Math.min.apply(null,d()):f.aggregationType===b.aggregationTypes.max?f.aggregationValue=Math.max.apply(null,d()):f.aggregationValue=" "},this.getAggregationValue=function(){return f.aggregationValue}}return d.prototype.setPropertyOrDefault=function(a,b,c){var d=this;"undefined"!=typeof a[b]&&a[b]?d[b]=a[b]:"undefined"!=typeof d[b]?d[b]=d[b]:d[b]=c?c:{}},d.prototype.updateColumnDef=function(b,c){var e=this;if(e.colDef=b,void 0===b.name)throw new Error("colDef.name is required for column at index "+e.grid.options.columnDefs.indexOf(b));e.displayName=void 0===b.displayName?a.readableColumnName(b.name):b.displayName;var f="Cannot parse column width '"+b.width+"' for column named '"+b.name+"'";if(a.isNullOrUndefined(e.width)||!angular.isNumber(e.width))if(a.isNullOrUndefined(b.width))e.width="*";else if(angular.isNumber(b.width))e.width=b.width;else if(a.endsWith(b.width,"%")){var g=b.width.replace(/%/g,""),h=parseInt(g,10);if(isNaN(h))throw new Error(f);e.width=b.width}else if(b.width.match(/^(\d+)$/))e.width=parseInt(b.width.match(/^(\d+)$/)[1],10);else{if(!b.width.match(/^\*+$/))throw new Error(f);e.width=b.width}e.minWidth=b.minWidth?b.minWidth:30,e.maxWidth=b.maxWidth?b.maxWidth:9e3,e.field=void 0===b.field?b.name:b.field,"string"!=typeof e.field&&a.logError("Field is not a string, this is likely to break the code, Field is: "+e.field),e.name=b.name,e.displayName=void 0===b.displayName?a.readableColumnName(b.name):b.displayName,e.aggregationType=angular.isDefined(b.aggregationType)?b.aggregationType:null,e.footerCellTemplate=angular.isDefined(b.footerCellTemplate)?b.footerCellTemplate:null,"undefined"==typeof b.cellTooltip||b.cellTooltip===!1?e.cellTooltip=!1:b.cellTooltip===!0?e.cellTooltip=function(a,b){return e.grid.getCellValue(a,b)}:e.cellTooltip=b.cellTooltip,e.footerCellClass=b.footerCellClass,e.cellClass=b.cellClass,e.headerCellClass=b.headerCellClass,e.cellFilter=b.cellFilter?b.cellFilter:"",e.headerCellFilter=b.headerCellFilter?b.headerCellFilter:"",e.footerCellFilter=b.footerCellFilter?b.footerCellFilter:"",e.visible=a.isNullOrUndefined(b.visible)||b.visible,e.headerClass=b.headerClass,e.enableSorting="undefined"!=typeof b.enableSorting?b.enableSorting:!0,e.sortingAlgorithm=b.sortingAlgorithm,"undefined"==typeof e.suppressRemoveSort&&(e.suppressRemoveSort="undefined"!=typeof b.suppressRemoveSort?b.suppressRemoveSort:!1),
e.enableFiltering="undefined"!=typeof b.enableFiltering?b.enableFiltering:!0,e.setPropertyOrDefault(b,"menuItems",[]),c&&e.setPropertyOrDefault(b,"sort");var i=[];b.filter?i.push(b.filter):b.filters?i=b.filters:i.push({}),c?(e.setPropertyOrDefault(b,"filter"),e.setPropertyOrDefault(b,"filters",i)):e.filters.length===i.length&&e.filters.forEach(function(a,b){"undefined"!=typeof i[b].placeholder&&(a.placeholder=i[b].placeholder),"undefined"!=typeof i[b].flags&&(a.flags=i[b].flags),"undefined"!=typeof i[b].type&&(a.type=i[b].type),"undefined"!=typeof i[b].selectOptions&&(a.selectOptions=i[b].selectOptions)}),d.prototype.unsort=function(){this.sort={},e.grid.api.core.raise.sortChanged(e,e.grid.getColumnSorting())}},d.prototype.getColClass=function(a){var c=b.COL_CLASS_PREFIX+this.uid;return a?"."+c:c},d.prototype.isPinnedLeft=function(){return"left"===this.renderContainer},d.prototype.isPinnedRight=function(){return"right"===this.renderContainer},d.prototype.getColClassDefinition=function(){return" .grid"+this.grid.id+" "+this.getColClass(!0)+" { min-width: "+this.drawnWidth+"px; max-width: "+this.drawnWidth+"px; }"},d.prototype.getRenderContainer=function(){var a=this,b=a.renderContainer;return(null===b||""===b||void 0===b)&&(b="body"),a.grid.renderContainers[b]},d.prototype.showColumn=function(){this.colDef.visible=!0},d.prototype.getAggregationText=function(){var a=this;if(a.colDef.aggregationHideLabel)return"";if(a.colDef.aggregationLabel)return a.colDef.aggregationLabel;switch(a.colDef.aggregationType){case b.aggregationTypes.count:return c.getSafeText("aggregation.count");case b.aggregationTypes.sum:return c.getSafeText("aggregation.sum");case b.aggregationTypes.avg:return c.getSafeText("aggregation.avg");case b.aggregationTypes.min:return c.getSafeText("aggregation.min");case b.aggregationTypes.max:return c.getSafeText("aggregation.max");default:return""}},d.prototype.getCellTemplate=function(){var a=this;return a.cellTemplatePromise},d.prototype.getCompiledElementFn=function(){var a=this;return a.compiledElementFnDefer.promise},d}])}(),function(){angular.module("ui.grid").factory("GridOptions",["gridUtil","uiGridConstants",function(a,b){return{initialize:function(c){return c.onRegisterApi=c.onRegisterApi||angular.noop(),c.data=c.data||[],c.columnDefs=c.columnDefs||[],c.excludeProperties=c.excludeProperties||["$$hashKey"],c.enableRowHashing=c.enableRowHashing!==!1,c.rowIdentity=c.rowIdentity||function(b){return a.hashKey(b)},c.getRowIdentity=c.getRowIdentity||function(a){return a.$$hashKey},c.flatEntityAccess=c.flatEntityAccess===!0,c.showHeader="undefined"!=typeof c.showHeader?c.showHeader:!0,c.showHeader?c.headerRowHeight="undefined"!=typeof c.headerRowHeight?c.headerRowHeight:30:c.headerRowHeight=0,c.rowHeight=c.rowHeight||30,c.minRowsToShow="undefined"!=typeof c.minRowsToShow?c.minRowsToShow:10,c.showGridFooter=c.showGridFooter===!0,c.showColumnFooter=c.showColumnFooter===!0,c.columnFooterHeight="undefined"!=typeof c.columnFooterHeight?c.columnFooterHeight:30,c.gridFooterHeight="undefined"!=typeof c.gridFooterHeight?c.gridFooterHeight:30,c.columnWidth="undefined"!=typeof c.columnWidth?c.columnWidth:50,c.maxVisibleColumnCount="undefined"!=typeof c.maxVisibleColumnCount?c.maxVisibleColumnCount:200,c.virtualizationThreshold="undefined"!=typeof c.virtualizationThreshold?c.virtualizationThreshold:20,c.columnVirtualizationThreshold="undefined"!=typeof c.columnVirtualizationThreshold?c.columnVirtualizationThreshold:10,c.excessRows="undefined"!=typeof c.excessRows?c.excessRows:4,c.scrollThreshold="undefined"!=typeof c.scrollThreshold?c.scrollThreshold:4,c.excessColumns="undefined"!=typeof c.excessColumns?c.excessColumns:4,c.horizontalScrollThreshold="undefined"!=typeof c.horizontalScrollThreshold?c.horizontalScrollThreshold:2,c.aggregationCalcThrottle="undefined"!=typeof c.aggregationCalcThrottle?c.aggregationCalcThrottle:500,c.wheelScrollThrottle="undefined"!=typeof c.wheelScrollThrottle?c.wheelScrollThrottle:70,c.scrollDebounce="undefined"!=typeof c.scrollDebounce?c.scrollDebounce:300,c.enableSorting=c.enableSorting!==!1,c.enableFiltering=c.enableFiltering===!0,c.enableColumnMenus=c.enableColumnMenus!==!1,c.enableVerticalScrollbar="undefined"!=typeof c.enableVerticalScrollbar?c.enableVerticalScrollbar:b.scrollbars.ALWAYS,c.enableHorizontalScrollbar="undefined"!=typeof c.enableHorizontalScrollbar?c.enableHorizontalScrollbar:b.scrollbars.ALWAYS,c.enableMinHeightCheck=c.enableMinHeightCheck!==!1,c.minimumColumnSize="undefined"!=typeof c.minimumColumnSize?c.minimumColumnSize:10,c.rowEquality=c.rowEquality||function(a,b){return a===b},c.headerTemplate=c.headerTemplate||null,c.footerTemplate=c.footerTemplate||"ui-grid/ui-grid-footer",c.gridFooterTemplate=c.gridFooterTemplate||"ui-grid/ui-grid-grid-footer",c.rowTemplate=c.rowTemplate||"ui-grid/ui-grid-row",c.appScopeProvider=c.appScopeProvider||null,c}}}])}(),function(){angular.module("ui.grid").factory("GridRenderContainer",["gridUtil","uiGridConstants",function(a,b){function c(a,b,c){var d=this;d.name=a,d.grid=b,d.visibleRowCache=[],d.visibleColumnCache=[],d.renderedRows=[],d.renderedColumns=[],d.prevScrollTop=0,d.prevScrolltopPercentage=0,d.prevRowScrollIndex=0,d.prevScrollLeft=0,d.prevScrollleftPercentage=0,d.prevColumnScrollIndex=0,d.columnStyles="",d.viewportAdjusters=[],d.canvasHeightShouldUpdate=!0,d.$$canvasHeight=0,c&&angular.isObject(c)&&angular.extend(d,c),b.registerStyleComputation({priority:5,func:function(){return d.updateColumnWidths(),d.columnStyles}})}return c.prototype.reset=function(){this.visibleColumnCache.length=0,this.visibleRowCache.length=0,this.renderedRows.length=0,this.renderedColumns.length=0},c.prototype.containsColumn=function(a){return-1!==this.visibleColumnCache.indexOf(a)},c.prototype.minRowsToRender=function(){for(var a=this,b=0,c=0,d=a.getViewportHeight(),e=a.visibleRowCache.length-1;d>c&&e>=0;e--)c+=a.visibleRowCache[e].height,b++;return b},c.prototype.minColumnsToRender=function(){for(var a=this,b=this.getViewportWidth(),c=0,d=0,e=0;e<a.visibleColumnCache.length;e++){var f=a.visibleColumnCache[e];if(b>d)d+=f.drawnWidth?f.drawnWidth:0,c++;else{for(var g=0,h=e;h>=e-c;h--)g+=a.visibleColumnCache[h].drawnWidth?a.visibleColumnCache[h].drawnWidth:0;b>g&&c++}}return c},c.prototype.getVisibleRowCount=function(){return this.visibleRowCache.length},c.prototype.registerViewportAdjuster=function(a){this.viewportAdjusters.push(a)},c.prototype.removeViewportAdjuster=function(a){var b=this.viewportAdjusters.indexOf(a);"undefined"!=typeof b&&void 0!==b&&this.viewportAdjusters.splice(b,1)},c.prototype.getViewportAdjustment=function(){var a=this,b={height:0,width:0};return a.viewportAdjusters.forEach(function(a){b=a.call(this,b)}),b},c.prototype.getMargin=function(a){var b=this,c=0;return b.viewportAdjusters.forEach(function(b){var d=b.call(this,{height:0,width:0});d.side&&d.side===a&&(c+=-1*d.width)}),c},c.prototype.getViewportHeight=function(){var a=this,b=a.headerHeight?a.headerHeight:a.grid.headerHeight,c=a.grid.gridHeight-b-a.grid.footerHeight,d=a.getViewportAdjustment();return c+=d.height},c.prototype.getViewportWidth=function(){var a=this,b=a.grid.gridWidth,c=a.getViewportAdjustment();return b+=c.width},c.prototype.getHeaderViewportWidth=function(){var a=this.getViewportWidth();return a},c.prototype.getCanvasHeight=function(){var a=this;if(!a.canvasHeightShouldUpdate)return a.$$canvasHeight;var b=a.$$canvasHeight;return a.$$canvasHeight=0,a.visibleRowCache.forEach(function(b){a.$$canvasHeight+=b.height}),a.canvasHeightShouldUpdate=!1,a.grid.api.core.raise.canvasHeightChanged(b,a.$$canvasHeight),a.$$canvasHeight},c.prototype.getVerticalScrollLength=function(){return this.getCanvasHeight()-this.getViewportHeight()},c.prototype.getCanvasWidth=function(){var a=this,b=a.canvasWidth;return b},c.prototype.setRenderedRows=function(a){this.renderedRows.length=a.length;for(var b=0;b<a.length;b++)this.renderedRows[b]=a[b]},c.prototype.setRenderedColumns=function(a){this.renderedColumns.length=a.length;for(var b=0;b<a.length;b++)this.renderedColumns[b]=a[b];this.updateColumnOffset()},c.prototype.updateColumnOffset=function(){for(var a=0,b=0;b<this.currentFirstColumn;b++)a+=this.visibleColumnCache[b].drawnWidth;this.columnOffset=a},c.prototype.scrollVertical=function(a){var c=-1;if(a!==this.prevScrollTop){var d=a-this.prevScrollTop;d>0&&(this.grid.scrollDirection=b.scrollDirection.DOWN),0>d&&(this.grid.scrollDirection=b.scrollDirection.UP);var e=this.getVerticalScrollLength();return c=a/e,c>1&&(c=1),0>c&&(c=0),this.adjustScrollVertical(a,c),c}},c.prototype.scrollHorizontal=function(a){var c=-1;if(a!==this.prevScrollLeft){var d=a-this.prevScrollLeft;d>0&&(this.grid.scrollDirection=b.scrollDirection.RIGHT),0>d&&(this.grid.scrollDirection=b.scrollDirection.LEFT);var e=this.canvasWidth-this.getViewportWidth();return c=0!==e?a/e:0,this.adjustScrollHorizontal(a,c),c}},c.prototype.adjustScrollVertical=function(a,b,c){(this.prevScrollTop!==a||c)&&(("undefined"==typeof a||void 0===a||null===a)&&(a=(this.getCanvasHeight()-this.getViewportHeight())*b),this.adjustRows(a,b,!1),this.prevScrollTop=a,this.prevScrolltopPercentage=b,this.grid.queueRefresh())},c.prototype.adjustScrollHorizontal=function(a,b,c){(this.prevScrollLeft!==a||c)&&(("undefined"==typeof a||void 0===a||null===a)&&(a=(this.getCanvasWidth()-this.getViewportWidth())*b),this.adjustColumns(a,b),this.prevScrollLeft=a,this.prevScrollleftPercentage=b,this.grid.queueRefresh())},c.prototype.adjustRows=function(a,b,c){var d=this,e=d.minRowsToRender(),f=d.visibleRowCache,g=f.length-e;"undefined"!=typeof b&&null!==b||!a||(b=a/d.getVerticalScrollLength());var h=Math.ceil(Math.min(g,g*b));h>g&&(h=g);var i=[];if(f.length>d.grid.options.virtualizationThreshold){if("undefined"!=typeof a&&null!==a){if(!d.grid.suppressParentScrollDown&&d.prevScrollTop<a&&h<d.prevRowScrollIndex+d.grid.options.scrollThreshold&&g>h)return;if(!d.grid.suppressParentScrollUp&&d.prevScrollTop>a&&h>d.prevRowScrollIndex-d.grid.options.scrollThreshold&&g>h)return}var j={},k={};j=Math.max(0,h-d.grid.options.excessRows),k=Math.min(f.length,h+e+d.grid.options.excessRows),i=[j,k]}else{var l=d.visibleRowCache.length;i=[0,Math.max(l,e+d.grid.options.excessRows)]}d.updateViewableRowRange(i),d.prevRowScrollIndex=h},c.prototype.adjustColumns=function(a,b){var c=this,d=c.minColumnsToRender(),e=c.visibleColumnCache,f=e.length-d;"undefined"!=typeof b&&null!==b||!a||(b=a/c.getCanvasWidth());var g=Math.ceil(Math.min(f,f*b));g>f&&(g=f);var h=[];if(e.length>c.grid.options.columnVirtualizationThreshold&&c.getCanvasWidth()>c.getViewportWidth()){var i=Math.max(0,g-c.grid.options.excessColumns),j=Math.min(e.length,g+d+c.grid.options.excessColumns);h=[i,j]}else{var k=c.visibleColumnCache.length;h=[0,Math.max(k,d+c.grid.options.excessColumns)]}c.updateViewableColumnRange(h),c.prevColumnScrollIndex=g},c.prototype.updateViewableRowRange=function(a){var b=this.visibleRowCache.slice(a[0],a[1]);this.currentTopRow=a[0],this.setRenderedRows(b)},c.prototype.updateViewableColumnRange=function(a){var b=this.visibleColumnCache.slice(a[0],a[1]);this.currentFirstColumn=a[0],this.setRenderedColumns(b)},c.prototype.headerCellWrapperStyle=function(){var a=this;if(0!==a.currentFirstColumn){var b=a.columnOffset;return a.grid.isRTL()?{"margin-right":b+"px"}:{"margin-left":b+"px"}}return null},c.prototype.updateColumnWidths=function(){var b=this,c=[],d=0,e=0,f="",g=b.grid.getViewportWidth()-b.grid.scrollbarWidth,h=[];angular.forEach(b.grid.renderContainers,function(a,b){h=h.concat(a.visibleColumnCache)}),h.forEach(function(b,f){var h=0;b.visible&&(angular.isNumber(b.width)?(h=parseInt(b.width,10),e+=h,b.drawnWidth=h):a.endsWith(b.width,"%")?(h=parseInt(parseInt(b.width.replace(/%/g,""),10)/100*g),h>b.maxWidth&&(h=b.maxWidth),h<b.minWidth&&(h=b.minWidth),e+=h,b.drawnWidth=h):angular.isString(b.width)&&-1!==b.width.indexOf("*")&&(d+=b.width.length,c.push(b)))});var i=g-e;if(c.length>0){var j=i/d;c.forEach(function(a){var b=parseInt(a.width.length*j,10);b>a.maxWidth&&(b=a.maxWidth),b<a.minWidth&&(b=a.minWidth),e+=b,a.drawnWidth=b})}for(var k=function(a){a.drawnWidth<a.maxWidth&&l>0&&(a.drawnWidth++,e++,l--,m=!0)},l=g-e,m=!0;l>0&&m;)m=!1,c.forEach(k);var n=function(a){a.drawnWidth>a.minWidth&&o>0&&(a.drawnWidth--,e--,o--,m=!0)},o=e-g;for(m=!0;o>0&&m;)m=!1,c.forEach(n);var p=0;b.visibleColumnCache.forEach(function(a){a.visible&&(p+=a.drawnWidth)}),h.forEach(function(a){f+=a.getColClassDefinition()}),b.canvasWidth=p,this.columnStyles=f},c.prototype.getViewportStyle=function(){var a=this,c={};return"body"===a.name?(c["overflow-x"]=a.grid.options.enableHorizontalScrollbar===b.scrollbars.NEVER?"hidden":"scroll",a.grid.isRTL()?a.grid.hasLeftContainerColumns()?c["overflow-y"]="hidden":c["overflow-y"]=a.grid.options.enableVerticalScrollbar===b.scrollbars.NEVER?"hidden":"scroll":a.grid.hasRightContainerColumns()?c["overflow-y"]="hidden":c["overflow-y"]=a.grid.options.enableVerticalScrollbar===b.scrollbars.NEVER?"hidden":"scroll"):"left"===a.name?(c["overflow-x"]="hidden",c["overflow-y"]=a.grid.isRTL()?a.grid.options.enableVerticalScrollbar===b.scrollbars.NEVER?"hidden":"scroll":"hidden"):(c["overflow-x"]="hidden",c["overflow-y"]=a.grid.isRTL()?"hidden":a.grid.options.enableVerticalScrollbar===b.scrollbars.NEVER?"hidden":"scroll"),c},c}])}(),function(){angular.module("ui.grid").factory("GridRow",["gridUtil",function(a){function b(b,c,d){this.grid=d,this.entity=b,this.uid=a.nextUid(),this.visible=!0,this.$$height=d.options.rowHeight}return Object.defineProperty(b.prototype,"height",{get:function(){return this.$$height},set:function(a){a!==this.$$height&&(this.grid.updateCanvasHeight(),this.$$height=a)}}),b.prototype.getQualifiedColField=function(a){return"row."+this.getEntityQualifiedColField(a)},b.prototype.getEntityQualifiedColField=function(b){return a.preEval("entity."+b.field)},b.prototype.setRowInvisible=function(a){a&&a.setThisRowInvisible&&a.setThisRowInvisible("user")},b.prototype.clearRowInvisible=function(a){a&&a.clearThisRowInvisible&&a.clearThisRowInvisible("user")},b.prototype.setThisRowInvisible=function(a,b){this.invisibleReason||(this.invisibleReason={}),this.invisibleReason[a]=!0,this.evaluateRowVisibility(b)},b.prototype.clearThisRowInvisible=function(a,b){"undefined"!=typeof this.invisibleReason&&delete this.invisibleReason.user,this.evaluateRowVisibility(b)},b.prototype.evaluateRowVisibility=function(a){var b=!0;"undefined"!=typeof this.invisibleReason&&angular.forEach(this.invisibleReason,function(a,c){a&&(b=!1)}),("undefined"==typeof this.visible||this.visible!==b)&&(this.visible=b,a||(this.grid.queueGridRefresh(),this.grid.api.core.raise.rowsVisibleChanged(this)))},b}])}(),function(){angular.module("ui.grid").factory("ScrollEvent",["gridUtil",function(a){function b(b,c,d,e){var f=this;if(!b)throw new Error("grid argument is required");f.grid=b,f.source=e,f.withDelay=!0,f.sourceRowContainer=c,f.sourceColContainer=d,f.newScrollLeft=null,f.newScrollTop=null,f.x=null,f.y=null,f.fireThrottledScrollingEvent=a.throttle(function(a){f.grid.scrollContainers(a,f)},f.grid.options.wheelScrollThrottle,{trailing:!0})}return b.prototype.getNewScrollLeft=function(b,c){var d=this;if(!d.newScrollLeft){var e,f=b.getCanvasWidth()-b.getViewportWidth(),g=a.normalizeScrollLeft(c,d.grid);if("undefined"!=typeof d.x.percentage&&void 0!==d.x.percentage)e=d.x.percentage;else{if("undefined"==typeof d.x.pixels||void 0===d.x.pixels)throw new Error("No percentage or pixel value provided for scroll event X axis");e=d.x.percentage=(g+d.x.pixels)/f}return Math.max(0,e*f)}return d.newScrollLeft},b.prototype.getNewScrollTop=function(a,b){var c=this;if(!c.newScrollTop){var d,e=a.getVerticalScrollLength(),f=b[0].scrollTop;if("undefined"!=typeof c.y.percentage&&void 0!==c.y.percentage)d=c.y.percentage;else{if("undefined"==typeof c.y.pixels||void 0===c.y.pixels)throw new Error("No percentage or pixel value provided for scroll event Y axis");d=c.y.percentage=(f+c.y.pixels)/e}return Math.max(0,d*e)}return c.newScrollTop},b.prototype.atTop=function(a){return this.y&&0===this.y.percentage&&0===a},b.prototype.atBottom=function(a){return this.y&&1===this.y.percentage&&a>0},b.prototype.atLeft=function(a){return this.x&&0===this.x.percentage&&0===a},b.prototype.atRight=function(a){return this.x&&1===this.x.percentage&&a>0},b.Sources={ViewPortScroll:"ViewPortScroll",RenderContainerMouseWheel:"RenderContainerMouseWheel",RenderContainerTouchMove:"RenderContainerTouchMove",Other:99},b}])}(),function(){"use strict";angular.module("ui.grid").service("gridClassFactory",["gridUtil","$q","$compile","$templateCache","uiGridConstants","Grid","GridColumn","GridRow",function(a,b,c,d,e,f,g,h){var i={createGrid:function(d){d="undefined"!=typeof d?d:{},d.id=a.newId();var e=new f(d);if(e.options.rowTemplate){var g=b.defer();e.getRowTemplateFn=g.promise,a.getTemplate(e.options.rowTemplate).then(function(a){var b=c(a);g.resolve(b)},function(a){throw new Error("Couldn't fetch/use row template '"+e.options.rowTemplate+"'")})}return e.registerColumnBuilder(i.defaultColumnBuilder),e.registerRowBuilder(i.rowTemplateAssigner),e.registerRowsProcessor(function(a){return a.forEach(function(a){a.evaluateRowVisibility(!0)},50),a}),e.registerColumnsProcessor(function(a){return a.forEach(function(a){a.visible=!0}),a},50),e.registerColumnsProcessor(function(a){return a.forEach(function(a){a.colDef.visible===!1&&(a.visible=!1)}),a},50),e.registerRowsProcessor(e.searchRows,100),e.options.externalSort&&angular.isFunction(e.options.externalSort)?e.registerRowsProcessor(e.options.externalSort,200):e.registerRowsProcessor(e.sortByColumn,200),e},defaultColumnBuilder:function(c,d,f){var g=[],h=function(b,f,h,i){c[b]?d[f]=c[b]:d[f]=h,g.push(a.getTemplate(d[f]).then(function(a){i?d[b]=a.replace(e.CUSTOM_FILTERS,d[i]?"|"+d[i]:""):d[b]=a},function(a){throw new Error("Couldn't fetch/use colDef."+b+" '"+c[b]+"'")}))};return h("cellTemplate","providedCellTemplate","ui-grid/uiGridCell","cellFilter"),d.cellTemplatePromise=g[0],h("headerCellTemplate","providedHeaderCellTemplate","ui-grid/uiGridHeaderCell","headerCellFilter"),h("footerCellTemplate","providedFooterCellTemplate","ui-grid/uiGridFooterCell","footerCellFilter"),h("filterHeaderTemplate","providedFilterHeaderTemplate","ui-grid/ui-grid-filter"),d.compiledElementFnDefer=b.defer(),b.all(g)},rowTemplateAssigner:function(d){var e=this;if(d.rowTemplate){var f=b.defer();d.getRowTemplateFn=f.promise,a.getTemplate(d.rowTemplate).then(function(a){var b=c(a);f.resolve(b)},function(a){throw new Error("Couldn't fetch/use row template '"+d.rowTemplate+"'")})}else d.rowTemplate=e.options.rowTemplate,d.getRowTemplateFn=e.getRowTemplateFn;return d.getRowTemplateFn}};return i}])}(),function(){function a(a){return a.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}var b=angular.module("ui.grid");b.service("rowSearcher",["gridUtil","uiGridConstants",function(b,c){var d=c.filter.STARTS_WITH,e={};return e.getTerm=function(a){if("undefined"==typeof a.term)return a.term;var b=a.term;return"string"==typeof b&&(b=b.trim()),b},e.stripTerm=function(b){var c=e.getTerm(b);return"string"==typeof c?a(c.replace(/(^\*|\*$)/g,"")):c},e.guessCondition=function(a){if("undefined"==typeof a.term||!a.term)return d;var b=e.getTerm(a);if(/\*/.test(b)){var c="";a.flags&&a.flags.caseSensitive||(c+="i");var f=b.replace(/(\\)?\*/g,function(a,b){return b?a:"[\\s\\S]*?"});return new RegExp("^"+f+"$",c)}return d},e.setupFilters=function(a){for(var d=[],f=a.length,g=0;f>g;g++){var h=a[g];if(h.noTerm||!b.isNullOrUndefined(h.term)){var i={},j="";h.flags&&h.flags.caseSensitive||(j+="i"),b.isNullOrUndefined(h.term)||(i.term=e.stripTerm(h)),h.condition?i.condition=h.condition:i.condition=e.guessCondition(h),i.flags=angular.extend({caseSensitive:!1,date:!1},h.flags),i.condition===c.filter.STARTS_WITH&&(i.startswithRE=new RegExp("^"+i.term,j)),i.condition===c.filter.ENDS_WITH&&(i.endswithRE=new RegExp(i.term+"$",j)),i.condition===c.filter.CONTAINS&&(i.containsRE=new RegExp(i.term,j)),i.condition===c.filter.EXACT&&(i.exactRE=new RegExp("^"+i.term+"$",j)),d.push(i)}}return d},e.runColumnFilter=function(a,b,d,e){var f=typeof e.condition,g=e.term,h=a.getCellValue(b,d);if(e.condition instanceof RegExp)return e.condition.test(h);if("function"===f)return e.condition(g,h,b,d);if(e.startswithRE)return e.startswithRE.test(h);if(e.endswithRE)return e.endswithRE.test(h);if(e.containsRE)return e.containsRE.test(h);if(e.exactRE)return e.exactRE.test(h);if(e.condition===c.filter.NOT_EQUAL){var i=new RegExp("^"+g+"$");return!i.exec(h)}if("number"==typeof h){var j=parseFloat(g.replace(/\\\./,".").replace(/\\\-/,"-"));isNaN(j)||(g=j)}return e.flags.date===!0&&(h=new Date(h),g=new Date(g.replace(/\\/g,""))),e.condition===c.filter.GREATER_THAN?h>g:e.condition===c.filter.GREATER_THAN_OR_EQUAL?h>=g:e.condition===c.filter.LESS_THAN?g>h:e.condition===c.filter.LESS_THAN_OR_EQUAL?g>=h:!0},e.searchColumn=function(a,b,c,d){if(a.options.useExternalFiltering)return!0;for(var f=d.length,g=0;f>g;g++){var h=d[g],i=e.runColumnFilter(a,b,c,h);if(!i)return!1}return!0},e.search=function(a,c,d){if(c){if(!a.options.enableFiltering)return c;for(var f=[],g=d.length,h=0;g>h;h++){var i=d[h];"undefined"!=typeof i.filters&&(i.filters.length>1||1===i.filters.length&&(!b.isNullOrUndefined(i.filters[0].term)||i.filters[0].noTerm))?f.push({col:i,filters:e.setupFilters(i.filters)}):"undefined"==typeof i.filter||!i.filter||b.isNullOrUndefined(i.filters[0].term)&&!i.filter.noTerm||f.push({col:i,filters:e.setupFilters([i.filter])})}if(f.length>0){for(var j=function(a,b,c,d){b.visible&&!e.searchColumn(a,b,c,d)&&(b.visible=!1)},k=function(a,b){for(var d=c.length,e=0;d>e;e++)j(a,c[e],b.col,b.filters)},l=f.length,m=0;l>m;m++)k(a,f[m]);a.api.core.raise.rowsVisibleChanged&&a.api.core.raise.rowsVisibleChanged(),c=c.filter(function(a){return a.visible})}return c}},e}])}(),function(){var a=angular.module("ui.grid");a.service("rowSorter",["$parse","uiGridConstants",function(a,b){var c="("+b.CURRENCY_SYMBOLS.map(function(a){return"\\"+a}).join("|")+")?",d=(new RegExp("^[-+]?"+c+"[\\d,.]+"+c+"%?$"),{colSortFnCache:{}});return d.guessSortFn=function(a){switch(a){case"number":return d.sortNumber;case"numberStr":return d.sortNumberStr;case"boolean":return d.sortBool;case"string":return d.sortAlpha;case"date":return d.sortDate;case"object":return d.basicSort;default:throw new Error("No sorting function found for type:"+a)}},d.handleNulls=function(a,b){if(!a&&0!==a&&a!==!1||!b&&0!==b&&b!==!1){if(!a&&0!==a&&a!==!1&&!b&&0!==b&&b!==!1)return 0;if(!a&&0!==a&&a!==!1)return 1;if(!b&&0!==b&&b!==!1)return-1}return null},d.basicSort=function(a,b){var c=d.handleNulls(a,b);return null!==c?c:a===b?0:b>a?-1:1},d.sortNumber=function(a,b){var c=d.handleNulls(a,b);return null!==c?c:a-b},d.sortNumberStr=function(a,b){var c=d.handleNulls(a,b);if(null!==c)return c;var e,f,g=!1,h=!1;return e=parseFloat(a.replace(/[^0-9.-]/g,"")),isNaN(e)&&(g=!0),f=parseFloat(b.replace(/[^0-9.-]/g,"")),isNaN(f)&&(h=!0),g&&h?0:g?1:h?-1:e-f},d.sortAlpha=function(a,b){var c=d.handleNulls(a,b);if(null!==c)return c;var e=a.toString().toLowerCase(),f=b.toString().toLowerCase();return e===f?0:f>e?-1:1},d.sortDate=function(a,b){var c=d.handleNulls(a,b);if(null!==c)return c;var e=a.getTime(),f=b.getTime();return e===f?0:f>e?-1:1},d.sortBool=function(a,b){var c=d.handleNulls(a,b);return null!==c?c:a&&b?0:a||b?a?1:-1:0},d.getSortFn=function(a,b,c){var e;return d.colSortFnCache[b.colDef.name]?e=d.colSortFnCache[b.colDef.name]:void 0!==b.sortingAlgorithm?(e=b.sortingAlgorithm,d.colSortFnCache[b.colDef.name]=b.sortingAlgorithm):(e=d.guessSortFn(b.colDef.type),e?d.colSortFnCache[b.colDef.name]=e:e=d.sortAlpha),e},d.prioritySort=function(a,b){return void 0!==a.sort.priority&&void 0!==b.sort.priority?a.sort.priority<b.sort.priority?-1:a.sort.priority===b.sort.priority?0:1:a.sort.priority||0===a.sort.priority?-1:b.sort.priority||0===b.sort.priority?1:0},d.sort=function(a,c,e){if(c){if(a.options.useExternalSorting)return c;var f=[];if(e.forEach(function(a){a.sort&&a.sort.direction&&(a.sort.direction===b.ASC||a.sort.direction===b.DESC)&&f.push(a)}),f=f.sort(d.prioritySort),0===f.length)return c;var g,h,i=function(a,b){a.entity.$$uiGridIndex=b};c.forEach(i);var j=c.slice(0),k=function(c,e){for(var i,k=0,l=0;0===k&&l<f.length;){g=f[l],h=f[l].sort.direction,i=d.getSortFn(a,g,j);var m=a.getCellValue(c,g),n=a.getCellValue(e,g);k=i(m,n),l++}return 0===k?c.entity.$$uiGridIndex-e.entity.$$uiGridIndex:h===b.ASC?k:0-k},l=c.sort(k),m=function(a,b){delete a.entity.$$uiGridIndex};return c.forEach(m),l}},d}])}(),function(){function a(a){var b=a;return"undefined"!=typeof b.length&&b.length&&(b=a[0]),b.ownerDocument.defaultView.getComputedStyle(b,null)}function b(a,b,c,d,e){for(var f=c===(d?"border":"content")?4:"width"===b?1:0,g=0,h=["Top","Right","Bottom","Left"];4>f;f+=2){var i=h[f];if("margin"===c){var j=parseFloat(e[c+i]);isNaN(j)||(g+=j)}if(d){if("content"===c){var k=parseFloat(e["padding"+i]);isNaN(k)||(g-=k)}if("margin"!==c){var l=parseFloat(e["border"+i+"Width"]);isNaN(l)||(g-=l)}}else{var m=parseFloat(e["padding"+i]);if(isNaN(m)||(g+=m),"padding"!==c){var n=parseFloat(e["border"+i+"Width"]);isNaN(n)||(g+=n)}}}return g}function c(c,d,e){var f,h=!0,i=a(c),j="border-box"===i.boxSizing;if(0>=f||null==f){if(f=i[d],(0>f||null==f)&&(f=c.style[d]),g.test(f))return f;h=j&&!0,f=parseFloat(f)||0}var k=f+b(c,d,e||(j?"border":"content"),h,i);return k}function d(b){b=angular.element(b)[0];var c=b.offsetParent;return c||(c=document.getElementsByTagName("body")[0]),parseInt(a(c).fontSize)||parseInt(a(b).fontSize)||16}var e,f=angular.module("ui.grid");"function"!=typeof Function.prototype.bind&&(e=function(){var a=Array.prototype.slice;return function(b){var c=this,d=a.call(arguments,1);return d.length?function(){return arguments.length?c.apply(b,d.concat(a.call(arguments))):c.apply(b,d)}:function(){return arguments.length?c.apply(b,arguments):c.call(b)}}});var g=new RegExp("^("+/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source+")(?!px)[a-z%]+$","i"),h=/^(block|none|table(?!-c[ea]).+)/,i={position:"absolute",visibility:"hidden",display:"block"},j=["0","0","0"],k="uiGrid-";f.service("gridUtil",["$log","$window","$document","$http","$templateCache","$timeout","$interval","$injector","$q","$interpolate","uiGridConstants",function(f,g,l,m,n,o,p,q,r,s,t){function u(a,b){var c=angular.element(this),d=0,e=0,f=0,g=0;if(b.originalEvent&&(b=b.originalEvent),"detail"in b&&(f=-1*b.detail),"wheelDelta"in b&&(f=b.wheelDelta),"wheelDeltaY"in b&&(f=b.wheelDeltaY),"wheelDeltaX"in b&&(e=-1*b.wheelDeltaX),"axis"in b&&b.axis===b.HORIZONTAL_AXIS&&(e=-1*f,f=0),d=0===f?e:f,"deltaY"in b&&(f=-1*b.deltaY,d=f),"deltaX"in b&&(e=b.deltaX,0===f&&(d=-1*e)),0!==f||0!==e){if(1===b.deltaMode){var h=c.data("mousewheel-line-height");d*=h,f*=h,e*=h}else if(2===b.deltaMode){var i=c.data("mousewheel-page-height");d*=i,f*=i,e*=i}g=Math.max(Math.abs(f),Math.abs(e)),(!z||z>g)&&(z=g,w(b,g)&&(z/=40)),d=Math[d>=1?"floor":"ceil"](d/z),e=Math[e>=1?"floor":"ceil"](e/z),f=Math[f>=1?"floor":"ceil"](f/z),b.deltaMode=0;var j={originalEvent:b,deltaX:e,deltaY:f,deltaFactor:z,preventDefault:function(){b.preventDefault()}};y&&clearTimeout(y),y=setTimeout(v,200),a.call(c[0],j)}}function v(){z=null}function w(a,b){return"mousewheel"===a.type&&b%120===0}var x={augmentWidthOrHeight:b,getStyles:a,createBoundedWrapper:function(a,b){return function(){return b.apply(a,arguments)}},readableColumnName:function(a){return"undefined"==typeof a||void 0===a||null===a?a:("string"!=typeof a&&(a=String(a)),a.replace(/_+/g," ").replace(/^[A-Z]+$/,function(a){return angular.lowercase(angular.uppercase(a.charAt(0))+a.slice(1))}).replace(/([\w\u00C0-\u017F]+)/g,function(a){return angular.uppercase(a.charAt(0))+a.slice(1)}).replace(/(\w+?(?=[A-Z]))/g,"$1 "))},getColumnsFromData:function(a,b){var c=[];if(!a||"undefined"==typeof a[0]||void 0===a[0])return[];angular.isUndefined(b)&&(b=[]);var d=a[0];return angular.forEach(d,function(a,d){-1===b.indexOf(d)&&c.push({name:d})}),c},newId:function(){var a=(new Date).getTime();return function(){return a+=1}}(),getTemplate:function(a){if(n.get(a))return x.postProcessTemplate(n.get(a));if(a.hasOwnProperty("then"))return a.then(x.postProcessTemplate);try{if(angular.element(a).length>0)return r.when(a).then(x.postProcessTemplate)}catch(b){}return x.logDebug("fetching url",a),m({method:"GET",url:a}).then(function(b){var c=b.data.trim();return n.put(a,c),c},function(b){throw new Error("Could not get template "+a+": "+b)}).then(x.postProcessTemplate)},postProcessTemplate:function(a){var b=s.startSymbol(),c=s.endSymbol();return("{{"!==b||"}}"!==c)&&(a=a.replace(/\{\{/g,b),a=a.replace(/\}\}/g,c)),r.when(a)},guessType:function(a){var b=typeof a;switch(b){case"number":case"boolean":case"string":return b;default:return angular.isDate(a)?"date":"object"}},elementWidth:function(a){},elementHeight:function(a){},getScrollbarWidth:function(){var a=document.createElement("div");a.style.visibility="hidden",a.style.width="100px",a.style.msOverflowStyle="scrollbar",document.body.appendChild(a);var b=a.offsetWidth;a.style.overflow="scroll";var c=document.createElement("div");c.style.width="100%",a.appendChild(c);var d=c.offsetWidth;return a.parentNode.removeChild(a),b-d},swap:function(a,b,c,d){var e,f,g={};for(f in b)g[f]=a.style[f],a.style[f]=b[f];e=c.apply(a,d||[]);for(f in b)a.style[f]=g[f];return e},fakeElement:function(a,b,c,d){var e,f,g=angular.element(a).clone()[0];for(f in b)g.style[f]=b[f];return angular.element(document.body).append(g),e=c.call(g,g),angular.element(g).remove(),e},normalizeWheelEvent:function(a){var b,c,d,e=a||window.event,f=([].slice.call(arguments,1),0),g=0,h=0,i=0,j=0;return e.originalEvent&&(e=e.originalEvent),e.wheelDelta&&(f=e.wheelDelta),e.detail&&(f=-1*e.detail),h=f,void 0!==e.axis&&e.axis===e.HORIZONTAL_AXIS&&(h=0,g=-1*f),e.deltaY&&(h=-1*e.deltaY,f=h),e.deltaX&&(g=e.deltaX,f=-1*g),void 0!==e.wheelDeltaY&&(h=e.wheelDeltaY),void 0!==e.wheelDeltaX&&(g=e.wheelDeltaX),i=Math.abs(f),(!b||b>i)&&(b=i),j=Math.max(Math.abs(h),Math.abs(g)),(!c||c>j)&&(c=j),d=f>0?"floor":"ceil",f=Math[d](f/b),g=Math[d](g/c),h=Math[d](h/c),{delta:f,deltaX:g,deltaY:h}},isTouchEnabled:function(){var a;return("ontouchstart"in g||g.DocumentTouch&&l instanceof DocumentTouch)&&(a=!0),a},isNullOrUndefined:function(a){return void 0===a||null===a?!0:!1},endsWith:function(a,b){return a&&b&&"string"==typeof a?-1!==a.indexOf(b,a.length-b.length):!1},arrayContainsObjectWithProperty:function(a,b,c){var d=!1;return angular.forEach(a,function(a){a[b]===c&&(d=!0)}),d},numericAndNullSort:function(a,b){return null===a?1:null===b?-1:null===a&&null===b?0:a-b},disableAnimations:function(a){var b;try{b=q.get("$animate"),b.enabled(!1,a)}catch(c){}},enableAnimations:function(a){var b;try{return b=q.get("$animate"),b.enabled(!0,a),b}catch(c){}},nextUid:function(){for(var a,b=j.length;b;){if(b--,a=j[b].charCodeAt(0),57===a)return j[b]="A",k+j.join("");if(90!==a)return j[b]=String.fromCharCode(a+1),k+j.join("");j[b]="0"}return j.unshift("0"),k+j.join("")},hashKey:function(a){var b,c=typeof a;return"object"===c&&null!==a?"function"==typeof(b=a.$$hashKey)?b=a.$$hashKey():"undefined"!=typeof a.$$hashKey&&a.$$hashKey?b=a.$$hashKey:void 0===b&&(b=a.$$hashKey=x.nextUid()):b=a,c+":"+b},resetUids:function(){j=["0","0","0"]},logError:function(a){t.LOG_ERROR_MESSAGES&&f.error(a)},logWarn:function(a){t.LOG_WARN_MESSAGES&&f.warn(a)},logDebug:function(){t.LOG_DEBUG_MESSAGES&&f.debug.apply(f,arguments)}};["width","height"].forEach(function(b){var d=angular.uppercase(b.charAt(0))+b.substr(1);x["element"+d]=function(d,e){var f=d;if(f&&"undefined"!=typeof f.length&&f.length&&(f=d[0]),f){var g=a(f);return 0===f.offsetWidth&&h.test(g.display)?x.swap(f,i,function(){return c(f,b,e)}):c(f,b,e)}return null},x["outerElement"+d]=function(a,b){return a?x["element"+d].call(this,a,b?"margin":"border"):null}}),x.closestElm=function(a,b){"undefined"!=typeof a.length&&a.length&&(a=a[0]);var c;["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"].some(function(a){
return"function"==typeof document.body[a]?(c=a,!0):!1});for(var d;null!==a;){if(d=a.parentElement,null!==d&&d[c](b))return d;a=d}return null},x.type=function(a){var b=Function.prototype.toString.call(a.constructor);return b.match(/function (.*?)\(/)[1]},x.getBorderSize=function(b,c){"undefined"!=typeof b.length&&b.length&&(b=b[0]);var d=a(b);c=c?"border"+c.charAt(0).toUpperCase()+c.slice(1):"border",c+="Width";var e=parseInt(d[c],10);return isNaN(e)?0:e},x.detectBrowser=function(){var a=g.navigator.userAgent,b={chrome:/chrome/i,safari:/safari/i,firefox:/firefox/i,ie:/internet explorer|trident\//i};for(var c in b)if(b[c].test(a))return c;return"unknown"},x.rtlScrollType=function B(){if(B.type)return B.type;var a=angular.element('<div dir="rtl" style="font-size: 14px; width: 1px; height: 1px; position: absolute; top: -1000px; overflow: scroll">A</div>')[0],b="reverse";return document.body.appendChild(a),a.scrollLeft>0?b="default":(a.scrollLeft=1,0===a.scrollLeft&&(b="negative")),a.remove(),B.type=b,b},x.normalizeScrollLeft=function(a,b){"undefined"!=typeof a.length&&a.length&&(a=a[0]);var c=a.scrollLeft;if(b.isRTL())switch(x.rtlScrollType()){case"default":return a.scrollWidth-c-a.clientWidth;case"negative":return Math.abs(c);case"reverse":return c}return c},x.denormalizeScrollLeft=function(a,b,c){if("undefined"!=typeof a.length&&a.length&&(a=a[0]),c.isRTL())switch(x.rtlScrollType()){case"default":var d=a.scrollWidth-a.clientWidth;return d-b;case"negative":return-1*b;case"reverse":return b}return b},x.preEval=function(a){var b=t.BRACKET_REGEXP.exec(a);if(b)return(b[1]?x.preEval(b[1]):b[1])+b[2]+(b[3]?x.preEval(b[3]):b[3]);a=a.replace(t.APOS_REGEXP,"\\'");var c=a.split(t.DOT_REGEXP),d=[c.shift()];return angular.forEach(c,function(a){d.push(a.replace(t.FUNC_REGEXP,"']$1"))}),d.join("['")},x.debounce=function(a,b,c){function d(){g=this,f=arguments;var d=function(){e=null,c||(h=a.apply(g,f))},i=c&&!e;return e&&o.cancel(e),e=o(d,b),i&&(h=a.apply(g,f)),h}var e,f,g,h;return d.cancel=function(){o.cancel(e),e=null},d},x.throttle=function(a,b,c){function d(b){g=+new Date,a.apply(e,f),p(function(){h=null},0,1)}c=c||{};var e,f,g=0,h=null;return function(){if(e=this,f=arguments,null===h){var a=+new Date-g;a>b?d():c.trailing&&(h=p(d,b-a,1))}}},x.on={},x.off={},x._events={},x.addOff=function(a){x.off[a]=function(b,c){var d=x._events[a].indexOf(c);d>0&&x._events[a].removeAt(d)}};var y,z,A="onwheel"in document||document.documentMode>=9?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"];return x.on.mousewheel=function(a,b){if(a&&b){var c=angular.element(a);c.data("mousewheel-line-height",d(c)),c.data("mousewheel-page-height",x.elementHeight(c)),c.data("mousewheel-callbacks")||c.data("mousewheel-callbacks",{});var f=c.data("mousewheel-callbacks");f[b]=(Function.prototype.bind||e).call(u,c[0],b);for(var g=A.length;g;)c.on(A[--g],f[b])}},x.off.mousewheel=function(a,b){var c=angular.element(this),d=c.data("mousewheel-callbacks"),e=d[b];if(e)for(var f=A.length;f;)c.off(A[--f],e);delete d[b],0===Object.keys(d).length&&(c.removeData("mousewheel-line-height"),c.removeData("mousewheel-page-height"),c.removeData("mousewheel-callbacks"))},x}]),f.filter("px",function(){return function(a){return a.match(/^[\d\.]+$/)?a+"px":a}})}(),function(){angular.module("ui.grid").config(["$provide",function(a){a.decorator("i18nService",["$delegate",function(a){var b={aggregate:{label:"položky"},groupPanel:{description:"Přesuntě záhlaví zde pro vytvoření skupiny dle sloupce."},search:{placeholder:"Hledat...",showingItems:"Zobrazuji položky:",selectedItems:"Vybrané položky:",totalItems:"Celkem položek:",size:"Velikost strany:",first:"První strana",next:"Další strana",previous:"Předchozí strana",last:"Poslední strana"},menu:{text:"Vyberte sloupec:"},sort:{ascending:"Seřadit od A-Z",descending:"Seřadit od Z-A",remove:"Odebrat seřazení"},column:{hide:"Schovat sloupec"},aggregation:{count:"celkem řádků: ",sum:"celkem: ",avg:"avg: ",min:"min.: ",max:"max.: "},pinning:{pinLeft:"Zamknout v levo",pinRight:"Zamknout v pravo",unpin:"Odemknout"},gridMenu:{columns:"Sloupce:",importerTitle:"Importovat soubor",exporterAllAsCsv:"Exportovat všechny data do csv",exporterVisibleAsCsv:"Exportovat viditelné data do csv",exporterSelectedAsCsv:"Exportovat vybranné data do csv",exporterAllAsPdf:"Exportovat všechny data do pdf",exporterVisibleAsPdf:"Exportovat viditelné data do pdf",exporterSelectedAsPdf:"Exportovat vybranné data do pdf"},importer:{noHeaders:"Názvy sloupců se nepodařilo získat, obsahuje soubor záhlaví?",noObjects:"Data se nepodařilo zpracovat, obsahuje soubor řádky mimo záhlaví?",invalidCsv:"Soubor nelze zpracovat, jedná se CSV?",invalidJson:"Soubor nelze zpracovat, je to JSON?",jsonNotArray:"Soubor musí obsahovat json. Ukončuji.."},pagination:{sizes:"položek na stránku",totalItems:"položek"},grouping:{group:"Seskupit",ungroup:"Odebrat seskupení",aggregate_count:"Agregace: Count",aggregate_sum:"Agregace: Sum",aggregate_max:"Agregace: Max",aggregate_min:"Agregace: Min",aggregate_avg:"Agregace: Avg",aggregate_remove:"Agregace: Odebrat"}};return a.add("cs",b),a.add("cz",b),a.add("cs-cz",b),a.add("cs-CZ",b),a}])}])}(),function(){angular.module("ui.grid").config(["$provide",function(a){a.decorator("i18nService",["$delegate",function(a){return a.add("da",{aggregate:{label:"artikler"},groupPanel:{description:"Grupér rækker udfra en kolonne ved at trække dens overskift hertil."},search:{placeholder:"Søg...",showingItems:"Viste rækker:",selectedItems:"Valgte rækker:",totalItems:"Rækker totalt:",size:"Side størrelse:",first:"Første side",next:"Næste side",previous:"Forrige side",last:"Sidste side"},menu:{text:"Vælg kolonner:"},column:{hide:"Skjul kolonne"},aggregation:{count:"samlede rækker: ",sum:"smalede: ",avg:"gns: ",min:"min: ",max:"max: "},gridMenu:{columns:"Columns:",importerTitle:"Import file",exporterAllAsCsv:"Export all data as csv",exporterVisibleAsCsv:"Export visible data as csv",exporterSelectedAsCsv:"Export selected data as csv",exporterAllAsPdf:"Export all data as pdf",exporterVisibleAsPdf:"Export visible data as pdf",exporterSelectedAsPdf:"Export selected data as pdf"},importer:{noHeaders:"Column names were unable to be derived, does the file have a header?",noObjects:"Objects were not able to be derived, was there data in the file other than headers?",invalidCsv:"File was unable to be processed, is it valid CSV?",invalidJson:"File was unable to be processed, is it valid Json?",jsonNotArray:"Imported json file must contain an array, aborting."}}),a}])}])}(),function(){angular.module("ui.grid").config(["$provide",function(a){a.decorator("i18nService",["$delegate",function(a){return a.add("de",{aggregate:{label:"Eintrag"},groupPanel:{description:"Ziehen Sie eine Spaltenüberschrift hierhin, um nach dieser Spalte zu gruppieren."},search:{placeholder:"Suche...",showingItems:"Zeige Einträge:",selectedItems:"Ausgewählte Einträge:",totalItems:"Einträge gesamt:",size:"Einträge pro Seite:",first:"Erste Seite",next:"Nächste Seite",previous:"Vorherige Seite",last:"Letzte Seite"},menu:{text:"Spalten auswählen:"},sort:{ascending:"aufsteigend sortieren",descending:"absteigend sortieren",remove:"Sortierung zurücksetzen"},column:{hide:"Spalte ausblenden"},aggregation:{count:"Zeilen insgesamt: ",sum:"gesamt: ",avg:"Durchschnitt: ",min:"min: ",max:"max: "},pinning:{pinLeft:"Links anheften",pinRight:"Rechts anheften",unpin:"Lösen"},gridMenu:{columns:"Spalten:",importerTitle:"Datei importieren",exporterAllAsCsv:"Alle Daten als CSV exportieren",exporterVisibleAsCsv:"sichtbare Daten als CSV exportieren",exporterSelectedAsCsv:"markierte Daten als CSV exportieren",exporterAllAsPdf:"Alle Daten als PDF exportieren",exporterVisibleAsPdf:"sichtbare Daten als PDF exportieren",exporterSelectedAsPdf:"markierte Daten als CSV exportieren"},importer:{noHeaders:"Es konnten keine Spaltennamen ermittelt werden. Sind in der Datei Spaltendefinitionen enthalten?",noObjects:"Es konnten keine Zeileninformationen gelesen werden, Sind in der Datei außer den Spaltendefinitionen auch Daten enthalten?",invalidCsv:"Die Datei konnte nicht eingelesen werden, ist es eine gültige CSV-Datei?",invalidJson:"Die Datei konnte nicht eingelesen werden. Enthält sie gültiges JSON?",jsonNotArray:"Die importierte JSON-Datei muß ein Array enthalten. Breche Import ab."},pagination:{sizes:"Einträge pro Seite",totalItems:"Einträge"},grouping:{group:"Gruppieren",ungroup:"Gruppierung aufheben",aggregate_count:"Agg: Anzahl",aggregate_sum:"Agg: Summe",aggregate_max:"Agg: Maximum",aggregate_min:"Agg: Minimum",aggregate_avg:"Agg: Mittelwert",aggregate_remove:"Aggregation entfernen"}}),a}])}])}(),function(){angular.module("ui.grid").config(["$provide",function(a){a.decorator("i18nService",["$delegate",function(a){return a.add("en",{aggregate:{label:"items"},groupPanel:{description:"Drag a column header here and drop it to group by that column."},search:{placeholder:"Search...",showingItems:"Showing Items:",selectedItems:"Selected Items:",totalItems:"Total Items:",size:"Page Size:",first:"First Page",next:"Next Page",previous:"Previous Page",last:"Last Page"},menu:{text:"Choose Columns:"},sort:{ascending:"Sort Ascending",descending:"Sort Descending",remove:"Remove Sort"},column:{hide:"Hide Column"},aggregation:{count:"total rows: ",sum:"total: ",avg:"avg: ",min:"min: ",max:"max: "},pinning:{pinLeft:"Pin Left",pinRight:"Pin Right",unpin:"Unpin"},gridMenu:{columns:"Columns:",importerTitle:"Import file",exporterAllAsCsv:"Export all data as csv",exporterVisibleAsCsv:"Export visible data as csv",exporterSelectedAsCsv:"Export selected data as csv",exporterAllAsPdf:"Export all data as pdf",exporterVisibleAsPdf:"Export visible data as pdf",exporterSelectedAsPdf:"Export selected data as pdf"},importer:{noHeaders:"Column names were unable to be derived, does the file have a header?",noObjects:"Objects were not able to be derived, was there data in the file other than headers?",invalidCsv:"File was unable to be processed, is it valid CSV?",invalidJson:"File was unable to be processed, is it valid Json?",jsonNotArray:"Imported json file must contain an array, aborting."},pagination:{sizes:"items per page",totalItems:"items"},grouping:{group:"Group",ungroup:"Ungroup",aggregate_count:"Agg: Count",aggregate_sum:"Agg: Sum",aggregate_max:"Agg: Max",aggregate_min:"Agg: Min",aggregate_avg:"Agg: Avg",aggregate_remove:"Agg: Remove"}}),a}])}])}(),function(){angular.module("ui.grid").config(["$provide",function(a){a.decorator("i18nService",["$delegate",function(a){return a.add("es",{aggregate:{label:"Artículos"},groupPanel:{description:"Arrastre un encabezado de columna aquí y suéltelo para agrupar por esa columna."},search:{placeholder:"Buscar...",showingItems:"Artículos Mostrados:",selectedItems:"Artículos Seleccionados:",totalItems:"Artículos Totales:",size:"Tamaño de Página:",first:"Primera Página",next:"Página Siguiente",previous:"Página Anterior",last:"Última Página"},menu:{text:"Elegir columnas:"},sort:{ascending:"Orden Ascendente",descending:"Orden Descendente",remove:"Sin Ordenar"},column:{hide:"Ocultar la columna"},aggregation:{count:"filas totales: ",sum:"total: ",avg:"media: ",min:"min: ",max:"max: "},pinning:{pinLeft:"Fijar a la Izquierda",pinRight:"Fijar a la Derecha",unpin:"Quitar Fijación"},gridMenu:{columns:"Columnas:",importerTitle:"Importar archivo",exporterAllAsCsv:"Exportar todo como csv",exporterVisibleAsCsv:"Exportar vista como csv",exporterSelectedAsCsv:"Exportar selección como csv",exporterAllAsPdf:"Exportar todo como pdf",exporterVisibleAsPdf:"Exportar vista como pdf",exporterSelectedAsPdf:"Exportar selección como pdf"},importer:{noHeaders:"No fue posible derivar los nombres de las columnas, ¿tiene encabezados el archivo?",noObjects:"No fue posible obtener registros, ¿contiene datos el archivo, aparte de los encabezados?",invalidCsv:"No fue posible procesar el archivo, ¿es un CSV válido?",invalidJson:"No fue posible procesar el archivo, ¿es un Json válido?",jsonNotArray:"El archivo json importado debe contener un array, abortando."}}),a}])}])}(),function(){angular.module("ui.grid").config(["$provide",function(a){a.decorator("i18nService",["$delegate",function(a){return a.add("fa",{aggregate:{label:"موردها"},groupPanel:{description:"یک عنوان ستون اینجا را بردار و به گروهی از آن ستون بیانداز."},search:{placeholder:"جستجو...",showingItems:"نمایش موردها:",selectedItems:"موردهای انتخاب‌شده:",totalItems:"همهٔ موردها:",size:"اندازهٔ صفحه:",first:"صفحهٔ اول",next:"صفحهٔ بعد",previous:"صفحهٔ قبل",last:"آخرین صفحه"},menu:{text:"انتخاب ستون‌ها:"},column:{hide:"ستون پنهان کن"},aggregation:{count:"total rows: ",sum:"total: ",avg:"avg: ",min:"min: ",max:"max: "},gridMenu:{columns:"Columns:",importerTitle:"Import file",exporterAllAsCsv:"Export all data as csv",exporterVisibleAsCsv:"Export visible data as csv",exporterSelectedAsCsv:"Export selected data as csv",exporterAllAsPdf:"Export all data as pdf",exporterVisibleAsPdf:"Export visible data as pdf",exporterSelectedAsPdf:"Export selected data as pdf"},importer:{noHeaders:"Column names were unable to be derived, does the file have a header?",noObjects:"Objects were not able to be derived, was there data in the file other than headers?",invalidCsv:"File was unable to be processed, is it valid CSV?",invalidJson:"File was unable to be processed, is it valid Json?",jsonNotArray:"Imported json file must contain an array, aborting."}}),a}])}])}(),function(){angular.module("ui.grid").config(["$provide",function(a){a.decorator("i18nService",["$delegate",function(a){return a.add("fi",{aggregate:{label:"rivit"},groupPanel:{description:"Raahaa ja pudota otsikko tähän ryhmittääksesi sarakkeen mukaan."},search:{placeholder:"Hae...",showingItems:"Näytetään rivejä:",selectedItems:"Valitut rivit:",totalItems:"Rivejä yht.:",size:"Näytä:",first:"Ensimmäinen sivu",next:"Seuraava sivu",previous:"Edellinen sivu",last:"Viimeinen sivu"},menu:{text:"Valitse sarakkeet:"},sort:{ascending:"Järjestä nouseva",descending:"Järjestä laskeva",remove:"Poista järjestys"},column:{hide:"Piilota sarake"},aggregation:{count:"Rivejä yht.: ",sum:"Summa: ",avg:"K.a.: ",min:"Min: ",max:"Max: "},pinning:{pinLeft:"Lukitse vasemmalle",pinRight:"Lukitse oikealle",unpin:"Poista lukitus"},gridMenu:{columns:"Sarakkeet:",importerTitle:"Tuo tiedosto",exporterAllAsCsv:"Vie tiedot csv-muodossa",exporterVisibleAsCsv:"Vie näkyvä tieto csv-muodossa",exporterSelectedAsCsv:"Vie valittu tieto csv-muodossa",exporterAllAsPdf:"Vie tiedot pdf-muodossa",exporterVisibleAsPdf:"Vie näkyvä tieto pdf-muodossa",exporterSelectedAsPdf:"Vie valittu tieto pdf-muodossa"},importer:{noHeaders:"Sarakkeen nimiä ei voitu päätellä, onko tiedostossa otsikkoriviä?",noObjects:"Tietoja ei voitu lukea, onko tiedostossa muuta kuin otsikkot?",invalidCsv:"Tiedostoa ei voitu käsitellä, oliko se CSV-muodossa?",invalidJson:"Tiedostoa ei voitu käsitellä, oliko se JSON-muodossa?",jsonNotArray:"Tiedosto ei sisältänyt taulukkoa, lopetetaan."}}),a}])}])}(),function(){angular.module("ui.grid").config(["$provide",function(a){a.decorator("i18nService",["$delegate",function(a){return a.add("fr",{aggregate:{label:"éléments"},groupPanel:{description:"Faites glisser une en-tête de colonne ici pour créer un groupe de colonnes."},search:{placeholder:"Recherche...",showingItems:"Affichage des éléments :",selectedItems:"Éléments sélectionnés :",totalItems:"Nombre total d'éléments:",size:"Taille de page:",first:"Première page",next:"Page Suivante",previous:"Page précédente",last:"Dernière page"},menu:{text:"Choisir des colonnes :"},sort:{ascending:"Trier par ordre croissant",descending:"Trier par ordre décroissant",remove:"Enlever le tri"},column:{hide:"Cacher la colonne"},aggregation:{count:"lignes totales: ",sum:"total: ",avg:"moy: ",min:"min: ",max:"max: "},pinning:{pinLeft:"Épingler à gauche",pinRight:"Épingler à droite",unpin:"Détacher"},gridMenu:{columns:"Colonnes:",importerTitle:"Importer un fichier",exporterAllAsCsv:"Exporter toutes les données en CSV",exporterVisibleAsCsv:"Exporter les données visibles en CSV",exporterSelectedAsCsv:"Exporter les données sélectionnées en CSV",exporterAllAsPdf:"Exporter toutes les données en PDF",exporterVisibleAsPdf:"Exporter les données visibles en PDF",exporterSelectedAsPdf:"Exporter les données sélectionnées en PDF"},importer:{noHeaders:"Impossible de déterminer le nom des colonnes, le fichier possède-t-il une en-tête ?",noObjects:"Aucun objet trouvé, le fichier possède-t-il des données autres que l'en-tête ?",invalidCsv:"Le fichier n'a pas pu être traité, le CSV est-il valide ?",invalidJson:"Le fichier n'a pas pu être traité, le JSON est-il valide ?",jsonNotArray:"Le fichier JSON importé doit contenir un tableau, abandon."},pagination:{sizes:"éléments par page",totalItems:"éléments"},grouping:{group:"Grouper",ungroup:"Dégrouper",aggregate_count:"Agg: Compte",aggregate_sum:"Agg: Somme",aggregate_max:"Agg: Max",aggregate_min:"Agg: Min",aggregate_avg:"Agg: Moy",aggregate_remove:"Agg: Retirer"}}),a}])}])}(),function(){angular.module("ui.grid").config(["$provide",function(a){a.decorator("i18nService",["$delegate",function(a){return a.add("he",{aggregate:{label:"items"},groupPanel:{description:"גרור עמודה לכאן ושחרר בכדי לקבץ עמודה זו."},search:{placeholder:"חפש...",showingItems:"מציג:",selectedItems:'סה"כ נבחרו:',totalItems:'סה"כ רשומות:',size:"תוצאות בדף:",first:"דף ראשון",next:"דף הבא",previous:"דף קודם",last:"דף אחרון"},menu:{text:"בחר עמודות:"},sort:{ascending:"סדר עולה",descending:"סדר יורד",remove:"בטל"},column:{hide:"טור הסתר"},aggregation:{count:"total rows: ",sum:"total: ",avg:"avg: ",min:"min: ",max:"max: "},gridMenu:{columns:"Columns:",importerTitle:"Import file",exporterAllAsCsv:"Export all data as csv",exporterVisibleAsCsv:"Export visible data as csv",exporterSelectedAsCsv:"Export selected data as csv",exporterAllAsPdf:"Export all data as pdf",exporterVisibleAsPdf:"Export visible data as pdf",exporterSelectedAsPdf:"Export selected data as pdf"},importer:{noHeaders:"Column names were unable to be derived, does the file have a header?",noObjects:"Objects were not able to be derived, was there data in the file other than headers?",invalidCsv:"File was unable to be processed, is it valid CSV?",invalidJson:"File was unable to be processed, is it valid Json?",jsonNotArray:"Imported json file must contain an array, aborting."}}),a}])}])}(),function(){angular.module("ui.grid").config(["$provide",function(a){a.decorator("i18nService",["$delegate",function(a){return a.add("hy",{aggregate:{label:"տվյալներ"},groupPanel:{description:"Ըստ սյան խմբավորելու համար քաշեք և գցեք վերնագիրն այստեղ։"},search:{placeholder:"Փնտրում...",showingItems:"Ցուցադրված տվյալներ՝",selectedItems:"Ընտրված:",totalItems:"Ընդամենը՝",size:"Տողերի քանակը էջում՝",first:"Առաջին էջ",next:"Հաջորդ էջ",previous:"Նախորդ էջ",last:"Վերջին էջ"},menu:{text:"Ընտրել սյուները:"},sort:{ascending:"Աճման կարգով",descending:"Նվազման կարգով",remove:"Հանել "},column:{hide:"Թաքցնել սյունը"},aggregation:{count:"ընդամենը տող՝ ",sum:"ընդամենը՝ ",avg:"միջին՝ ",min:"մին՝ ",max:"մաքս՝ "},pinning:{pinLeft:"Կպցնել ձախ կողմում",pinRight:"Կպցնել աջ կողմում",unpin:"Արձակել"},gridMenu:{columns:"Սյուներ:",importerTitle:"Ներմուծել ֆայլ",exporterAllAsCsv:"Արտահանել ամբողջը CSV",exporterVisibleAsCsv:"Արտահանել երևացող տվյալները CSV",exporterSelectedAsCsv:"Արտահանել ընտրված տվյալները CSV",exporterAllAsPdf:"Արտահանել PDF",exporterVisibleAsPdf:"Արտահանել երևացող տվյալները PDF",exporterSelectedAsPdf:"Արտահանել ընտրված տվյալները PDF"},importer:{noHeaders:"Հնարավոր չեղավ որոշել սյան վերնագրերը։ Արդյո՞ք ֆայլը ունի վերնագրեր։",noObjects:"Հնարավոր չեղավ կարդալ տվյալները։ Արդյո՞ք ֆայլում կան տվյալներ։",invalidCsv:"Հնարավոր չեղավ մշակել ֆայլը։ Արդյո՞ք այն վավեր CSV է։",invalidJson:"Հնարավոր չեղավ մշակել ֆայլը։ Արդյո՞ք այն վավեր Json է։",jsonNotArray:"Ներմուծված json ֆայլը պետք է պարունակի զանգված, կասեցվում է։"}}),a}])}])}(),function(){angular.module("ui.grid").config(["$provide",function(a){a.decorator("i18nService",["$delegate",function(a){return a.add("it",{aggregate:{label:"elementi"},groupPanel:{description:"Trascina un'intestazione all'interno del gruppo della colonna."},search:{placeholder:"Ricerca...",showingItems:"Mostra:",selectedItems:"Selezionati:",totalItems:"Totali:",size:"Tot Pagine:",first:"Prima",next:"Prossima",previous:"Precedente",last:"Ultima"},menu:{text:"Scegli le colonne:"},sort:{ascending:"Asc.",descending:"Desc.",remove:"Annulla ordinamento"},column:{hide:"Nascondi"},aggregation:{count:"righe totali: ",sum:"tot: ",avg:"media: ",min:"minimo: ",max:"massimo: "},pinning:{pinLeft:"Blocca a sx",pinRight:"Blocca a dx",unpin:"Blocca in alto"},gridMenu:{columns:"Colonne:",importerTitle:"Importa",exporterAllAsCsv:"Esporta tutti i dati in CSV",exporterVisibleAsCsv:"Esporta i dati visibili in CSV",exporterSelectedAsCsv:"Esporta i dati selezionati in CSV",exporterAllAsPdf:"Esporta tutti i dati in PDF",exporterVisibleAsPdf:"Esporta i dati visibili in PDF",exporterSelectedAsPdf:"Esporta i dati selezionati in PDF"},importer:{noHeaders:"Impossibile reperire i nomi delle colonne, sicuro che siano indicati all'interno del file?",noObjects:"Impossibile reperire gli oggetti, sicuro che siano indicati all'interno del file?",invalidCsv:"Impossibile elaborare il file, sicuro che sia un CSV?",invalidJson:"Impossibile elaborare il file, sicuro che sia un JSON valido?",jsonNotArray:"Errore! Il file JSON da importare deve contenere un array."},grouping:{group:"Raggruppa",ungroup:"Separa",aggregate_count:"Agg: N. Elem.",aggregate_sum:"Agg: Somma",aggregate_max:"Agg: Massimo",aggregate_min:"Agg: Minimo",aggregate_avg:"Agg: Media",aggregate_remove:"Agg: Rimuovi"}}),a}])}])}(),function(){angular.module("ui.grid").config(["$provide",function(a){a.decorator("i18nService",["$delegate",function(a){return a.add("ja",{aggregate:{label:"件"},groupPanel:{description:"列名部分をここにドラッグアンドドロップすることで列ごとにグループ分けを行うことができます。"},search:{placeholder:"検索...",showingItems:"絞込み件数:",selectedItems:"選択件数:",totalItems:"全件数:",size:"ページサイズ: ",first:"最初のページ",next:"次のページ",previous:"前のページ",last:"最後のページ"},menu:{text:"列選択:"},sort:{ascending:"昇順ソート",descending:"降順ソート",remove:"ソート取消"},column:{hide:"列を隠す"},aggregation:{count:"合計件数: ",sum:"合計: ",avg:"平均: ",min:"最小値: ",max:"最大値: "},pinning:{pinLeft:"左にピン留め",pinRight:"右にピン留め",unpin:"ピン留め取消"},gridMenu:{columns:"列:",importerTitle:"インポートファイル",exporterAllAsCsv:"全てのデータをCSV形式でエクスポート",exporterVisibleAsCsv:"絞込み済みデータをCSV形式でエクスポート",exporterSelectedAsCsv:"選択しているデータをCSV形式でエクスポート",exporterAllAsPdf:"全てのデータをPDFでエクスポート",exporterVisibleAsPdf:"絞込み済みデータをPDFでエクスポート",exporterSelectedAsPdf:"選択しているデータをPDFでエクスポート"},importer:{noHeaders:"列名が抽出できません。ヘッダーは設定されていますか？",noObjects:"データが抽出できません。ファイルにデータは含まれていますか？",invalidCsv:"処理を行うことができません。ファイルは有効なCSVファイルですか？",invalidJson:"処理を行うことができません。ファイルは有効なJSONファイルですか？",jsonNotArray:"JSONファイルは配列を含んでいる必要があります。処理を中断します。"},pagination:{sizes:"件 / ページ",totalItems:"件"}}),a}])}])}(),function(){angular.module("ui.grid").config(["$provide",function(a){a.decorator("i18nService",["$delegate",function(a){return a.add("ko",{aggregate:{label:"아이템"},groupPanel:{description:"컬럼으로 그룹핑하기 위해서는 컬럼 헤더를 끌어 떨어뜨려 주세요."},search:{placeholder:"검색...",showingItems:"항목 보여주기:",selectedItems:"선택 항목:",totalItems:"전체 항목:",size:"페이지 크기:",first:"첫번째 페이지",next:"다음 페이지",previous:"이전 페이지",last:"마지막 페이지"},menu:{text:"컬럼을 선택하세요:"},sort:{ascending:"오름차순 정렬",descending:"내림차순 정렬",remove:"소팅 제거"},column:{hide:"컬럼 제거"},aggregation:{count:"전체 갯수: ",sum:"전체: ",avg:"평균: ",min:"최소: ",max:"최대: "},pinning:{pinLeft:"왼쪽 핀",pinRight:"오른쪽 핀",unpin:"핀 제거"},gridMenu:{columns:"컬럼:",importerTitle:"파일 가져오기",exporterAllAsCsv:"csv로 모든 데이터 내보내기",exporterVisibleAsCsv:"csv로 보이는 데이터 내보내기",exporterSelectedAsCsv:"csv로 선택된 데이터 내보내기",exporterAllAsPdf:"pdf로 모든 데이터 내보내기",exporterVisibleAsPdf:"pdf로 보이는 데이터 내보내기",exporterSelectedAsPdf:"pdf로 선택 데이터 내보내기"},importer:{noHeaders:"컬럼명이 지정되어 있지 않습니다. 파일에 헤더가 명시되어 있는지 확인해 주세요.",noObjects:"데이터가 지정되어 있지 않습니다. 데이터가 파일에 있는지 확인해 주세요.",invalidCsv:"파일을 처리할 수 없습니다. 올바른 csv인지 확인해 주세요.",invalidJson:"파일을 처리할 수 없습니다. 올바른 json인지 확인해 주세요.",jsonNotArray:"json 파일은 배열을 포함해야 합니다."},pagination:{sizes:"페이지당 항목",totalItems:"전체 항목"}}),a}])}])}(),function(){angular.module("ui.grid").config(["$provide",function(a){a.decorator("i18nService",["$delegate",function(a){return a.add("nl",{aggregate:{label:"items"},groupPanel:{description:"Sleep hier een kolomnaam heen om op te groeperen."},search:{placeholder:"Zoeken...",showingItems:"Getoonde items:",selectedItems:"Geselecteerde items:",totalItems:"Totaal aantal items:",size:"Items per pagina:",first:"Eerste pagina",next:"Volgende pagina",previous:"Vorige pagina",last:"Laatste pagina"},menu:{text:"Kies kolommen:"},sort:{ascending:"Sorteer oplopend",descending:"Sorteer aflopend",remove:"Verwijder sortering"},column:{hide:"Verberg kolom"},aggregation:{count:"Aantal rijen: ",sum:"Som: ",avg:"Gemiddelde: ",min:"Min: ",max:"Max: "},pinning:{pinLeft:"Zet links vast",pinRight:"Zet rechts vast",unpin:"Maak los"},gridMenu:{columns:"Kolommen:",importerTitle:"Importeer bestand",exporterAllAsCsv:"Exporteer alle data als csv",exporterVisibleAsCsv:"Exporteer zichtbare data als csv",exporterSelectedAsCsv:"Exporteer geselecteerde data als csv",exporterAllAsPdf:"Exporteer alle data als pdf",exporterVisibleAsPdf:"Exporteer zichtbare data als pdf",exporterSelectedAsPdf:"Exporteer geselecteerde data als pdf"},importer:{noHeaders:"Kolomnamen kunnen niet worden afgeleid. Heeft het bestand een header?",noObjects:"Objecten kunnen niet worden afgeleid. Bevat het bestand data naast de headers?",invalidCsv:"Het bestand kan niet verwerkt worden. Is het een valide csv bestand?",invalidJson:"Het bestand kan niet verwerkt worden. Is het valide json?",jsonNotArray:"Het json bestand moet een array bevatten. De actie wordt geannuleerd."},pagination:{sizes:"items per pagina",totalItems:"items"},grouping:{group:"Groepeer",ungroup:"Groepering opheffen",aggregate_count:"Agg: Aantal",aggregate_sum:"Agg: Som",aggregate_max:"Agg: Max",aggregate_min:"Agg: Min",aggregate_avg:"Agg: Gem",aggregate_remove:"Agg: Verwijder"}}),a}])}])}(),function(){angular.module("ui.grid").config(["$provide",function(a){a.decorator("i18nService",["$delegate",function(a){return a.add("pt-br",{aggregate:{label:"itens"},groupPanel:{description:"Arraste e solte uma coluna aqui para agrupar por essa coluna"},search:{placeholder:"Procurar...",showingItems:"Mostrando os Itens:",selectedItems:"Items Selecionados:",totalItems:"Total de Itens:",size:"Tamanho da Página:",first:"Primeira Página",next:"Próxima Página",previous:"Página Anterior",last:"Última Página"},menu:{text:"Selecione as colunas:"},sort:{ascending:"Ordenar Ascendente",descending:"Ordenar Descendente",remove:"Remover Ordenação"},column:{hide:"Esconder coluna"},aggregation:{count:"total de linhas: ",sum:"total: ",avg:"med: ",min:"min: ",max:"max: "},pinning:{pinLeft:"Fixar Esquerda",pinRight:"Fixar Direita",unpin:"Desprender"},gridMenu:{columns:"Colunas:",importerTitle:"Importar arquivo",exporterAllAsCsv:"Exportar todos os dados como csv",exporterVisibleAsCsv:"Exportar dados visíveis como csv",exporterSelectedAsCsv:"Exportar dados selecionados como csv",exporterAllAsPdf:"Exportar todos os dados como pdf",exporterVisibleAsPdf:"Exportar dados visíveis como pdf",exporterSelectedAsPdf:"Exportar dados selecionados como pdf"},importer:{noHeaders:"Nomes de colunas não puderam ser derivados. O arquivo tem um cabeçalho?",noObjects:"Objetos não puderam ser derivados. Havia dados no arquivo, além dos cabeçalhos?",invalidCsv:"Arquivo não pode ser processado. É um CSV válido?",invalidJson:"Arquivo não pode ser processado. É um Json válido?",jsonNotArray:"Arquivo json importado tem que conter um array. Abortando."},pagination:{sizes:"itens por página",totalItems:"itens"},grouping:{group:"Agrupar",ungroup:"Desagrupar",aggregate_count:"Agr: Contar",aggregate_sum:"Agr: Soma",aggregate_max:"Agr: Max",aggregate_min:"Agr: Min",aggregate_avg:"Agr: Med",aggregate_remove:"Agr: Remover"}}),a}])}])}(),function(){angular.module("ui.grid").config(["$provide",function(a){a.decorator("i18nService",["$delegate",function(a){return a.add("pt",{aggregate:{label:"itens"},groupPanel:{description:"Arraste e solte uma coluna aqui para agrupar por essa coluna"},search:{placeholder:"Procurar...",showingItems:"Mostrando os Itens:",selectedItems:"Items Selecionados:",totalItems:"Total de Itens:",size:"Tamanho da Página:",first:"Primeira Página",next:"Próxima Página",previous:"Página Anterior",last:"Última Página"},menu:{text:"Selecione as colunas:"},sort:{ascending:"Ordenar Ascendente",descending:"Ordenar Descendente",remove:"Remover Ordenação"},column:{hide:"Esconder coluna"},aggregation:{count:"total de linhas: ",sum:"total: ",avg:"med: ",min:"min: ",max:"max: "},pinning:{pinLeft:"Fixar Esquerda",pinRight:"Fixar Direita",unpin:"Desprender"},gridMenu:{columns:"Colunas:",importerTitle:"Importar ficheiro",exporterAllAsCsv:"Exportar todos os dados como csv",exporterVisibleAsCsv:"Exportar dados visíveis como csv",exporterSelectedAsCsv:"Exportar dados selecionados como csv",exporterAllAsPdf:"Exportar todos os dados como pdf",exporterVisibleAsPdf:"Exportar dados visíveis como pdf",exporterSelectedAsPdf:"Exportar dados selecionados como pdf"},importer:{noHeaders:"Nomes de colunas não puderam ser derivados. O ficheiro tem um cabeçalho?",noObjects:"Objetos não puderam ser derivados. Havia dados no ficheiro, além dos cabeçalhos?",invalidCsv:"Ficheiro não pode ser processado. É um CSV válido?",invalidJson:"Ficheiro não pode ser processado. É um Json válido?",jsonNotArray:"Ficheiro json importado tem que conter um array. Interrompendo."},pagination:{sizes:"itens por página",totalItems:"itens"},grouping:{group:"Agrupar",ungroup:"Desagrupar",aggregate_count:"Agr: Contar",aggregate_sum:"Agr: Soma",aggregate_max:"Agr: Max",aggregate_min:"Agr: Min",aggregate_avg:"Agr: Med",aggregate_remove:"Agr: Remover"}}),a}])}])}(),function(){angular.module("ui.grid").config(["$provide",function(a){a.decorator("i18nService",["$delegate",function(a){return a.add("ru",{aggregate:{label:"элементы"},groupPanel:{description:"Для группировки по столбцу перетащите сюда его название."},search:{placeholder:"Поиск...",showingItems:"Показать элементы:",selectedItems:"Выбранные элементы:",totalItems:"Всего элементов:",size:"Размер страницы:",first:"Первая страница",next:"Следующая страница",previous:"Предыдущая страница",last:"Последняя страница"},menu:{text:"Выбрать столбцы:"},sort:{ascending:"По возрастанию",descending:"По убыванию",remove:"Убрать сортировку"},column:{hide:"спрятать столбец"},aggregation:{count:"всего строк: ",sum:"итого: ",avg:"среднее: ",min:"мин: ",max:"макс: "},gridMenu:{columns:"Столбцы:",importerTitle:"Import file",exporterAllAsCsv:"Экспортировать всё в CSV",exporterVisibleAsCsv:"Экспортировать видимые данные в CSV",exporterSelectedAsCsv:"Экспортировать выбранные данные в CSV",exporterAllAsPdf:"Экспортировать всё в PDF",exporterVisibleAsPdf:"Экспортировать видимые данные в PDF",exporterSelectedAsPdf:"Экспортировать выбранные данные в PDF"},importer:{noHeaders:"Column names were unable to be derived, does the file have a header?",noObjects:"Objects were not able to be derived, was there data in the file other than headers?",invalidCsv:"File was unable to be processed, is it valid CSV?",invalidJson:"File was unable to be processed, is it valid Json?",jsonNotArray:"Imported json file must contain an array, aborting."}}),a}])}])}(),function(){angular.module("ui.grid").config(["$provide",function(a){a.decorator("i18nService",["$delegate",function(a){return a.add("sk",{aggregate:{label:"items"},groupPanel:{description:"Pretiahni sem názov stĺpca pre zoskupenie podľa toho stĺpca."},search:{placeholder:"Hľadaj...",showingItems:"Zobrazujem položky:",selectedItems:"Vybraté položky:",totalItems:"Počet položiek:",size:"Počet:",first:"Prvá strana",next:"Ďalšia strana",previous:"Predchádzajúca strana",last:"Posledná strana"},menu:{text:"Vyberte stĺpce:"},sort:{ascending:"Zotriediť vzostupne",
descending:"Zotriediť zostupne",remove:"Vymazať triedenie"},aggregation:{count:"total rows: ",sum:"total: ",avg:"avg: ",min:"min: ",max:"max: "},gridMenu:{columns:"Columns:",importerTitle:"Import file",exporterAllAsCsv:"Export all data as csv",exporterVisibleAsCsv:"Export visible data as csv",exporterSelectedAsCsv:"Export selected data as csv",exporterAllAsPdf:"Export all data as pdf",exporterVisibleAsPdf:"Export visible data as pdf",exporterSelectedAsPdf:"Export selected data as pdf"},importer:{noHeaders:"Column names were unable to be derived, does the file have a header?",noObjects:"Objects were not able to be derived, was there data in the file other than headers?",invalidCsv:"File was unable to be processed, is it valid CSV?",invalidJson:"File was unable to be processed, is it valid Json?",jsonNotArray:"Imported json file must contain an array, aborting."}}),a}])}])}(),function(){angular.module("ui.grid").config(["$provide",function(a){a.decorator("i18nService",["$delegate",function(a){return a.add("sv",{aggregate:{label:"Artiklar"},groupPanel:{description:"Dra en kolumnrubrik hit och släpp den för att gruppera efter den kolumnen."},search:{placeholder:"Sök...",showingItems:"Visar artiklar:",selectedItems:"Valda artiklar:",totalItems:"Antal artiklar:",size:"Sidstorlek:",first:"Första sidan",next:"Nästa sida",previous:"Föregående sida",last:"Sista sidan"},menu:{text:"Välj kolumner:"},sort:{ascending:"Sortera stigande",descending:"Sortera fallande",remove:"Inaktivera sortering"},column:{hide:"Göm kolumn"},aggregation:{count:"Antal rader: ",sum:"Summa: ",avg:"Genomsnitt: ",min:"Min: ",max:"Max: "},pinning:{pinLeft:"Fäst vänster",pinRight:"Fäst höger",unpin:"Lösgör"},gridMenu:{columns:"Kolumner:",importerTitle:"Importera fil",exporterAllAsCsv:"Exportera all data som CSV",exporterVisibleAsCsv:"Exportera synlig data som CSV",exporterSelectedAsCsv:"Exportera markerad data som CSV",exporterAllAsPdf:"Exportera all data som PDF",exporterVisibleAsPdf:"Exportera synlig data som PDF",exporterSelectedAsPdf:"Exportera markerad data som PDF"},importer:{noHeaders:"Kolumnnamn kunde inte härledas. Har filen ett sidhuvud?",noObjects:"Objekt kunde inte härledas. Har filen data undantaget sidhuvud?",invalidCsv:"Filen kunde inte behandlas, är den en giltig CSV?",invalidJson:"Filen kunde inte behandlas, är den en giltig JSON?",jsonNotArray:"Importerad JSON-fil måste innehålla ett fält. Import avbruten."},pagination:{sizes:"Artiklar per sida",totalItems:"Artiklar"}}),a}])}])}(),function(){var a=["uiT","uiTranslate"],b=["t","uiTranslate"],c=angular.module("ui.grid.i18n");c.constant("i18nConstants",{MISSING:"[MISSING]",UPDATE_EVENT:"$uiI18n",LOCALE_DIRECTIVE_ALIAS:"uiI18n",DEFAULT_LANG:"en"}),c.service("i18nService",["$log","i18nConstants","$rootScope",function(a,b,c){var d={_langs:{},current:null,get:function(a){return this._langs[a.toLowerCase()]},add:function(a,b){var c=a.toLowerCase();this._langs[c]||(this._langs[c]={}),angular.extend(this._langs[c],b)},getAllLangs:function(){var a=[];if(!this._langs)return a;for(var b in this._langs)a.push(b);return a},setCurrent:function(a){this.current=a.toLowerCase()},getCurrentLang:function(){return this.current}},e={add:function(a,b){"object"==typeof a?angular.forEach(a,function(a){a&&d.add(a,b)}):d.add(a,b)},getAllLangs:function(){return d.getAllLangs()},get:function(a){var b=a?a:e.getCurrentLang();return d.get(b)},getSafeText:function(a,c){var f=c?c:e.getCurrentLang(),g=d.get(f);if(!g)return b.MISSING;for(var h=a.split("."),i=g,j=0;j<h.length;++j){if(void 0===i[h[j]]||null===i[h[j]])return b.MISSING;i=i[h[j]]}return i},setCurrentLang:function(a){a&&(d.setCurrent(a),c.$broadcast(b.UPDATE_EVENT))},getCurrentLang:function(){var a=d.getCurrentLang();return a||(a=b.DEFAULT_LANG,d.setCurrent(a)),a}};return e}]);var d=function(a,b){return{compile:function(){return{pre:function(c,d,e){var f=b.LOCALE_DIRECTIVE_ALIAS,g=c.$eval(e[f]);g?c.$watch(e[f],function(){a.setCurrentLang(g)}):e.$$observers&&e.$observe(f,function(){a.setCurrentLang(e[f]||b.DEFAULT_LANG)})}}}}};c.directive("uiI18n",["i18nService","i18nConstants",d]);var e=function(b,c,d){return{restrict:"EA",compile:function(){return{pre:function(e,f,g){var h,i=a[0],j=a[1],k=g[i]||g[j]||f.html(),l=d.MISSING+k;if(g.$$observers){var m=g[i]?i:j;h=g.$observe(m,function(a){a&&f.html(b(a)(c.getCurrentLang())||l)})}var n=b(k),o=e.$on(d.UPDATE_EVENT,function(a){h?h(g[i]||g[j]):f.html(n(c.get())||l)});e.$on("$destroy",o),f.html(n(c.get())||l)}}}}};angular.forEach(a,function(a){c.directive(a,["$parse","i18nService","i18nConstants",e])});var f=function(a,b,c){return function(d){var e=a(d);return e(b.get())||c.MISSING+d}};angular.forEach(b,function(a){c.filter(a,["$parse","i18nService","i18nConstants",f])})}(),function(){angular.module("ui.grid").config(["$provide",function(a){a.decorator("i18nService",["$delegate",function(a){return a.add("zh-cn",{aggregate:{label:"行"},groupPanel:{description:"拖曳表头到此处进行分组"},search:{placeholder:"查找",showingItems:"已显示行数：",selectedItems:"已选择行数：",totalItems:"总行数：",size:"每页显示行数：",first:"首页",next:"下一页",previous:"上一页",last:"末页"},menu:{text:"选择列："},sort:{ascending:"升序",descending:"降序",remove:"取消排序"},column:{hide:"隐藏列"},aggregation:{count:"计数：",sum:"求和：",avg:"均值：",min:"最小值：",max:"最大值："},pinning:{pinLeft:"左侧固定",pinRight:"右侧固定",unpin:"取消固定"},gridMenu:{columns:"列：",importerTitle:"导入文件",exporterAllAsCsv:"导出全部数据到CSV",exporterVisibleAsCsv:"导出可见数据到CSV",exporterSelectedAsCsv:"导出已选数据到CSV",exporterAllAsPdf:"导出全部数据到PDF",exporterVisibleAsPdf:"导出可见数据到PDF",exporterSelectedAsPdf:"导出已选数据到PDF"},importer:{noHeaders:"无法获取列名，确定文件包含表头？",noObjects:"无法获取数据，确定文件包含数据？",invalidCsv:"无法处理文件，确定是合法的CSV文件？",invalidJson:"无法处理文件，确定是合法的JSON文件？",jsonNotArray:"导入的文件不是JSON数组！"},pagination:{sizes:"行每页",totalItems:"行"}}),a}])}])}(),function(){angular.module("ui.grid").config(["$provide",function(a){a.decorator("i18nService",["$delegate",function(a){return a.add("zh-tw",{aggregate:{label:"行"},groupPanel:{description:"拖曳表頭到此處進行分組"},search:{placeholder:"查找",showingItems:"已顯示行數：",selectedItems:"已選擇行數：",totalItems:"總行數：",size:"每頁顯示行數：",first:"首頁",next:"下壹頁",previous:"上壹頁",last:"末頁"},menu:{text:"選擇列："},sort:{ascending:"升序",descending:"降序",remove:"取消排序"},column:{hide:"隱藏列"},aggregation:{count:"計數：",sum:"求和：",avg:"均值：",min:"最小值：",max:"最大值："},pinning:{pinLeft:"左側固定",pinRight:"右側固定",unpin:"取消固定"},gridMenu:{columns:"列：",importerTitle:"導入文件",exporterAllAsCsv:"導出全部數據到CSV",exporterVisibleAsCsv:"導出可見數據到CSV",exporterSelectedAsCsv:"導出已選數據到CSV",exporterAllAsPdf:"導出全部數據到PDF",exporterVisibleAsPdf:"導出可見數據到PDF",exporterSelectedAsPdf:"導出已選數據到PDF"},importer:{noHeaders:"無法獲取列名，確定文件包含表頭？",noObjects:"無法獲取數據，確定文件包含數據？",invalidCsv:"無法處理文件，確定是合法的CSV文件？",invalidJson:"無法處理文件，確定是合法的JSON文件？",jsonNotArray:"導入的文件不是JSON數組！"},pagination:{sizes:"行每頁",totalItems:"行"}}),a}])}])}(),function(){"use strict";var a=angular.module("ui.grid.autoResize",["ui.grid"]);a.directive("uiGridAutoResize",["$timeout","gridUtil",function(a,b){return{require:"uiGrid",scope:!1,link:function(a,c,d,e){function f(){i=b.elementHeight(c),h=b.elementWidth(c)}function g(){clearTimeout(j),j=setTimeout(function(){var d=b.elementHeight(c),j=b.elementWidth(c);d!==i||j!==h?(e.grid.gridHeight=d,e.grid.gridWidth=j,a.$apply(function(){e.grid.refresh().then(function(){f(),g()})})):g()},250)}var h,i;f();var j;g(),a.$on("$destroy",function(){clearTimeout(j)})}}}])}(),function(){"use strict";function a(a,b){this.row=a,this.col=b}var b=angular.module("ui.grid.cellNav",["ui.grid"]);b.constant("uiGridCellNavConstants",{FEATURE_NAME:"gridCellNav",CELL_NAV_EVENT:"cellNav",direction:{LEFT:0,RIGHT:1,UP:2,DOWN:3,PG_UP:4,PG_DOWN:5},EVENT_TYPE:{KEYDOWN:0,CLICK:1,CLEAR:2}}),b.factory("uiGridCellNavFactory",["gridUtil","uiGridConstants","uiGridCellNavConstants","$q",function(b,c,d,e){var f=function(a,b,c,d){this.rows=a.visibleRowCache,this.columns=b.visibleColumnCache,this.leftColumns=c?c.visibleColumnCache:[],this.rightColumns=d?d.visibleColumnCache:[],this.bodyContainer=a};return f.prototype.getFocusableCols=function(){var a=this.leftColumns.concat(this.columns,this.rightColumns);return a.filter(function(a){return a.colDef.allowCellFocus})},f.prototype.getFocusableRows=function(){return this.rows.filter(function(a){return a.allowCellFocus!==!1})},f.prototype.getNextRowCol=function(a,b,c){switch(a){case d.direction.LEFT:return this.getRowColLeft(b,c);case d.direction.RIGHT:return this.getRowColRight(b,c);case d.direction.UP:return this.getRowColUp(b,c);case d.direction.DOWN:return this.getRowColDown(b,c);case d.direction.PG_UP:return this.getRowColPageUp(b,c);case d.direction.PG_DOWN:return this.getRowColPageDown(b,c)}},f.prototype.initializeSelection=function(){var b=this.getFocusableCols(),c=this.getFocusableRows();if(0===b.length||0===c.length)return null;return new a(c[0],b[0])},f.prototype.getRowColLeft=function(b,c){var d=this.getFocusableCols(),e=this.getFocusableRows(),f=d.indexOf(c),g=e.indexOf(b);-1===f&&(f=1);var h=0===f?d.length-1:f-1;return h>f?0===g?new a(b,d[h]):new a(e[g-1],d[h]):new a(b,d[h])},f.prototype.getRowColRight=function(b,c){var d=this.getFocusableCols(),e=this.getFocusableRows(),f=d.indexOf(c),g=e.indexOf(b);-1===f&&(f=0);var h=f===d.length-1?0:f+1;return f>h?g===e.length-1?new a(b,d[h]):new a(e[g+1],d[h]):new a(b,d[h])},f.prototype.getRowColDown=function(b,c){var d=this.getFocusableCols(),e=this.getFocusableRows(),f=d.indexOf(c),g=e.indexOf(b);return-1===f&&(f=0),g===e.length-1?new a(b,d[f]):new a(e[g+1],d[f])},f.prototype.getRowColPageDown=function(b,c){var d=this.getFocusableCols(),e=this.getFocusableRows(),f=d.indexOf(c),g=e.indexOf(b);-1===f&&(f=0);var h=this.bodyContainer.minRowsToRender();return g>=e.length-h?new a(e[e.length-1],d[f]):new a(e[g+h],d[f])},f.prototype.getRowColUp=function(b,c){var d=this.getFocusableCols(),e=this.getFocusableRows(),f=d.indexOf(c),g=e.indexOf(b);return-1===f&&(f=0),0===g?new a(b,d[f]):new a(e[g-1],d[f])},f.prototype.getRowColPageUp=function(b,c){var d=this.getFocusableCols(),e=this.getFocusableRows(),f=d.indexOf(c),g=e.indexOf(b);-1===f&&(f=0);var h=this.bodyContainer.minRowsToRender();return 0>g-h?new a(e[0],d[f]):new a(e[g-h],d[f])},f}]),b.service("uiGridCellNavService",["gridUtil","uiGridConstants","uiGridCellNavConstants","$q","uiGridCellNavFactory","ScrollEvent",function(a,b,c,d,e,f){var g={initializeGrid:function(a){a.registerColumnBuilder(g.cellNavColumnBuilder),a.cellNav={},a.cellNav.lastRowCol=null,a.cellNav.focusedCells=[],g.defaultGridOptions(a.options);var b={events:{cellNav:{navigate:function(a,b){},viewPortKeyDown:function(a,b){}}},methods:{cellNav:{scrollToFocus:function(b,c){return g.scrollToFocus(a,b,c)},getFocusedCell:function(){return a.cellNav.lastRowCol},getCurrentSelection:function(){return a.cellNav.focusedCells},rowColSelectIndex:function(b){for(var c=-1,d=0;d<a.cellNav.focusedCells.length;d++)if(a.cellNav.focusedCells[d].col.uid===b.col.uid&&a.cellNav.focusedCells[d].row.uid===b.row.uid){c=d;break}return c}}}};a.api.registerEventsFromObject(b.events),a.api.registerMethodsFromObject(b.methods)},defaultGridOptions:function(a){a.modifierKeysToMultiSelectCells=a.modifierKeysToMultiSelectCells===!0},decorateRenderContainers:function(a){var b=a.hasRightContainer()?a.renderContainers.right:null,c=a.hasLeftContainer()?a.renderContainers.left:null;null!==c&&(a.renderContainers.left.cellNav=new e(a.renderContainers.body,c,b,a.renderContainers.body)),null!==b&&(a.renderContainers.right.cellNav=new e(a.renderContainers.body,b,a.renderContainers.body,c)),a.renderContainers.body.cellNav=new e(a.renderContainers.body,a.renderContainers.body,c,b)},getDirection:function(a){return a.keyCode===b.keymap.LEFT||a.keyCode===b.keymap.TAB&&a.shiftKey?c.direction.LEFT:a.keyCode===b.keymap.RIGHT||a.keyCode===b.keymap.TAB?c.direction.RIGHT:a.keyCode===b.keymap.UP||a.keyCode===b.keymap.ENTER&&a.shiftKey?c.direction.UP:a.keyCode===b.keymap.PG_UP?c.direction.PG_UP:a.keyCode===b.keymap.DOWN||a.keyCode===b.keymap.ENTER?c.direction.DOWN:a.keyCode===b.keymap.PG_DOWN?c.direction.PG_DOWN:null},cellNavColumnBuilder:function(a,b,c){var e=[];return a.allowCellFocus=void 0===a.allowCellFocus?!0:a.allowCellFocus,d.all(e)},scrollToFocus:function(a,b,c){var d=null,e=null;return"undefined"!=typeof b&&null!==b&&(d=a.getRow(b)),"undefined"!=typeof c&&null!==c&&(e=a.getColumn(c.name?c.name:c.field)),a.api.core.scrollToIfNecessary(d,e).then(function(){var b={row:d,col:e};null!==d&&null!==e&&a.cellNav.broadcastCellNav(b)})},getLeftWidth:function(a,b){var c=0;if(!b)return c;var d=a.renderContainers.body.visibleColumnCache.indexOf(b);a.renderContainers.body.visibleColumnCache.forEach(function(a,b){d>b&&(c+=a.drawnWidth)});var e=0===d?0:(d+1)/a.renderContainers.body.visibleColumnCache.length;return c+=b.drawnWidth*e}};return g}]),b.directive("uiGridCellnav",["gridUtil","uiGridCellNavService","uiGridCellNavConstants","uiGridConstants","$timeout",function(b,c,d,e,f){return{replace:!0,priority:-150,require:"^uiGrid",scope:!1,controller:function(){},compile:function(){return{pre:function(b,f,g,h){var i=b,j=h.grid;c.initializeGrid(j),h.cellNav={},h.cellNav.getActiveCell=function(){var a=f[0].getElementsByClassName("ui-grid-cell-focus");return a.length>0?a[0]:void 0},h.cellNav.broadcastCellNav=j.cellNav.broadcastCellNav=function(a,b){b=!(void 0===b||!b),h.cellNav.broadcastFocus(a,b),i.$broadcast(d.CELL_NAV_EVENT,a,b)},h.cellNav.clearFocus=j.cellNav.clearFocus=function(){i.$broadcast(d.CELL_NAV_EVENT,{eventType:d.EVENT_TYPE.CLEAR})},h.cellNav.broadcastFocus=function(b,c){c=!(void 0===c||!c);var d=b.row,e=b.col,f=h.grid.api.cellNav.rowColSelectIndex(b);if(null===j.cellNav.lastRowCol||-1===f){var g=new a(d,e);j.api.cellNav.raise.navigate(g,j.cellNav.lastRowCol),j.cellNav.lastRowCol=g,h.grid.options.modifierKeysToMultiSelectCells&&c?j.cellNav.focusedCells.push(b):j.cellNav.focusedCells=[b]}else j.options.modifierKeysToMultiSelectCells&&c&&f>=0&&j.cellNav.focusedCells.splice(f,1)},h.cellNav.handleKeyDown=function(a){var b=c.getDirection(a);if(null===b)return null;var f="body";a.uiGridTargetRenderContainerId&&(f=a.uiGridTargetRenderContainerId);var g=h.grid.api.cellNav.getFocusedCell();if(g){var i=h.grid.renderContainers[f].cellNav.getNextRowCol(b,g.row,g.col),k=h.grid.renderContainers[f].cellNav.getFocusableCols();return b===d.direction.LEFT&&i.col===k[k.length-1]&&i.row===g.row&&a.keyCode===e.keymap.TAB&&a.shiftKey?(h.cellNav.clearFocus(),!0):b!==d.direction.RIGHT||i.col!==k[0]||i.row!==g.row||a.keyCode!==e.keymap.TAB||a.shiftKey?(j.scrollToIfNecessary(i.row,i.col).then(function(){h.cellNav.broadcastCellNav(i)}),a.stopPropagation(),a.preventDefault(),!1):(h.cellNav.clearFocus(),!0)}}},post:function(a,b,c,d){}}}}}]),b.directive("uiGridRenderContainer",["$timeout","$document","gridUtil","uiGridConstants","uiGridCellNavService","$compile",function(a,b,c,d,e,f){return{replace:!0,priority:-99999,require:["^uiGrid","uiGridRenderContainer","?^uiGridCellnav"],scope:!1,compile:function(){return{post:function(a,b,c,d){var g=d[0],h=d[1];if(g.grid.api.cellNav){var i=h.containerId,j=g.grid;if("body"===i){e.decorateRenderContainers(j);var k=f('<div class="ui-grid-focuser" tabindex="-1"></div>')(a);b.append(k),g.focus=function(){k[0].focus()},k.on("keydown",function(a){a.uiGridTargetRenderContainerId=i;var b=g.grid.api.cellNav.getFocusedCell(),c=g.cellNav.handleKeyDown(a);null===c&&g.grid.api.cellNav.raise.viewPortKeyDown(a,b)})}}}}}}}]),b.directive("uiGridViewport",["$timeout","$document","gridUtil","uiGridConstants","uiGridCellNavService","uiGridCellNavConstants","$log","$compile",function(a,b,c,d,e,f,g,h){return{replace:!0,priority:-99999,require:["^uiGrid","^uiGridRenderContainer","?^uiGridCellnav"],scope:!1,compile:function(){return{pre:function(a,b,c,d){},post:function(a,b,c,d){var e=d[0],f=d[1];if(e.grid.api.cellNav){var g=f.containerId;if("body"===g){var h=e.grid;e.focus(),h.api.core.on.scrollBegin(a,function(a){var c=e.grid.api.cellNav.getFocusedCell();if(null!=c&&f.colContainer.containsColumn(c.col)){var d=b[0].getElementsByClassName("ui-grid-cell-focus");Array.prototype.forEach.call(d,function(a){angular.element(a).removeClass("ui-grid-cell-focus")})}}),h.api.core.on.scrollEnd(a,function(a){var b=e.grid.api.cellNav.getFocusedCell();null!=b&&f.colContainer.containsColumn(b.col)&&e.cellNav.broadcastCellNav(b)}),h.api.cellNav.on.navigate(a,function(){e.focus()})}}}}}}}]),b.directive("uiGridCell",["$timeout","$document","uiGridCellNavService","gridUtil","uiGridCellNavConstants","uiGridConstants",function(b,c,d,e,f,g){return{priority:-150,restrict:"A",require:"^uiGrid",scope:!1,link:function(b,c,d,e){function g(){var a=c.find("div");a.addClass("ui-grid-cell-focus")}function h(){var a=c.find("div");a.removeClass("ui-grid-cell-focus")}e.grid.api.cellNav&&b.col.colDef.allowCellFocus&&(c.find("div").on("click",function(c){e.cellNav.broadcastCellNav(new a(b.row,b.col),c.ctrlKey||c.metaKey),c.stopPropagation(),b.$apply()}),c.find("div").on("focus",function(c){e.cellNav.broadcastCellNav(new a(b.row,b.col),c.ctrlKey||c.metaKey)}),b.$on(f.CELL_NAV_EVENT,function(a,c,d){return a.eventType===f.EVENT_TYPE.CLEAR?void h():void(c.row===b.row&&c.col===b.col?e.grid.options.modifierKeysToMultiSelectCells&&d&&-1===e.grid.api.cellNav.rowColSelectIndex(c)?h():g():e.grid.options.modifierKeysToMultiSelectCells&&d||h())}),b.$on("$destroy",function(){c.find("div").off("click")}))}}}])}(),function(){"use strict";var a=angular.module("ui.grid.edit",["ui.grid"]);a.constant("uiGridEditConstants",{EDITABLE_CELL_TEMPLATE:/EDITABLE_CELL_TEMPLATE/g,EDITABLE_CELL_DIRECTIVE:/editable_cell_directive/g,events:{BEGIN_CELL_EDIT:"uiGridEventBeginCellEdit",END_CELL_EDIT:"uiGridEventEndCellEdit",CANCEL_CELL_EDIT:"uiGridEventCancelCellEdit"}}),a.service("uiGridEditService",["$q","uiGridConstants","gridUtil",function(a,b,c){var d={initializeGrid:function(a){d.defaultGridOptions(a.options),a.registerColumnBuilder(d.editColumnBuilder),a.edit={};var b={events:{edit:{afterCellEdit:function(a,b,c,d){},beginCellEdit:function(a,b){},cancelCellEdit:function(a,b){}}},methods:{edit:{}}};a.api.registerEventsFromObject(b.events)},defaultGridOptions:function(a){a.cellEditableCondition=void 0===a.cellEditableCondition?!0:a.cellEditableCondition,a.enableCellEditOnFocus=void 0===a.enableCellEditOnFocus?!1:a.enableCellEditOnFocus},editColumnBuilder:function(b,d,e){var f=[];return b.enableCellEdit=void 0===b.enableCellEdit?void 0===e.enableCellEdit?"object"!==b.type:e.enableCellEdit:b.enableCellEdit,b.cellEditableCondition=void 0===b.cellEditableCondition?e.cellEditableCondition:b.cellEditableCondition,b.enableCellEdit&&(b.editableCellTemplate=b.editableCellTemplate||e.editableCellTemplate||"ui-grid/cellEditor",f.push(c.getTemplate(b.editableCellTemplate).then(function(a){d.editableCellTemplate=a},function(a){throw new Error("Couldn't fetch/use colDef.editableCellTemplate '"+b.editableCellTemplate+"'")}))),b.enableCellEditOnFocus=void 0===b.enableCellEditOnFocus?e.enableCellEditOnFocus:b.enableCellEditOnFocus,a.all(f)},isStartEditKey:function(a){return a.keyCode===b.keymap.LEFT||a.keyCode===b.keymap.TAB&&a.shiftKey||a.keyCode===b.keymap.RIGHT||a.keyCode===b.keymap.TAB||a.keyCode===b.keymap.UP||a.keyCode===b.keymap.ENTER&&a.shiftKey||a.keyCode===b.keymap.DOWN||a.keyCode===b.keymap.ENTER?!1:!0}};return d}]),a.directive("uiGridEdit",["gridUtil","uiGridEditService",function(a,b){return{replace:!0,priority:0,require:"^uiGrid",scope:!1,compile:function(){return{pre:function(a,c,d,e){b.initializeGrid(e.grid)},post:function(a,b,c,d){}}}}}]),a.directive("uiGridViewport",["uiGridEditConstants",function(a){return{replace:!0,priority:-99998,require:["^uiGrid","^uiGridRenderContainer"],scope:!1,compile:function(){return{post:function(b,c,d,e){var f=e[0];if(f.grid.api.edit&&f.grid.api.cellNav){var g=e[1].containerId;"body"===g&&(b.$on(a.events.CANCEL_CELL_EDIT,function(){f.focus()}),b.$on(a.events.END_CELL_EDIT,function(){f.focus()}))}}}}}}]),a.directive("uiGridCell",["$compile","$injector","$timeout","uiGridConstants","uiGridEditConstants","gridUtil","$parse","uiGridEditService","$rootScope",function(a,b,c,d,e,f,g,h,i){var j=500;if(b.has("uiGridCellNavService")){b.get("uiGridCellNavService")}return{priority:-100,restrict:"A",scope:!1,require:"?^uiGrid",link:function(b,k,l,m){function n(){k.on("dblclick",t),k.on("touchstart",o),m&&m.grid.api.cellNav&&(D=m.grid.api.cellNav.on.navigate(b,function(a,d){b.col.colDef.enableCellEditOnFocus&&a.row===b.row&&a.col===b.col&&c(function(){t()})}))}function o(a){"undefined"!=typeof a.originalEvent&&void 0!==a.originalEvent&&(a=a.originalEvent),k.on("touchend",p),A=c(function(){},j),A.then(function(){setTimeout(t,0),k.off("touchend",p)})}function p(a){c.cancel(A),k.off("touchend",p)}function q(){k.off("dblclick",t),k.off("keydown",r),k.off("touchstart",o),D()}function r(a){h.isStartEditKey(a)&&t()}function s(a,c){return!c.isSaving&&(angular.isFunction(a.colDef.cellEditableCondition)?a.colDef.cellEditableCondition(b):a.colDef.cellEditableCondition)}function t(){if(!C&&s(b.col,b.row)){z=g(b.row.getQualifiedColField(b.col)),y=z(b),x=b.col.editableCellTemplate,x=b.col.colDef.editModelField?x.replace(d.MODEL_COL_FIELD,f.preEval("row.entity."+b.col.colDef.editModelField)):x.replace(d.MODEL_COL_FIELD,b.row.getQualifiedColField(b.col));var c=b.col.colDef.editDropdownFilter?"|"+b.col.colDef.editDropdownFilter:"";x=x.replace(d.CUSTOM_FILTERS,c);var h="text";switch(b.col.colDef.type){case"boolean":h="checkbox";break;case"number":h="number";break;case"date":h="date"}x=x.replace("INPUT_TYPE",h);var j=b.col.colDef.editDropdownRowEntityOptionsArrayPath;j?b.editDropdownOptionsArray=w(b.row.entity,j):b.editDropdownOptionsArray=b.col.colDef.editDropdownOptionsArray,b.editDropdownIdLabel=b.col.colDef.editDropdownIdLabel?b.col.colDef.editDropdownIdLabel:"id",b.editDropdownValueLabel=b.col.colDef.editDropdownValueLabel?b.col.colDef.editDropdownValueLabel:"value";var l=function(){C=!0,q();var c=angular.element(x);k.append(c),B=b.$new(),a(c)(B);var d=angular.element(k.children()[0]);d.addClass("ui-grid-cell-contents-hidden")};i.$$phase?l():b.$apply(l);var m=b.col.grid.api.core.on.scrollBegin(b,function(){u(!0),b.grid.api.edit.raise.afterCellEdit(b.row.entity,b.col.colDef,z(b),y),m(),n(),o()}),n=b.$on(e.events.END_CELL_EDIT,function(a,c){u(c),b.grid.api.edit.raise.afterCellEdit(b.row.entity,b.col.colDef,z(b),y),n(),m(),o()}),o=b.$on(e.events.CANCEL_CELL_EDIT,function(){v(),o(),m(),n()});b.$broadcast(e.events.BEGIN_CELL_EDIT),b.grid.api.edit.raise.beginCellEdit(b.row.entity,b.col.colDef)}}function u(a){if(C){var c=angular.element(k.children()[0]);B.$destroy(),angular.element(k.children()[1]).remove(),c.removeClass("ui-grid-cell-contents-hidden"),C=!1,n(),b.grid.api.core.notifyDataChange(d.dataChange.EDIT)}}function v(){C&&(z.assign(b,y),b.$apply(),b.grid.api.edit.raise.cancelCellEdit(b.row.entity,b.col.colDef),u(!0))}function w(a,b){b=b.replace(/\[(\w+)\]/g,".$1"),b=b.replace(/^\./,"");for(var c=b.split(".");c.length;){var d=c.shift();if(!(d in a))return;a=a[d]}return a}if(b.col.colDef.enableCellEdit&&b.row.enableCellEdit!==!1){var x,y,z,A,B,C=!1,D=function(){};m&&m.grid.api.cellNav&&m.grid.api.cellNav.on.viewPortKeyDown(b,function(a,c){null!==c&&(c.row!==b.row||c.col!==b.col||b.col.colDef.enableCellEditOnFocus||(r(a),m.grid.api.core.scrollToIfNecessary(c.row,c.col)))}),n()}}}}]),a.directive("uiGridEditor",["gridUtil","uiGridConstants","uiGridEditConstants","$timeout",function(a,b,c,d){return{scope:!0,require:["?^uiGrid","?^uiGridRenderContainer"],compile:function(){return{pre:function(a,b,c){},post:function(a,d,e,f){var g,h;f[0]&&(g=f[0]),f[1]&&(h=f[1]),a.$on(c.events.BEGIN_CELL_EDIT,function(){d[0].focus(),d[0].select(),d.on("blur",function(b){a.stopEdit(b)})}),a.deepEdit=!1,a.stopEdit=function(b){a.inputForm&&!a.inputForm.$valid?(b.stopPropagation(),a.$emit(c.events.CANCEL_CELL_EDIT)):a.$emit(c.events.END_CELL_EDIT),a.deepEdit=!1},d.on("click",function(b){a.deepEdit=!0}),d.on("keydown",function(d){switch(d.keyCode){case b.keymap.ESC:d.stopPropagation(),a.$emit(c.events.CANCEL_CELL_EDIT);break;case b.keymap.ENTER:a.stopEdit(d);break;case b.keymap.TAB:a.stopEdit(d)}if(a.deepEdit)switch(d.keyCode){case b.keymap.LEFT:d.stopPropagation();break;case b.keymap.RIGHT:d.stopPropagation();break;case b.keymap.UP:d.stopPropagation();break;case b.keymap.DOWN:d.stopPropagation()}else g&&g.grid.api.cellNav&&(d.uiGridTargetRenderContainerId=h.containerId,null!==g.cellNav.handleKeyDown(d)&&a.stopEdit(d));return!0})}}}}}]),a.directive("uiGridEditor",["$filter",function(a){function b(a){if("undefined"==typeof a||""===a)return null;var b=a.split("-");if(3!==b.length)return null;var c=parseInt(b[0],10),d=parseInt(b[1],10),e=parseInt(b[2],10);return 1>d||1>c||1>e?null:new Date(c,d-1,e)}return{priority:-100,require:"?ngModel",link:function(c,d,e,f){2===angular.version.minor&&e.type&&"date"===e.type&&f&&(f.$formatters.push(function(b){return f.$setValidity(null,!b||!isNaN(b.getTime())),a("date")(b,"yyyy-MM-dd")}),f.$parsers.push(function(a){if(a&&a.length>0){var c=b(a);return f.$setValidity(null,c&&!isNaN(c.getTime())),c}return f.$setValidity(null,!0),null}))}}}]),a.directive("uiGridEditDropdown",["uiGridConstants","uiGridEditConstants",function(a,b){return{scope:!0,compile:function(){return{pre:function(a,b,c){},post:function(c,d,e){c.$on(b.events.BEGIN_CELL_EDIT,function(){d[0].focus(),d[0].style.width=d[0].parentElement.offsetWidth-1+"px",d.on("blur",function(a){c.stopEdit(a)})}),c.stopEdit=function(a){c.$emit(b.events.END_CELL_EDIT)},d.on("keydown",function(d){switch(d.keyCode){case a.keymap.ESC:d.stopPropagation(),c.$emit(b.events.CANCEL_CELL_EDIT);break;case a.keymap.ENTER:c.stopEdit(d);break;case a.keymap.LEFT:c.stopEdit(d);break;case a.keymap.RIGHT:c.stopEdit(d);break;case a.keymap.UP:d.stopPropagation();break;case a.keymap.DOWN:d.stopPropagation();break;case a.keymap.TAB:c.stopEdit(d)}return!0})}}}}}]),a.directive("uiGridEditFileChooser",["gridUtil","uiGridConstants","uiGridEditConstants","$timeout",function(a,b,c,d){return{scope:!0,require:["?^uiGrid","?^uiGridRenderContainer"],compile:function(){return{pre:function(a,b,c){},post:function(b,d,e,f){var g,h;f[0]&&(g=f[0]),f[1]&&(h=f[1]);var i=(g.grid,function(d){var e=d.srcElement||d.target;e&&e.files&&e.files.length>0?("function"==typeof b.col.colDef.editFileChooserCallback?b.col.colDef.editFileChooserCallback(b.row,b.col,e.files):a.logError("You need to set colDef.editFileChooserCallback to use the file chooser"),e.form.reset(),b.$emit(c.events.END_CELL_EDIT)):b.$emit(c.events.CANCEL_CELL_EDIT)});d[0].addEventListener("change",i,!1),b.$on(c.events.BEGIN_CELL_EDIT,function(){d[0].focus(),d[0].select(),d.on("blur",function(a){b.$emit(c.events.END_CELL_EDIT)})})}}}}}])}(),function(){"use strict";var a=angular.module("ui.grid.expandable",["ui.grid"]);a.service("uiGridExpandableService",["gridUtil","$compile",function(a,b){var c={initializeGrid:function(b){b.expandable={},b.expandable.expandedAll=!1,b.options.enableExpandable=b.options.enableExpandable!==!1,b.options.expandableRowHeight=b.options.expandableRowHeight||150,b.options.expandableRowHeaderWidth=b.options.expandableRowHeaderWidth||40,b.options.enableExpandable&&!b.options.expandableRowTemplate&&(a.logError("You have not set the expandableRowTemplate, disabling expandable module"),b.options.enableExpandable=!1);var d={events:{expandable:{rowExpandedStateChanged:function(a,b){}}},methods:{expandable:{toggleRowExpansion:function(a){var d=b.getRow(a);null!==d&&c.toggleRowExpansion(b,d)},expandAllRows:function(){c.expandAllRows(b)},collapseAllRows:function(){c.collapseAllRows(b)},toggleAllRows:function(){c.toggleAllRows(b)}}}};b.api.registerEventsFromObject(d.events),b.api.registerMethodsFromObject(d.methods)},toggleRowExpansion:function(a,b){b.isExpanded=!b.isExpanded,b.isExpanded?b.height=b.grid.options.rowHeight+a.options.expandableRowHeight:(b.height=b.grid.options.rowHeight,a.expandable.expandedAll=!1),a.api.expandable.raise.rowExpandedStateChanged(b)},expandAllRows:function(a,b){a.renderContainers.body.visibleRowCache.forEach(function(b){b.isExpanded||c.toggleRowExpansion(a,b)}),a.expandable.expandedAll=!0,a.queueGridRefresh()},collapseAllRows:function(a){a.renderContainers.body.visibleRowCache.forEach(function(b){b.isExpanded&&c.toggleRowExpansion(a,b)}),a.expandable.expandedAll=!1,a.queueGridRefresh()},toggleAllRows:function(a){a.expandable.expandedAll?c.collapseAllRows(a):c.expandAllRows(a)}};return c}]),a.directive("uiGridExpandable",["uiGridExpandableService","$templateCache",function(a,b){return{replace:!0,priority:0,require:"^uiGrid",scope:!1,compile:function(){return{pre:function(c,d,e,f){if(f.grid.options.enableExpandableRowHeader!==!1){var g={name:"expandableButtons",displayName:"",exporterSuppressExport:!0,enableColumnResizing:!1,enableColumnMenu:!1,width:f.grid.options.expandableRowHeaderWidth||40};g.cellTemplate=b.get("ui-grid/expandableRowHeader"),g.headerCellTemplate=b.get("ui-grid/expandableTopRowHeader"),f.grid.addRowHeaderColumn(g)}a.initializeGrid(f.grid)},post:function(a,b,c,d){}}}}}]),a.directive("uiGrid",["uiGridExpandableService","$templateCache",function(a,b){return{replace:!0,priority:599,require:"^uiGrid",scope:!1,compile:function(){return{pre:function(a,b,c,d){d.grid.api.core.on.renderingComplete(a,function(){a.row&&a.row.grid&&a.row.grid.options&&a.row.grid.options.enableExpandable&&(d.grid.parentRow=a.row)})},post:function(a,b,c,d){}}}}}]),a.directive("uiGridExpandableRow",["uiGridExpandableService","$timeout","$compile","uiGridConstants","gridUtil","$interval","$log",function(a,b,c,d,e,f,g){return{replace:!1,priority:0,scope:!1,compile:function(){return{pre:function(a,b,d,f){e.getTemplate(a.grid.options.expandableRowTemplate).then(function(d){if(a.grid.options.expandableRowScope){var e=a.grid.options.expandableRowScope;for(var f in e)e.hasOwnProperty(f)&&(a[f]=e[f])}var g=c(d)(a);b.append(g),a.row.expandedRendered=!0})},post:function(a,b,c,d){a.$on("$destroy",function(){a.row.expandedRendered=!1})}}}}}]),a.directive("uiGridRow",["$compile","gridUtil","$templateCache",function(a,b,c){return{priority:-200,scope:!1,compile:function(a,b){return{pre:function(a,b,c,d){a.expandableRow={},a.expandableRow.shouldRenderExpand=function(){var b="body"===a.colContainer.name&&a.grid.options.enableExpandable!==!1&&a.row.isExpanded&&(!a.grid.isScrollingVertically||a.row.expandedRendered);return b},a.expandableRow.shouldRenderFiller=function(){var b=a.row.isExpanded&&("body"!==a.colContainer.name||a.grid.isScrollingVertically&&!a.row.expandedRendered);return b}},post:function(a,b,c,d){}}}}}]),a.directive("uiGridViewport",["$compile","gridUtil","$templateCache",function(a,b,c){return{priority:-200,scope:!1,compile:function(a,b){var d=angular.element(a.children().children()[0]),e=c.get("ui-grid/expandableScrollFiller"),f=c.get("ui-grid/expandableRow");return d.append(f),d.append(e),{pre:function(a,b,c,d){},post:function(a,b,c,d){}}}}}])}(),function(){"use strict";var a=angular.module("ui.grid.exporter",["ui.grid"]);a.constant("uiGridExporterConstants",{featureName:"exporter",ALL:"all",VISIBLE:"visible",SELECTED:"selected",CSV_CONTENT:"CSV_CONTENT",BUTTON_LABEL:"BUTTON_LABEL",FILE_NAME:"FILE_NAME"}),a.service("uiGridExporterService",["$q","uiGridExporterConstants","gridUtil","$compile","$interval","i18nService",function(a,b,c,d,e,f){var g={delay:100,initializeGrid:function(a){a.exporter={},this.defaultGridOptions(a.options);var b={events:{exporter:{}},methods:{exporter:{csvExport:function(b,c){g.csvExport(a,b,c)},pdfExport:function(b,c){g.pdfExport(a,b,c)}}}};a.api.registerEventsFromObject(b.events),a.api.registerMethodsFromObject(b.methods),a.api.core.addToGridMenu?g.addToMenu(a):e(function(){a.api.core.addToGridMenu&&g.addToMenu(a)},this.delay,1)},defaultGridOptions:function(a){a.exporterSuppressMenu=a.exporterSuppressMenu===!0,a.exporterMenuLabel=a.exporterMenuLabel?a.exporterMenuLabel:"Export",a.exporterSuppressColumns=a.exporterSuppressColumns?a.exporterSuppressColumns:[],
a.exporterCsvColumnSeparator=a.exporterCsvColumnSeparator?a.exporterCsvColumnSeparator:",",a.exporterCsvFilename=a.exporterCsvFilename?a.exporterCsvFilename:"download.csv",a.exporterOlderExcelCompatibility=a.exporterOlderExcelCompatibility===!0,a.exporterPdfDefaultStyle=a.exporterPdfDefaultStyle?a.exporterPdfDefaultStyle:{fontSize:11},a.exporterPdfTableStyle=a.exporterPdfTableStyle?a.exporterPdfTableStyle:{margin:[0,5,0,15]},a.exporterPdfTableHeaderStyle=a.exporterPdfTableHeaderStyle?a.exporterPdfTableHeaderStyle:{bold:!0,fontSize:12,color:"black"},a.exporterPdfHeader=a.exporterPdfHeader?a.exporterPdfHeader:null,a.exporterPdfFooter=a.exporterPdfFooter?a.exporterPdfFooter:null,a.exporterPdfOrientation=a.exporterPdfOrientation?a.exporterPdfOrientation:"landscape",a.exporterPdfPageSize=a.exporterPdfPageSize?a.exporterPdfPageSize:"A4",a.exporterPdfMaxGridWidth=a.exporterPdfMaxGridWidth?a.exporterPdfMaxGridWidth:720,a.exporterMenuAllData=void 0!==a.exporterMenuAllData?a.exporterMenuAllData:!0,a.exporterMenuCsv=void 0!==a.exporterMenuCsv?a.exporterMenuCsv:!0,a.exporterMenuPdf=void 0!==a.exporterMenuPdf?a.exporterMenuPdf:!0,a.exporterPdfCustomFormatter=a.exporterPdfCustomFormatter&&"function"==typeof a.exporterPdfCustomFormatter?a.exporterPdfCustomFormatter:function(a){return a},a.exporterHeaderFilterUseName=a.exporterHeaderFilterUseName===!0,a.exporterFieldCallback=a.exporterFieldCallback?a.exporterFieldCallback:function(a,b,c,d){return d},a.exporterAllDataPromise=a.exporterAllDataPromise?a.exporterAllDataPromise:null},addToMenu:function(a){a.api.core.addToGridMenu(a,[{title:f.getSafeText("gridMenu.exporterAllAsCsv"),action:function(a){this.grid.api.exporter.csvExport(b.ALL,b.ALL)},shown:function(){return this.grid.options.exporterMenuCsv&&this.grid.options.exporterMenuAllData},order:200},{title:f.getSafeText("gridMenu.exporterVisibleAsCsv"),action:function(a){this.grid.api.exporter.csvExport(b.VISIBLE,b.VISIBLE)},shown:function(){return this.grid.options.exporterMenuCsv},order:201},{title:f.getSafeText("gridMenu.exporterSelectedAsCsv"),action:function(a){this.grid.api.exporter.csvExport(b.SELECTED,b.VISIBLE)},shown:function(){return this.grid.options.exporterMenuCsv&&this.grid.api.selection&&this.grid.api.selection.getSelectedRows().length>0},order:202},{title:f.getSafeText("gridMenu.exporterAllAsPdf"),action:function(a){this.grid.api.exporter.pdfExport(b.ALL,b.ALL)},shown:function(){return this.grid.options.exporterMenuPdf&&this.grid.options.exporterMenuAllData},order:203},{title:f.getSafeText("gridMenu.exporterVisibleAsPdf"),action:function(a){this.grid.api.exporter.pdfExport(b.VISIBLE,b.VISIBLE)},shown:function(){return this.grid.options.exporterMenuPdf},order:204},{title:f.getSafeText("gridMenu.exporterSelectedAsPdf"),action:function(a){this.grid.api.exporter.pdfExport(b.SELECTED,b.VISIBLE)},shown:function(){return this.grid.options.exporterMenuPdf&&this.grid.api.selection&&this.grid.api.selection.getSelectedRows().length>0},order:205}])},csvExport:function(a,b,c){var d=this;this.loadAllDataIfNeeded(a,b,c).then(function(){var e=d.getColumnHeaders(a,c),f=d.getData(a,b,c),g=d.formatAsCsv(e,f,a.options.exporterCsvColumnSeparator);d.downloadFile(a.options.exporterCsvFilename,g,a.options.exporterOlderExcelCompatibility)})},loadAllDataIfNeeded:function(c,d,e){if(d===b.ALL&&c.rows.length!==c.options.totalItems&&c.options.exporterAllDataPromise)return c.options.exporterAllDataPromise().then(function(){c.modifyRows(c.options.data)});var f=a.defer();return f.resolve(),f.promise},getColumnHeaders:function(a,c){var d=[];return a.columns.forEach(function(e,f){!e.visible&&c!==b.ALL||e.colDef.exporterSuppressExport===!0||-1!==a.options.exporterSuppressColumns.indexOf(e.name)||d.push({name:e.field,displayName:a.options.exporterHeaderFilter?a.options.exporterHeaderFilterUseName?a.options.exporterHeaderFilter(e.name):a.options.exporterHeaderFilter(e.displayName):e.displayName,width:e.drawnWidth?e.drawnWidth:e.width,align:"number"===e.colDef.type?"right":"left"})}),d},getData:function(a,d,e){var f,g=[];switch(d){case b.ALL:f=a.rows;break;case b.VISIBLE:f=a.getVisibleRows();break;case b.SELECTED:a.api.selection?f=a.api.selection.getSelectedGridRows():c.logError("selection feature must be enabled to allow selected rows to be exported")}return f.forEach(function(c,d){if(c.exporterEnableExporting!==!1){var f=[];a.columns.forEach(function(d,g){if((d.visible||e===b.ALL)&&d.colDef.exporterSuppressExport!==!0&&-1===a.options.exporterSuppressColumns.indexOf(d.name)){var h={value:a.options.exporterFieldCallback(a,c,d,a.getCellValue(c,d))};d.colDef.exporterPdfAlign&&(h.alignment=d.colDef.exporterPdfAlign),f.push(h)}}),g.push(f)}}),g},formatAsCsv:function(a,b,c){var d=this,e=a.map(function(a){return{value:a.displayName}}),f=d.formatRowAsCsv(this,c)(e)+"\n";return f+=b.map(this.formatRowAsCsv(this,c)).join("\n")},formatRowAsCsv:function(a,b){return function(c){return c.map(a.formatFieldAsCsv).join(b)}},formatFieldAsCsv:function(a){return null==a.value?"":"number"==typeof a.value?a.value:"boolean"==typeof a.value?a.value?"TRUE":"FALSE":"string"==typeof a.value?'"'+a.value.replace(/"/g,'""')+'"':JSON.stringify(a.value)},isIE:function(){var a=navigator.userAgent.match(/(?:MSIE |Trident\/.*; rv:)(\d+)/);return a?parseInt(a[1]):!1},downloadFile:function(a,b,c){var d,e,f=document,g=f.createElement("a"),h="application/octet-stream;charset=utf-8";if(!a){var i=new Date;a="CWS Export - "+i.getFullYear()+(i.getMonth()+1)+i.getDate()+i.getHours()+i.getMinutes()+i.getSeconds()+".csv"}if(e=this.isIE(),e&&10>e){var j=f.createElement("iframe");return document.body.appendChild(j),j.contentWindow.document.open("text/html","replace"),j.contentWindow.document.write("sep=,\r\n"+b),j.contentWindow.document.close(),j.contentWindow.focus(),j.contentWindow.document.execCommand("SaveAs",!0,a),document.body.removeChild(j),!0}if(navigator.msSaveBlob)return navigator.msSaveBlob(new Blob([c?"\ufeff":"",b],{type:h}),a);if("download"in g){var k=new Blob([c?"\ufeff":"",b],{type:h});d=URL.createObjectURL(k),g.setAttribute("download",a)}else d="data:"+h+","+encodeURIComponent(b),g.setAttribute("target","_blank");g.href=d,g.setAttribute("style","display:none;"),f.body.appendChild(g),setTimeout(function(){if(g.click)g.click();else if(document.createEvent){var a=document.createEvent("MouseEvents");a.initEvent("click",!0,!0),g.dispatchEvent(a)}f.body.removeChild(g)},this.delay)},pdfExport:function(a,b,c){var d=this;this.loadAllDataIfNeeded(a,b,c).then(function(){var e=d.getColumnHeaders(a,c),f=d.getData(a,b,c),g=d.prepareAsPdf(a,e,f);if(d.isIE()){pdfMake.createPdf(g).download()}else pdfMake.createPdf(g).open()})},prepareAsPdf:function(a,b,c){var d=this.calculatePdfHeaderWidths(a,b),e=b.map(function(a){return{text:a.displayName,style:"tableHeader"}}),f=c.map(this.formatRowAsPdf(this)),g=[e].concat(f),h={pageOrientation:a.options.exporterPdfOrientation,pageSize:a.options.exporterPdfPageSize,content:[{style:"tableStyle",table:{headerRows:1,widths:d,body:g}}],styles:{tableStyle:a.options.exporterPdfTableStyle,tableHeader:a.options.exporterPdfTableHeaderStyle},defaultStyle:a.options.exporterPdfDefaultStyle};return a.options.exporterPdfLayout&&(h.layout=a.options.exporterPdfLayout),a.options.exporterPdfHeader&&(h.header=a.options.exporterPdfHeader),a.options.exporterPdfFooter&&(h.footer=a.options.exporterPdfFooter),a.options.exporterPdfCustomFormatter&&(h=a.options.exporterPdfCustomFormatter(h)),h},calculatePdfHeaderWidths:function(a,b){var c=0;b.forEach(function(a){"number"==typeof a.width&&(c+=a.width)});var d=0;b.forEach(function(a){if("*"===a.width&&(d+=100),"string"==typeof a.width&&a.width.match(/(\d)*%/)){var b=parseInt(a.width.match(/(\d)*%/)[0]);a.width=c*b/100,d+=a.width}});var e=c+d;return b.map(function(b){return"*"===b.width?b.width:b.width*a.options.exporterPdfMaxGridWidth/e})},formatRowAsPdf:function(a){return function(b){return b.map(a.formatFieldAsPdfString)}},formatFieldAsPdfString:function(a){var b;return b=null==a.value?"":"number"==typeof a.value?a.value.toString():"boolean"==typeof a.value?a.value?"TRUE":"FALSE":"string"==typeof a.value?a.value.replace(/"/g,'""'):JSON.stringify(a.value).replace(/^"/,"").replace(/"$/,""),a.alignment&&"string"==typeof a.alignment&&(b={text:b,alignment:a.alignment}),b}};return g}]),a.directive("uiGridExporter",["uiGridExporterConstants","uiGridExporterService","gridUtil","$compile",function(a,b,c,d){return{replace:!0,priority:0,require:"^uiGrid",scope:!1,link:function(a,c,d,e){b.initializeGrid(e.grid),e.grid.exporter.$scope=a}}}])}(),function(){"use strict";var a=angular.module("ui.grid.grouping",["ui.grid"]);a.constant("uiGridGroupingConstants",{featureName:"grouping",groupingRowHeaderColName:"groupingRowHeaderCol",EXPANDED:"expanded",COLLAPSED:"collapsed",aggregation:{COUNT:"count",SUM:"sum",MAX:"max",MIN:"min",AVG:"avg",FIELD:"##@@aggregation_running_count@@##"}}),a.service("uiGridGroupingService",["$q","uiGridGroupingConstants","gridUtil","GridRow","gridClassFactory","i18nService","uiGridConstants",function(a,b,c,d,e,f,g){var h={initializeGrid:function(a,b){a.grouping={},a.grouping.numberLevels=0,a.grouping.expandAll=!1,a.grouping.rowExpandedStates={},h.defaultGridOptions(a.options),a.registerRowsProcessor(h.groupRows,400),a.registerColumnsProcessor(h.groupingColumnProcessor,400);var c={events:{grouping:{}},methods:{grouping:{expandAllRows:function(){h.expandAllRows(a)},collapseAllRows:function(){h.collapseAllRows(a)},toggleRowGroupingState:function(b){h.toggleRowGroupingState(a,b)},expandRow:function(b){h.expandRow(a,b)},expandRowChildren:function(b){h.expandRowChildren(a,b)},collapseRow:function(b){h.collapseRow(a,b)},collapseRowChildren:function(b){h.collapseRowChildren(a,b)},getGrouping:function(b){var c=h.getGrouping(a);return c.grouping.forEach(function(a){a.colName=a.col.name,delete a.col}),c.aggregations.forEach(function(a){a.colName=a.col.name,delete a.col}),b&&(c.rowExpandedStates=a.grouping.rowExpandedStates),c},setGrouping:function(b){h.setGrouping(a,b)},groupColumn:function(b){var c=a.getColumn(b);h.groupColumn(a,c)},ungroupColumn:function(b){var c=a.getColumn(b);h.ungroupColumn(a,c)},clearGrouping:function(){h.clearGrouping(a)},aggregateColumn:function(b,c){var d=a.getColumn(b);h.aggregateColumn(a,d,c)}}}};a.api.registerEventsFromObject(c.events),a.api.registerMethodsFromObject(c.methods),a.api.core.on.sortChanged(b,h.tidyPriorities)},defaultGridOptions:function(a){a.enableGrouping=a.enableGrouping!==!1,a.groupingRowHeaderBaseWidth=a.groupingRowHeaderBaseWidth||30,a.groupingIndent=a.groupingIndent||10,a.groupingRowHeaderAlwaysVisible=a.groupingRowHeaderAlwaysVisible===!0,a.groupingShowCounts=a.groupingShowCounts!==!1},groupingColumnBuilder:function(a,d,e){if(a.enableGrouping!==!1){"undefined"==typeof d.grouping&&"undefined"!=typeof a.grouping?d.grouping=angular.copy(a.grouping):"undefined"==typeof d.grouping&&(d.grouping={}),"undefined"!=typeof d.grouping&&void 0!==typeof d.grouping.groupPriority&&d.grouping.groupPriority>=0&&(d.suppressRemoveSort=!0),d.groupingSuppressAggregationText=a.groupingSuppressAggregationText===!0;var g={name:"ui.grid.grouping.group",title:f.get().grouping.group,icon:"ui-grid-icon-indent-right",shown:function(){return"undefined"==typeof this.context.col.grouping||"undefined"==typeof this.context.col.grouping.groupPriority||this.context.col.grouping.groupPriority<0},action:function(){h.groupColumn(this.context.col.grid,this.context.col)}},i={name:"ui.grid.grouping.ungroup",title:f.get().grouping.ungroup,icon:"ui-grid-icon-indent-left",shown:function(){return"undefined"!=typeof this.context.col.grouping&&"undefined"!=typeof this.context.col.grouping.groupPriority&&this.context.col.grouping.groupPriority>=0},action:function(){h.ungroupColumn(this.context.col.grid,this.context.col)}},j={name:"ui.grid.grouping.aggregateRemove",title:f.get().grouping.aggregate_remove,shown:function(){return"undefined"!=typeof this.context.col.grouping&&"undefined"!=typeof this.context.col.grouping.aggregation&&null!==this.context.col.grouping.aggregation},action:function(){h.aggregateColumn(this.context.col.grid,this.context.col,null)}},k=function(a){var b={name:"ui.grid.grouping.aggregate"+a,title:f.get().grouping["aggregate_"+a],shown:function(){return"undefined"==typeof this.context.col.grouping||"undefined"==typeof this.context.col.grouping.aggregation||this.context.col.grouping.aggregation!==a},action:function(){h.aggregateColumn(this.context.col.grid,this.context.col,a)}};c.arrayContainsObjectWithProperty(d.menuItems,"name","ui.grid.grouping.aggregate"+a)||d.menuItems.push(b)};c.arrayContainsObjectWithProperty(d.menuItems,"name","ui.grid.grouping.group")||d.menuItems.push(g),c.arrayContainsObjectWithProperty(d.menuItems,"name","ui.grid.grouping.ungroup")||d.menuItems.push(i),k(b.aggregation.COUNT),k(b.aggregation.SUM),k(b.aggregation.MAX),k(b.aggregation.MIN),k(b.aggregation.AVG),c.arrayContainsObjectWithProperty(d.menuItems,"name","ui.grid.grouping.aggregateRemove")||d.menuItems.push(j)}},groupingColumnProcessor:function(a,c){var d=this;return a.forEach(function(a,c){if(a.groupingPosition=c,a.name===b.groupingRowHeaderColName){var e=h.getGrouping(a.grid);("undefined"==typeof d.options.groupingRowHeaderAlwaysVisible||d.options.groupingRowHeaderAlwaysVisible===!1)&&(e.grouping.length>0?a.visible=!0:a.visible=!1);var f=(e.grouping.length-1)*d.options.groupingIndent;f=f>0?f:0,a.width=d.options.groupingRowHeaderBaseWidth+f}}),a=h.moveGroupColumns(this,a,c)},moveGroupColumns:function(a,b,c){return a.options.moveGroupColumns!==!1?(b.sort(function(a,b){var c,d;return c="undefined"==typeof a.grouping||"undefined"==typeof a.grouping.groupPriority||a.grouping.groupPriority<0?null:a.grouping.groupPriority,d="undefined"==typeof b.grouping||"undefined"==typeof b.grouping.groupPriority||b.grouping.groupPriority<0?null:b.grouping.groupPriority,null!==c&&null===d?-1:null!==d&&null===c?1:null!==c&&null!==d?c-d:a.groupingPosition-b.groupingPosition}),b.forEach(function(a,b){delete a.groupingPosition}),b):void 0},groupColumn:function(a,b){"undefined"==typeof b.grouping&&(b.grouping={});var c=h.getGrouping(a);b.grouping.groupPriority=c.grouping.length,b.sort?("undefined"==typeof b.sort.direction||null===b.sort.direction)&&(b.sort.direction=g.ASC):b.sort={direction:g.ASC},h.tidyPriorities(a),a.queueGridRefresh()},ungroupColumn:function(a,b){"undefined"!=typeof b.grouping&&(delete b.grouping.groupPriority,h.tidyPriorities(a),a.queueGridRefresh())},aggregateColumn:function(a,b,c){"undefined"==typeof b.grouping&&(b.grouping={}),"undefined"!=typeof b.grouping.groupPriority&&b.grouping.groupPriority>=0&&h.ungroupColumn(a,b),b.grouping.aggregation=c,a.queueGridRefresh()},setGrouping:function(a,b){"undefined"!=typeof b&&(h.clearGrouping(a),b.grouping&&b.grouping.length&&b.grouping.length>0&&b.grouping.forEach(function(b){var c=a.getColumn(b.colName);c&&h.groupColumn(a,c)}),b.aggregations&&b.aggregations.length&&b.aggregations.length>0&&b.aggregations.forEach(function(b){var c=a.getColumn(b.colName);c&&h.aggregateColumn(a,c,b.aggregation)}),b.rowExpandedStates&&(a.grouping.rowExpandedStates=b.rowExpandedStates))},clearGrouping:function(a){var b=h.getGrouping(a);b.grouping.length>0&&b.grouping.forEach(function(b){b.col||(b.col=a.getColumn(b.colName)),h.ungroupColumn(a,b.col)}),b.aggregations.length>0&&b.aggregations.forEach(function(b){b.col||(b.col=a.getColumn(b.colName)),h.aggregateColumn(a,b.col,null)})},tidyPriorities:function(a){"undefined"==typeof a&&"undefined"!=typeof this.grid&&(a=this.grid);var b=[],c=[];a.columns.forEach(function(a,d){"undefined"!=typeof a.grouping&&"undefined"!=typeof a.grouping.groupPriority&&a.grouping.groupPriority>=0?b.push(a):"undefined"!=typeof a.sort&&"undefined"!=typeof a.sort.priority&&a.sort.priority>=0&&c.push(a)}),b.sort(function(a,b){return a.grouping.groupPriority-b.grouping.groupPriority}),b.forEach(function(a,b){a.grouping.groupPriority=b,a.suppressRemoveSort=!0,"undefined"==typeof a.sort&&(a.sort={}),a.sort.priority=b});var d=b.length;c.sort(function(a,b){return a.sort.priority-b.sort.priority}),c.forEach(function(a,b){a.sort.priority=d,a.suppressRemoveSort=a.colDef.suppressRemoveSort,d++})},expandAllRows:function(a){h.setAllNodes(a.grouping.rowExpandedStates,b.EXPANDED),a.queueGridRefresh()},collapseAllRows:function(a){h.setAllNodes(a.grouping.rowExpandedStates,b.COLLAPSED),a.queueGridRefresh()},setAllNodes:function(a,b){a.state=b,angular.forEach(a,function(a,c){"state"!==c&&h.setAllNodes(a,b)})},toggleRowGroupingState:function(a,c){c.groupHeader&&(c.expandedState.state===b.EXPANDED?c.expandedState.state=b.COLLAPSED:c.expandedState.state=b.EXPANDED,a.queueGridRefresh())},expandRow:function(a,c){c.groupHeader&&(c.expandedState.state=b.EXPANDED,a.queueGridRefresh())},expandRowChildren:function(a,c){c.groupHeader&&(h.setAllNodes(c.expandedState,b.EXPANDED),a.queueGridRefresh())},collapseRow:function(a,c){c.groupHeader&&(c.expandedState.state=b.COLLAPSED,a.queueGridRefresh())},collapseRowChildren:function(a,c){c.groupHeader&&(h.setAllNodes(c.expandedState,b.COLLAPSED),a.queueGridRefresh())},groupRows:function(a){if(0===a.length)return a;for(var b=this,c=h.initialiseProcessingState(b),d=function(d,g){var i=b.getCellValue(f,d.col);"undefined"!=typeof i&&null!==i&&f.visible&&(d.initialised&&i===d.currentValue||(h.insertGroupHeader(b,a,e,c,g),e++),h.aggregate(b,f,d))},e=0;e<a.length;e++){var f=a[e];c.forEach(d),h.setVisibility(b,f,c)}return h.writeOutAggregations(b,c,0),a.filter(function(a){return a.visible})},initialiseProcessingState:function(a){var c=[],d=h.getGrouping(a);return d.grouping.forEach(function(e,f){var g=[];a.options.groupingShowCounts&&g.push({type:b.aggregation.COUNT,fieldName:b.aggregation.FIELD,value:null}),d.aggregations.forEach(function(a,c){a.aggregation===b.aggregation.AVG?g.push({type:a.aggregation,fieldName:a.field,col:a.col,value:null,sum:null,count:null}):g.push({type:a.aggregation,fieldName:a.field,col:a.col,value:null})}),c.push({fieldName:e.field,col:e.col,initialised:!1,currentValue:null,currentGroupHeader:null,runningAggregations:g})}),c},getGrouping:function(a){var b=[],c=[];return a.columns.forEach(function(a,d){a.grouping&&("undefined"!=typeof a.grouping.groupPriority&&a.grouping.groupPriority>=0?b.push({field:a.field,col:a,groupPriority:a.grouping.groupPriority,grouping:a.grouping}):a.grouping.aggregation&&c.push({field:a.field,col:a,aggregation:a.grouping.aggregation}))}),b.sort(function(a,b){return a.groupPriority-b.groupPriority}),b.forEach(function(a,b){a.grouping.groupPriority=b,a.groupPriority=b,delete a.grouping}),{grouping:b,aggregations:c}},insertGroupHeader:function(a,b,c,f,g){h.writeOutAggregations(a,f,g);var i=new d({},null,a);e.rowTemplateAssigner.call(a,i);var j=f[g].fieldName,k=f[g].col,l=a.getCellValue(b[c],k);i.entity[j]=l,i.groupLevel=g,i.groupHeader=!0,i.internalRow=!0,i.enableEditing=!1,i.enableSelection=!1,f[g].initialised=!0,f[g].currentValue=l,f[g].currentGroupHeader=i,i.expandedState=h.getExpandedState(a,f,g),h.setVisibility(a,i,f),b.splice(c,0,i)},writeOutAggregations:function(a,b,c){for(var d=c;d<b.length;d++)h.writeOutAggregation(a,b[d])},writeOutAggregation:function(a,c){c.currentGroupHeader&&c.runningAggregations.forEach(function(a,d){a.fieldName===b.aggregation.FIELD?(c.currentGroupHeader.entity[c.fieldName]=c.currentValue+" ("+a.value+")",a.value=null):(a.col.groupingSuppressAggregationText?c.currentGroupHeader.entity[a.fieldName]=a.value:c.currentGroupHeader.entity[a.fieldName]=f.get().aggregation[a.type]+a.value,a.value=null,a.sum&&(a.sum=null),a.count&&(a.count=null))}),c.currentGroupHeader=null,c.currentValue=null,c.initialised=!1},getExpandedState:function(a,c,d){for(var e=a.grouping.rowExpandedStates,f=0;d>=f;f++)e[c[f].currentValue]||(e[c[f].currentValue]={state:b.COLLAPSED}),e=e[c[f].currentValue];return e},setVisibility:function(a,c,d){if(c.visible)for(var e="undefined"!=typeof c.groupLevel?c.groupLevel:d.length,f=0;e>f;f++)d[f].currentGroupHeader.expandedState.state===b.COLLAPSED&&(c.visible=!1)},aggregate:function(a,c,d){d.runningAggregations.forEach(function(d,e){if(d.type===b.aggregation.COUNT)d.value++;else{var f=a.getCellValue(c,d.col),g=Number(f);switch(d.type){case b.aggregation.SUM:isNaN(g)||(d.value+=g);break;case b.aggregation.MIN:void 0!==f&&null!==f&&(f<d.value||null===d.value)&&(d.value=f);break;case b.aggregation.MAX:void 0!==f&&f>d.value&&(d.value=f);break;case b.aggregation.AVG:d.count++,isNaN(g)||(d.sum+=g),d.value=d.sum/d.count}}})}};return h}]),a.directive("uiGridGrouping",["uiGridGroupingConstants","uiGridGroupingService","$templateCache",function(a,b,c){return{replace:!0,priority:0,require:"^uiGrid",scope:!1,compile:function(){return{pre:function(c,d,e,f){if(f.grid.options.enableGrouping!==!1){b.initializeGrid(f.grid,c);var g={name:a.groupingRowHeaderColName,displayName:"",width:f.grid.options.groupingRowHeaderBaseWidth,minWidth:10,cellTemplate:"ui-grid/groupingRowHeader",headerCellTemplate:"ui-grid/groupingHeaderCell",enableColumnResizing:!1,enableColumnMenu:!1,exporterSuppressExport:!0,allowCellFocus:!0};f.grid.addRowHeaderColumn(g),f.grid.registerColumnBuilder(b.groupingColumnBuilder)}},post:function(a,b,c,d){}}}}}]),a.directive("uiGridGroupingRowHeaderButtons",["$templateCache","uiGridGroupingService",function(a,b){return{replace:!0,restrict:"E",template:a.get("ui-grid/groupingRowHeaderButtons"),scope:!0,require:"^uiGrid",link:function(a,c,d,e){var f=e.grid;a.groupButtonClick=function(a,c){b.toggleRowGroupingState(f,a,c)}}}}]),a.directive("uiGridGroupingExpandAllButtons",["$templateCache","uiGridGroupingService",function(a,b){return{replace:!0,restrict:"E",template:a.get("ui-grid/groupingExpandAllButtons"),scope:!1,link:function(a,c,d,e){var f=a.col.grid;a.headerButtonClick=function(a,c){f.grouping.expandAll?(b.collapseAllRows(f,c),f.grouping.expandAll=!1):(b.expandAllRows(f,c),f.grouping.expandAll=!0)}}}}]),a.directive("uiGridViewport",["$compile","uiGridConstants","uiGridGroupingConstants","gridUtil","$parse","uiGridGroupingService",function(a,b,c,d,e,f){return{priority:-200,scope:!1,compile:function(a,b){var c=angular.element(a.children().children()[0]),d=c.attr("ng-class"),e="";return e=d?d.slice(0,-1)+",'ui-grid-group-header-row': row.groupLevel > -1}":"{'ui-grid-group-header-row': row.groupLevel > -1}",c.attr("ng-class",e),{pre:function(a,b,c,d){},post:function(a,b,c,d){}}}}}])}(),function(){"use strict";var a=angular.module("ui.grid.importer",["ui.grid"]);a.constant("uiGridImporterConstants",{featureName:"importer"}),a.service("uiGridImporterService",["$q","uiGridConstants","uiGridImporterConstants","gridUtil","$compile","$interval","i18nService","$window",function(a,b,c,d,e,f,g,h){var i={initializeGrid:function(a,b){b.importer={$scope:a},this.defaultGridOptions(b.options);var c={events:{importer:{}},methods:{importer:{importFile:function(a){i.importThisFile(b,a)}}}};b.api.registerEventsFromObject(c.events),b.api.registerMethodsFromObject(c.methods),b.options.enableImporter&&b.options.importerShowMenu&&(b.api.core.addToGridMenu?i.addToMenu(b):f(function(){b.api.core.addToGridMenu&&i.addToMenu(b)},100,1))},defaultGridOptions:function(a){a.enableImporter||void 0===a.enableImporter?h.hasOwnProperty("File")&&h.hasOwnProperty("FileReader")&&h.hasOwnProperty("FileList")&&h.hasOwnProperty("Blob")?a.enableImporter=!0:(d.logError("The File APIs are not fully supported in this browser, grid importer cannot be used."),a.enableImporter=!1):a.enableImporter=!1,a.importerProcessHeaders=a.importerProcessHeaders||i.processHeaders,a.importerHeaderFilter=a.importerHeaderFilter||function(a){return a},a.importerErrorCallback&&"function"==typeof a.importerErrorCallback||delete a.importerErrorCallback,a.enableImporter!==!0||a.importerDataAddCallback||(d.logError("You have not set an importerDataAddCallback, importer is disabled"),a.enableImporter=!1),a.importerShowMenu=a.importerShowMenu!==!1,a.importerObjectCallback=a.importerObjectCallback||function(a,b){return b}},addToMenu:function(a){a.api.core.addToGridMenu(a,[{title:g.getSafeText("gridMenu.importerTitle"),order:150},{templateUrl:"ui-grid/importerMenuItemContainer",action:function(b){this.grid.api.importer.importAFile(a)},order:151}])},importThisFile:function(a,b){if(!b)return void d.logError("No file object provided to importThisFile, should be impossible, aborting");var c=new FileReader;switch(b.type){case"application/json":c.onload=i.importJsonClosure(a);break;default:c.onload=i.importCsvClosure(a)}c.readAsText(b)},importJsonClosure:function(a){return function(b){var c,d=[],e=i.parseJson(a,b);null!==e&&(e.forEach(function(b,e){c=i.newObject(a),angular.extend(c,b),c=a.options.importerObjectCallback(a,c),d.push(c)}),i.addObjects(a,d))}},parseJson:function(a,b){var c;try{c=JSON.parse(b.target.result)}catch(d){return void i.alertError(a,"importer.invalidJson","File could not be processed, is it valid json? Content was: ",b.target.result)}return Array.isArray(c)?c:(i.alertError(a,"importer.jsonNotarray","Import failed, file is not an array, file was: ",b.target.result),[])},importCsvClosure:function(a){return function(b){var c=i.parseCsv(b);if(!c||c.length<1)return void i.alertError(a,"importer.invalidCsv","File could not be processed, is it valid csv? Content was: ",b.target.result);var d=i.createCsvObjects(a,c);return d&&0!==d.length?void i.addObjects(a,d):void i.alertError(a,"importer.noObjects","Objects were not able to be derived, content was: ",b.target.result)}},parseCsv:function(a){var b=a.target.result;return CSV.parse(b)},createCsvObjects:function(a,b){var c=a.options.importerProcessHeaders(a,b.shift());if(!c||0===c.length)return i.alertError(a,"importer.noHeaders","Column names could not be derived, content was: ",b),[];var d,e=[];return b.forEach(function(b,f){d=i.newObject(a),null!==b&&b.forEach(function(a,b){null!==c[b]&&(d[c[b]]=a)}),d=a.options.importerObjectCallback(a,d),e.push(d)}),e},processHeaders:function(a,b){var c=[];if(a.options.columnDefs&&0!==a.options.columnDefs.length){var d=i.flattenColumnDefs(a,a.options.columnDefs);return b.forEach(function(a,b){d[a]?c.push(d[a]):d[a.toLowerCase()]?c.push(d[a.toLowerCase()]):c.push(null)}),c}return b.forEach(function(a,b){c.push(a.replace(/[^0-9a-zA-Z\-_]/g,"_"))}),c},flattenColumnDefs:function(a,b){var c={};return b.forEach(function(b,d){b.name&&(c[b.name]=b.field||b.name,c[b.name.toLowerCase()]=b.field||b.name),b.field&&(c[b.field]=b.field||b.name,c[b.field.toLowerCase()]=b.field||b.name),b.displayName&&(c[b.displayName]=b.field||b.name,c[b.displayName.toLowerCase()]=b.field||b.name),b.displayName&&a.options.importerHeaderFilter&&(c[a.options.importerHeaderFilter(b.displayName)]=b.field||b.name,c[a.options.importerHeaderFilter(b.displayName).toLowerCase()]=b.field||b.name)}),c},addObjects:function(a,c,d){if(a.api.rowEdit){var e=a.registerDataChangeCallback(function(){a.api.rowEdit.setRowsDirty(c),e()},[b.dataChange.ROW]);a.importer.$scope.$on("$destroy",e)}a.importer.$scope.$apply(a.options.importerDataAddCallback(a,c))},newObject:function(a){return"undefined"!=typeof a.options&&"undefined"!=typeof a.options.importerNewObject?new a.options.importerNewObject:{}},alertError:function(a,b,c,e){a.options.importerErrorCallback?a.options.importerErrorCallback(a,b,c,e):(h.alert(g.getSafeText(b)),d.logError(c+e))}};return i}]),a.directive("uiGridImporter",["uiGridImporterConstants","uiGridImporterService","gridUtil","$compile",function(a,b,c,d){return{replace:!0,priority:0,require:"^uiGrid",scope:!1,link:function(a,c,d,e){b.initializeGrid(a,e.grid)}}}]),a.directive("uiGridImporterMenuItem",["uiGridImporterConstants","uiGridImporterService","gridUtil","$compile",function(a,b,c,d){return{replace:!0,priority:0,require:"^uiGrid",scope:!1,templateUrl:"ui-grid/importerMenuItem",link:function(a,d,e,f){var g=function(a){var c=a.srcElement||a.target;if(c&&c.files&&1===c.files.length){var d=c.files[0];b.importThisFile(i,d),c.form.reset()}},h=d[0].querySelectorAll(".ui-grid-importer-file-chooser"),i=f.grid;1!==h.length?c.logError("Found > 1 or < 1 file choosers within the menu item, error, cannot continue"):h[0].addEventListener("change",g,!1)}}}])}(),function(){"use strict";var a=angular.module("ui.grid.infiniteScroll",["ui.grid"]);a.service("uiGridInfiniteScrollService",["gridUtil","$compile","$timeout","uiGridConstants","ScrollEvent","$q",function(a,b,c,d,e,f){var g={initializeGrid:function(a,b){if(g.defaultGridOptions(a.options),a.options.enableInfiniteScroll){a.infiniteScroll={dataLoading:!1},g.setScrollDirections(a,a.options.infiniteScrollUp,a.options.infiniteScrollDown),a.api.core.on.scrollEnd(b,g.handleScroll);var c={events:{infiniteScroll:{needLoadMoreData:function(a,b){},needLoadMoreDataTop:function(a,b){}}},methods:{infiniteScroll:{dataLoaded:function(b,c){g.setScrollDirections(a,b,c);var d=g.adjustScroll(a).then(function(){a.infiniteScroll.dataLoading=!1});return d},resetScroll:function(b,c){return g.setScrollDirections(a,b,c),g.adjustInfiniteScrollPosition(a,0)},saveScrollPercentage:function(){a.infiniteScroll.prevScrolltopPercentage=a.renderContainers.body.prevScrolltopPercentage,a.infiniteScroll.previousVisibleRows=a.renderContainers.body.visibleRowCache.length},dataRemovedTop:function(b,c){g.dataRemovedTop(a,b,c)},dataRemovedBottom:function(b,c){g.dataRemovedBottom(a,b,c)},setScrollDirections:function(b,c){g.setScrollDirections(a,b,c)}}}};a.api.registerEventsFromObject(c.events),a.api.registerMethodsFromObject(c.methods)}},defaultGridOptions:function(a){a.enableInfiniteScroll=a.enableInfiniteScroll!==!1,a.infiniteScrollRowsFromEnd=a.infiniteScrollRowsFromEnd||20,a.infiniteScrollUp=a.infiniteScrollUp===!0,a.infiniteScrollDown=a.infiniteScrollDown!==!1},setScrollDirections:function(a,b,c){a.infiniteScroll.scrollUp=b===!0,a.suppressParentScrollUp=b===!0,a.infiniteScroll.scrollDown=c!==!1,a.suppressParentScrollDown=c!==!1},handleScroll:function(a){if(!(a.grid.infiniteScroll&&a.grid.infiniteScroll.dataLoading||"ui.grid.adjustInfiniteScrollPosition"===a.source)&&a.y){var b,c=a.grid.options.infiniteScrollRowsFromEnd/a.grid.renderContainers.body.visibleRowCache.length;a.grid.scrollDirection===d.scrollDirection.UP?(b=a.y.percentage,c>=b&&g.loadData(a.grid)):a.grid.scrollDirection===d.scrollDirection.DOWN&&(b=1-a.y.percentage,c>=b&&g.loadData(a.grid))}},loadData:function(a){a.infiniteScroll.previousVisibleRows=a.renderContainers.body.visibleRowCache.length,a.infiniteScroll.direction=a.scrollDirection,delete a.infiniteScroll.prevScrolltopPercentage,a.scrollDirection===d.scrollDirection.UP&&a.infiniteScroll.scrollUp?(a.infiniteScroll.dataLoading=!0,a.api.infiniteScroll.raise.needLoadMoreDataTop()):a.scrollDirection===d.scrollDirection.DOWN&&a.infiniteScroll.scrollDown&&(a.infiniteScroll.dataLoading=!0,a.api.infiniteScroll.raise.needLoadMoreData())},adjustScroll:function(a){var b=f.defer();return c(function(){var e;void 0===a.infiniteScroll.direction&&g.adjustInfiniteScrollPosition(a,0);var f,h,i=a.renderContainers.body.visibleRowCache.length,j=a.getViewportHeight()/a.options.rowHeight/2;a.infiniteScroll.direction===d.scrollDirection.UP&&(f=a.infiniteScroll.prevScrolltopPercentage||0,h=f*a.infiniteScroll.previousVisibleRows,e=(i-a.infiniteScroll.previousVisibleRows+h+j)/i,g.adjustInfiniteScrollPosition(a,e),c(function(){b.resolve()})),a.infiniteScroll.direction===d.scrollDirection.DOWN&&(f=a.infiniteScroll.prevScrolltopPercentage||1,h=f*a.infiniteScroll.previousVisibleRows,e=(h-j)/i,g.adjustInfiniteScrollPosition(a,e),c(function(){b.resolve()}))},0),b.promise},adjustInfiniteScrollPosition:function(a,b){var c=new e(a,null,null,"ui.grid.adjustInfiniteScrollPosition");0===b&&a.infiniteScroll.scrollUp?c.y={pixels:1}:c.y={percentage:b},a.scrollContainers("",c)},dataRemovedTop:function(a,b,c){g.setScrollDirections(a,b,c);var d=a.renderContainers.body.visibleRowCache.length,e=a.infiniteScroll.prevScrolltopPercentage*a.infiniteScroll.previousVisibleRows,f=e-(a.infiniteScroll.previousVisibleRows-d),h=f/d;
return g.adjustInfiniteScrollPosition(a,h)},dataRemovedBottom:function(a,b,c){g.setScrollDirections(a,b,c);var d=a.renderContainers.body.visibleRowCache.length,e=a.infiniteScroll.prevScrolltopPercentage*a.infiniteScroll.previousVisibleRows,f=e/d;return g.adjustInfiniteScrollPosition(a,f)}};return g}]),a.directive("uiGridInfiniteScroll",["uiGridInfiniteScrollService",function(a){return{priority:-200,scope:!1,require:"^uiGrid",compile:function(b,c,d){return{pre:function(b,c,d,e){a.initializeGrid(e.grid,b)},post:function(a,b,c){}}}}}])}(),function(){"use strict";var a=angular.module("ui.grid.moveColumns",["ui.grid"]);a.service("uiGridMoveColumnService",["$q","$timeout","$log","ScrollEvent","uiGridConstants","gridUtil",function(a,b,c,d,e,f){var g={initializeGrid:function(a){var b=this;this.registerPublicApi(a),this.defaultGridOptions(a.options),a.registerColumnBuilder(b.movableColumnBuilder)},registerPublicApi:function(a){var b=this,c={events:{colMovable:{columnPositionChanged:function(a,b,c){}}},methods:{colMovable:{moveColumn:function(c,d){var e=a.columns;if(!angular.isNumber(c)||!angular.isNumber(d))return void f.logError("MoveColumn: Please provide valid values for originalPosition and finalPosition");for(var g=0,h=0;h<e.length;h++)(angular.isDefined(e[h].colDef.visible)&&e[h].colDef.visible===!1||e[h].isRowHeader===!0)&&g++;if(c>=e.length-g||d>=e.length-g)return void f.logError("MoveColumn: Invalid values for originalPosition, finalPosition");var i=function(a){for(var b=a,c=0;b>=c;c++)angular.isDefined(e[c])&&(angular.isDefined(e[c].colDef.visible)&&e[c].colDef.visible===!1||e[c].isRowHeader===!0)&&b++;return b};b.redrawColumnAtPosition(a,i(c),i(d))}}}};a.api.registerEventsFromObject(c.events),a.api.registerMethodsFromObject(c.methods)},defaultGridOptions:function(a){a.enableColumnMoving=a.enableColumnMoving!==!1},movableColumnBuilder:function(b,c,d){var e=[];return b.enableColumnMoving=void 0===b.enableColumnMoving?d.enableColumnMoving:b.enableColumnMoving,a.all(e)},redrawColumnAtPosition:function(a,c,d){var f=a.columns,g=f[c];if(g.colDef.enableColumnMoving){if(c>d)for(var h=c;h>d;h--)f[h]=f[h-1];else if(d>c)for(var i=c;d>i;i++)f[i]=f[i+1];f[d]=g,a.queueGridRefresh(),b(function(){a.api.core.notifyDataChange(e.dataChange.COLUMN),a.api.colMovable.raise.columnPositionChanged(g.colDef,c,d)})}}};return g}]),a.directive("uiGridMoveColumns",["uiGridMoveColumnService",function(a){return{replace:!0,priority:0,require:"^uiGrid",scope:!1,compile:function(){return{pre:function(b,c,d,e){a.initializeGrid(e.grid)},post:function(a,b,c,d){}}}}}]),a.directive("uiGridHeaderCell",["$q","gridUtil","uiGridMoveColumnService","$document","$log","uiGridConstants","ScrollEvent",function(a,b,c,d,e,f,g){return{priority:-10,require:"^uiGrid",compile:function(){return{post:function(a,e,f,h){if(a.col.colDef.enableColumnMoving){var i,j,k,l,m,n,o=angular.element(e[0].querySelectorAll(".ui-grid-cell-contents")),p=!1,q=!1,r=function(b){i=a.grid.element[0].getBoundingClientRect().left,j=b.pageX,k=0,l=i+a.grid.getViewportWidth(),"mousedown"===b.type?(d.on("mousemove",s),d.on("mouseup",t)):"touchstart"===b.type&&(d.on("touchmove",s),d.on("touchend",t))},s=function(a){document.onselectstart=function(){return!1},q=!0;var b=a.pageX-j;p?p&&(x(b),j=a.pageX):w()},t=function(b){if(document.onselectstart=null,m&&(m.remove(),p=!1),v(),u(),q){for(var d=a.grid.columns,e=0,f=0;f<d.length&&d[f].colDef.name!==a.col.colDef.name;f++)e++;if(0>k){for(var g=0,h=e-1;h>=0;h--)if((angular.isUndefined(d[h].colDef.visible)||d[h].colDef.visible===!0)&&(g+=d[h].drawnWidth||d[h].width||d[h].colDef.width,g>Math.abs(k))){c.redrawColumnAtPosition(a.grid,e,h+1);break}g<Math.abs(k)&&c.redrawColumnAtPosition(a.grid,e,0)}else if(k>0){for(var i=0,j=e+1;j<d.length;j++)if((angular.isUndefined(d[j].colDef.visible)||d[j].colDef.visible===!0)&&(i+=d[j].drawnWidth||d[j].width||d[j].colDef.width,i>k)){c.redrawColumnAtPosition(a.grid,e,j-1);break}k>i&&c.redrawColumnAtPosition(a.grid,e,d.length-1)}}},u=function(){o.on("touchstart",r),o.on("mousedown",r)},v=function(){o.off("touchstart",r),o.off("mousedown",r),d.off("mousemove",s),d.off("touchmove",s),d.off("mouseup",t),d.off("touchend",t)};u();var w=function(){p=!0,m=e.clone(),e.parent().append(m),m.addClass("movingColumn");var c,d={};c="safari"===b.detectBrowser()?e[0].offsetLeft+e[0].offsetWidth-e[0].getBoundingClientRect().width:e[0].getBoundingClientRect().left,d.left=c-i+"px";var f=a.grid.element[0].getBoundingClientRect().right,g=e[0].getBoundingClientRect().right;g>f&&(n=a.col.drawnWidth+(f-g),d.width=n+"px"),m.css(d)},x=function(b){for(var c=a.grid.columns,d=0,e=0;e<c.length;e++)(angular.isUndefined(c[e].colDef.visible)||c[e].colDef.visible===!0)&&(d+=c[e].drawnWidth||c[e].width||c[e].colDef.width);var f,j=m[0].getBoundingClientRect().left-1,o=m[0].getBoundingClientRect().right;if(f=j-i+b,f=l>f?f:l,(j>=i||b>0)&&(l>=o||0>b))m.css({visibility:"visible",left:f+"px"});else if(d>Math.ceil(h.grid.gridWidth)){b*=8;var p=new g(a.col.grid,null,null,"uiGridHeaderCell.moveElement");p.x={pixels:b},p.grid.scrollContainers("",p)}for(var q=0,r=0;r<c.length;r++)if(angular.isUndefined(c[r].colDef.visible)||c[r].colDef.visible===!0){if(c[r].colDef.name===a.col.colDef.name)break;q+=c[r].drawnWidth||c[r].width||c[r].colDef.width}void 0===a.newScrollLeft?k+=b:k=a.newScrollLeft+f-q,n<a.col.drawnWidth&&(n+=Math.abs(b),m.css({width:n+"px"}))}}}}}}}])}(),function(){"use strict";var a=angular.module("ui.grid.pagination",["ng","ui.grid"]);a.service("uiGridPaginationService",["gridUtil",function(a){var b={initializeGrid:function(a){b.defaultGridOptions(a.options);var c={events:{pagination:{paginationChanged:function(a,b){}}},methods:{pagination:{getPage:function(){return a.options.enablePagination?a.options.paginationCurrentPage:null},getTotalPages:function(){return a.options.enablePagination?0===a.options.totalItems?1:Math.ceil(a.options.totalItems/a.options.paginationPageSize):null},nextPage:function(){a.options.enablePagination&&(a.options.totalItems>0?a.options.paginationCurrentPage=Math.min(a.options.paginationCurrentPage+1,c.methods.pagination.getTotalPages()):a.options.paginationCurrentPage++)},previousPage:function(){a.options.enablePagination&&(a.options.paginationCurrentPage=Math.max(a.options.paginationCurrentPage-1,1))},seek:function(b){if(a.options.enablePagination){if(!angular.isNumber(b)||1>b)throw"Invalid page number: "+b;a.options.paginationCurrentPage=Math.min(b,c.methods.pagination.getTotalPages())}}}}};a.api.registerEventsFromObject(c.events),a.api.registerMethodsFromObject(c.methods);var d=function(b){if(a.options.useExternalPagination||!a.options.enablePagination)return b;var c=parseInt(a.options.paginationPageSize,10),d=parseInt(a.options.paginationCurrentPage,10),e=b.filter(function(a){return a.visible});a.options.totalItems=e.length;var f=(d-1)*c;return f>e.length&&(d=a.options.paginationCurrentPage=1,f=(d-1)*c),e.slice(f,f+c)};a.registerRowsProcessor(d,900)},defaultGridOptions:function(b){b.enablePagination=b.enablePagination!==!1,b.enablePaginationControls=b.enablePaginationControls!==!1,b.useExternalPagination=b.useExternalPagination===!0,a.isNullOrUndefined(b.totalItems)&&(b.totalItems=0),a.isNullOrUndefined(b.paginationPageSizes)&&(b.paginationPageSizes=[250,500,1e3]),a.isNullOrUndefined(b.paginationPageSize)&&(b.paginationPageSizes.length>0?b.paginationPageSize=b.paginationPageSizes[0]:b.paginationPageSize=0),a.isNullOrUndefined(b.paginationCurrentPage)&&(b.paginationCurrentPage=1),a.isNullOrUndefined(b.paginationTemplate)&&(b.paginationTemplate="ui-grid/pagination")},onPaginationChanged:function(a,b,c){a.api.pagination.raise.paginationChanged(b,c),a.options.useExternalPagination||a.queueGridRefresh()}};return b}]),a.directive("uiGridPagination",["gridUtil","uiGridPaginationService",function(a,b){return{priority:-200,scope:!1,require:"uiGrid",link:{pre:function(c,d,e,f){b.initializeGrid(f.grid),a.getTemplate(f.grid.options.paginationTemplate).then(function(a){var b=angular.element(a);d.append(b),f.innerCompile(b)})}}}}]),a.directive("uiGridPager",["uiGridPaginationService","uiGridConstants","gridUtil","i18nService",function(a,b,c,d){return{priority:-200,scope:!0,require:"^uiGrid",link:function(e,f,g,h){e.paginationApi=h.grid.api.pagination,e.sizesLabel=d.getSafeText("pagination.sizes"),e.totalItemsLabel=d.getSafeText("pagination.totalItems");var i=h.grid.options;h.grid.renderContainers.body.registerViewportAdjuster(function(a){return a.height=a.height-c.elementHeight(f),a});var j=h.grid.registerDataChangeCallback(function(a){a.options.useExternalPagination||(a.options.totalItems=a.rows.length)},[b.dataChange.ROW]);e.$on("$destroy",j);var k=function(){e.showingLow=(i.paginationCurrentPage-1)*i.paginationPageSize+1,e.showingHigh=Math.min(i.paginationCurrentPage*i.paginationPageSize,i.totalItems)},l=e.$watch("grid.options.totalItems + grid.options.paginationPageSize",k),m=e.$watch("grid.options.paginationCurrentPage + grid.options.paginationPageSize",function(b,c){if(b!==c){if(!angular.isNumber(i.paginationCurrentPage)||i.paginationCurrentPage<1)return void(i.paginationCurrentPage=1);if(i.totalItems>0&&i.paginationCurrentPage>e.paginationApi.getTotalPages())return void(i.paginationCurrentPage=e.paginationApi.getTotalPages());k(),a.onPaginationChanged(e.grid,i.paginationCurrentPage,i.paginationPageSize)}});e.$on("$destroy",function(){l(),m()}),e.cantPageForward=function(){return i.totalItems>0?i.paginationCurrentPage>=e.paginationApi.getTotalPages():i.data.length<1},e.cantPageToLast=function(){return i.totalItems>0?e.cantPageForward():!0},e.cantPageBackward=function(){return i.paginationCurrentPage<=1}}}}])}(),function(){"use strict";var a=angular.module("ui.grid.pinning",["ui.grid"]);a.constant("uiGridPinningConstants",{container:{LEFT:"left",RIGHT:"right",NONE:""}}),a.service("uiGridPinningService",["gridUtil","GridRenderContainer","i18nService","uiGridPinningConstants",function(a,b,c,d){var e={initializeGrid:function(a){e.defaultGridOptions(a.options),a.registerColumnBuilder(e.pinningColumnBuilder);var b={events:{pinning:{columnPinned:function(a,b){}}},methods:{pinning:{pinColumn:function(b,c){e.pinColumn(a,b,c)}}}};a.api.registerEventsFromObject(b.events),a.api.registerMethodsFromObject(b.methods)},defaultGridOptions:function(a){a.enablePinning=a.enablePinning!==!1},pinningColumnBuilder:function(b,f,g){if(b.enablePinning=void 0===b.enablePinning?g.enablePinning:b.enablePinning,b.pinnedLeft?(f.renderContainer="left",f.grid.createLeftContainer()):b.pinnedRight&&(f.renderContainer="right",f.grid.createRightContainer()),b.enablePinning){var h={name:"ui.grid.pinning.pinLeft",title:c.get().pinning.pinLeft,icon:"ui-grid-icon-left-open",shown:function(){return"undefined"==typeof this.context.col.renderContainer||!this.context.col.renderContainer||"left"!==this.context.col.renderContainer},action:function(){e.pinColumn(this.context.col.grid,this.context.col,d.container.LEFT)}},i={name:"ui.grid.pinning.pinRight",title:c.get().pinning.pinRight,icon:"ui-grid-icon-right-open",shown:function(){return"undefined"==typeof this.context.col.renderContainer||!this.context.col.renderContainer||"right"!==this.context.col.renderContainer},action:function(){e.pinColumn(this.context.col.grid,this.context.col,d.container.RIGHT)}},j={name:"ui.grid.pinning.unpin",title:c.get().pinning.unpin,icon:"ui-grid-icon-cancel",shown:function(){return"undefined"!=typeof this.context.col.renderContainer&&null!==this.context.col.renderContainer&&"body"!==this.context.col.renderContainer},action:function(){e.pinColumn(this.context.col.grid,this.context.col,d.container.UNPIN)}};a.arrayContainsObjectWithProperty(f.menuItems,"name","ui.grid.pinning.pinLeft")||f.menuItems.push(h),a.arrayContainsObjectWithProperty(f.menuItems,"name","ui.grid.pinning.pinRight")||f.menuItems.push(i),a.arrayContainsObjectWithProperty(f.menuItems,"name","ui.grid.pinning.unpin")||f.menuItems.push(j)}},pinColumn:function(a,b,c){c===d.container.NONE?b.renderContainer=null:(b.renderContainer=c,c===d.container.LEFT?a.createLeftContainer():c===d.container.RIGHT&&a.createRightContainer()),a.refresh().then(function(){a.api.pinning.raise.columnPinned(b.colDef,c)})}};return e}]),a.directive("uiGridPinning",["gridUtil","uiGridPinningService",function(a,b){return{require:"uiGrid",scope:!1,compile:function(){return{pre:function(a,c,d,e){b.initializeGrid(e.grid)},post:function(a,b,c,d){}}}}}])}(),function(){"use strict";var a=angular.module("ui.grid.resizeColumns",["ui.grid"]);a.service("uiGridResizeColumnsService",["gridUtil","$q","$timeout",function(a,b,c){var d={defaultGridOptions:function(a){a.enableColumnResizing=a.enableColumnResizing!==!1,a.enableColumnResize===!1&&(a.enableColumnResizing=!1)},colResizerColumnBuilder:function(a,c,d){var e=[];return a.enableColumnResizing=void 0===a.enableColumnResizing?d.enableColumnResizing:a.enableColumnResizing,a.enableColumnResize===!1&&(a.enableColumnResizing=!1),b.all(e)},registerPublicApi:function(a){var b={events:{colResizable:{columnSizeChanged:function(a,b){}}}};a.api.registerEventsFromObject(b.events)},fireColumnSizeChanged:function(b,d,e){c(function(){b.api.colResizable?b.api.colResizable.raise.columnSizeChanged(d,e):a.logError("The resizeable api is not registered, this may indicate that you've included the module but not added the 'ui-grid-resize-columns' directive to your grid definition.  Cannot raise any events.")})},findTargetCol:function(a,b,c){var d=a.getRenderContainer();if("left"===b){var e=d.visibleColumnCache.indexOf(a);return d.visibleColumnCache[e-1*c]}return a}};return d}]),a.directive("uiGridResizeColumns",["gridUtil","uiGridResizeColumnsService",function(a,b){return{replace:!0,priority:0,require:"^uiGrid",scope:!1,compile:function(){return{pre:function(a,c,d,e){b.defaultGridOptions(e.grid.options),e.grid.registerColumnBuilder(b.colResizerColumnBuilder),b.registerPublicApi(e.grid)},post:function(a,b,c,d){}}}}}]),a.directive("uiGridHeaderCell",["gridUtil","$templateCache","$compile","$q","uiGridResizeColumnsService","uiGridConstants","$timeout",function(a,b,c,d,e,f,g){return{priority:-10,require:"^uiGrid",compile:function(){return{post:function(a,d,h,i){var j=i.grid;if(j.options.enableColumnResizing){var k=b.get("ui-grid/columnResizer"),l=1;j.isRTL()&&(a.position="left",l=-1);var m=function(){for(var b=d[0].getElementsByClassName("ui-grid-column-resizer"),f=0;f<b.length;f++)angular.element(b[f]).remove();var g=e.findTargetCol(a.col,"left",l),h=a.col.getRenderContainer();if(g&&0!==h.visibleColumnCache.indexOf(a.col)&&g.colDef.enableColumnResizing!==!1){var i=angular.element(k).clone();i.attr("position","left"),d.prepend(i),c(i)(a)}if(a.col.colDef.enableColumnResizing!==!1){var j=angular.element(k).clone();j.attr("position","right"),d.append(j),c(j)(a)}};m();var n=function(){g(m)},o=j.registerDataChangeCallback(n,[f.dataChange.COLUMN]);a.$on("$destroy",o)}}}}}}]),a.directive("uiGridColumnResizer",["$document","gridUtil","uiGridConstants","uiGridResizeColumnsService",function(a,b,c,d){var e=angular.element('<div class="ui-grid-resize-overlay"></div>'),f={priority:0,scope:{col:"=",position:"@",renderIndex:"="},require:"?^uiGrid",link:function(f,g,h,i){function j(a){i.grid.buildColumns().then(function(){i.grid.refreshCanvas(!0).then(function(){i.grid.queueGridRefresh()})})}function k(a,b){var c=b;return a.colDef.minWidth&&c<a.colDef.minWidth?c=a.colDef.minWidth:a.colDef.maxWidth&&c>a.colDef.maxWidth&&(c=a.colDef.maxWidth),c}function l(a,b){a.originalEvent&&(a=a.originalEvent),a.preventDefault(),o=(a.targetTouches?a.targetTouches[0]:a).clientX-p,0>o?o=0:o>i.grid.gridWidth&&(o=i.grid.gridWidth);var g=d.findTargetCol(f.col,f.position,q);if(g.colDef.enableColumnResizing!==!1){i.grid.element.hasClass("column-resizing")||i.grid.element.addClass("column-resizing");var h=o-n,j=parseInt(g.drawnWidth+h*q,10);o+=(k(g,j)-j)*q,e.css({left:o+"px"}),i.fireEvent(c.events.ITEM_DRAGGING)}}function m(a,b){a.originalEvent&&(a=a.originalEvent),a.preventDefault(),i.grid.element.removeClass("column-resizing"),e.remove(),o=(a.changedTouches?a.changedTouches[0]:a).clientX-p;var c=o-n;if(0===c)return t(),void s();var g=d.findTargetCol(f.col,f.position,q);if(g.colDef.enableColumnResizing!==!1){var h=parseInt(g.drawnWidth+c*q,10);g.width=k(g,h),j(c),d.fireColumnSizeChanged(i.grid,g.colDef,c),t(),s()}}var n=0,o=0,p=0,q=1;i.grid.isRTL()&&(f.position="left",q=-1),"left"===f.position?g.addClass("left"):"right"===f.position&&g.addClass("right");var r=function(b,c){b.originalEvent&&(b=b.originalEvent),b.stopPropagation(),p=i.grid.element[0].getBoundingClientRect().left,n=(b.targetTouches?b.targetTouches[0]:b).clientX-p,i.grid.element.append(e),e.css({left:n}),"touchstart"===b.type?(a.on("touchend",m),a.on("touchmove",l),g.off("mousedown",r)):(a.on("mouseup",m),a.on("mousemove",l),g.off("touchstart",r))},s=function(){g.on("mousedown",r),g.on("touchstart",r)},t=function(){a.off("mouseup",m),a.off("touchend",m),a.off("mousemove",l),a.off("touchmove",l),g.off("mousedown",r),g.off("touchstart",r)};s();var u=function(a,e){a.stopPropagation();var h=d.findTargetCol(f.col,f.position,q);if(h.colDef.enableColumnResizing!==!1){var l=0,m=0,n=b.closestElm(g,".ui-grid-render-container"),o=n.querySelectorAll("."+c.COL_CLASS_PREFIX+h.uid+" .ui-grid-cell-contents");Array.prototype.forEach.call(o,function(a){var c;angular.element(a).parent().hasClass("ui-grid-header-cell")&&(c=angular.element(a).parent()[0].querySelectorAll(".ui-grid-column-menu-button")),b.fakeElement(a,{},function(a){var d=angular.element(a);d.attr("style","float: left");var e=b.elementWidth(d);if(c){var f=b.elementWidth(c);e+=f}e>l&&(l=e,m=l-e)})}),h.width=k(h,l),j(m),d.fireColumnSizeChanged(i.grid,h.colDef,m)}};g.on("dblclick",u),g.on("$destroy",function(){g.off("dblclick",u),t()})}};return f}])}(),function(){"use strict";var a=angular.module("ui.grid.rowEdit",["ui.grid","ui.grid.edit","ui.grid.cellNav"]);a.constant("uiGridRowEditConstants",{}),a.service("uiGridRowEditService",["$interval","$q","uiGridConstants","uiGridRowEditConstants","gridUtil",function(a,b,c,d,e){var f={initializeGrid:function(a,b){b.rowEdit={};var c={events:{rowEdit:{saveRow:function(a){}}},methods:{rowEdit:{setSavePromise:function(a,c){f.setSavePromise(b,a,c)},getDirtyRows:function(){return b.rowEdit.dirtyRows?b.rowEdit.dirtyRows:[]},getErrorRows:function(){return b.rowEdit.errorRows?b.rowEdit.errorRows:[]},flushDirtyRows:function(){return f.flushDirtyRows(b)},setRowsDirty:function(a){f.setRowsDirty(b,a)}}}};b.api.registerEventsFromObject(c.events),b.api.registerMethodsFromObject(c.methods),b.api.core.on.renderingComplete(a,function(c){b.api.edit.on.afterCellEdit(a,f.endEditCell),b.api.edit.on.beginCellEdit(a,f.beginEditCell),b.api.edit.on.cancelCellEdit(a,f.cancelEditCell),b.api.cellNav&&b.api.cellNav.on.navigate(a,f.navigate)})},defaultGridOptions:function(a){},saveRow:function(a,b){var c=this;return function(){if(b.isSaving=!0,b.rowEditSavePromise)return b.rowEditSavePromise;var d=a.api.rowEdit.raise.saveRow(b.entity);return b.rowEditSavePromise?b.rowEditSavePromise.then(c.processSuccessPromise(a,b),c.processErrorPromise(a,b)):e.logError("A promise was not returned when saveRow event was raised, either nobody is listening to event, or event handler did not return a promise"),d}},setSavePromise:function(a,b,c){var d=a.getRow(b);d.rowEditSavePromise=c},processSuccessPromise:function(a,b){var c=this;return function(){delete b.isSaving,delete b.isDirty,delete b.isError,delete b.rowEditSaveTimer,delete b.rowEditSavePromise,c.removeRow(a.rowEdit.errorRows,b),c.removeRow(a.rowEdit.dirtyRows,b)}},processErrorPromise:function(a,b){return function(){delete b.isSaving,delete b.rowEditSaveTimer,delete b.rowEditSavePromise,b.isError=!0,a.rowEdit.errorRows||(a.rowEdit.errorRows=[]),f.isRowPresent(a.rowEdit.errorRows,b)||a.rowEdit.errorRows.push(b)}},removeRow:function(a,b){"undefined"!=typeof a&&null!==a&&a.forEach(function(c,d){c.uid===b.uid&&a.splice(d,1)})},isRowPresent:function(a,b){var c=!1;return a.forEach(function(a,d){a.uid===b.uid&&(c=!0)}),c},flushDirtyRows:function(a){var c=[];return a.rowEdit.dirtyRows.forEach(function(b){f.saveRow(a,b)(),c.push(b.rowEditSavePromise)}),b.all(c)},endEditCell:function(a,b,c,d){var g=this.grid,h=g.getRow(a);return h?void((c!==d||h.isDirty)&&(g.rowEdit.dirtyRows||(g.rowEdit.dirtyRows=[]),h.isDirty||(h.isDirty=!0,g.rowEdit.dirtyRows.push(h)),delete h.isError,f.considerSetTimer(g,h))):void e.logError("Unable to find rowEntity in grid data, dirty flag cannot be set")},beginEditCell:function(a,b){var c=this.grid,d=c.getRow(a);return d?void f.cancelTimer(c,d):void e.logError("Unable to find rowEntity in grid data, timer cannot be cancelled")},cancelEditCell:function(a,b){var c=this.grid,d=c.getRow(a);return d?void f.considerSetTimer(c,d):void e.logError("Unable to find rowEntity in grid data, timer cannot be set")},navigate:function(a,b){var c=this.grid;a.row.rowEditSaveTimer&&f.cancelTimer(c,a.row),b&&b.row&&b.row!==a.row&&f.considerSetTimer(c,b.row)},considerSetTimer:function(b,c){if(f.cancelTimer(b,c),c.isDirty&&!c.isSaving&&-1!==b.options.rowEditWaitInterval){var d=b.options.rowEditWaitInterval?b.options.rowEditWaitInterval:2e3;c.rowEditSaveTimer=a(f.saveRow(b,c),d,1)}},cancelTimer:function(b,c){c.rowEditSaveTimer&&!c.isSaving&&(a.cancel(c.rowEditSaveTimer),delete c.rowEditSaveTimer)},setRowsDirty:function(a,b){var c;b.forEach(function(b,d){c=a.getRow(b),c?(a.rowEdit.dirtyRows||(a.rowEdit.dirtyRows=[]),c.isDirty||(c.isDirty=!0,a.rowEdit.dirtyRows.push(c)),delete c.isError,f.considerSetTimer(a,c)):e.logError("requested row not found in rowEdit.setRowsDirty, row was: "+b)})}};return f}]),a.directive("uiGridRowEdit",["gridUtil","uiGridRowEditService","uiGridEditConstants",function(a,b,c){return{replace:!0,priority:0,require:"^uiGrid",scope:!1,compile:function(){return{pre:function(a,c,d,e){b.initializeGrid(a,e.grid)},post:function(a,b,c,d){}}}}}]),a.directive("uiGridViewport",["$compile","uiGridConstants","gridUtil","$parse",function(a,b,c,d){return{priority:-200,scope:!1,compile:function(a,b){var c=angular.element(a.children().children()[0]),d=c.attr("ng-class"),e="";return e=d?d.slice(0,-1)+", 'ui-grid-row-dirty': row.isDirty, 'ui-grid-row-saving': row.isSaving, 'ui-grid-row-error': row.isError}":"{'ui-grid-row-dirty': row.isDirty, 'ui-grid-row-saving': row.isSaving, 'ui-grid-row-error': row.isError}",c.attr("ng-class",e),{pre:function(a,b,c,d){},post:function(a,b,c,d){}}}}}])}(),function(){"use strict";var a=angular.module("ui.grid.saveState",["ui.grid","ui.grid.selection","ui.grid.cellNav","ui.grid.grouping","ui.grid.pinning","ui.grid.treeView"]);a.constant("uiGridSaveStateConstants",{featureName:"saveState"}),a.service("uiGridSaveStateService",["$q","uiGridSaveStateConstants","gridUtil","$compile","$interval","uiGridConstants",function(a,b,c,d,e,f){var g={initializeGrid:function(a){a.saveState={},this.defaultGridOptions(a.options);var b={events:{saveState:{}},methods:{saveState:{save:function(){return g.save(a)},restore:function(b,c){g.restore(a,b,c)}}}};a.api.registerEventsFromObject(b.events),a.api.registerMethodsFromObject(b.methods)},defaultGridOptions:function(a){a.saveWidths=a.saveWidths!==!1,a.saveOrder=a.saveOrder!==!1,a.saveScroll=a.saveScroll===!0,a.saveFocus=a.saveScroll!==!0&&a.saveFocus!==!1,a.saveVisible=a.saveVisible!==!1,a.saveSort=a.saveSort!==!1,a.saveFilter=a.saveFilter!==!1,a.saveSelection=a.saveSelection!==!1,a.saveGrouping=a.saveGrouping!==!1,a.saveGroupingExpandedStates=a.saveGroupingExpandedStates===!0,a.savePinning=a.savePinning!==!1,a.saveTreeView=a.saveTreeView!==!1},save:function(a){var b={};return b.columns=g.saveColumns(a),b.scrollFocus=g.saveScrollFocus(a),b.selection=g.saveSelection(a),b.grouping=g.saveGrouping(a),b.treeView=g.saveTreeView(a),b},restore:function(a,b,c){c.columns&&g.restoreColumns(a,c.columns),c.scrollFocus&&g.restoreScrollFocus(a,b,c.scrollFocus),c.selection&&g.restoreSelection(a,c.selection),c.grouping&&g.restoreGrouping(a,c.grouping),c.treeView&&g.restoreTreeView(a,c.treeView),a.refresh()},saveColumns:function(a){var b=[];return a.getOnlyDataColumns().forEach(function(c){var d={};d.name=c.name,a.options.saveVisible&&(d.visible=c.visible),a.options.saveWidths&&(d.width=c.width),a.options.saveSort&&(d.sort=angular.copy(c.sort)),a.options.saveFilter&&(d.filters=angular.copy(c.filters)),a.api.pinning&&a.options.savePinning&&(d.pinned=c.renderContainer?c.renderContainer:""),b.push(d)}),b},saveScrollFocus:function(a){if(!a.api.cellNav)return{};var b={};if(a.options.saveFocus){b.focus=!0;var c=a.api.cellNav.getFocusedCell();null!==c&&(null!==c.col&&(b.colName=c.col.colDef.name),null!==c.row&&(b.rowVal=g.getRowVal(a,c.row)))}return(a.options.saveScroll||a.options.saveFocus&&!b.colName&&!b.rowVal)&&(b.focus=!1,a.renderContainers.body.prevRowScrollIndex&&(b.rowVal=g.getRowVal(a,a.renderContainers.body.visibleRowCache[a.renderContainers.body.prevRowScrollIndex])),a.renderContainers.body.prevColScrollIndex&&(b.colName=a.renderContainers.body.visibleColumnCache[a.renderContainers.body.prevColScrollIndex].name)),b},saveSelection:function(a){if(!a.api.selection||!a.options.saveSelection)return[];var b=a.api.selection.getSelectedGridRows().map(function(b){return g.getRowVal(a,b)});return b},saveGrouping:function(a){return a.api.grouping&&a.options.saveGrouping?a.api.grouping.getGrouping(a.options.saveGroupingExpandedStates):{}},saveTreeView:function(a){return a.api.treeView&&a.options.saveTreeView?a.api.treeView.getTreeView():{}},getRowVal:function(a,b){if(!b)return null;var c={};return a.options.saveRowIdentity?(c.identity=!0,c.row=a.options.saveRowIdentity(b.entity)):(c.identity=!1,c.row=a.renderContainers.body.visibleRowCache.indexOf(b)),c},restoreColumns:function(a,b){b.forEach(function(b,c){var d=a.getColumn(b.name);if(d&&!a.isRowHeaderColumn(d)){!a.options.saveVisible||d.visible===b.visible&&d.colDef.visible===b.visible||(d.visible=b.visible,d.colDef.visible=b.visible,a.api.core.raise.columnVisibilityChanged(d)),a.options.saveWidths&&(d.width=b.width),!a.options.saveSort||angular.equals(d.sort,b.sort)||void 0===d.sort&&angular.isEmpty(b.sort)||(d.sort=angular.copy(b.sort),a.api.core.raise.sortChanged()),a.options.saveFilter&&!angular.equals(d.filters,b.filters)&&(d.filters=angular.copy(b.filters),a.api.core.raise.filterChanged()),a.api.pinning&&a.options.savePinning&&d.renderContainer!==b.pinned&&a.api.pinning.pinColumn(d,b.pinned);var e=a.getOnlyDataColumns().indexOf(d);if(-1!==e&&a.options.saveOrder&&e!==c){var f=a.columns.splice(e+a.rowHeaderColumns.length,1)[0];a.columns.splice(c+a.rowHeaderColumns.length,0,f)}}})},restoreScrollFocus:function(a,b,c){if(a.api.cellNav){var d,e;if(c.colName){var f=a.options.columnDefs.filter(function(a){return a.name===c.colName});f.length>0&&(d=f[0])}c.rowVal&&c.rowVal.row&&(e=c.rowVal.identity?g.findRowByIdentity(a,c.rowVal):a.renderContainers.body.visibleRowCache[c.rowVal.row]);var h=e&&e.entity?e.entity:null;(d||h)&&(c.focus?a.api.cellNav.scrollToFocus(h,d):a.scrollTo(h,d))}},restoreSelection:function(a,b){a.api.selection&&(a.api.selection.clearSelectedRows(),b.forEach(function(b){if(b.identity){var c=g.findRowByIdentity(a,b);c&&a.api.selection.selectRow(c.entity)}else a.api.selection.selectRowByVisibleIndex(b.row)}))},restoreGrouping:function(a,b){a.api.grouping&&"undefined"!=typeof b&&null!==b&&!angular.equals(b,{})&&a.api.grouping.setGrouping(b)},restoreTreeView:function(a,b){a.api.treeView&&"undefined"!=typeof b&&null!==b&&!angular.equals(b,{})&&a.api.treeView.setTreeView(b)},findRowByIdentity:function(a,b){if(!a.options.saveRowIdentity)return null;var c=a.rows.filter(function(c){return a.options.saveRowIdentity(c.entity)===b.row?!0:!1});return c.length>0?c[0]:null}};return g}]),a.directive("uiGridSaveState",["uiGridSaveStateConstants","uiGridSaveStateService","gridUtil","$compile",function(a,b,c,d){return{replace:!0,priority:0,require:"^uiGrid",scope:!1,link:function(a,c,d,e){b.initializeGrid(e.grid)}}}])}(),function(){"use strict";var a=angular.module("ui.grid.selection",["ui.grid"]);a.constant("uiGridSelectionConstants",{featureName:"selection",selectionRowHeaderColName:"selectionRowHeaderCol"}),angular.module("ui.grid").config(["$provide",function(a){a.decorator("GridRow",["$delegate",function(a){return a.prototype.setSelected=function(a){this.isSelected=a,a?this.grid.selection.selectedCount++:this.grid.selection.selectedCount--},a}])}]),a.service("uiGridSelectionService",["$q","$templateCache","uiGridSelectionConstants","gridUtil",function(a,b,c,d){var e={initializeGrid:function(a){a.selection={},a.selection.lastSelectedRow=null,a.selection.selectAll=!1,a.selection.selectedCount=0,e.defaultGridOptions(a.options);var b={events:{selection:{rowSelectionChanged:function(a,b,c){},rowSelectionChangedBatch:function(a,b,c){}}},methods:{selection:{toggleRowSelection:function(b,c){var d=a.getRow(b);null!==d&&d.enableSelection!==!1&&e.toggleRowSelection(a,d,c,a.options.multiSelect,a.options.noUnselect)},selectRow:function(b,c){var d=a.getRow(b);null===d||d.isSelected||d.enableSelection===!1||e.toggleRowSelection(a,d,c,a.options.multiSelect,a.options.noUnselect)},selectRowByVisibleIndex:function(b,c){var d=a.renderContainers.body.visibleRowCache[b];null===d||"undefined"==typeof d||d.isSelected||d.enableSelection===!1||e.toggleRowSelection(a,d,c,a.options.multiSelect,a.options.noUnselect)},unSelectRow:function(b,c){var d=a.getRow(b);null!==d&&d.isSelected&&e.toggleRowSelection(a,d,c,a.options.multiSelect,a.options.noUnselect)},selectAllRows:function(b){if(a.options.multiSelect!==!1){var c=[];a.rows.forEach(function(d){d.isSelected||d.enableSelection===!1||(d.setSelected(!0),e.decideRaiseSelectionEvent(a,d,c,b))}),e.decideRaiseSelectionBatchEvent(a,c,b),a.selection.selectAll=!0}},selectAllVisibleRows:function(b){if(a.options.multiSelect!==!1){var c=[];a.rows.forEach(function(d){d.visible?d.isSelected||d.enableSelection===!1||(d.setSelected(!0),e.decideRaiseSelectionEvent(a,d,c,b)):d.isSelected&&(d.setSelected(!1),e.decideRaiseSelectionEvent(a,d,c,b))}),e.decideRaiseSelectionBatchEvent(a,c,b),a.selection.selectAll=!0}},clearSelectedRows:function(b){e.clearSelectedRows(a,b)},getSelectedRows:function(){return e.getSelectedRows(a).map(function(a){return a.entity})},getSelectedGridRows:function(){return e.getSelectedRows(a)},setMultiSelect:function(b){a.options.multiSelect=b},setModifierKeysToMultiSelect:function(b){a.options.modifierKeysToMultiSelect=b},getSelectAllState:function(){return a.selection.selectAll}}}};a.api.registerEventsFromObject(b.events),a.api.registerMethodsFromObject(b.methods)},defaultGridOptions:function(a){a.enableRowSelection=a.enableRowSelection!==!1,a.multiSelect=a.multiSelect!==!1,a.noUnselect=a.noUnselect===!0,a.modifierKeysToMultiSelect=a.modifierKeysToMultiSelect===!0,a.enableRowHeaderSelection=a.enableRowHeaderSelection!==!1,a.enableSelectAll=a.enableSelectAll!==!1,a.enableSelectionBatchEvent=a.enableSelectionBatchEvent!==!1,a.selectionRowHeaderWidth=angular.isDefined(a.selectionRowHeaderWidth)?a.selectionRowHeaderWidth:30,a.enableFooterTotalSelected=a.enableFooterTotalSelected!==!1,a.isRowSelectable=angular.isDefined(a.isRowSelectable)?a.isRowSelectable:angular.noop},toggleRowSelection:function(a,b,c,d,f){var g=b.isSelected;if(d||g){if(!d&&g){var h=e.getSelectedRows(a);h.length>1&&(g=!1,e.clearSelectedRows(a,c))}}else e.clearSelectedRows(a,c);g&&f||b.enableSelection!==!1&&(b.setSelected(!g),b.isSelected===!0?a.selection.lastSelectedRow=b:a.selection.selectAll=!1,a.api.selection.raise.rowSelectionChanged(b,c))},shiftSelect:function(a,b,c,d){if(d){var f=e.getSelectedRows(a),g=f.length>0?a.renderContainers.body.visibleRowCache.indexOf(a.selection.lastSelectedRow):0,h=a.renderContainers.body.visibleRowCache.indexOf(b);if(g>h){var i=g;g=h,h=i}for(var j=[],k=g;h>=k;k++){var l=a.renderContainers.body.visibleRowCache[k];l&&(l.isSelected||l.enableSelection===!1||(l.setSelected(!0),a.selection.lastSelectedRow=l,
e.decideRaiseSelectionEvent(a,l,j,c)))}e.decideRaiseSelectionBatchEvent(a,j,c)}},getSelectedRows:function(a){return a.rows.filter(function(a){return a.isSelected})},clearSelectedRows:function(a,b){var c=[];e.getSelectedRows(a).forEach(function(d){d.isSelected&&(d.setSelected(!1),e.decideRaiseSelectionEvent(a,d,c,b))}),e.decideRaiseSelectionBatchEvent(a,c,b),a.selection.selectAll=!1},decideRaiseSelectionEvent:function(a,b,c,d){a.options.enableSelectionBatchEvent?c.push(b):a.api.selection.raise.rowSelectionChanged(b,d)},decideRaiseSelectionBatchEvent:function(a,b,c){b.length>0&&a.api.selection.raise.rowSelectionChangedBatch(b,c)}};return e}]),a.directive("uiGridSelection",["uiGridSelectionConstants","uiGridSelectionService","$templateCache","uiGridConstants",function(a,b,c,d){return{replace:!0,priority:0,require:"^uiGrid",scope:!1,compile:function(){return{pre:function(c,e,f,g){if(b.initializeGrid(g.grid),g.grid.options.enableRowHeaderSelection){var h={name:a.selectionRowHeaderColName,displayName:"",width:g.grid.options.selectionRowHeaderWidth,minWidth:10,cellTemplate:"ui-grid/selectionRowHeader",headerCellTemplate:"ui-grid/selectionHeaderCell",enableColumnResizing:!1,enableColumnMenu:!1,exporterSuppressExport:!0,allowCellFocus:!0};g.grid.addRowHeaderColumn(h)}var i=!1,j=function(a){return a.forEach(function(a){a.enableSelection=g.grid.options.isRowSelectable(a)}),a},k=function(){g.grid.options.isRowSelectable!==angular.noop&&i!==!0&&(g.grid.registerRowsProcessor(j,500),i=!0)};k();var l=g.grid.registerDataChangeCallback(k,[d.dataChange.OPTIONS]);c.$on("$destroy",l)},post:function(a,b,c,d){}}}}}]),a.directive("uiGridSelectionRowHeaderButtons",["$templateCache","uiGridSelectionService",function(a,b){return{replace:!0,restrict:"E",template:a.get("ui-grid/selectionRowHeaderButtons"),scope:!0,require:"^uiGrid",link:function(a,c,d,e){var f=e.grid;a.selectButtonClick=function(a,c){c.stopPropagation(),c.shiftKey?b.shiftSelect(f,a,c,f.options.multiSelect):c.ctrlKey||c.metaKey?b.toggleRowSelection(f,a,c,f.options.multiSelect,f.options.noUnselect):b.toggleRowSelection(f,a,c,f.options.multiSelect&&!f.options.modifierKeysToMultiSelect,f.options.noUnselect)}}}}]),a.directive("uiGridSelectionSelectAllButtons",["$templateCache","uiGridSelectionService",function(a,b){return{replace:!0,restrict:"E",template:a.get("ui-grid/selectionSelectAllButtons"),scope:!1,link:function(a,c,d,e){var f=a.col.grid;a.headerButtonClick=function(a,c){f.selection.selectAll?(b.clearSelectedRows(f,c),f.options.noUnselect&&f.api.selection.selectRowByVisibleIndex(0,c),f.selection.selectAll=!1):f.options.multiSelect&&(f.api.selection.selectAllVisibleRows(c),f.selection.selectAll=!0)}}}}]),a.directive("uiGridViewport",["$compile","uiGridConstants","uiGridSelectionConstants","gridUtil","$parse","uiGridSelectionService",function(a,b,c,d,e,f){return{priority:-200,scope:!1,compile:function(a,b){var c=angular.element(a.children().children()[0]),d=c.attr("ng-class"),e="";return e=d?d.slice(0,-1)+",'ui-grid-row-selected': row.isSelected}":"{'ui-grid-row-selected': row.isSelected}",c.attr("ng-class",e),{pre:function(a,b,c,d){},post:function(a,b,c,d){}}}}}]),a.directive("uiGridCell",["$compile","uiGridConstants","uiGridSelectionConstants","gridUtil","$parse","uiGridSelectionService","$timeout",function(a,b,c,d,e,f,g){return{priority:-200,restrict:"A",require:"?^uiGrid",scope:!1,link:function(a,c,d,e){function h(){a.grid.options.enableRowSelection&&!a.grid.options.enableRowHeaderSelection&&(c.addClass("ui-grid-disable-selection"),c.on("touchstart",m),c.on("touchend",n),c.on("click",l),a.registered=!0)}function i(){a.registered&&(c.removeClass("ui-grid-disable-selection"),c.off("touchstart",m),c.off("touchend",n),c.off("click",l),a.registered=!1)}var j=0,k=300;e.grid.api.cellNav&&e.grid.api.cellNav.on.viewPortKeyDown(a,function(b,c){null!==c&&c.row===a.row&&c.col===a.col&&32===b.keyCode&&"selectionRowHeaderCol"===a.col.colDef.name&&(f.toggleRowSelection(a.grid,a.row,b,a.grid.options.multiSelect&&!a.grid.options.modifierKeysToMultiSelect,a.grid.options.noUnselect),a.$apply())});var l=function(b){c.off("touchend",n),b.shiftKey?f.shiftSelect(a.grid,a.row,b,a.grid.options.multiSelect):b.ctrlKey||b.metaKey?f.toggleRowSelection(a.grid,a.row,b,a.grid.options.multiSelect,a.grid.options.noUnselect):f.toggleRowSelection(a.grid,a.row,b,a.grid.options.multiSelect&&!a.grid.options.modifierKeysToMultiSelect,a.grid.options.noUnselect),a.$apply(),g(function(){c.on("touchend",n)},k)},m=function(a){j=(new Date).getTime(),c.off("click",l)},n=function(a){var b=(new Date).getTime(),d=b-j;k>d&&l(a),g(function(){c.on("click",l)},k)};h();var o=a.grid.registerDataChangeCallback(function(){!a.grid.options.enableRowSelection||a.grid.options.enableRowHeaderSelection||a.registered?a.grid.options.enableRowSelection&&!a.grid.options.enableRowHeaderSelection||!a.registered||i():h()},[b.dataChange.OPTIONS]);c.on("$destroy",o)}}}]),a.directive("uiGridGridFooter",["$compile","uiGridConstants","gridUtil",function(a,b,c){return{restrict:"EA",replace:!0,priority:-1e3,require:"^uiGrid",scope:!0,compile:function(b,d){return{pre:function(b,d,e,f){f.grid.options.showGridFooter&&c.getTemplate("ui-grid/gridFooterSelectedItems").then(function(c){var e=angular.element(c),f=a(e)(b);angular.element(d[0].getElementsByClassName("ui-grid-grid-footer")[0]).append(f)})},post:function(a,b,c,d){}}}}}])}(),function(){"use strict";var a=angular.module("ui.grid.treeView",["ui.grid"]);a.constant("uiGridTreeViewConstants",{featureName:"treeView",treeViewRowHeaderColName:"treeViewRowHeaderCol",EXPANDED:"expanded",COLLAPSED:"collapsed"}),a.service("uiGridTreeViewService",["$q","uiGridTreeViewConstants","gridUtil","GridRow","gridClassFactory","i18nService","uiGridConstants",function(a,b,c,d,e,f,g){var h={initializeGrid:function(a,b){a.treeView={},a.treeView.numberLevels=0,a.treeView.expandAll=!1,a.treeView.rowExpandedStates={},h.defaultGridOptions(a.options),a.registerRowsProcessor(h.treeRows,410);var c={events:{treeView:{rowExpanded:{},rowCollapsed:{}}},methods:{treeView:{expandAllRows:function(){h.expandAllRows(a)},collapseAllRows:function(){h.collapseAllRows(a)},toggleRowTreeViewState:function(b){h.toggleRowTreeViewState(a,b)},expandRow:function(b){h.expandRow(a,b)},expandRowChildren:function(b){h.expandRowChildren(a,b)},collapseRow:function(b){h.collapseRow(a,b)},collapseRowChildren:function(b){h.collapseRowChildren(a,b)},getTreeView:function(){return{expandedState:a.treeView.rowExpandedStates}},setTreeView:function(b){"undefined"!=typeof b.expandedState&&(a.treeView.rowExpandedStates=b.expandedState)}}}};a.api.registerEventsFromObject(c.events),a.api.registerMethodsFromObject(c.methods)},defaultGridOptions:function(a){a.enableTreeView=a.enableTreeView!==!1,a.treeViewRowHeaderBaseWidth=a.treeViewRowHeaderBaseWidth||30,a.treeViewIndent=a.treeViewIndent||10,a.showTreeViewRowHeader=a.showTreeViewRowHeader!==!1},expandAllRows:function(a){h.setAllNodes(a,a.treeView.rowExpandedStates,b.EXPANDED),a.queueGridRefresh()},collapseAllRows:function(a){h.setAllNodes(a,a.treeView.rowExpandedStates,b.COLLAPSED),a.queueGridRefresh()},setAllNodes:function(a,c,d){"undefined"!=typeof c.state&&c.state!==d&&(c.state=d,d===b.EXPANDED?a.api.treeView.raise.rowExpanded(c.row):a.api.treeView.raise.rowCollapsed(c.row)),angular.forEach(c,function(b,c){"state"!==c&&"row"!==c&&h.setAllNodes(a,b,d)})},toggleRowTreeViewState:function(a,c){"undefined"==typeof c.treeLevel||null===c.treeLevel||c.treeLevel<0||(c.treeExpandedState.state===b.EXPANDED?h.collapseRow(a,c):h.expandRow(a,c),a.queueGridRefresh())},expandRow:function(a,c){"undefined"==typeof c.treeLevel||null===c.treeLevel||c.treeLevel<0||c.treeExpandedState.state!==b.EXPANDED&&(c.treeExpandedState.state=b.EXPANDED,a.api.treeView.raise.rowExpanded(c),a.queueGridRefresh())},expandRowChildren:function(a,c){"undefined"==typeof c.treeLevel||null===c.treeLevel||c.treeLevel<0||(h.setAllNodes(a,c.treeExpandedState,b.EXPANDED),a.queueGridRefresh())},collapseRow:function(a,c){"undefined"==typeof c.treeLevel||null===c.treeLevel||c.treeLevel<0||c.treeExpandedState.state!==b.COLLAPSED&&(c.treeExpandedState.state=b.COLLAPSED,a.api.treeView.raise.rowCollapsed(c),a.queueGridRefresh())},collapseRowChildren:function(a,c){"undefined"==typeof c.treeLevel||null===c.treeLevel||c.treeLevel<0||(h.setAllNodes(a,c.treeExpandedState,b.COLLAPSED),a.queueGridRefresh())},treeRows:function(a){if(0===a.length)return a;var c=this,d=0,e=b.EXPANDED,f=[],g=function(a){if(a.treeLevel=a.entity.$$treeLevel,a.visible){if(a.treeLevel<=d){for(;a.treeLevel<=d;)f.pop(),d--;e=f.length>0?h.setCurrentState(f):b.EXPANDED}e===b.COLLAPSED?a.visible=!1:a.visible=!0,"undefined"!=typeof a.treeLevel&&a.treeLevel>-1&&(h.addOrUseState(c,a,f),d++,e=h.setCurrentState(f)),c.treeView.numberLevels<a.treeLevel&&(c.treeView.numberLevels=a.treeLevel)}};a.forEach(g);var i=c.options.treeViewRowHeaderBaseWidth+c.options.treeViewIndent*c.treeView.numberLevels,j=c.getColumn(b.treeViewRowHeaderColName);return j&&i!==j.width&&(j.width=i,c.queueRefresh()),a.filter(function(a){return a.visible})},addOrUseState:function(a,c,d){if(0===c.entity.$$treeLevel)"undefined"==typeof a.treeView.rowExpandedStates[c.uid]&&(a.treeView.rowExpandedStates[c.uid]={state:b.COLLAPSED,row:c}),c.treeExpandedState=a.treeView.rowExpandedStates[c.uid];else{var e=d[d.length-1].treeExpandedState;"undefined"==typeof e[c.uid]&&(e[c.uid]={state:e.state,row:c}),c.treeExpandedState=e[c.uid]}d.push(c)},setCurrentState:function(a){var c=b.EXPANDED;return a.forEach(function(a){a.treeExpandedState.state===b.COLLAPSED&&(c=b.COLLAPSED)}),c}};return h}]),a.directive("uiGridTreeView",["uiGridTreeViewConstants","uiGridTreeViewService","$templateCache",function(a,b,c){return{replace:!0,priority:0,require:"^uiGrid",scope:!1,compile:function(){return{pre:function(c,d,e,f){if(f.grid.options.enableTreeView!==!1&&(b.initializeGrid(f.grid,c),f.grid.options.showTreeViewRowHeader)){var g={name:a.treeViewRowHeaderColName,displayName:"",width:f.grid.options.treeViewRowHeaderBaseWidth,minWidth:10,cellTemplate:"ui-grid/treeViewRowHeader",headerCellTemplate:"ui-grid/treeViewHeaderCell",enableColumnResizing:!1,enableColumnMenu:!1,exporterSuppressExport:!0,allowCellFocus:!0};f.grid.addRowHeaderColumn(g)}},post:function(a,b,c,d){}}}}}]),a.directive("uiGridTreeViewRowHeaderButtons",["$templateCache","uiGridTreeViewService",function(a,b){return{replace:!0,restrict:"E",template:a.get("ui-grid/treeViewRowHeaderButtons"),scope:!0,require:"^uiGrid",link:function(a,c,d,e){var f=e.grid;a.treeViewButtonClick=function(a,c){b.toggleRowTreeViewState(f,a,c)}}}}]),a.directive("uiGridTreeViewExpandAllButtons",["$templateCache","uiGridTreeViewService",function(a,b){return{replace:!0,restrict:"E",template:a.get("ui-grid/treeViewExpandAllButtons"),scope:!1,link:function(a,c,d,e){var f=a.col.grid;a.headerButtonClick=function(a,c){f.treeView.expandAll?(b.collapseAllRows(f,c),f.treeView.expandAll=!1):(b.expandAllRows(f,c),f.treeView.expandAll=!0)}}}}]),a.directive("uiGridViewport",["$compile","uiGridConstants","uiGridTreeViewConstants","gridUtil","$parse","uiGridTreeViewService",function(a,b,c,d,e,f){return{priority:-200,scope:!1,compile:function(a,b){var c=angular.element(a.children().children()[0]),d=c.attr("ng-class"),e="";return e=d?d.slice(0,-1)+",'ui-grid-tree-view-header-row': row.treeLevel > -1}":"{'ui-grid-tree-view-header-row': row.treeLevel > -1}",c.attr("ng-class",e),{pre:function(a,b,c,d){},post:function(a,b,c,d){}}}}}])}(),angular.module("ui.grid").run(["$templateCache",function(a){"use strict";a.put("ui-grid/ui-grid-filter",'<div class="ui-grid-filter-container" ng-repeat="colFilter in col.filters" ng-class="{\'ui-grid-filter-cancel-button-hidden\' : colFilter.disableCancelFilterButton === true }"><div ng-if="colFilter.type !== \'select\'"><input type="text" class="ui-grid-filter-input" ng-model="colFilter.term" ng-attr-placeholder="{{colFilter.placeholder || \'\'}}"><div class="ui-grid-filter-button" ng-click="colFilter.term = null" ng-if="!colFilter.disableCancelFilterButton"><i class="ui-grid-icon-cancel" ng-show="colFilter.term !== undefined && colFilter.term != null">&nbsp;</i></div></div><div ng-if="colFilter.type === \'select\'"><select class="ui-grid-filter-select" ng-model="colFilter.term" ng-attr-placeholder="{{colFilter.placeholder || \'\'}}" ng-options="option.value as option.label for option in colFilter.selectOptions"><option value=""></option></select><div class="ui-grid-filter-button-select" ng-click="colFilter.term = null" ng-if="!colFilter.disableCancelFilterButton"><i class="ui-grid-icon-cancel" ng-show="colFilter.term !== undefined && colFilter.term != null">&nbsp;</i></div></div></div>'),a.put("ui-grid/ui-grid-footer",'<div class="ui-grid-footer-panel ui-grid-footer-aggregates-row"><div class="ui-grid-footer ui-grid-footer-viewport"><div class="ui-grid-footer-canvas"><div class="ui-grid-footer-cell-wrapper" ng-style="colContainer.headerCellWrapperStyle()"><div class="ui-grid-footer-cell-row"><div ng-repeat="col in colContainer.renderedColumns track by col.colDef.name" ui-grid-footer-cell col="col" render-index="$index" class="ui-grid-footer-cell ui-grid-clearfix"></div></div></div></div></div></div>'),a.put("ui-grid/ui-grid-grid-footer",'<div class="ui-grid-footer-info ui-grid-grid-footer"><span>{{\'search.totalItems\' | t}} {{grid.rows.length}}</span> <span ng-if="grid.renderContainers.body.visibleRowCache.length !== grid.rows.length" class="ngLabel">({{"search.showingItems" | t}} {{grid.renderContainers.body.visibleRowCache.length}})</span></div>'),a.put("ui-grid/ui-grid-group-panel",'<div class="ui-grid-group-panel"><div ui-t="groupPanel.description" class="description" ng-show="groupings.length == 0"></div><ul ng-show="groupings.length > 0" class="ngGroupList"><li class="ngGroupItem" ng-repeat="group in configGroups"><span class="ngGroupElement"><span class="ngGroupName">{{group.displayName}} <span ng-click="removeGroup($index)" class="ngRemoveGroup">x</span></span> <span ng-hide="$last" class="ngGroupArrow"></span></span></li></ul></div>'),a.put("ui-grid/ui-grid-header",'<div class="ui-grid-header"><div class="ui-grid-top-panel"><div class="ui-grid-header-viewport"><div class="ui-grid-header-canvas"><div class="ui-grid-header-cell-wrapper" ng-style="colContainer.headerCellWrapperStyle()"><div class="ui-grid-header-cell-row"><div class="ui-grid-header-cell ui-grid-clearfix" ng-repeat="col in colContainer.renderedColumns track by col.uid" ui-grid-header-cell col="col" render-index="$index"></div></div></div></div></div></div></div>'),a.put("ui-grid/ui-grid-menu-button",'<div class="ui-grid-menu-button" ng-click="toggleMenu()"><div class="ui-grid-icon-container"><i class="ui-grid-icon-menu">&nbsp;</i></div><div ui-grid-menu menu-items="menuItems"></div></div>'),a.put("ui-grid/ui-grid-no-header",'<div class="ui-grid-top-panel"></div>'),a.put("ui-grid/ui-grid-row",'<div ng-repeat="(colRenderIndex, col) in colContainer.renderedColumns track by col.uid" class="ui-grid-cell" ng-class="{ \'ui-grid-row-header-cell\': col.isRowHeader }" ui-grid-cell></div>'),a.put("ui-grid/ui-grid",'<div ui-i18n="en" class="ui-grid"><!-- TODO (c0bra): add "scoped" attr here, eventually? --><style ui-grid-style>.grid{{ grid.id }} {\n      /* Styles for the grid */\n    }\n\n    .grid{{ grid.id }} .ui-grid-row, .grid{{ grid.id }} .ui-grid-cell, .grid{{ grid.id }} .ui-grid-cell .ui-grid-vertical-bar {\n      height: {{ grid.options.rowHeight }}px;\n    }\n\n    .grid{{ grid.id }} .ui-grid-row:last-child .ui-grid-cell {\n      border-bottom-width: {{ ((grid.getTotalRowHeight() < grid.getViewportHeight()) && \'1\') || \'0\' }}px;\n    }\n\n    {{ grid.verticalScrollbarStyles }}\n    {{ grid.horizontalScrollbarStyles }}\n\n    /*\n    .ui-grid[dir=rtl] .ui-grid-viewport {\n      padding-left: {{ grid.verticalScrollbarWidth }}px;\n    }\n    */\n\n    {{ grid.customStyles }}</style><div ui-grid-menu-button ng-if="grid.options.enableGridMenu"></div><div ng-if="grid.hasLeftContainer()" style="width: 0" ui-grid-pinned-container="\'left\'"></div><div ui-grid-render-container container-id="\'body\'" col-container-name="\'body\'" row-container-name="\'body\'" bind-scroll-horizontal="true" bind-scroll-vertical="true" enable-horizontal-scrollbar="grid.options.enableHorizontalScrollbar" enable-vertical-scrollbar="grid.options.enableVerticalScrollbar"></div><div ng-if="grid.hasRightContainer()" style="width: 0" ui-grid-pinned-container="\'right\'"></div><div ui-grid-grid-footer ng-if="grid.options.showGridFooter"></div><div ui-grid-column-menu ng-if="grid.options.enableColumnMenus"></div><div ng-transclude></div></div>'),a.put("ui-grid/uiGridCell",'<div class="ui-grid-cell-contents" title="TOOLTIP">{{COL_FIELD CUSTOM_FILTERS}}</div>'),a.put("ui-grid/uiGridColumnMenu",'<div class="ui-grid-column-menu"><div ui-grid-menu menu-items="menuItems"><!-- <div class="ui-grid-column-menu">\n    <div class="inner" ng-show="menuShown">\n      <ul>\n        <div ng-show="grid.options.enableSorting">\n          <li ng-click="sortColumn($event, asc)" ng-class="{ \'selected\' : col.sort.direction == asc }"><i class="ui-grid-icon-sort-alt-up"></i> Sort Ascending</li>\n          <li ng-click="sortColumn($event, desc)" ng-class="{ \'selected\' : col.sort.direction == desc }"><i class="ui-grid-icon-sort-alt-down"></i> Sort Descending</li>\n          <li ng-show="col.sort.direction" ng-click="unsortColumn()"><i class="ui-grid-icon-cancel"></i> Remove Sort</li>\n        </div>\n      </ul>\n    </div>\n  </div> --></div></div>'),a.put("ui-grid/uiGridFooterCell",'<div class="ui-grid-cell-contents" col-index="renderIndex"><div>{{ col.getAggregationText() + ( col.getAggregationValue() CUSTOM_FILTERS ) }}</div></div>'),a.put("ui-grid/uiGridHeaderCell",'<div ng-class="{ \'sortable\': sortable }"><!-- <div class="ui-grid-vertical-bar">&nbsp;</div> --><div class="ui-grid-cell-contents" col-index="renderIndex"><span>{{ col.displayName CUSTOM_FILTERS }}</span> <span ui-grid-visible="col.sort.direction" ng-class="{ \'ui-grid-icon-up-dir\': col.sort.direction == asc, \'ui-grid-icon-down-dir\': col.sort.direction == desc, \'ui-grid-icon-blank\': !col.sort.direction }">&nbsp;</span></div><div class="ui-grid-column-menu-button" ng-if="grid.options.enableColumnMenus && !col.isRowHeader  && col.colDef.enableColumnMenu !== false" ng-click="toggleMenu($event)" ng-class="{\'ui-grid-column-menu-button-last-col\': isLastCol}"><i class="ui-grid-icon-angle-down">&nbsp;</i></div><div ui-grid-filter></div></div>'),a.put("ui-grid/uiGridMenu",'<div class="ui-grid-menu" ng-if="shown"><div class="ui-grid-menu-mid" ng-show="shownMid"><div class="ui-grid-menu-inner"><ul class="ui-grid-menu-items"><li ng-repeat="item in menuItems" ui-grid-menu-item action="item.action" name="item.title" active="item.active" icon="item.icon" shown="item.shown" context="item.context" template-url="item.templateUrl" leave-open="item.leaveOpen"></li></ul></div></div></div>'),a.put("ui-grid/uiGridMenuItem",'<li class="ui-grid-menu-item" ng-click="itemAction($event, title)" ng-show="itemShown()" ng-class="{ \'ui-grid-menu-item-active\' : active() }"><i ng-class="icon"></i> {{ name }}</li>'),a.put("ui-grid/uiGridRenderContainer","<div class=\"ui-grid-render-container\" ng-style=\"{ 'margin-left': colContainer.getMargin('left') + 'px', 'margin-right': colContainer.getMargin('right') + 'px' }\"><div ui-grid-header></div><div ui-grid-viewport></div><div ui-grid-footer ng-if=\"grid.options.showColumnFooter\"></div></div>"),a.put("ui-grid/uiGridViewport",'<div class="ui-grid-viewport" ng-style="colContainer.getViewportStyle()"><div class="ui-grid-canvas"><div ng-repeat="(rowRenderIndex, row) in rowContainer.renderedRows track by $index" class="ui-grid-row" ng-style="Viewport.rowStyle(rowRenderIndex)"><div ui-grid-row="row" row-render-index="rowRenderIndex"></div></div></div></div>'),a.put("ui-grid/cellEditor",'<div><form name="inputForm"><input type="INPUT_TYPE" ng-class="\'colt\' + col.uid" ui-grid-editor ng-model="MODEL_COL_FIELD"></form></div>'),a.put("ui-grid/dropdownEditor",'<div><form name="inputForm"><select ng-class="\'colt\' + col.uid" ui-grid-edit-dropdown ng-model="MODEL_COL_FIELD" ng-options="field[editDropdownIdLabel] as field[editDropdownValueLabel] CUSTOM_FILTERS for field in editDropdownOptionsArray"></select></form></div>'),a.put("ui-grid/fileChooserEditor",'<div><form name="inputForm"><input ng-class="\'colt\' + col.uid" ui-grid-edit-file-chooser type="file" id="files" name="files[]" ng-model="MODEL_COL_FIELD"></form></div>'),a.put("ui-grid/expandableRow",'<div ui-grid-expandable-row ng-if="expandableRow.shouldRenderExpand()" class="expandableRow" style="float:left; margin-top: 1px; margin-bottom: 1px" ng-style="{width: (grid.renderContainers.body.getCanvasWidth()) + \'px\'\n     , height: grid.options.expandableRowHeight + \'px\'}"></div>'),a.put("ui-grid/expandableRowHeader",'<div class="ui-grid-row-header-cell ui-grid-expandable-buttons-cell"><div class="ui-grid-cell-contents"><i ng-class="{ \'ui-grid-icon-plus-squared\' : !row.isExpanded, \'ui-grid-icon-minus-squared\' : row.isExpanded }" ng-click="grid.api.expandable.toggleRowExpansion(row.entity)"></i></div></div>'),a.put("ui-grid/expandableScrollFiller","<div ng-if=\"expandableRow.shouldRenderFiller()\" ng-class=\"{scrollFiller:true, scrollFillerClass:(colContainer.name === 'body')}\" ng-style=\"{ width: (grid.getViewportWidth()) + 'px',\n              height: grid.options.expandableRowHeight + 2 + 'px', 'margin-left': grid.options.rowHeader.rowHeaderWidth + 'px' }\"><i class=\"ui-grid-icon-spin5 ui-grid-animate-spin\" ng-style=\"{ 'margin-top': ( grid.options.expandableRowHeight/2 - 5) + 'px',\n            'margin-left' : ((grid.getViewportWidth() - grid.options.rowHeader.rowHeaderWidth)/2 - 5) + 'px' }\"></i></div>"),a.put("ui-grid/expandableTopRowHeader",'<div class="ui-grid-row-header-cell ui-grid-expandable-buttons-cell"><div class="ui-grid-cell-contents"><i ng-class="{ \'ui-grid-icon-plus-squared\' : !grid.expandable.expandedAll, \'ui-grid-icon-minus-squared\' : grid.expandable.expandedAll }" ng-click="grid.api.expandable.toggleAllRows()"></i></div></div>'),a.put("ui-grid/csvLink",'<span class="ui-grid-exporter-csv-link-span"><a href="data:text/csv;charset=UTF-8,CSV_CONTENT" download="FILE_NAME">LINK_LABEL</a></span>'),a.put("ui-grid/groupingExpandAllButtons",'<div class="ui-grid-grouping-row-header-buttons" ng-class="{\'ui-grid-icon-minus-squared\': grid.grouping.expandAll, \'ui-grid-icon-plus-squared\': !grid.grouping.expandAll}" ng-click="headerButtonClick($event)"></div>'),a.put("ui-grid/groupingHeaderCell",'<div><!-- <div class="ui-grid-vertical-bar">&nbsp;</div> --><div class="ui-grid-cell-contents" col-index="renderIndex"><ui-grid-grouping-expand-all-buttons></ui-grid-grouping-expand-all-buttons></div></div>'),a.put("ui-grid/groupingRowHeader",'<div class="ui-grid-cell-contents"><ui-grid-grouping-row-header-buttons></ui-grid-grouping-row-header-buttons></div>'),a.put("ui-grid/groupingRowHeaderButtons","<div class=\"ui-grid-grouping-row-header-buttons\" ng-class=\"{'ui-grid-group-header': row.groupLevel > - 1}\" ng-click=\"groupButtonClick(row, $event)\"><i ng-class=\"{'ui-grid-icon-minus-squared': row.expandedState.state === 'expanded', 'ui-grid-icon-plus-squared': row.expandedState.state === 'collapsed'}\" ng-style=\"{'padding-left': grid.options.groupingIndent * row.groupLevel + 'px'}\"></i> &nbsp;</div>"),a.put("ui-grid/importerMenuItem",'<li class="ui-grid-menu-item"><form><input class="ui-grid-importer-file-chooser" type="file" id="files" name="files[]"></form></li>'),a.put("ui-grid/importerMenuItemContainer","<div ui-grid-importer-menu-item></div>"),a.put("ui-grid/pagination",'<div class="ui-grid-pager-panel" ui-grid-pager ng-show="grid.options.enablePaginationControls"><div class="ui-grid-pager-container"><div class="ui-grid-pager-control"><button type="button" ng-click="paginationApi.seek(1)" ng-disabled="cantPageBackward()"><div class="first-triangle"><div class="first-bar"></div></div></button> <button type="button" ng-click="paginationApi.previousPage()" ng-disabled="cantPageBackward()"><div class="first-triangle prev-triangle"></div></button> <input type="number" ng-model="grid.options.paginationCurrentPage" min="1" max="{{ paginationApi.getTotalPages() }}" required> <span class="ui-grid-pager-max-pages-number" ng-show="paginationApi.getTotalPages() > 0">/ {{ paginationApi.getTotalPages() }}</span> <button type="button" ng-click="paginationApi.nextPage()" ng-disabled="cantPageForward()"><div class="last-triangle next-triangle"></div></button> <button type="button" ng-click="paginationApi.seek(paginationApi.getTotalPages())" ng-disabled="cantPageToLast()"><div class="last-triangle"><div class="last-bar"></div></div></button></div><div class="ui-grid-pager-row-count-picker"><select ng-model="grid.options.paginationPageSize" ng-options="o as o for o in grid.options.paginationPageSizes"></select><span class="ui-grid-pager-row-count-label">&nbsp;{{sizesLabel}}</span></div></div><div class="ui-grid-pager-count-container"><div class="ui-grid-pager-count"><span ng-show="grid.options.totalItems > 0">{{showingLow}} - {{showingHigh}} of {{grid.options.totalItems}} {{totalItemsLabel}}</span></div></div></div>'),a.put("ui-grid/columnResizer",'<div ui-grid-column-resizer ng-if="grid.options.enableColumnResizing" class="ui-grid-column-resizer" col="col" position="right" render-index="renderIndex" unselectable="on"></div>'),a.put("ui-grid/gridFooterSelectedItems",'<span ng-if="grid.selection.selectedCount !== 0 && grid.options.enableFooterTotalSelected">({{"search.selectedItems" | t}} {{grid.selection.selectedCount}})</span>'),a.put("ui-grid/selectionHeaderCell",'<div><!-- <div class="ui-grid-vertical-bar">&nbsp;</div> --><div class="ui-grid-cell-contents" col-index="renderIndex"><ui-grid-selection-select-all-buttons ng-if="grid.options.enableSelectAll"></ui-grid-selection-select-all-buttons></div></div>'),a.put("ui-grid/selectionRowHeader",'<div class="ui-grid-disable-selection"><div class="ui-grid-cell-contents"><ui-grid-selection-row-header-buttons></ui-grid-selection-row-header-buttons></div></div>'),a.put("ui-grid/selectionRowHeaderButtons",'<div class="ui-grid-selection-row-header-buttons ui-grid-icon-ok" ng-class="{\'ui-grid-row-selected\': row.isSelected}" ng-click="selectButtonClick(row, $event)">&nbsp;</div>'),a.put("ui-grid/selectionSelectAllButtons",'<div class="ui-grid-selection-row-header-buttons ui-grid-icon-ok" ng-class="{\'ui-grid-all-selected\': grid.selection.selectAll}" ng-click="headerButtonClick($event)"></div>'),a.put("ui-grid/treeViewExpandAllButtons",'<div class="ui-grid-tree-view-row-header-buttons" ng-class="{\'ui-grid-icon-minus-squared\': grid.treeView.expandAll, \'ui-grid-icon-plus-squared\': !grid.treeView.expandAll}" ng-click="headerButtonClick($event)"></div>'),a.put("ui-grid/treeViewHeaderCell",'<div><div class="ui-grid-cell-contents" col-index="renderIndex"><ui-grid-tree-view-expand-all-buttons></ui-grid-tree-view-expand-all-buttons></div></div>'),a.put("ui-grid/treeViewRowHeader",'<div class="ui-grid-cell-contents"><ui-grid-tree-view-row-header-buttons></ui-grid-tree-view-row-header-buttons></div>'),a.put("ui-grid/treeViewRowHeaderButtons","<div class=\"ui-grid-tree-view-row-header-buttons\" ng-class=\"{'ui-grid-tree-view-header': row.treeLevel > - 1}\" ng-click=\"treeViewButtonClick(row, $event)\"><i ng-class=\"{'ui-grid-icon-minus-squared': row.treeExpandedState.state === 'expanded', 'ui-grid-icon-plus-squared': row.treeExpandedState.state === 'collapsed'}\" ng-style=\"{'padding-left': grid.options.treeViewIndent * row.entity.$$treeLevel + 'px'}\"></i> &nbsp;</div>")}]),function(){function a(a){function b(b,c,d,e,f,g){for(;f>=0&&g>f;f+=a){var h=e?e[f]:f;d=c(d,b[h],h,b)}return d}return function(c,d,e,f){d=s(d,f,4);var g=!x(c)&&r.keys(c),h=(g||c).length,i=a>0?0:h-1;return arguments.length<3&&(e=c[g?g[i]:i],i+=a),b(c,d,e,g,i,h)}}function b(a){return function(b,c,d){c=t(c,d);for(var e=null!=b&&b.length,f=a>0?0:e-1;f>=0&&e>f;f+=a)if(c(b[f],f,b))return f;return-1}}function c(a,b){var c=C.length,d=a.constructor,e=r.isFunction(d)&&d.prototype||g,f="constructor";for(r.has(a,f)&&!r.contains(b,f)&&b.push(f);c--;)f=C[c],f in a&&a[f]!==e[f]&&!r.contains(b,f)&&b.push(f)}var d=this,e=d._,f=Array.prototype,g=Object.prototype,h=Function.prototype,i=f.push,j=f.slice,k=g.toString,l=g.hasOwnProperty,m=Array.isArray,n=Object.keys,o=h.bind,p=Object.create,q=function(){},r=function(a){return a instanceof r?a:this instanceof r?void(this._wrapped=a):new r(a)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=r),exports._=r):d._=r,r.VERSION="1.8.2";var s=function(a,b,c){if(void 0===b)return a;switch(null==c?3:c){case 1:return function(c){return a.call(b,c)};case 2:return function(c,d){return a.call(b,c,d)};case 3:return function(c,d,e){return a.call(b,c,d,e)};case 4:return function(c,d,e,f){return a.call(b,c,d,e,f)}}return function(){return a.apply(b,arguments)}},t=function(a,b,c){return null==a?r.identity:r.isFunction(a)?s(a,b,c):r.isObject(a)?r.matcher(a):r.property(a)};r.iteratee=function(a,b){return t(a,b,1/0)};var u=function(a,b){return function(c){var d=arguments.length;if(2>d||null==c)return c;for(var e=1;d>e;e++)for(var f=arguments[e],g=a(f),h=g.length,i=0;h>i;i++){var j=g[i];b&&void 0!==c[j]||(c[j]=f[j])}return c}},v=function(a){if(!r.isObject(a))return{};if(p)return p(a);q.prototype=a;var b=new q;return q.prototype=null,b},w=Math.pow(2,53)-1,x=function(a){var b=a&&a.length;return"number"==typeof b&&b>=0&&w>=b};r.each=r.forEach=function(a,b,c){b=s(b,c);var d,e;if(x(a))for(d=0,e=a.length;e>d;d++)b(a[d],d,a);else{var f=r.keys(a);for(d=0,e=f.length;e>d;d++)b(a[f[d]],f[d],a)}return a},r.map=r.collect=function(a,b,c){b=t(b,c);for(var d=!x(a)&&r.keys(a),e=(d||a).length,f=Array(e),g=0;e>g;g++){var h=d?d[g]:g;f[g]=b(a[h],h,a)}return f},r.reduce=r.foldl=r.inject=a(1),r.reduceRight=r.foldr=a(-1),r.find=r.detect=function(a,b,c){var d;return d=x(a)?r.findIndex(a,b,c):r.findKey(a,b,c),void 0!==d&&-1!==d?a[d]:void 0},r.filter=r.select=function(a,b,c){var d=[];return b=t(b,c),r.each(a,function(a,c,e){b(a,c,e)&&d.push(a)}),d},r.reject=function(a,b,c){return r.filter(a,r.negate(t(b)),c)},r.every=r.all=function(a,b,c){b=t(b,c);for(var d=!x(a)&&r.keys(a),e=(d||a).length,f=0;e>f;f++){var g=d?d[f]:f;if(!b(a[g],g,a))return!1}return!0},r.some=r.any=function(a,b,c){b=t(b,c);for(var d=!x(a)&&r.keys(a),e=(d||a).length,f=0;e>f;f++){var g=d?d[f]:f;if(b(a[g],g,a))return!0}return!1},r.contains=r.includes=r.include=function(a,b,c){return x(a)||(a=r.values(a)),r.indexOf(a,b,"number"==typeof c&&c)>=0},r.invoke=function(a,b){var c=j.call(arguments,2),d=r.isFunction(b);return r.map(a,function(a){var e=d?b:a[b];return null==e?e:e.apply(a,c)})},r.pluck=function(a,b){return r.map(a,r.property(b))},r.where=function(a,b){return r.filter(a,r.matcher(b))},r.findWhere=function(a,b){return r.find(a,r.matcher(b))},r.max=function(a,b,c){var d,e,f=-1/0,g=-1/0;if(null==b&&null!=a){a=x(a)?a:r.values(a);for(var h=0,i=a.length;i>h;h++)d=a[h],d>f&&(f=d)}else b=t(b,c),r.each(a,function(a,c,d){e=b(a,c,d),(e>g||e===-1/0&&f===-1/0)&&(f=a,g=e)});return f},r.min=function(a,b,c){var d,e,f=1/0,g=1/0;if(null==b&&null!=a){a=x(a)?a:r.values(a);for(var h=0,i=a.length;i>h;h++)d=a[h],f>d&&(f=d)}else b=t(b,c),r.each(a,function(a,c,d){e=b(a,c,d),(g>e||1/0===e&&1/0===f)&&(f=a,g=e)});return f},r.shuffle=function(a){for(var b,c=x(a)?a:r.values(a),d=c.length,e=Array(d),f=0;d>f;f++)b=r.random(0,f),b!==f&&(e[f]=e[b]),e[b]=c[f];return e},r.sample=function(a,b,c){return null==b||c?(x(a)||(a=r.values(a)),a[r.random(a.length-1)]):r.shuffle(a).slice(0,Math.max(0,b))},r.sortBy=function(a,b,c){return b=t(b,c),r.pluck(r.map(a,function(a,c,d){return{value:a,index:c,criteria:b(a,c,d)}}).sort(function(a,b){var c=a.criteria,d=b.criteria;if(c!==d){
if(c>d||void 0===c)return 1;if(d>c||void 0===d)return-1}return a.index-b.index}),"value")};var y=function(a){return function(b,c,d){var e={};return c=t(c,d),r.each(b,function(d,f){var g=c(d,f,b);a(e,d,g)}),e}};r.groupBy=y(function(a,b,c){r.has(a,c)?a[c].push(b):a[c]=[b]}),r.indexBy=y(function(a,b,c){a[c]=b}),r.countBy=y(function(a,b,c){r.has(a,c)?a[c]++:a[c]=1}),r.toArray=function(a){return a?r.isArray(a)?j.call(a):x(a)?r.map(a,r.identity):r.values(a):[]},r.size=function(a){return null==a?0:x(a)?a.length:r.keys(a).length},r.partition=function(a,b,c){b=t(b,c);var d=[],e=[];return r.each(a,function(a,c,f){(b(a,c,f)?d:e).push(a)}),[d,e]},r.first=r.head=r.take=function(a,b,c){return null==a?void 0:null==b||c?a[0]:r.initial(a,a.length-b)},r.initial=function(a,b,c){return j.call(a,0,Math.max(0,a.length-(null==b||c?1:b)))},r.last=function(a,b,c){return null==a?void 0:null==b||c?a[a.length-1]:r.rest(a,Math.max(0,a.length-b))},r.rest=r.tail=r.drop=function(a,b,c){return j.call(a,null==b||c?1:b)},r.compact=function(a){return r.filter(a,r.identity)};var z=function(a,b,c,d){for(var e=[],f=0,g=d||0,h=a&&a.length;h>g;g++){var i=a[g];if(x(i)&&(r.isArray(i)||r.isArguments(i))){b||(i=z(i,b,c));var j=0,k=i.length;for(e.length+=k;k>j;)e[f++]=i[j++]}else c||(e[f++]=i)}return e};r.flatten=function(a,b){return z(a,b,!1)},r.without=function(a){return r.difference(a,j.call(arguments,1))},r.uniq=r.unique=function(a,b,c,d){if(null==a)return[];r.isBoolean(b)||(d=c,c=b,b=!1),null!=c&&(c=t(c,d));for(var e=[],f=[],g=0,h=a.length;h>g;g++){var i=a[g],j=c?c(i,g,a):i;b?(g&&f===j||e.push(i),f=j):c?r.contains(f,j)||(f.push(j),e.push(i)):r.contains(e,i)||e.push(i)}return e},r.union=function(){return r.uniq(z(arguments,!0,!0))},r.intersection=function(a){if(null==a)return[];for(var b=[],c=arguments.length,d=0,e=a.length;e>d;d++){var f=a[d];if(!r.contains(b,f)){for(var g=1;c>g&&r.contains(arguments[g],f);g++);g===c&&b.push(f)}}return b},r.difference=function(a){var b=z(arguments,!0,!0,1);return r.filter(a,function(a){return!r.contains(b,a)})},r.zip=function(){return r.unzip(arguments)},r.unzip=function(a){for(var b=a&&r.max(a,"length").length||0,c=Array(b),d=0;b>d;d++)c[d]=r.pluck(a,d);return c},r.object=function(a,b){for(var c={},d=0,e=a&&a.length;e>d;d++)b?c[a[d]]=b[d]:c[a[d][0]]=a[d][1];return c},r.indexOf=function(a,b,c){var d=0,e=a&&a.length;if("number"==typeof c)d=0>c?Math.max(0,e+c):c;else if(c&&e)return d=r.sortedIndex(a,b),a[d]===b?d:-1;if(b!==b)return r.findIndex(j.call(a,d),r.isNaN);for(;e>d;d++)if(a[d]===b)return d;return-1},r.lastIndexOf=function(a,b,c){var d=a?a.length:0;if("number"==typeof c&&(d=0>c?d+c+1:Math.min(d,c+1)),b!==b)return r.findLastIndex(j.call(a,0,d),r.isNaN);for(;--d>=0;)if(a[d]===b)return d;return-1},r.findIndex=b(1),r.findLastIndex=b(-1),r.sortedIndex=function(a,b,c,d){c=t(c,d,1);for(var e=c(b),f=0,g=a.length;g>f;){var h=Math.floor((f+g)/2);c(a[h])<e?f=h+1:g=h}return f},r.range=function(a,b,c){arguments.length<=1&&(b=a||0,a=0),c=c||1;for(var d=Math.max(Math.ceil((b-a)/c),0),e=Array(d),f=0;d>f;f++,a+=c)e[f]=a;return e};var A=function(a,b,c,d,e){if(!(d instanceof b))return a.apply(c,e);var f=v(a.prototype),g=a.apply(f,e);return r.isObject(g)?g:f};r.bind=function(a,b){if(o&&a.bind===o)return o.apply(a,j.call(arguments,1));if(!r.isFunction(a))throw new TypeError("Bind must be called on a function");var c=j.call(arguments,2),d=function(){return A(a,d,b,this,c.concat(j.call(arguments)))};return d},r.partial=function(a){var b=j.call(arguments,1),c=function(){for(var d=0,e=b.length,f=Array(e),g=0;e>g;g++)f[g]=b[g]===r?arguments[d++]:b[g];for(;d<arguments.length;)f.push(arguments[d++]);return A(a,c,this,this,f)};return c},r.bindAll=function(a){var b,c,d=arguments.length;if(1>=d)throw new Error("bindAll must be passed function names");for(b=1;d>b;b++)c=arguments[b],a[c]=r.bind(a[c],a);return a},r.memoize=function(a,b){var c=function(d){var e=c.cache,f=""+(b?b.apply(this,arguments):d);return r.has(e,f)||(e[f]=a.apply(this,arguments)),e[f]};return c.cache={},c},r.delay=function(a,b){var c=j.call(arguments,2);return setTimeout(function(){return a.apply(null,c)},b)},r.defer=r.partial(r.delay,r,1),r.throttle=function(a,b,c){var d,e,f,g=null,h=0;c||(c={});var i=function(){h=c.leading===!1?0:r.now(),g=null,f=a.apply(d,e),g||(d=e=null)};return function(){var j=r.now();h||c.leading!==!1||(h=j);var k=b-(j-h);return d=this,e=arguments,0>=k||k>b?(g&&(clearTimeout(g),g=null),h=j,f=a.apply(d,e),g||(d=e=null)):g||c.trailing===!1||(g=setTimeout(i,k)),f}},r.debounce=function(a,b,c){var d,e,f,g,h,i=function(){var j=r.now()-g;b>j&&j>=0?d=setTimeout(i,b-j):(d=null,c||(h=a.apply(f,e),d||(f=e=null)))};return function(){f=this,e=arguments,g=r.now();var j=c&&!d;return d||(d=setTimeout(i,b)),j&&(h=a.apply(f,e),f=e=null),h}},r.wrap=function(a,b){return r.partial(b,a)},r.negate=function(a){return function(){return!a.apply(this,arguments)}},r.compose=function(){var a=arguments,b=a.length-1;return function(){for(var c=b,d=a[b].apply(this,arguments);c--;)d=a[c].call(this,d);return d}},r.after=function(a,b){return function(){return--a<1?b.apply(this,arguments):void 0}},r.before=function(a,b){var c;return function(){return--a>0&&(c=b.apply(this,arguments)),1>=a&&(b=null),c}},r.once=r.partial(r.before,2);var B=!{toString:null}.propertyIsEnumerable("toString"),C=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];r.keys=function(a){if(!r.isObject(a))return[];if(n)return n(a);var b=[];for(var d in a)r.has(a,d)&&b.push(d);return B&&c(a,b),b},r.allKeys=function(a){if(!r.isObject(a))return[];var b=[];for(var d in a)b.push(d);return B&&c(a,b),b},r.values=function(a){for(var b=r.keys(a),c=b.length,d=Array(c),e=0;c>e;e++)d[e]=a[b[e]];return d},r.mapObject=function(a,b,c){b=t(b,c);for(var d,e=r.keys(a),f=e.length,g={},h=0;f>h;h++)d=e[h],g[d]=b(a[d],d,a);return g},r.pairs=function(a){for(var b=r.keys(a),c=b.length,d=Array(c),e=0;c>e;e++)d[e]=[b[e],a[b[e]]];return d},r.invert=function(a){for(var b={},c=r.keys(a),d=0,e=c.length;e>d;d++)b[a[c[d]]]=c[d];return b},r.functions=r.methods=function(a){var b=[];for(var c in a)r.isFunction(a[c])&&b.push(c);return b.sort()},r.extend=u(r.allKeys),r.extendOwn=r.assign=u(r.keys),r.findKey=function(a,b,c){b=t(b,c);for(var d,e=r.keys(a),f=0,g=e.length;g>f;f++)if(d=e[f],b(a[d],d,a))return d},r.pick=function(a,b,c){var d,e,f={},g=a;if(null==g)return f;r.isFunction(b)?(e=r.allKeys(g),d=s(b,c)):(e=z(arguments,!1,!1,1),d=function(a,b,c){return b in c},g=Object(g));for(var h=0,i=e.length;i>h;h++){var j=e[h],k=g[j];d(k,j,g)&&(f[j]=k)}return f},r.omit=function(a,b,c){if(r.isFunction(b))b=r.negate(b);else{var d=r.map(z(arguments,!1,!1,1),String);b=function(a,b){return!r.contains(d,b)}}return r.pick(a,b,c)},r.defaults=u(r.allKeys,!0),r.clone=function(a){return r.isObject(a)?r.isArray(a)?a.slice():r.extend({},a):a},r.tap=function(a,b){return b(a),a},r.isMatch=function(a,b){var c=r.keys(b),d=c.length;if(null==a)return!d;for(var e=Object(a),f=0;d>f;f++){var g=c[f];if(b[g]!==e[g]||!(g in e))return!1}return!0};var D=function(a,b,c,d){if(a===b)return 0!==a||1/a===1/b;if(null==a||null==b)return a===b;a instanceof r&&(a=a._wrapped),b instanceof r&&(b=b._wrapped);var e=k.call(a);if(e!==k.call(b))return!1;switch(e){case"[object RegExp]":case"[object String]":return""+a==""+b;case"[object Number]":return+a!==+a?+b!==+b:0===+a?1/+a===1/b:+a===+b;case"[object Date]":case"[object Boolean]":return+a===+b}var f="[object Array]"===e;if(!f){if("object"!=typeof a||"object"!=typeof b)return!1;var g=a.constructor,h=b.constructor;if(g!==h&&!(r.isFunction(g)&&g instanceof g&&r.isFunction(h)&&h instanceof h)&&"constructor"in a&&"constructor"in b)return!1}c=c||[],d=d||[];for(var i=c.length;i--;)if(c[i]===a)return d[i]===b;if(c.push(a),d.push(b),f){if(i=a.length,i!==b.length)return!1;for(;i--;)if(!D(a[i],b[i],c,d))return!1}else{var j,l=r.keys(a);if(i=l.length,r.keys(b).length!==i)return!1;for(;i--;)if(j=l[i],!r.has(b,j)||!D(a[j],b[j],c,d))return!1}return c.pop(),d.pop(),!0};r.isEqual=function(a,b){return D(a,b)},r.isEmpty=function(a){return null==a?!0:x(a)&&(r.isArray(a)||r.isString(a)||r.isArguments(a))?0===a.length:0===r.keys(a).length},r.isElement=function(a){return!(!a||1!==a.nodeType)},r.isArray=m||function(a){return"[object Array]"===k.call(a)},r.isObject=function(a){var b=typeof a;return"function"===b||"object"===b&&!!a},r.each(["Arguments","Function","String","Number","Date","RegExp","Error"],function(a){r["is"+a]=function(b){return k.call(b)==="[object "+a+"]"}}),r.isArguments(arguments)||(r.isArguments=function(a){return r.has(a,"callee")}),"function"!=typeof/./&&"object"!=typeof Int8Array&&(r.isFunction=function(a){return"function"==typeof a||!1}),r.isFinite=function(a){return isFinite(a)&&!isNaN(parseFloat(a))},r.isNaN=function(a){return r.isNumber(a)&&a!==+a},r.isBoolean=function(a){return a===!0||a===!1||"[object Boolean]"===k.call(a)},r.isNull=function(a){return null===a},r.isUndefined=function(a){return void 0===a},r.has=function(a,b){return null!=a&&l.call(a,b)},r.noConflict=function(){return d._=e,this},r.identity=function(a){return a},r.constant=function(a){return function(){return a}},r.noop=function(){},r.property=function(a){return function(b){return null==b?void 0:b[a]}},r.propertyOf=function(a){return null==a?function(){}:function(b){return a[b]}},r.matcher=r.matches=function(a){return a=r.extendOwn({},a),function(b){return r.isMatch(b,a)}},r.times=function(a,b,c){var d=Array(Math.max(0,a));b=s(b,c,1);for(var e=0;a>e;e++)d[e]=b(e);return d},r.random=function(a,b){return null==b&&(b=a,a=0),a+Math.floor(Math.random()*(b-a+1))},r.now=Date.now||function(){return(new Date).getTime()};var E={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},F=r.invert(E),G=function(a){var b=function(b){return a[b]},c="(?:"+r.keys(a).join("|")+")",d=RegExp(c),e=RegExp(c,"g");return function(a){return a=null==a?"":""+a,d.test(a)?a.replace(e,b):a}};r.escape=G(E),r.unescape=G(F),r.result=function(a,b,c){var d=null==a?void 0:a[b];return void 0===d&&(d=c),r.isFunction(d)?d.call(a):d};var H=0;r.uniqueId=function(a){var b=++H+"";return a?a+b:b},r.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var I=/(.)^/,J={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},K=/\\|'|\r|\n|\u2028|\u2029/g,L=function(a){return"\\"+J[a]};r.template=function(a,b,c){!b&&c&&(b=c),b=r.defaults({},b,r.templateSettings);var d=RegExp([(b.escape||I).source,(b.interpolate||I).source,(b.evaluate||I).source].join("|")+"|$","g"),e=0,f="__p+='";a.replace(d,function(b,c,d,g,h){return f+=a.slice(e,h).replace(K,L),e=h+b.length,c?f+="'+\n((__t=("+c+"))==null?'':_.escape(__t))+\n'":d?f+="'+\n((__t=("+d+"))==null?'':__t)+\n'":g&&(f+="';\n"+g+"\n__p+='"),b}),f+="';\n",b.variable||(f="with(obj||{}){\n"+f+"}\n"),f="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+f+"return __p;\n";try{var g=new Function(b.variable||"obj","_",f)}catch(h){throw h.source=f,h}var i=function(a){return g.call(this,a,r)},j=b.variable||"obj";return i.source="function("+j+"){\n"+f+"}",i},r.chain=function(a){var b=r(a);return b._chain=!0,b};var M=function(a,b){return a._chain?r(b).chain():b};r.mixin=function(a){r.each(r.functions(a),function(b){var c=r[b]=a[b];r.prototype[b]=function(){var a=[this._wrapped];return i.apply(a,arguments),M(this,c.apply(r,a))}})},r.mixin(r),r.each(["pop","push","reverse","shift","sort","splice","unshift"],function(a){var b=f[a];r.prototype[a]=function(){var c=this._wrapped;return b.apply(c,arguments),"shift"!==a&&"splice"!==a||0!==c.length||delete c[0],M(this,c)}}),r.each(["concat","join","slice"],function(a){var b=f[a];r.prototype[a]=function(){return M(this,b.apply(this._wrapped,arguments))}}),r.prototype.value=function(){return this._wrapped},r.prototype.valueOf=r.prototype.toJSON=r.prototype.value,r.prototype.toString=function(){return""+this._wrapped},"function"==typeof define&&define.amd&&define("underscore",[],function(){return r})}.call(this),function(a,b,c){"use strict";angular.module("mgcrea.ngStrap",["mgcrea.ngStrap.modal","mgcrea.ngStrap.aside","mgcrea.ngStrap.alert","mgcrea.ngStrap.button","mgcrea.ngStrap.select","mgcrea.ngStrap.datepicker","mgcrea.ngStrap.timepicker","mgcrea.ngStrap.navbar","mgcrea.ngStrap.tooltip","mgcrea.ngStrap.popover","mgcrea.ngStrap.dropdown","mgcrea.ngStrap.typeahead","mgcrea.ngStrap.scrollspy","mgcrea.ngStrap.affix","mgcrea.ngStrap.tab","mgcrea.ngStrap.collapse"]);var d=null;angular.module("mgcrea.ngStrap.affix",["mgcrea.ngStrap.helpers.dimensions","mgcrea.ngStrap.helpers.debounce"]).provider("$affix",function(){var a=this.defaults={offsetTop:"auto",inlineStyles:!0};this.$get=["$window","debounce","dimensions",function(b,c,d){function e(e,h){function i(a,b,c){var d=j(),e=k();return s>=d?"top":null!==a&&d+a<=b.top?"middle":null!==t&&b.top+c+q>=e-t?"bottom":"middle"}function j(){return n[0]===b?b.pageYOffset:n[0].scrollTop}function k(){return n[0]===b?b.document.body.scrollHeight:n[0].scrollHeight}var l={},m=angular.extend({},a,h),n=m.target,o="affix affix-top affix-bottom",p=!1,q=0,r=0,s=0,t=0,u=null,v=null,w=e.parent();if(m.offsetParent)if(m.offsetParent.match(/^\d+$/))for(var x=0;x<1*m.offsetParent-1;x++)w=w.parent();else w=angular.element(m.offsetParent);return l.init=function(){this.$parseOffsets(),r=d.offset(e[0]).top+q,p=!e[0].style.width,n.on("scroll",this.checkPosition),n.on("click",this.checkPositionWithEventLoop),g.on("resize",this.$debouncedOnResize),this.checkPosition(),this.checkPositionWithEventLoop()},l.destroy=function(){n.off("scroll",this.checkPosition),n.off("click",this.checkPositionWithEventLoop),g.off("resize",this.$debouncedOnResize)},l.checkPositionWithEventLoop=function(){setTimeout(l.checkPosition,1)},l.checkPosition=function(){var a=j(),b=d.offset(e[0]),c=d.height(e[0]),g=i(v,b,c);u!==g&&(u=g,e.removeClass(o).addClass("affix"+("middle"!==g?"-"+g:"")),"top"===g?(v=null,p&&e.css("width",""),m.inlineStyles&&(e.css("position",m.offsetParent?"":"relative"),e.css("top",""))):"bottom"===g?(v=m.offsetUnpin?-(1*m.offsetUnpin):b.top-a,p&&e.css("width",""),m.inlineStyles&&(e.css("position",m.offsetParent?"":"relative"),e.css("top",m.offsetParent?"":f[0].offsetHeight-t-c-r+"px"))):(v=null,p&&e.css("width",e[0].offsetWidth+"px"),m.inlineStyles&&(e.css("position","fixed"),e.css("top",q+"px"))))},l.$onResize=function(){l.$parseOffsets(),l.checkPosition()},l.$debouncedOnResize=c(l.$onResize,50),l.$parseOffsets=function(){var a=e.css("position");m.inlineStyles&&e.css("position",m.offsetParent?"":"relative"),m.offsetTop&&("auto"===m.offsetTop&&(m.offsetTop="+0"),m.offsetTop.match(/^[-+]\d+$/)?(q=1*-m.offsetTop,s=m.offsetParent?d.offset(w[0]).top+1*m.offsetTop:d.offset(e[0]).top-d.css(e[0],"marginTop",!0)+1*m.offsetTop):s=1*m.offsetTop),m.offsetBottom&&(t=m.offsetParent&&m.offsetBottom.match(/^[-+]\d+$/)?k()-(d.offset(w[0]).top+d.height(w[0]))+1*m.offsetBottom+1:1*m.offsetBottom),m.inlineStyles&&e.css("position",a)},l.init(),l}var f=angular.element(b.document.body),g=angular.element(b);return e}]}).directive("bsAffix",["$affix","$window",function(a,b){return{restrict:"EAC",require:"^?bsAffixTarget",link:function(c,d,e,f){var g={scope:c,target:f?f.$element:angular.element(b)};angular.forEach(["offsetTop","offsetBottom","offsetParent","offsetUnpin","inlineStyles"],function(a){if(angular.isDefined(e[a])){var b=e[a];/true/i.test(b)&&(b=!0),/false/i.test(b)&&(b=!1),g[a]=b}});var h=a(d,g);c.$on("$destroy",function(){h&&h.destroy(),g=null,h=null})}}}]).directive("bsAffixTarget",function(){return{controller:["$element",function(a){this.$element=a}]}}),angular.module("mgcrea.ngStrap.aside",["mgcrea.ngStrap.modal"]).provider("$aside",function(){var a=this.defaults={animation:"am-fade-and-slide-right",prefixClass:"aside",prefixEvent:"aside",placement:"right",template:"aside/aside.tpl.html",contentTemplate:!1,container:!1,element:null,backdrop:!0,keyboard:!0,html:!1,show:!0};this.$get=["$modal",function(b){function c(c){var d={},e=angular.extend({},a,c);return d=b(e)}return c}]}).directive("bsAside",["$window","$sce","$aside",function(a,b,c){a.requestAnimationFrame||a.setTimeout;return{restrict:"EAC",scope:!0,link:function(a,d,e,f){var g={scope:a,element:d,show:!1};angular.forEach(["template","contentTemplate","placement","backdrop","keyboard","html","container","animation"],function(a){angular.isDefined(e[a])&&(g[a]=e[a])}),angular.forEach(["title","content"],function(c){e[c]&&e.$observe(c,function(d,e){a[c]=b.trustAsHtml(d)})}),e.bsAside&&a.$watch(e.bsAside,function(b,c){angular.isObject(b)?angular.extend(a,b):a.content=b},!0);var h=c(g);d.on(e.trigger||"click",h.toggle),a.$on("$destroy",function(){h&&h.destroy(),g=null,h=null})}}}]),angular.module("mgcrea.ngStrap.alert",["mgcrea.ngStrap.modal"]).provider("$alert",function(){var a=this.defaults={animation:"am-fade",prefixClass:"alert",prefixEvent:"alert",placement:null,template:"alert/alert.tpl.html",container:!1,element:null,backdrop:!1,keyboard:!0,show:!0,duration:!1,type:!1,dismissable:!0};this.$get=["$modal","$timeout",function(b,c){function d(d){var e={},f=angular.extend({},a,d);e=b(f),e.$scope.dismissable=!!f.dismissable,f.type&&(e.$scope.type=f.type);var g=e.show;return f.duration&&(e.show=function(){g(),c(function(){e.hide()},1e3*f.duration)}),e}return d}]}).directive("bsAlert",["$window","$sce","$alert",function(a,b,c){a.requestAnimationFrame||a.setTimeout;return{restrict:"EAC",scope:!0,link:function(a,d,e,f){var g={scope:a,element:d,show:!1};angular.forEach(["template","placement","keyboard","html","container","animation","duration","dismissable"],function(a){angular.isDefined(e[a])&&(g[a]=e[a])}),a.hasOwnProperty("title")||(a.title=""),angular.forEach(["title","content","type"],function(c){e[c]&&e.$observe(c,function(d,e){a[c]=b.trustAsHtml(d)})}),e.bsAlert&&a.$watch(e.bsAlert,function(b,c){angular.isObject(b)?angular.extend(a,b):a.content=b},!0);var h=c(g);d.on(e.trigger||"click",h.toggle),a.$on("$destroy",function(){h&&h.destroy(),g=null,h=null})}}}]),angular.module("mgcrea.ngStrap.button",[]).provider("$button",function(){var a=this.defaults={activeClass:"active",toggleEvent:"click"};this.$get=function(){return{defaults:a}}}).directive("bsCheckboxGroup",function(){return{restrict:"A",require:"ngModel",compile:function(a,b){a.attr("data-toggle","buttons"),a.removeAttr("ng-model");var c=a[0].querySelectorAll('input[type="checkbox"]');angular.forEach(c,function(a){var c=angular.element(a);c.attr("bs-checkbox",""),c.attr("ng-model",b.ngModel+"."+c.attr("value"))})}}}).directive("bsCheckbox",["$button","$$rAF",function(a,b){var c=a.defaults,d=/^(true|false|\d+)$/;return{restrict:"A",require:"ngModel",link:function(a,e,f,g){var h=c,i="INPUT"===e[0].nodeName,j=i?e.parent():e,k=angular.isDefined(f.trueValue)?f.trueValue:!0;d.test(f.trueValue)&&(k=a.$eval(f.trueValue));var l=angular.isDefined(f.falseValue)?f.falseValue:!1;d.test(f.falseValue)&&(l=a.$eval(f.falseValue));var m="boolean"!=typeof k||"boolean"!=typeof l;m&&(g.$parsers.push(function(a){return a?k:l}),g.$formatters.push(function(a){return angular.equals(a,k)}),a.$watch(f.ngModel,function(a,b){g.$render()})),g.$render=function(){var a=angular.equals(g.$modelValue,k);b(function(){i&&(e[0].checked=a),j.toggleClass(h.activeClass,a)})},e.bind(h.toggleEvent,function(){a.$apply(function(){i||g.$setViewValue(!j.hasClass("active")),m||g.$render()})})}}}]).directive("bsRadioGroup",function(){return{restrict:"A",require:"ngModel",compile:function(a,b){a.attr("data-toggle","buttons"),a.removeAttr("ng-model");var c=a[0].querySelectorAll('input[type="radio"]');angular.forEach(c,function(a){angular.element(a).attr("bs-radio",""),angular.element(a).attr("ng-model",b.ngModel)})}}}).directive("bsRadio",["$button","$$rAF",function(a,b){var c=a.defaults,d=/^(true|false|\d+)$/;return{restrict:"A",require:"ngModel",link:function(a,e,f,g){var h,i=c,j="INPUT"===e[0].nodeName,k=j?e.parent():e;f.$observe("value",function(b){h=d.test(b)?a.$eval(b):b,g.$render()}),g.$render=function(){var a=angular.equals(g.$modelValue,h);b(function(){j&&(e[0].checked=a),k.toggleClass(i.activeClass,a)})},e.bind(i.toggleEvent,function(){a.$apply(function(){g.$setViewValue(h),g.$render()})})}}}]),angular.module("mgcrea.ngStrap.collapse",[]).provider("$collapse",function(){var a=this.defaults={animation:"am-collapse",disallowToggle:!1,activeClass:"in",startCollapsed:!1,allowMultiple:!1},b=this.controller=function(b,c,d){function e(a){for(var b=i.$targets.$active,c=0;c<b.length;c++)a<b[c]&&(b[c]=b[c]-1),b[c]===i.$targets.length&&(b[c]=i.$targets.length-1)}function f(a){var b=i.$targets.$active;return-1===b.indexOf(a)?!1:!0}function g(a){var b=i.$targets.$active.indexOf(a);-1!==b&&i.$targets.$active.splice(b,1)}function h(a){i.$options.allowMultiple||i.$targets.$active.splice(0,1),-1===i.$targets.$active.indexOf(a)&&i.$targets.$active.push(a)}var i=this;i.$options=angular.copy(a),angular.forEach(["animation","disallowToggle","activeClass","startCollapsed","allowMultiple"],function(a){angular.isDefined(d[a])&&(i.$options[a]=d[a])}),i.$toggles=[],i.$targets=[],i.$viewChangeListeners=[],i.$registerToggle=function(a){i.$toggles.push(a)},i.$registerTarget=function(a){i.$targets.push(a)},i.$unregisterToggle=function(a){var b=i.$toggles.indexOf(a);i.$toggles.splice(b,1)},i.$unregisterTarget=function(a){var b=i.$targets.indexOf(a);i.$targets.splice(b,1),i.$options.allowMultiple&&g(a),e(b),i.$viewChangeListeners.forEach(function(a){a()})},i.$targets.$active=i.$options.startCollapsed?[]:[0],i.$setActive=b.$setActive=function(a){angular.isArray(a)?i.$targets.$active=angular.copy(a):i.$options.disallowToggle?h(a):f(a)?g(a):h(a),i.$viewChangeListeners.forEach(function(a){a()})},i.$activeIndexes=function(){return i.$options.allowMultiple?i.$targets.$active:1===i.$targets.$active.length?i.$targets.$active[0]:-1}};this.$get=function(){var c={};return c.defaults=a,c.controller=b,c}}).directive("bsCollapse",["$window","$animate","$collapse",function(a,b,c){c.defaults;return{require:["?ngModel","bsCollapse"],controller:["$scope","$element","$attrs",c.controller],link:function(a,b,c,d){var e=d[0],f=d[1];e&&(f.$viewChangeListeners.push(function(){e.$setViewValue(f.$activeIndexes())}),e.$formatters.push(function(a){if(angular.isArray(a))f.$setActive(a);else{var b=f.$activeIndexes();angular.isArray(b)?-1===b.indexOf(1*a)&&f.$setActive(1*a):b!==1*a&&f.$setActive(1*a)}return a}))}}}]).directive("bsCollapseToggle",function(){return{require:["^?ngModel","^bsCollapse"],link:function(a,b,c,d){var e=(d[0],d[1]);b.attr("data-toggle","collapse"),e.$registerToggle(b),a.$on("$destroy",function(){e.$unregisterToggle(b)}),b.on("click",function(){var d=c.bsCollapseToggle||e.$toggles.indexOf(b);e.$setActive(1*d),a.$apply()})}}}).directive("bsCollapseTarget",["$animate",function(a){return{require:["^?ngModel","^bsCollapse"],link:function(b,c,d,e){function f(){var b=g.$targets.indexOf(c),d=g.$activeIndexes(),e="removeClass";angular.isArray(d)?-1!==d.indexOf(b)&&(e="addClass"):b===d&&(e="addClass"),a[e](c,g.$options.activeClass)}var g=(e[0],e[1]);c.addClass("collapse"),g.$options.animation&&c.addClass(g.$options.animation),g.$registerTarget(c),b.$on("$destroy",function(){g.$unregisterTarget(c)}),g.$viewChangeListeners.push(function(){f()}),f()}}}]),angular.module("mgcrea.ngStrap.datepicker",["mgcrea.ngStrap.helpers.dateParser","mgcrea.ngStrap.helpers.dateFormatter","mgcrea.ngStrap.tooltip"]).provider("$datepicker",function(){var a=this.defaults={animation:"am-fade",prefixClass:"datepicker",placement:"bottom-left",template:"datepicker/datepicker.tpl.html",trigger:"focus",container:!1,keyboard:!0,html:!1,delay:0,useNative:!1,dateType:"date",dateFormat:"shortDate",timezone:null,modelDateFormat:null,dayFormat:"dd",monthFormat:"MMM",yearFormat:"yyyy",monthTitleFormat:"MMMM yyyy",yearTitleFormat:"yyyy",strictFormat:!1,autoclose:!1,minDate:-(1/0),maxDate:+(1/0),startView:0,minView:0,startWeek:0,daysOfWeekDisabled:"",iconLeft:"glyphicon glyphicon-chevron-left",iconRight:"glyphicon glyphicon-chevron-right"};this.$get=["$window","$document","$rootScope","$sce","$dateFormatter","datepickerViews","$tooltip","$timeout",function(b,c,d,e,f,g,h,i){function j(b,c,d){function e(a){a.selected=j.$isSelected(a.date)}function f(){b[0].focus()}var j=h(b,angular.extend({},a,d)),m=d.scope,n=j.$options,o=j.$scope;n.startView&&(n.startView-=n.minView);var p=g(j);j.$views=p.views;var q=p.viewDate;o.$mode=n.startView,o.$iconLeft=n.iconLeft,o.$iconRight=n.iconRight;var r=j.$views[o.$mode];o.$select=function(a){j.select(a)},o.$selectPane=function(a){j.$selectPane(a)},o.$toggleMode=function(){j.setMode((o.$mode+1)%j.$views.length)},j.update=function(a){angular.isDate(a)&&!isNaN(a.getTime())&&(j.$date=a,r.update.call(r,a)),j.$build(!0)},j.updateDisabledDates=function(a){n.disabledDateRanges=a;for(var b=0,c=o.rows.length;c>b;b++)angular.forEach(o.rows[b],j.$setDisabledEl)},j.select=function(a,b){angular.isDate(c.$dateValue)||(c.$dateValue=new Date(a)),!o.$mode||b?(c.$setViewValue(angular.copy(a)),c.$render(),n.autoclose&&!b&&i(function(){j.hide(!0)})):(angular.extend(q,{year:a.getFullYear(),month:a.getMonth(),date:a.getDate()}),j.setMode(o.$mode-1),j.$build())},j.setMode=function(a){o.$mode=a,r=j.$views[o.$mode],j.$build()},j.$build=function(a){a===!0&&r.built||(a!==!1||r.built)&&r.build.call(r)},j.$updateSelected=function(){for(var a=0,b=o.rows.length;b>a;a++)angular.forEach(o.rows[a],e)},j.$isSelected=function(a){return r.isSelected(a)},j.$setDisabledEl=function(a){a.disabled=r.isDisabled(a.date)},j.$selectPane=function(a){var b=r.steps,c=new Date(Date.UTC(q.year+(b.year||0)*a,q.month+(b.month||0)*a,1));angular.extend(q,{year:c.getUTCFullYear(),month:c.getUTCMonth(),date:c.getUTCDate()}),j.$build()},j.$onMouseDown=function(a){if(a.preventDefault(),a.stopPropagation(),l){var b=angular.element(a.target);"button"!==b[0].nodeName.toLowerCase()&&(b=b.parent()),b.triggerHandler("click")}},j.$onKeyDown=function(a){if(/(38|37|39|40|13)/.test(a.keyCode)&&!a.shiftKey&&!a.altKey){if(a.preventDefault(),a.stopPropagation(),13===a.keyCode)return o.$mode?o.$apply(function(){j.setMode(o.$mode-1)}):j.hide(!0);r.onKeyDown(a),m.$digest()}};var s=j.init;j.init=function(){return k&&n.useNative?(b.prop("type","date"),void b.css("-webkit-appearance","textfield")):(l&&(b.prop("type","text"),b.attr("readonly","true"),b.on("click",f)),void s())};var t=j.destroy;j.destroy=function(){k&&n.useNative&&b.off("click",f),t()};var u=j.show;j.show=function(){u(),i(function(){j.$isShown&&(j.$element.on(l?"touchstart":"mousedown",j.$onMouseDown),n.keyboard&&b.on("keydown",j.$onKeyDown))},0,!1)};var v=j.hide;return j.hide=function(a){j.$isShown&&(j.$element.off(l?"touchstart":"mousedown",j.$onMouseDown),n.keyboard&&b.off("keydown",j.$onKeyDown),v(a))},j}var k=(angular.element(b.document.body),/(ip(a|o)d|iphone|android)/gi.test(b.navigator.userAgent)),l="createTouch"in b.document&&k;return a.lang||(a.lang=f.getDefaultLocale()),j.defaults=a,j}]}).directive("bsDatepicker",["$window","$parse","$q","$dateFormatter","$dateParser","$datepicker",function(a,b,c,d,e,f){var g=(f.defaults,/(ip(a|o)d|iphone|android)/gi.test(a.navigator.userAgent));return{restrict:"EAC",require:"ngModel",link:function(a,b,c,h){function i(a){return a&&a.length?a:null}function j(a){if(angular.isDate(a)){var b=isNaN(m.$options.minDate)||a.getTime()>=m.$options.minDate,c=isNaN(m.$options.maxDate)||a.getTime()<=m.$options.maxDate,d=b&&c;h.$setValidity("date",d),h.$setValidity("min",b),h.$setValidity("max",c),d&&(h.$dateValue=a)}}function k(){return!h.$dateValue||isNaN(h.$dateValue.getTime())?"":o(h.$dateValue,l.dateFormat)}var l={scope:a,controller:h};angular.forEach(["placement","container","delay","trigger","keyboard","html","animation","template","autoclose","dateType","dateFormat","timezone","modelDateFormat","dayFormat","strictFormat","startWeek","startDate","useNative","lang","startView","minView","iconLeft","iconRight","daysOfWeekDisabled","id"],function(a){angular.isDefined(c[a])&&(l[a]=c[a])}),c.bsShow&&a.$watch(c.bsShow,function(a,b){m&&angular.isDefined(a)&&(angular.isString(a)&&(a=!!a.match(/true|,?(datepicker),?/i)),a===!0?m.show():m.hide())});var m=f(b,h,l);l=m.$options,g&&l.useNative&&(l.dateFormat="yyyy-MM-dd");var n=l.lang,o=function(a,b){return d.formatDate(a,b,n)},p=e({format:l.dateFormat,lang:n,strict:l.strictFormat});angular.forEach(["minDate","maxDate"],function(a){angular.isDefined(c[a])&&c.$observe(a,function(b){m.$options[a]=p.getDateForAttribute(a,b),!isNaN(m.$options[a])&&m.$build(!1),j(h.$dateValue)})}),a.$watch(c.ngModel,function(a,b){m.update(h.$dateValue)},!0),angular.isDefined(c.disabledDates)&&a.$watch(c.disabledDates,function(a,b){a=i(a),b=i(b),a&&m.updateDisabledDates(a)}),h.$parsers.unshift(function(a){var b;if(!a)return h.$setValidity("date",!0),null;var c=p.parse(a,h.$dateValue);return!c||isNaN(c.getTime())?void h.$setValidity("date",!1):(j(c),"string"===l.dateType?(b=p.timezoneOffsetAdjust(c,l.timezone,!0),o(b,l.modelDateFormat||l.dateFormat)):(b=p.timezoneOffsetAdjust(h.$dateValue,l.timezone,!0),"number"===l.dateType?b.getTime():"unix"===l.dateType?b.getTime()/1e3:"iso"===l.dateType?b.toISOString():new Date(b)))}),h.$formatters.push(function(a){var b;return b=angular.isUndefined(a)||null===a?NaN:angular.isDate(a)?a:"string"===l.dateType?p.parse(a,null,l.modelDateFormat):"unix"===l.dateType?new Date(1e3*a):new Date(a),h.$dateValue=p.timezoneOffsetAdjust(b,l.timezone),k()}),h.$render=function(){b.val(k())},a.$on("$destroy",function(){m&&m.destroy(),l=null,m=null})}}}]).provider("datepickerViews",function(){function a(a,b){for(var c=[];a.length>0;)c.push(a.splice(0,b));return c}function b(a,b){return(a%b+b)%b}this.defaults={dayFormat:"dd",daySplit:7};this.$get=["$dateFormatter","$dateParser","$sce",function(c,d,e){return function(f){var g=f.$scope,h=f.$options,i=h.lang,j=function(a,b){return c.formatDate(a,b,i)},k=d({format:h.dateFormat,lang:i,strict:h.strictFormat}),l=c.weekdaysShort(i),m=l.slice(h.startWeek).concat(l.slice(0,h.startWeek)),n=e.trustAsHtml('<th class="dow text-center">'+m.join('</th><th class="dow text-center">')+"</th>"),o=f.$date||(h.startDate?k.getDateForAttribute("startDate",h.startDate):new Date),p={year:o.getFullYear(),month:o.getMonth(),date:o.getDate()},q=[{format:h.dayFormat,split:7,steps:{month:1},update:function(a,b){!this.built||b||a.getFullYear()!==p.year||a.getMonth()!==p.month?(angular.extend(p,{year:f.$date.getFullYear(),month:f.$date.getMonth(),date:f.$date.getDate()}),f.$build()):a.getDate()!==p.date&&(p.date=f.$date.getDate(),f.$updateSelected())},build:function(){var c=new Date(p.year,p.month,1),d=c.getTimezoneOffset(),e=new Date(+c-864e5*b(c.getDay()-h.startWeek,7)),i=e.getTimezoneOffset(),l=k.timezoneOffsetAdjust(new Date,h.timezone).toDateString();i!==d&&(e=new Date(+e+6e4*(i-d)));for(var m,o=[],q=0;42>q;q++)m=k.daylightSavingAdjust(new Date(e.getFullYear(),e.getMonth(),e.getDate()+q)),o.push({date:m,isToday:m.toDateString()===l,label:j(m,this.format),selected:f.$date&&this.isSelected(m),muted:m.getMonth()!==p.month,disabled:this.isDisabled(m)});g.title=j(c,h.monthTitleFormat),g.showLabels=!0,g.labels=n,g.rows=a(o,this.split),this.built=!0},isSelected:function(a){return f.$date&&a.getFullYear()===f.$date.getFullYear()&&a.getMonth()===f.$date.getMonth()&&a.getDate()===f.$date.getDate()},isDisabled:function(a){var b=a.getTime();if(b<h.minDate||b>h.maxDate)return!0;if(-1!==h.daysOfWeekDisabled.indexOf(a.getDay()))return!0;if(h.disabledDateRanges)for(var c=0;c<h.disabledDateRanges.length;c++)if(b>=h.disabledDateRanges[c].start&&b<=h.disabledDateRanges[c].end)return!0;return!1},onKeyDown:function(a){if(f.$date){var b,c=f.$date.getTime();37===a.keyCode?b=new Date(c-864e5):38===a.keyCode?b=new Date(c-6048e5):39===a.keyCode?b=new Date(c+864e5):40===a.keyCode&&(b=new Date(c+6048e5)),this.isDisabled(b)||f.select(b,!0)}}},{name:"month",format:h.monthFormat,split:4,steps:{year:1},update:function(a,b){
this.built&&a.getFullYear()===p.year?a.getMonth()!==p.month&&(angular.extend(p,{month:f.$date.getMonth(),date:f.$date.getDate()}),f.$updateSelected()):(angular.extend(p,{year:f.$date.getFullYear(),month:f.$date.getMonth(),date:f.$date.getDate()}),f.$build())},build:function(){for(var b,c=(new Date(p.year,0,1),[]),d=0;12>d;d++)b=new Date(p.year,d,1),c.push({date:b,label:j(b,this.format),selected:f.$isSelected(b),disabled:this.isDisabled(b)});g.title=j(b,h.yearTitleFormat),g.showLabels=!1,g.rows=a(c,this.split),this.built=!0},isSelected:function(a){return f.$date&&a.getFullYear()===f.$date.getFullYear()&&a.getMonth()===f.$date.getMonth()},isDisabled:function(a){var b=+new Date(a.getFullYear(),a.getMonth()+1,0);return b<h.minDate||a.getTime()>h.maxDate},onKeyDown:function(a){if(f.$date){var b=f.$date.getMonth(),c=new Date(f.$date);37===a.keyCode?c.setMonth(b-1):38===a.keyCode?c.setMonth(b-4):39===a.keyCode?c.setMonth(b+1):40===a.keyCode&&c.setMonth(b+4),this.isDisabled(c)||f.select(c,!0)}}},{name:"year",format:h.yearFormat,split:4,steps:{year:12},update:function(a,b){!this.built||b||parseInt(a.getFullYear()/20,10)!==parseInt(p.year/20,10)?(angular.extend(p,{year:f.$date.getFullYear(),month:f.$date.getMonth(),date:f.$date.getDate()}),f.$build()):a.getFullYear()!==p.year&&(angular.extend(p,{year:f.$date.getFullYear(),month:f.$date.getMonth(),date:f.$date.getDate()}),f.$updateSelected())},build:function(){for(var b,c=p.year-p.year%(3*this.split),d=[],e=0;12>e;e++)b=new Date(c+e,0,1),d.push({date:b,label:j(b,this.format),selected:f.$isSelected(b),disabled:this.isDisabled(b)});g.title=d[0].label+"-"+d[d.length-1].label,g.showLabels=!1,g.rows=a(d,this.split),this.built=!0},isSelected:function(a){return f.$date&&a.getFullYear()===f.$date.getFullYear()},isDisabled:function(a){var b=+new Date(a.getFullYear()+1,0,0);return b<h.minDate||a.getTime()>h.maxDate},onKeyDown:function(a){if(f.$date){var b=f.$date.getFullYear(),c=new Date(f.$date);37===a.keyCode?c.setYear(b-1):38===a.keyCode?c.setYear(b-4):39===a.keyCode?c.setYear(b+1):40===a.keyCode&&c.setYear(b+4),this.isDisabled(c)||f.select(c,!0)}}}];return{views:h.minView?Array.prototype.slice.call(q,h.minView):q,viewDate:p}}}]}),angular.module("mgcrea.ngStrap.dropdown",["mgcrea.ngStrap.tooltip"]).provider("$dropdown",function(){var a=this.defaults={animation:"am-fade",prefixClass:"dropdown",prefixEvent:"dropdown",placement:"bottom-left",template:"dropdown/dropdown.tpl.html",trigger:"click",container:!1,keyboard:!0,html:!1,delay:0};this.$get=["$window","$rootScope","$tooltip","$timeout",function(b,c,d,e){function f(b,f){function i(a){return a.target!==b[0]?a.target!==b[0]&&j.hide():void 0}var j={},k=angular.extend({},a,f);j.$scope=k.scope&&k.scope.$new()||c.$new();j=d(b,k);var l=b.parent();j.$onKeyDown=function(a){if(/(38|40)/.test(a.keyCode)){a.preventDefault(),a.stopPropagation();var b=angular.element(j.$element[0].querySelectorAll("li:not(.divider) a"));if(b.length){var c;angular.forEach(b,function(a,b){h&&h.call(a,":focus")&&(c=b)}),38===a.keyCode&&c>0?c--:40===a.keyCode&&c<b.length-1?c++:angular.isUndefined(c)&&(c=0),b.eq(c)[0].focus()}}};var m=j.show;j.show=function(){m(),e(function(){k.keyboard&&j.$element.on("keydown",j.$onKeyDown),g.on("click",i)},0,!1),l.hasClass("dropdown")&&l.addClass("open")};var n=j.hide;j.hide=function(){j.$isShown&&(k.keyboard&&j.$element.off("keydown",j.$onKeyDown),g.off("click",i),l.hasClass("dropdown")&&l.removeClass("open"),n())};var o=j.destroy;return j.destroy=function(){g.off("click",i),o()},j}var g=angular.element(b.document.body),h=Element.prototype.matchesSelector||Element.prototype.webkitMatchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector||Element.prototype.oMatchesSelector;return f}]}).directive("bsDropdown",["$window","$sce","$dropdown",function(a,b,c){return{restrict:"EAC",scope:!0,link:function(a,b,d,e){var f={scope:a};angular.forEach(["placement","container","delay","trigger","keyboard","html","animation","template","id"],function(a){angular.isDefined(d[a])&&(f[a]=d[a])}),d.bsDropdown&&a.$watch(d.bsDropdown,function(b,c){a.content=b},!0),d.bsShow&&a.$watch(d.bsShow,function(a,b){g&&angular.isDefined(a)&&(angular.isString(a)&&(a=!!a.match(/true|,?(dropdown),?/i)),a===!0?g.show():g.hide())});var g=c(b,f);a.$on("$destroy",function(){g&&g.destroy(),f=null,g=null})}}}]),angular.module("mgcrea.ngStrap.helpers.dateFormatter",[]).service("$dateFormatter",["$locale","dateFilter",function(a,b){function c(a){return/(h+)([:\.])?(m+)[ ]?(a?)/i.exec(a).slice(1)}this.getDefaultLocale=function(){return a.id},this.getDatetimeFormat=function(b,c){return a.DATETIME_FORMATS[b]||b},this.weekdaysShort=function(b){return a.DATETIME_FORMATS.SHORTDAY},this.hoursFormat=function(a){return c(a)[0]},this.minutesFormat=function(a){return c(a)[2]},this.timeSeparator=function(a){return c(a)[1]},this.showAM=function(a){return!!c(a)[3]},this.formatDate=function(a,c,d,e){return b(a,c,e)}}]),angular.module("mgcrea.ngStrap.helpers.dateParser",[]).provider("$dateParser",["$localeProvider",function(a){function b(){this.year=1970,this.month=0,this.day=1,this.hours=0,this.minutes=0,this.seconds=0,this.milliseconds=0}function c(){}function d(a){return!isNaN(parseFloat(a))&&isFinite(a)}function e(a,b){for(var c=a.length,d=b.toString().toLowerCase(),e=0;c>e;e++)if(a[e].toLowerCase()===d)return e;return-1}b.prototype.setMilliseconds=function(a){this.milliseconds=a},b.prototype.setSeconds=function(a){this.seconds=a},b.prototype.setMinutes=function(a){this.minutes=a},b.prototype.setHours=function(a){this.hours=a},b.prototype.getHours=function(){return this.hours},b.prototype.setDate=function(a){this.day=a},b.prototype.setMonth=function(a){this.month=a},b.prototype.setFullYear=function(a){this.year=a},b.prototype.fromDate=function(a){return this.year=a.getFullYear(),this.month=a.getMonth(),this.day=a.getDate(),this.hours=a.getHours(),this.minutes=a.getMinutes(),this.seconds=a.getSeconds(),this.milliseconds=a.getMilliseconds(),this},b.prototype.toDate=function(){return new Date(this.year,this.month,this.day,this.hours,this.minutes,this.seconds,this.milliseconds)};var f=b.prototype,g=this.defaults={format:"shortDate",strict:!1};this.$get=["$locale","dateFilter",function(a,h){var i=function(i){function j(a){var b,c=Object.keys(r),d=[],e=[],f=a;for(b=0;b<c.length;b++)if(a.split(c[b]).length>1){var g=f.search(c[b]);a=a.split(c[b]).join(""),r[c[b]]&&(d[g]=r[c[b]])}return angular.forEach(d,function(a){a&&e.push(a)}),e}function k(a){return a.replace(/\//g,"[\\/]").replace("/-/g","[-]").replace(/\./g,"[.]").replace(/\\s/g,"[\\s]")}function l(a){var b,c=Object.keys(q),d=a;for(b=0;b<c.length;b++)d=d.split(c[b]).join("${"+b+"}");for(b=0;b<c.length;b++)d=d.split("${"+b+"}").join("("+q[c[b]]+")");return a=k(a),new RegExp("^"+d+"$",["i"])}var m,n,o=angular.extend({},g,i),p={},q={sss:"[0-9]{3}",ss:"[0-5][0-9]",s:o.strict?"[1-5]?[0-9]":"[0-9]|[0-5][0-9]",mm:"[0-5][0-9]",m:o.strict?"[1-5]?[0-9]":"[0-9]|[0-5][0-9]",HH:"[01][0-9]|2[0-3]",H:o.strict?"1?[0-9]|2[0-3]":"[01]?[0-9]|2[0-3]",hh:"[0][1-9]|[1][012]",h:o.strict?"[1-9]|1[012]":"0?[1-9]|1[012]",a:"AM|PM",EEEE:a.DATETIME_FORMATS.DAY.join("|"),EEE:a.DATETIME_FORMATS.SHORTDAY.join("|"),dd:"0[1-9]|[12][0-9]|3[01]",d:o.strict?"[1-9]|[1-2][0-9]|3[01]":"0?[1-9]|[1-2][0-9]|3[01]",MMMM:a.DATETIME_FORMATS.MONTH.join("|"),MMM:a.DATETIME_FORMATS.SHORTMONTH.join("|"),MM:"0[1-9]|1[012]",M:o.strict?"[1-9]|1[012]":"0?[1-9]|1[012]",yyyy:"[1]{1}[0-9]{3}|[2]{1}[0-9]{3}",yy:"[0-9]{2}",y:o.strict?"-?(0|[1-9][0-9]{0,3})":"-?0*[0-9]{1,4}"},r={sss:f.setMilliseconds,ss:f.setSeconds,s:f.setSeconds,mm:f.setMinutes,m:f.setMinutes,HH:f.setHours,H:f.setHours,hh:f.setHours,h:f.setHours,EEEE:c,EEE:c,dd:f.setDate,d:f.setDate,a:function(a){var b=this.getHours()%12;return this.setHours(a.match(/pm/i)?b+12:b)},MMMM:function(b){return this.setMonth(e(a.DATETIME_FORMATS.MONTH,b))},MMM:function(b){return this.setMonth(e(a.DATETIME_FORMATS.SHORTMONTH,b))},MM:function(a){return this.setMonth(1*a-1)},M:function(a){return this.setMonth(1*a-1)},yyyy:f.setFullYear,yy:function(a){return this.setFullYear(2e3+1*a)},y:f.setFullYear};return p.init=function(){p.$format=a.DATETIME_FORMATS[o.format]||o.format,m=l(p.$format),n=j(p.$format)},p.isValid=function(a){return angular.isDate(a)?!isNaN(a.getTime()):m.test(a)},p.parse=function(c,d,e,f){e&&(e=a.DATETIME_FORMATS[e]||e),angular.isDate(c)&&(c=h(c,e||p.$format,f));var g=e?l(e):m,i=e?j(e):n,k=g.exec(c);if(!k)return!1;for(var o=d&&!isNaN(d.getTime())?(new b).fromDate(d):(new b).fromDate(new Date(1970,0,1,0)),q=0;q<k.length-1;q++)i[q]&&i[q].call(o,k[q+1]);var r=o.toDate();return parseInt(o.day,10)!==r.getDate()?!1:r},p.getDateForAttribute=function(a,b){var c;if("today"===b){var e=new Date;c=new Date(e.getFullYear(),e.getMonth(),e.getDate()+("maxDate"===a?1:0),0,0,0,"minDate"===a?0:-1)}else c=angular.isString(b)&&b.match(/^".+"$/)?new Date(b.substr(1,b.length-2)):d(b)?new Date(parseInt(b,10)):angular.isString(b)&&0===b.length?"minDate"===a?-(1/0):+(1/0):new Date(b);return c},p.getTimeForAttribute=function(a,b){var c;return c="now"===b?(new Date).setFullYear(1970,0,1):angular.isString(b)&&b.match(/^".+"$/)?new Date(b.substr(1,b.length-2)).setFullYear(1970,0,1):d(b)?new Date(parseInt(b,10)).setFullYear(1970,0,1):angular.isString(b)&&0===b.length?"minTime"===a?-(1/0):+(1/0):p.parse(b,new Date(1970,0,1,0))},p.daylightSavingAdjust=function(a){return a?(a.setHours(a.getHours()>12?a.getHours()+2:0),a):null},p.timezoneOffsetAdjust=function(a,b,c){return a?(b&&"UTC"===b&&(a=new Date(a.getTime()),a.setMinutes(a.getMinutes()+(c?-1:1)*a.getTimezoneOffset())),a):null},p.init(),p};return i}]}]),angular.module("mgcrea.ngStrap.helpers.debounce",[]).factory("debounce",["$timeout",function(a){return function(b,c,d){var e=null;return function(){var f=this,g=arguments,h=d&&!e;return e&&a.cancel(e),e=a(function(){e=null,d||b.apply(f,g)},c,!1),h&&b.apply(f,g),e}}}]).factory("throttle",["$timeout",function(a){return function(b,c,d){var e=null;return d||(d={}),function(){var f=this,g=arguments;e||(d.leading!==!1&&b.apply(f,g),e=a(function(){e=null,d.trailing!==!1&&b.apply(f,g)},c,!1))}}}]),angular.module("mgcrea.ngStrap.helpers.dimensions",[]).factory("dimensions",["$document","$window",function(b,c){var d=(angular.element,{}),e=d.nodeName=function(a,b){return a.nodeName&&a.nodeName.toLowerCase()===b.toLowerCase()};d.css=function(b,c,d){var e;return e=b.currentStyle?b.currentStyle[c]:a.getComputedStyle?a.getComputedStyle(b)[c]:b.style[c],d===!0?parseFloat(e)||0:e},d.offset=function(b){var c=b.getBoundingClientRect(),d=b.ownerDocument;return{width:c.width||b.offsetWidth,height:c.height||b.offsetHeight,top:c.top+(a.pageYOffset||d.documentElement.scrollTop)-(d.documentElement.clientTop||0),left:c.left+(a.pageXOffset||d.documentElement.scrollLeft)-(d.documentElement.clientLeft||0)}},d.setOffset=function(a,b,c){var e,f,g,h,i,j,k,l=d.css(a,"position"),m=angular.element(a),n={};"static"===l&&(a.style.position="relative"),i=d.offset(a),g=d.css(a,"top"),j=d.css(a,"left"),k=("absolute"===l||"fixed"===l)&&(g+j).indexOf("auto")>-1,k?(e=d.position(a),h=e.top,f=e.left):(h=parseFloat(g)||0,f=parseFloat(j)||0),angular.isFunction(b)&&(b=b.call(a,c,i)),null!==b.top&&(n.top=b.top-i.top+h),null!==b.left&&(n.left=b.left-i.left+f),"using"in b?b.using.call(m,n):m.css({top:n.top+"px",left:n.left+"px"})},d.position=function(a){var b,c,g={top:0,left:0};return"fixed"===d.css(a,"position")?c=a.getBoundingClientRect():(b=f(a),c=d.offset(a),e(b,"html")||(g=d.offset(b)),g.top+=d.css(b,"borderTopWidth",!0),g.left+=d.css(b,"borderLeftWidth",!0)),{width:a.offsetWidth,height:a.offsetHeight,top:c.top-g.top-d.css(a,"marginTop",!0),left:c.left-g.left-d.css(a,"marginLeft",!0)}};var f=function(a){var b=a.ownerDocument,c=a.offsetParent||b;if(e(c,"#document"))return b.documentElement;for(;c&&!e(c,"html")&&"static"===d.css(c,"position");)c=c.offsetParent;return c||b.documentElement};return d.height=function(a,b){var c=a.offsetHeight;return b?c+=d.css(a,"marginTop",!0)+d.css(a,"marginBottom",!0):c-=d.css(a,"paddingTop",!0)+d.css(a,"paddingBottom",!0)+d.css(a,"borderTopWidth",!0)+d.css(a,"borderBottomWidth",!0),c},d.width=function(a,b){var c=a.offsetWidth;return b?c+=d.css(a,"marginLeft",!0)+d.css(a,"marginRight",!0):c-=d.css(a,"paddingLeft",!0)+d.css(a,"paddingRight",!0)+d.css(a,"borderLeftWidth",!0)+d.css(a,"borderRightWidth",!0),c},d}]),angular.module("mgcrea.ngStrap.helpers.parseOptions",[]).provider("$parseOptions",function(){var a=this.defaults={regexp:/^\s*(.*?)(?:\s+as\s+(.*?))?(?:\s+group\s+by\s+(.*))?\s+for\s+(?:([\$\w][\$\w]*)|(?:\(\s*([\$\w][\$\w]*)\s*,\s*([\$\w][\$\w]*)\s*\)))\s+in\s+(.*?)(?:\s+track\s+by\s+(.*?))?$/};this.$get=["$parse","$q",function(b,c){function d(d,e){function f(a,b){return a.map(function(a,c){var d,e,f={};return f[k]=a,d=j(b,f),e=n(b,f),{label:d,value:e,index:c}})}var g={},h=angular.extend({},a,e);g.$values=[];var i,j,k,l,m,n,o;return g.init=function(){g.$match=i=d.match(h.regexp),j=b(i[2]||i[1]),k=i[4]||i[6],l=i[5],m=b(i[3]||""),n=b(i[2]?i[1]:k),o=b(i[7])},g.valuesFn=function(a,b){return c.when(o(a,b)).then(function(b){return g.$values=b?f(b,a):{},g.$values})},g.displayValue=function(a){var b={};return b[k]=a,j(b)},g.init(),g}return d}]}),angular.version.minor<3&&angular.version.dot<14&&angular.module("ng").factory("$$rAF",["$window","$timeout",function(a,b){var c=a.requestAnimationFrame||a.webkitRequestAnimationFrame||a.mozRequestAnimationFrame,d=a.cancelAnimationFrame||a.webkitCancelAnimationFrame||a.mozCancelAnimationFrame||a.webkitCancelRequestAnimationFrame,e=!!c,f=e?function(a){var b=c(a);return function(){d(b)}}:function(a){var c=b(a,16.66,!1);return function(){b.cancel(c)}};return f.supported=e,f}]),angular.module("mgcrea.ngStrap.modal",["mgcrea.ngStrap.helpers.dimensions"]).provider("$modal",function(){var a=this.defaults={animation:"am-fade",backdropAnimation:"am-fade",prefixClass:"modal",prefixEvent:"modal",placement:"top",template:"modal/modal.tpl.html",contentTemplate:!1,container:!1,element:null,backdrop:!0,keyboard:!0,html:!1,show:!0};this.$get=["$window","$rootScope","$compile","$q","$templateCache","$http","$animate","$timeout","$sce","dimensions",function(c,d,e,f,g,h,i,j,k,l){function m(b){function c(){m.$emit(l.prefixEvent+".show",j)}function f(){m.$emit(l.prefixEvent+".hide",j),t.removeClass(l.prefixClass+"-open"),l.animation&&t.removeClass(l.prefixClass+"-with-"+l.animation)}function g(a){a.target===a.currentTarget&&("static"===l.backdrop?j.focus():j.hide())}function h(a){a.preventDefault()}var j={},l=j.$options=angular.extend({},a,b);j.$promise=p(l.template);var m=j.$scope=l.scope&&l.scope.$new()||d.$new();l.element||l.container||(l.container="body"),j.$id=l.id||l.element&&l.element.attr("id")||"",q(["title","content"],function(a){l[a]&&(m[a]=k.trustAsHtml(l[a]))}),m.$hide=function(){m.$$postDigest(function(){j.hide()})},m.$show=function(){m.$$postDigest(function(){j.show()})},m.$toggle=function(){m.$$postDigest(function(){j.toggle()})},j.$isShown=m.$isShown=!1,l.contentTemplate&&(j.$promise=j.$promise.then(function(a){var c=angular.element(a);return p(l.contentTemplate).then(function(a){var d=o('[ng-bind="content"]',c[0]).removeAttr("ng-bind").html(a);return b.template||d.next().remove(),c[0].outerHTML})}));var v,w,x=angular.element('<div class="'+l.prefixClass+'-backdrop"/>');return x.css({position:"fixed",top:"0px",left:"0px",bottom:"0px",right:"0px","z-index":1038}),j.$promise.then(function(a){angular.isObject(a)&&(a=a.data),l.html&&(a=a.replace(u,'ng-bind-html="')),a=r.apply(a),v=e(a),j.init()}),j.init=function(){l.show&&m.$$postDigest(function(){j.show()})},j.destroy=function(){w&&(w.remove(),w=null),x&&(x.remove(),x=null),m.$destroy()},j.show=function(){if(!j.$isShown){var a,b;if(angular.isElement(l.container)?(a=l.container,b=l.container[0].lastChild?angular.element(l.container[0].lastChild):null):l.container?(a=o(l.container),b=a[0].lastChild?angular.element(a[0].lastChild):null):(a=null,b=l.element),w=j.$element=v(m,function(a,b){}),!m.$emit(l.prefixEvent+".show.before",j).defaultPrevented){w.css({display:"block"}).addClass(l.placement),l.animation&&(l.backdrop&&x.addClass(l.backdropAnimation),w.addClass(l.animation)),l.backdrop&&i.enter(x,t,null);var d=i.enter(w,a,b,c);d&&d.then&&d.then(c),j.$isShown=m.$isShown=!0,n(m);var e=w[0];s(function(){e.focus()}),t.addClass(l.prefixClass+"-open"),l.animation&&t.addClass(l.prefixClass+"-with-"+l.animation),l.backdrop&&(w.on("click",g),x.on("click",g),x.on("wheel",h)),l.keyboard&&w.on("keyup",j.$onKeyUp)}}},j.hide=function(){if(j.$isShown&&!m.$emit(l.prefixEvent+".hide.before",j).defaultPrevented){var a=i.leave(w,f);a&&a.then&&a.then(f),l.backdrop&&i.leave(x),j.$isShown=m.$isShown=!1,n(m),l.backdrop&&(w.off("click",g),x.off("click",g),x.off("wheel",h)),l.keyboard&&w.off("keyup",j.$onKeyUp)}},j.toggle=function(){j.$isShown?j.hide():j.show()},j.focus=function(){w[0].focus()},j.$onKeyUp=function(a){27===a.which&&j.$isShown&&(j.hide(),a.stopPropagation())},j}function n(a){a.$$phase||a.$root&&a.$root.$$phase||a.$digest()}function o(a,c){return angular.element((c||b).querySelectorAll(a))}function p(a){return v[a]?v[a]:v[a]=h.get(a,{cache:g}).then(function(a){return a.data})}var q=angular.forEach,r=String.prototype.trim,s=c.requestAnimationFrame||c.setTimeout,t=angular.element(c.document.body),u=/ng-bind="/gi,v={};return m}]}).directive("bsModal",["$window","$sce","$modal",function(a,b,c){return{restrict:"EAC",scope:!0,link:function(a,d,e,f){var g={scope:a,element:d,show:!1};angular.forEach(["template","contentTemplate","placement","container","animation","id"],function(a){angular.isDefined(e[a])&&(g[a]=e[a])});var h=/^(false|0|)$/;angular.forEach(["keyboard","html"],function(a){angular.isDefined(e[a])&&(g[a]=!h.test(e[a]))}),angular.isDefined(e.backdrop)&&(g.backdrop=h.test(e.backdrop)?!1:e.backdrop),angular.forEach(["title","content"],function(c){e[c]&&e.$observe(c,function(d,e){a[c]=b.trustAsHtml(d)})}),e.bsModal&&a.$watch(e.bsModal,function(b,c){angular.isObject(b)?angular.extend(a,b):a.content=b},!0);var i=c(g);d.on(e.trigger||"click",i.toggle),a.$on("$destroy",function(){i&&i.destroy(),g=null,i=null})}}}]),angular.module("mgcrea.ngStrap.navbar",[]).provider("$navbar",function(){var a=this.defaults={activeClass:"active",routeAttr:"data-match-route",strict:!1};this.$get=function(){return{defaults:a}}}).directive("bsNavbar",["$window","$location","$navbar",function(a,b,c){var d=c.defaults;return{restrict:"A",link:function(a,c,e,f){var g=angular.copy(d);angular.forEach(Object.keys(d),function(a){angular.isDefined(e[a])&&(g[a]=e[a])}),a.$watch(function(){return b.path()},function(a,b){var d=c[0].querySelectorAll("li["+g.routeAttr+"]");angular.forEach(d,function(b){var c=angular.element(b),d=c.attr(g.routeAttr).replace("/","\\/");g.strict&&(d="^"+d+"$");var e=new RegExp(d,"i");e.test(a)?c.addClass(g.activeClass):c.removeClass(g.activeClass)})})}}}]),angular.module("mgcrea.ngStrap.popover",["mgcrea.ngStrap.tooltip"]).provider("$popover",function(){var a=this.defaults={animation:"am-fade",customClass:"",container:!1,target:!1,placement:"right",template:"popover/popover.tpl.html",contentTemplate:!1,trigger:"click",keyboard:!0,html:!1,title:"",content:"",delay:0,autoClose:!1};this.$get=["$tooltip",function(b){function c(c,d){var e=angular.extend({},a,d),f=b(c,e);return e.content&&(f.$scope.content=e.content),f}return c}]}).directive("bsPopover",["$window","$sce","$popover",function(a,b,c){var d=a.requestAnimationFrame||a.setTimeout;return{restrict:"EAC",scope:!0,link:function(a,e,f){var g={scope:a};angular.forEach(["template","contentTemplate","placement","container","target","delay","trigger","keyboard","html","animation","customClass","autoClose","id"],function(a){angular.isDefined(f[a])&&(g[a]=f[a])}),angular.forEach(["title","content"],function(c){f[c]&&f.$observe(c,function(e,f){a[c]=b.trustAsHtml(e),angular.isDefined(f)&&d(function(){h&&h.$applyPlacement()})})}),f.bsPopover&&a.$watch(f.bsPopover,function(b,c){angular.isObject(b)?angular.extend(a,b):a.content=b,angular.isDefined(c)&&d(function(){h&&h.$applyPlacement()})},!0),f.bsShow&&a.$watch(f.bsShow,function(a,b){h&&angular.isDefined(a)&&(angular.isString(a)&&(a=!!a.match(/true|,?(popover),?/i)),a===!0?h.show():h.hide())}),f.viewport&&a.$watch(f.viewport,function(a){h&&angular.isDefined(a)&&h.setViewport(a)});var h=c(e,g);a.$on("$destroy",function(){h&&h.destroy(),g=null,h=null})}}}]),angular.module("mgcrea.ngStrap.scrollspy",["mgcrea.ngStrap.helpers.debounce","mgcrea.ngStrap.helpers.dimensions"]).provider("$scrollspy",function(){var a=this.$$spies={},c=this.defaults={debounce:150,throttle:100,offset:100};this.$get=["$window","$document","$rootScope","dimensions","debounce","throttle",function(d,e,f,g,h,i){function j(a,b){return a[0].nodeName&&a[0].nodeName.toLowerCase()===b.toLowerCase()}function k(e){var k=angular.extend({},c,e);k.element||(k.element=n);var o=j(k.element,"body"),p=o?l:k.element,q=o?"window":k.id;if(a[q])return a[q].$$count++,a[q];var r,s,t,u,v,w,x,y,z={},A=z.$trackedElements=[],B=[];return z.init=function(){this.$$count=1,u=h(this.checkPosition,k.debounce),v=i(this.checkPosition,k.throttle),p.on("click",this.checkPositionWithEventLoop),l.on("resize",u),p.on("scroll",v),w=h(this.checkOffsets,k.debounce),r=f.$on("$viewContentLoaded",w),s=f.$on("$includeContentLoaded",w),w(),q&&(a[q]=z)},z.destroy=function(){this.$$count--,this.$$count>0||(p.off("click",this.checkPositionWithEventLoop),l.off("resize",u),p.off("scroll",v),r(),s(),q&&delete a[q])},z.checkPosition=function(){if(B.length){if(y=(o?d.pageYOffset:p.prop("scrollTop"))||0,x=Math.max(d.innerHeight,m.prop("clientHeight")),y<B[0].offsetTop&&t!==B[0].target)return z.$activateElement(B[0]);for(var a=B.length;a--;)if(!angular.isUndefined(B[a].offsetTop)&&null!==B[a].offsetTop&&t!==B[a].target&&!(y<B[a].offsetTop||B[a+1]&&y>B[a+1].offsetTop))return z.$activateElement(B[a])}},z.checkPositionWithEventLoop=function(){setTimeout(z.checkPosition,1)},z.$activateElement=function(a){if(t){var b=z.$getTrackedElement(t);b&&(b.source.removeClass("active"),j(b.source,"li")&&j(b.source.parent().parent(),"li")&&b.source.parent().parent().removeClass("active"))}t=a.target,a.source.addClass("active"),j(a.source,"li")&&j(a.source.parent().parent(),"li")&&a.source.parent().parent().addClass("active")},z.$getTrackedElement=function(a){return A.filter(function(b){return b.target===a})[0]},z.checkOffsets=function(){angular.forEach(A,function(a){var c=b.querySelector(a.target);a.offsetTop=c?g.offset(c).top:null,k.offset&&null!==a.offsetTop&&(a.offsetTop-=1*k.offset)}),B=A.filter(function(a){return null!==a.offsetTop}).sort(function(a,b){return a.offsetTop-b.offsetTop}),u()},z.trackElement=function(a,b){A.push({target:a,source:b})},z.untrackElement=function(a,b){for(var c,d=A.length;d--;)if(A[d].target===a&&A[d].source===b){c=d;break}A=A.splice(c,1)},z.activate=function(a){A[a].addClass("active")},z.init(),z}var l=angular.element(d),m=angular.element(e.prop("documentElement")),n=angular.element(d.document.body);return k}]}).directive("bsScrollspy",["$rootScope","debounce","dimensions","$scrollspy",function(a,b,c,d){return{restrict:"EAC",link:function(a,b,c){var e={scope:a};angular.forEach(["offset","target"],function(a){angular.isDefined(c[a])&&(e[a]=c[a])});var f=d(e);f.trackElement(e.target,b),a.$on("$destroy",function(){f&&(f.untrackElement(e.target,b),f.destroy()),e=null,f=null})}}}]).directive("bsScrollspyList",["$rootScope","debounce","dimensions","$scrollspy",function(a,b,c,d){return{restrict:"A",compile:function(a,b){var c=a[0].querySelectorAll("li > a[href]");angular.forEach(c,function(a){var b=angular.element(a);b.parent().attr("bs-scrollspy","").attr("data-target",b.attr("href"))})}}}]),angular.module("mgcrea.ngStrap.select",["mgcrea.ngStrap.tooltip","mgcrea.ngStrap.helpers.parseOptions"]).provider("$select",function(){var a=this.defaults={animation:"am-fade",prefixClass:"select",prefixEvent:"$select",placement:"bottom-left",template:"select/select.tpl.html",trigger:"focus",container:!1,keyboard:!0,html:!1,delay:0,multiple:!1,allNoneButtons:!1,sort:!0,caretHtml:'&nbsp;<span class="caret"></span>',placeholder:"Choose among the following...",allText:"All",noneText:"None",maxLength:3,maxLengthHtml:"selected",iconCheckmark:"glyphicon glyphicon-ok",compareKey:""};this.$get=["$window","$document","$rootScope","$tooltip","$timeout",function(b,c,d,e,f){function g(b,c,d){var g={},h=angular.extend({},a,d);h.sort=h.sort.toString().match(/true|1/i),g=e(b,h);var j=g.$scope;j.$matches=[],j.$activeIndex=-1,j.$isMultiple=h.multiple,j.$showAllNoneButtons=h.allNoneButtons&&h.multiple,j.$iconCheckmark=h.iconCheckmark,j.$allText=h.allText,j.$noneText=h.noneText,j.$activate=function(a){j.$$postDigest(function(){g.activate(a)})},j.$select=function(a,b){j.$$postDigest(function(){g.select(a)})},j.$isVisible=function(){return g.$isVisible()},j.$isActive=function(a){return g.$isActive(a)},j.$selectAll=function(){for(var a=0;a<j.$matches.length;a++)j.$isActive(a)||j.$select(a)},j.$selectNone=function(){for(var a=0;a<j.$matches.length;a++)j.$isActive(a)&&j.$select(a)},g.update=function(a){j.$matches=a,g.$updateActiveIndex()},g.activate=function(a){return h.multiple?(g.$isActive(a)?j.$activeIndex.splice(j.$activeIndex.indexOf(a),1):j.$activeIndex.push(a),h.sort&&j.$activeIndex.sort()):j.$activeIndex=a,j.$activeIndex},g.select=function(a){var b=j.$matches[a].value;j.$apply(function(){g.activate(a),h.multiple?c.$setViewValue(j.$activeIndex.map(function(a){return j.$matches[a].value})):(c.$setViewValue(b),g.hide())}),j.$emit(h.prefixEvent+".select",b,a,g)},g.$updateActiveIndex=function(){c.$modelValue&&j.$matches.length?h.multiple&&angular.isArray(c.$modelValue)?j.$activeIndex=c.$modelValue.map(function(a){return g.$getIndex(a)}):j.$activeIndex=g.$getIndex(c.$modelValue):j.$activeIndex>=j.$matches.length&&(j.$activeIndex=h.multiple?[]:0)},g.$isVisible=function(){return h.minLength&&c?j.$matches.length&&c.$viewValue.length>=h.minLength:j.$matches.length},g.$isActive=function(a){return h.multiple?-1!==j.$activeIndex.indexOf(a):j.$activeIndex===a},g.$getIndex=function(a){var b=j.$matches.length,c=b;if(b){var d;for(d=angular.isObject(a)&&h.compareKey?function(a,b){return a[h.compareKey]===b[h.compareKey]}:function(a,b){return a===b},c=b;c--&&!d(j.$matches[c].value,a););if(!(0>c))return c}},g.$onMouseDown=function(a){if(a.preventDefault(),a.stopPropagation(),i){var b=angular.element(a.target);b.triggerHandler("click")}},g.$onKeyDown=function(a){return/(9|13|38|40)/.test(a.keyCode)?(a.preventDefault(),a.stopPropagation(),h.multiple&&9===a.keyCode?g.hide():h.multiple||13!==a.keyCode&&9!==a.keyCode?void(h.multiple||(38===a.keyCode&&j.$activeIndex>0?j.$activeIndex--:38===a.keyCode&&j.$activeIndex<0?j.$activeIndex=j.$matches.length-1:40===a.keyCode&&j.$activeIndex<j.$matches.length-1?j.$activeIndex++:angular.isUndefined(j.$activeIndex)&&(j.$activeIndex=0),j.$digest())):g.select(j.$activeIndex)):void 0};var k=g.show;g.show=function(){k(),h.multiple&&g.$element.addClass("select-multiple"),f(function(){g.$element.on(i?"touchstart":"mousedown",g.$onMouseDown),h.keyboard&&b.on("keydown",g.$onKeyDown)},0,!1)};var l=g.hide;return g.hide=function(){h.multiple||c.$modelValue||(j.$activeIndex=-1),g.$element.off(i?"touchstart":"mousedown",g.$onMouseDown),h.keyboard&&b.off("keydown",g.$onKeyDown),l(!0)},g}var h=(angular.element(b.document.body),/(ip(a|o)d|iphone|android)/gi.test(b.navigator.userAgent)),i="createTouch"in b.document&&h;return g.defaults=a,g}]}).directive("bsSelect",["$window","$parse","$q","$select","$parseOptions",function(a,b,c,d,e){var f=d.defaults;return{restrict:"EAC",require:"ngModel",link:function(a,b,c,g){var h={scope:a,placeholder:f.placeholder};if(angular.forEach(["placement","container","delay","trigger","keyboard","html","animation","template","placeholder","multiple","allNoneButtons","maxLength","maxLengthHtml","allText","noneText","iconCheckmark","autoClose","id","sort","caretHtml","compareKey"],function(a){angular.isDefined(c[a])&&(h[a]=c[a])}),"select"===b[0].nodeName.toLowerCase()){var i=b;i.css("display","none"),b=angular.element('<button type="button" class="btn btn-default"></button>'),i.after(b)}var j=e(c.bsOptions),k=d(b,g,h),l=j.$match[7].replace(/\|.+/,"").trim();a.$watch(l,function(b,c){j.valuesFn(a,g).then(function(a){k.update(a),g.$render()})},!0),a.$watch(c.ngModel,function(a,b){k.$updateActiveIndex(),g.$render()},!0),g.$render=function(){var a,c;h.multiple&&angular.isArray(g.$modelValue)?(a=g.$modelValue.map(function(a){return c=k.$getIndex(a),angular.isDefined(c)?k.$scope.$matches[c].label:!1}).filter(angular.isDefined),a=a.length>(h.maxLength||f.maxLength)?a.length+" "+(h.maxLengthHtml||f.maxLengthHtml):a.join(", ")):(c=k.$getIndex(g.$modelValue),a=angular.isDefined(c)?k.$scope.$matches[c].label:!1),b.html((a?a:h.placeholder)+(h.caretHtml?h.caretHtml:f.caretHtml))},h.multiple&&(g.$isEmpty=function(a){return!a||0===a.length}),a.$on("$destroy",function(){k&&k.destroy(),h=null,k=null})}}}]),angular.module("mgcrea.ngStrap.tab",[]).provider("$tab",function(){var a=this.defaults={animation:"am-fade",template:"tab/tab.tpl.html",navClass:"nav-tabs",activeClass:"active"},b=this.controller=function(b,c,d){var e=this;e.$options=angular.copy(a),angular.forEach(["animation","navClass","activeClass"],function(a){angular.isDefined(d[a])&&(e.$options[a]=d[a])}),b.$navClass=e.$options.navClass,b.$activeClass=e.$options.activeClass,e.$panes=b.$panes=[],e.$activePaneChangeListeners=e.$viewChangeListeners=[],e.$push=function(a){e.$panes.push(a)},e.$remove=function(a){var b=e.$panes.indexOf(a),c=e.$panes.$active;e.$panes.splice(b,1),c>b?c--:b===c&&c===e.$panes.length&&c--,e.$setActive(c)},e.$panes.$active=0,e.$setActive=b.$setActive=function(a){e.$panes.$active=a,e.$activePaneChangeListeners.forEach(function(a){a()})}};this.$get=function(){var c={};return c.defaults=a,c.controller=b,c}}).directive("bsTabs",["$window","$animate","$tab","$parse",function(a,b,c,d){var e=c.defaults;return{require:["?ngModel","bsTabs"],transclude:!0,scope:!0,controller:["$scope","$element","$attrs",c.controller],templateUrl:function(a,b){return b.template||e.template},link:function(a,b,c,e){var f=e[0],g=e[1];if(f&&(console.warn("Usage of ngModel is deprecated, please use bsActivePane instead!"),g.$activePaneChangeListeners.push(function(){f.$setViewValue(g.$panes.$active)}),f.$formatters.push(function(a){return g.$setActive(1*a),a})),c.bsActivePane){var h=d(c.bsActivePane);g.$activePaneChangeListeners.push(function(){h.assign(a,g.$panes.$active)}),a.$watch(c.bsActivePane,function(a,b){g.$setActive(1*a)},!0)}}}}]).directive("bsPane",["$window","$animate","$sce",function(a,b,c){return{require:["^?ngModel","^bsTabs"],scope:!0,link:function(a,d,e,f){function g(){var c=h.$panes.indexOf(a),e=h.$panes.$active;b[c===e?"addClass":"removeClass"](d,h.$options.activeClass)}var h=(f[0],f[1]);d.addClass("tab-pane"),e.$observe("title",function(b,d){a.title=c.trustAsHtml(b)}),h.$options.animation&&d.addClass(h.$options.animation),e.$observe("disabled",function(b,c){a.disabled=a.$eval(b)}),h.$push(a),a.$on("$destroy",function(){h.$remove(a)}),h.$activePaneChangeListeners.push(function(){g()}),g()}}}]),angular.module("mgcrea.ngStrap.timepicker",["mgcrea.ngStrap.helpers.dateParser","mgcrea.ngStrap.helpers.dateFormatter","mgcrea.ngStrap.tooltip"]).provider("$timepicker",function(){var a=this.defaults={animation:"am-fade",prefixClass:"timepicker",placement:"bottom-left",template:"timepicker/timepicker.tpl.html",trigger:"focus",container:!1,keyboard:!0,html:!1,delay:0,useNative:!0,timeType:"date",timeFormat:"shortTime",timezone:null,modelTimeFormat:null,autoclose:!1,minTime:-(1/0),maxTime:+(1/0),length:5,hourStep:1,minuteStep:5,roundDisplay:!1,iconUp:"glyphicon glyphicon-chevron-up",iconDown:"glyphicon glyphicon-chevron-down",arrowBehavior:"pager"};this.$get=["$window","$document","$rootScope","$sce","$dateFormatter","$tooltip","$timeout",function(b,c,d,e,f,g,h){
function i(b,c,d){function e(a){var b=6e4*o.minuteStep;return new Date(Math.floor(a.getTime()/b)*b)}function i(a,c){if(b[0].createTextRange){var d=b[0].createTextRange();d.collapse(!0),d.moveStart("character",a),d.moveEnd("character",c),d.select()}else b[0].setSelectionRange?b[0].setSelectionRange(a,c):angular.isUndefined(b[0].selectionStart)&&(b[0].selectionStart=a,b[0].selectionEnd=c)}function l(){b[0].focus()}var m=g(b,angular.extend({},a,d)),n=d.scope,o=m.$options,p=m.$scope,q=o.lang,r=function(a,b,c){return f.formatDate(a,b,q,c)},s=0,t=o.roundDisplay?e(new Date):new Date,u=c.$dateValue||t,v={hour:u.getHours(),meridian:u.getHours()<12,minute:u.getMinutes(),second:u.getSeconds(),millisecond:u.getMilliseconds()},w=f.getDatetimeFormat(o.timeFormat,q),x=f.hoursFormat(w),y=f.timeSeparator(w),z=f.minutesFormat(w),A=f.showAM(w);p.$iconUp=o.iconUp,p.$iconDown=o.iconDown,p.$select=function(a,b){m.select(a,b)},p.$moveIndex=function(a,b){m.$moveIndex(a,b)},p.$switchMeridian=function(a){m.switchMeridian(a)},m.update=function(a){angular.isDate(a)&&!isNaN(a.getTime())?(m.$date=a,angular.extend(v,{hour:a.getHours(),minute:a.getMinutes(),second:a.getSeconds(),millisecond:a.getMilliseconds()}),m.$build()):m.$isBuilt||m.$build()},m.select=function(a,b,d){(!c.$dateValue||isNaN(c.$dateValue.getTime()))&&(c.$dateValue=new Date(1970,0,1)),angular.isDate(a)||(a=new Date(a)),0===b?c.$dateValue.setHours(a.getHours()):1===b&&c.$dateValue.setMinutes(a.getMinutes()),c.$setViewValue(angular.copy(c.$dateValue)),c.$render(),o.autoclose&&!d&&h(function(){m.hide(!0)})},m.switchMeridian=function(a){if(c.$dateValue&&!isNaN(c.$dateValue.getTime())){var b=(a||c.$dateValue).getHours();c.$dateValue.setHours(12>b?b+12:b-12),c.$setViewValue(angular.copy(c.$dateValue)),c.$render()}},m.$build=function(){var a,b,c=p.midIndex=parseInt(o.length/2,10),d=[];for(a=0;a<o.length;a++)b=new Date(1970,0,1,v.hour-(c-a)*o.hourStep),d.push({date:b,label:r(b,x),selected:m.$date&&m.$isSelected(b,0),disabled:m.$isDisabled(b,0)});var e,f=[];for(a=0;a<o.length;a++)e=new Date(1970,0,1,0,v.minute-(c-a)*o.minuteStep),f.push({date:e,label:r(e,z),selected:m.$date&&m.$isSelected(e,1),disabled:m.$isDisabled(e,1)});var g=[];for(a=0;a<o.length;a++)g.push([d[a],f[a]]);p.rows=g,p.showAM=A,p.isAM=(m.$date||d[c].date).getHours()<12,p.timeSeparator=y,m.$isBuilt=!0},m.$isSelected=function(a,b){return m.$date?0===b?a.getHours()===m.$date.getHours():1===b?a.getMinutes()===m.$date.getMinutes():void 0:!1},m.$isDisabled=function(a,b){var c;return 0===b?c=a.getTime()+6e4*v.minute:1===b&&(c=a.getTime()+36e5*v.hour),c<1*o.minTime||c>1*o.maxTime},p.$arrowAction=function(a,b){"picker"===o.arrowBehavior?m.$setTimeByStep(a,b):m.$moveIndex(a,b)},m.$setTimeByStep=function(a,b){var c=new Date(m.$date),d=c.getHours(),e=(r(c,x).length,c.getMinutes());r(c,z).length;0===b?c.setHours(d-parseInt(o.hourStep,10)*a):c.setMinutes(e-parseInt(o.minuteStep,10)*a),m.select(c,b,!0)},m.$moveIndex=function(a,b){var c;0===b?(c=new Date(1970,0,1,v.hour+a*o.length,v.minute),angular.extend(v,{hour:c.getHours()})):1===b&&(c=new Date(1970,0,1,v.hour,v.minute+a*o.length*o.minuteStep),angular.extend(v,{minute:c.getMinutes()})),m.$build()},m.$onMouseDown=function(a){if("input"!==a.target.nodeName.toLowerCase()&&a.preventDefault(),a.stopPropagation(),k){var b=angular.element(a.target);"button"!==b[0].nodeName.toLowerCase()&&(b=b.parent()),b.triggerHandler("click")}},m.$onKeyDown=function(a){if(/(38|37|39|40|13)/.test(a.keyCode)&&!a.shiftKey&&!a.altKey){if(a.preventDefault(),a.stopPropagation(),13===a.keyCode)return m.hide(!0);var b=new Date(m.$date),c=b.getHours(),d=r(b,x).length,e=b.getMinutes(),f=r(b,z).length,g=/(37|39)/.test(a.keyCode),h=2+1*A;g&&(37===a.keyCode?s=1>s?h-1:s-1:39===a.keyCode&&(s=h-1>s?s+1:0));var j=[0,d];0===s?(38===a.keyCode?b.setHours(c-parseInt(o.hourStep,10)):40===a.keyCode&&b.setHours(c+parseInt(o.hourStep,10)),d=r(b,x).length,j=[0,d]):1===s?(38===a.keyCode?b.setMinutes(e-parseInt(o.minuteStep,10)):40===a.keyCode&&b.setMinutes(e+parseInt(o.minuteStep,10)),f=r(b,z).length,j=[d+1,d+1+f]):2===s&&(g||m.switchMeridian(),j=[d+1+f+1,d+1+f+3]),m.select(b,s,!0),i(j[0],j[1]),n.$digest()}};var B=m.init;m.init=function(){return j&&o.useNative?(b.prop("type","time"),void b.css("-webkit-appearance","textfield")):(k&&(b.prop("type","text"),b.attr("readonly","true"),b.on("click",l)),void B())};var C=m.destroy;m.destroy=function(){j&&o.useNative&&b.off("click",l),C()};var D=m.show;m.show=function(){D(),h(function(){m.$element.on(k?"touchstart":"mousedown",m.$onMouseDown),o.keyboard&&b.on("keydown",m.$onKeyDown)},0,!1)};var E=m.hide;return m.hide=function(a){m.$isShown&&(m.$element.off(k?"touchstart":"mousedown",m.$onMouseDown),o.keyboard&&b.off("keydown",m.$onKeyDown),E(a))},m}var j=(angular.element(b.document.body),/(ip(a|o)d|iphone|android)/gi.test(b.navigator.userAgent)),k="createTouch"in b.document&&j;return a.lang||(a.lang=f.getDefaultLocale()),i.defaults=a,i}]}).directive("bsTimepicker",["$window","$parse","$q","$dateFormatter","$dateParser","$timepicker",function(a,b,c,d,e,f){var g=f.defaults,h=/(ip(a|o)d|iphone|android)/gi.test(a.navigator.userAgent);a.requestAnimationFrame||a.setTimeout;return{restrict:"EAC",require:"ngModel",link:function(a,b,c,i){function j(a){if(angular.isDate(a)){var b=isNaN(l.minTime)||new Date(a.getTime()).setFullYear(1970,0,1)>=l.minTime,c=isNaN(l.maxTime)||new Date(a.getTime()).setFullYear(1970,0,1)<=l.maxTime,d=b&&c;i.$setValidity("date",d),i.$setValidity("min",b),i.$setValidity("max",c),d&&(i.$dateValue=a)}}function k(){return!i.$dateValue||isNaN(i.$dateValue.getTime())?"":p(i.$dateValue,l.timeFormat)}var l={scope:a,controller:i};angular.forEach(["placement","container","delay","trigger","keyboard","html","animation","template","autoclose","timeType","timeFormat","timezone","modelTimeFormat","useNative","hourStep","minuteStep","length","arrowBehavior","iconUp","iconDown","id"],function(a){angular.isDefined(c[a])&&(l[a]=c[a])});var m=/^(false|0|)$/;angular.forEach(["roundDisplay"],function(a){angular.isDefined(c[a])&&(l[a]=!m.test(c[a]))}),c.bsShow&&a.$watch(c.bsShow,function(a,b){n&&angular.isDefined(a)&&(angular.isString(a)&&(a=!!a.match(/true|,?(timepicker),?/i)),a===!0?n.show():n.hide())}),h&&(l.useNative||g.useNative)&&(l.timeFormat="HH:mm");var n=f(b,i,l);l=n.$options;var o=l.lang,p=function(a,b,c){return d.formatDate(a,b,o,c)},q=e({format:l.timeFormat,lang:o});angular.forEach(["minTime","maxTime"],function(a){angular.isDefined(c[a])&&c.$observe(a,function(b){n.$options[a]=q.getTimeForAttribute(a,b),!isNaN(n.$options[a])&&n.$build(),j(i.$dateValue)})}),a.$watch(c.ngModel,function(a,b){n.update(i.$dateValue)},!0),i.$parsers.unshift(function(a){var b;if(!a)return i.$setValidity("date",!0),null;var c=angular.isDate(a)?a:q.parse(a,i.$dateValue);return!c||isNaN(c.getTime())?void i.$setValidity("date",!1):(j(c),"string"===l.timeType?(b=q.timezoneOffsetAdjust(c,l.timezone,!0),p(b,l.modelTimeFormat||l.timeFormat)):(b=q.timezoneOffsetAdjust(i.$dateValue,l.timezone,!0),"number"===l.timeType?b.getTime():"unix"===l.timeType?b.getTime()/1e3:"iso"===l.timeType?b.toISOString():new Date(b)))}),i.$formatters.push(function(a){var b;return b=angular.isUndefined(a)||null===a?NaN:angular.isDate(a)?a:"string"===l.timeType?q.parse(a,null,l.modelTimeFormat):"unix"===l.timeType?new Date(1e3*a):new Date(a),i.$dateValue=q.timezoneOffsetAdjust(b,l.timezone),k()}),i.$render=function(){b.val(k())},a.$on("$destroy",function(){n&&n.destroy(),l=null,n=null})}}}]),angular.module("mgcrea.ngStrap.typeahead",["mgcrea.ngStrap.tooltip","mgcrea.ngStrap.helpers.parseOptions"]).provider("$typeahead",function(){var a=this.defaults={animation:"am-fade",prefixClass:"typeahead",prefixEvent:"$typeahead",placement:"bottom-left",template:"typeahead/typeahead.tpl.html",trigger:"focus",container:!1,keyboard:!0,html:!1,delay:0,minLength:1,filter:"filter",limit:6,autoSelect:!1,comparator:""};this.$get=["$window","$rootScope","$tooltip","$timeout",function(b,c,d,e){function f(b,c,f){var g={},h=angular.extend({},a,f);g=d(b,h);var i=f.scope,j=g.$scope;j.$resetMatches=function(){j.$matches=[],j.$activeIndex=h.autoSelect?0:-1},j.$resetMatches(),j.$activate=function(a){j.$$postDigest(function(){g.activate(a)})},j.$select=function(a,b){j.$$postDigest(function(){g.select(a)})},j.$isVisible=function(){return g.$isVisible()},g.update=function(a){j.$matches=a,j.$activeIndex>=a.length&&(j.$activeIndex=h.autoSelect?0:-1),/^(bottom|bottom-left|bottom-right)$/.test(h.placement)||e(g.$applyPlacement)},g.activate=function(a){j.$activeIndex=a},g.select=function(a){var b=j.$matches[a].value;c.$setViewValue(b),c.$render(),j.$resetMatches(),i&&i.$digest(),j.$emit(h.prefixEvent+".select",b,a,g)},g.$isVisible=function(){return h.minLength&&c?j.$matches.length&&angular.isString(c.$viewValue)&&c.$viewValue.length>=h.minLength:!!j.$matches.length},g.$getIndex=function(a){var b=j.$matches.length,c=b;if(b){for(c=b;c--&&j.$matches[c].value!==a;);if(!(0>c))return c}},g.$onMouseDown=function(a){a.preventDefault(),a.stopPropagation()},g.$onKeyDown=function(a){/(38|40|13)/.test(a.keyCode)&&(g.$isVisible()&&(a.preventDefault(),a.stopPropagation()),13===a.keyCode&&j.$matches.length?g.select(j.$activeIndex):38===a.keyCode&&j.$activeIndex>0?j.$activeIndex--:40===a.keyCode&&j.$activeIndex<j.$matches.length-1?j.$activeIndex++:angular.isUndefined(j.$activeIndex)&&(j.$activeIndex=0),j.$digest())};var k=g.show;g.show=function(){k(),e(function(){g.$element.on("mousedown",g.$onMouseDown),h.keyboard&&b.on("keydown",g.$onKeyDown)},0,!1)};var l=g.hide;return g.hide=function(){g.$element.off("mousedown",g.$onMouseDown),h.keyboard&&b.off("keydown",g.$onKeyDown),h.autoSelect||g.activate(-1),l()},g}angular.element(b.document.body);return f.defaults=a,f}]}).directive("bsTypeahead",["$window","$parse","$q","$typeahead","$parseOptions",function(a,b,d,e,f){var g=e.defaults;return{restrict:"EAC",require:"ngModel",link:function(a,b,d,h){var i={scope:a};angular.forEach(["placement","container","delay","trigger","keyboard","html","animation","template","filter","limit","minLength","watchOptions","selectMode","autoSelect","comparator","id"],function(a){angular.isDefined(d[a])&&(i[a]=d[a])}),b.attr("autocomplete","off");var j=i.filter||g.filter,k=i.limit||g.limit,l=i.comparator||g.comparator,m=d.bsOptions;j&&(m+=" | "+j+":$viewValue"),l&&(m+=":"+l),k&&(m+=" | limitTo:"+k);var n=f(m),o=e(b,h,i);if(i.watchOptions){var p=n.$match[7].replace(/\|.+/,"").replace(/\(.*\)/g,"").trim();a.$watch(p,function(b,c){n.valuesFn(a,h).then(function(a){o.update(a),h.$render()})},!0)}a.$watch(d.ngModel,function(b,c){a.$modelValue=b,n.valuesFn(a,h).then(function(a){if(i.selectMode&&!a.length&&b.length>0)return void h.$setViewValue(h.$viewValue.substring(0,h.$viewValue.length-1));a.length>k&&(a=a.slice(0,k));var c=o.$isVisible();c&&o.update(a),(1!==a.length||a[0].value!==b)&&(!c&&o.update(a),h.$render())})}),h.$formatters.push(function(a){var b=n.displayValue(a);return b===c?"":b}),h.$render=function(){if(h.$isEmpty(h.$viewValue))return b.val("");var a=o.$getIndex(h.$modelValue),c=angular.isDefined(a)?o.$scope.$matches[a].label:h.$viewValue;c=angular.isObject(c)?n.displayValue(c):c,b.val(c?c.toString().replace(/<(?:.|\n)*?>/gm,"").trim():"")},a.$on("$destroy",function(){o&&o.destroy(),i=null,o=null})}}}]),angular.module("mgcrea.ngStrap.tooltip",["mgcrea.ngStrap.helpers.dimensions"]).provider("$tooltip",function(){var a=this.defaults={animation:"am-fade",customClass:"",prefixClass:"tooltip",prefixEvent:"tooltip",container:!1,target:!1,placement:"top",template:"tooltip/tooltip.tpl.html",contentTemplate:!1,trigger:"hover focus",keyboard:!1,html:!1,show:!1,title:"",type:"",delay:0,autoClose:!1,bsEnabled:!0,viewport:{selector:"body",padding:0}};this.$get=["$window","$rootScope","$compile","$q","$templateCache","$http","$animate","$sce","dimensions","$$rAF","$timeout",function(c,e,f,g,h,i,j,k,l,m,n){function o(g,h){function i(){M.$emit(L.prefixEvent+".show",J)}function o(){if(M.$emit(L.prefixEvent+".hide",J),R===W){if(V&&"focus"===L.trigger)return g[0].blur();I()}}function w(){var a=L.trigger.split(" ");angular.forEach(a,function(a){"click"===a?g.on("click",J.toggle):"manual"!==a&&(g.on("hover"===a?"mouseenter":"focus",J.enter),g.on("hover"===a?"mouseleave":"blur",J.leave),"button"===K&&"hover"!==a&&g.on(t?"touchstart":"mousedown",J.$onFocusElementMouseDown))})}function x(){for(var a=L.trigger.split(" "),b=a.length;b--;){var c=a[b];"click"===c?g.off("click",J.toggle):"manual"!==c&&(g.off("hover"===c?"mouseenter":"focus",J.enter),g.off("hover"===c?"mouseleave":"blur",J.leave),"button"===K&&"hover"!==c&&g.off(t?"touchstart":"mousedown",J.$onFocusElementMouseDown))}}function y(){"focus"!==L.trigger?R.on("keyup",J.$onKeyUp):g.on("keyup",J.$onFocusKeyUp)}function z(){"focus"!==L.trigger?R.off("keyup",J.$onKeyUp):g.off("keyup",J.$onFocusKeyUp)}function A(){n(function(){R.on("click",C),v.on("click",J.hide),X=!0},0,!1)}function B(){X&&(R.off("click",C),v.off("click",J.hide),X=!1)}function C(a){a.stopPropagation()}function D(a){a=a||L.target||g;var d=a[0],e="BODY"===d.tagName,f=d.getBoundingClientRect(),h={};for(var i in f)h[i]=f[i];null===h.width&&(h=angular.extend({},h,{width:f.right-f.left,height:f.bottom-f.top}));var j=e?{top:0,left:0}:l.offset(d),k={scroll:e?b.documentElement.scrollTop||b.body.scrollTop:a.prop("scrollTop")||0},m=e?{width:b.documentElement.clientWidth,height:c.innerHeight}:null;return angular.extend({},h,k,m,j)}function E(a,b,c,d){var e,f=a.split("-");switch(f[0]){case"right":e={top:b.top+b.height/2-d/2,left:b.left+b.width};break;case"bottom":e={top:b.top+b.height,left:b.left+b.width/2-c/2};break;case"left":e={top:b.top+b.height/2-d/2,left:b.left-c};break;default:e={top:b.top-d,left:b.left+b.width/2-c/2}}if(!f[1])return e;if("top"===f[0]||"bottom"===f[0])switch(f[1]){case"left":e.left=b.left;break;case"right":e.left=b.left+b.width-c}else if("left"===f[0]||"right"===f[0])switch(f[1]){case"top":e.top=b.top-d;break;case"bottom":e.top=b.top+b.height}return e}function F(a,b){var c=R[0],d=c.offsetWidth,e=c.offsetHeight,f=parseInt(l.css(c,"margin-top"),10),g=parseInt(l.css(c,"margin-left"),10);isNaN(f)&&(f=0),isNaN(g)&&(g=0),a.top=a.top+f,a.left=a.left+g,l.setOffset(c,angular.extend({using:function(a){R.css({top:Math.round(a.top)+"px",left:Math.round(a.left)+"px"})}},a),0);var h=c.offsetWidth,i=c.offsetHeight;if("top"===b&&i!==e&&(a.top=a.top+e-i),!/top-left|top-right|bottom-left|bottom-right/.test(b)){var j=G(b,a,h,i);if(j.left?a.left+=j.left:a.top+=j.top,l.setOffset(c,a),/top|right|bottom|left/.test(b)){var k=/top|bottom/.test(b),m=k?2*j.left-d+h:2*j.top-e+i,n=k?"offsetWidth":"offsetHeight";H(m,c[n],k)}}}function G(a,b,c,d){var e={top:0,left:0},f=L.viewport&&q(L.viewport.selector||L.viewport);if(!f)return e;var g=L.viewport&&L.viewport.padding||0,h=D(f);if(/right|left/.test(a)){var i=b.top-g-h.scroll,j=b.top+g-h.scroll+d;i<h.top?e.top=h.top-i:j>h.top+h.height&&(e.top=h.top+h.height-j)}else{var k=b.left-g,l=b.left+g+c;k<h.left?e.left=h.left-k:l>h.width&&(e.left=h.left+h.width-l)}return e}function H(a,b,c){var d=q(".tooltip-arrow, .arrow",R[0]);d.css(c?"left":"top",50*(1-a/b)+"%").css(c?"top":"left","")}function I(){clearTimeout(O),J.$isShown&&null!==R&&(L.autoClose&&B(),L.keyboard&&z()),U&&(U.$destroy(),U=null),R&&(R.remove(),R=J.$element=null)}var J={},K=g[0].nodeName.toLowerCase(),L=J.$options=angular.extend({},a,h);J.$promise=r(L.template);var M=J.$scope=L.scope&&L.scope.$new()||e.$new();if(L.delay&&angular.isString(L.delay)){var N=L.delay.split(",").map(parseFloat);L.delay=N.length>1?{show:N[0],hide:N[1]}:N[0]}J.$id=L.id||g.attr("id")||"",L.title&&(M.title=k.trustAsHtml(L.title)),M.$setEnabled=function(a){M.$$postDigest(function(){J.setEnabled(a)})},M.$hide=function(){M.$$postDigest(function(){J.hide()})},M.$show=function(){M.$$postDigest(function(){J.show()})},M.$toggle=function(){M.$$postDigest(function(){J.toggle()})},J.$isShown=M.$isShown=!1;var O,P;L.contentTemplate&&(J.$promise=J.$promise.then(function(a){var b=angular.element(a);return r(L.contentTemplate).then(function(a){var c=q('[ng-bind="content"]',b[0]);return c.length||(c=q('[ng-bind="title"]',b[0])),c.removeAttr("ng-bind").html(a),b[0].outerHTML})}));var Q,R,S,T,U;J.$promise.then(function(a){angular.isObject(a)&&(a=a.data),L.html&&(a=a.replace(u,'ng-bind-html="')),a=s.apply(a),S=a,Q=f(a),J.init()}),J.init=function(){L.delay&&angular.isNumber(L.delay)&&(L.delay={show:L.delay,hide:L.delay}),"self"===L.container?T=g:angular.isElement(L.container)?T=L.container:L.container&&(T=q(L.container)),w(),L.target&&(L.target=angular.isElement(L.target)?L.target:q(L.target)),L.show&&M.$$postDigest(function(){"focus"===L.trigger?g[0].focus():J.show()})},J.destroy=function(){x(),I(),M.$destroy()},J.enter=function(){return clearTimeout(O),P="in",L.delay&&L.delay.show?void(O=setTimeout(function(){"in"===P&&J.show()},L.delay.show)):J.show()},J.show=function(){if(L.bsEnabled&&!J.$isShown){M.$emit(L.prefixEvent+".show.before",J);var a,b;L.container?(a=T,b=T[0].lastChild?angular.element(T[0].lastChild):null):(a=null,b=g),R&&I(),U=J.$scope.$new(),R=J.$element=Q(U,function(a,b){}),R.css({top:"-9999px",left:"-9999px",display:"block",visibility:"hidden"}),L.animation&&R.addClass(L.animation),L.type&&R.addClass(L.prefixClass+"-"+L.type),L.customClass&&R.addClass(L.customClass),b?b.after(R):a.prepend(R),J.$isShown=M.$isShown=!0,p(M),J.$applyPlacement();var c=j.enter(R,a,b,i);c&&c.then&&c.then(i),p(M),m(function(){R&&R.css({visibility:"visible"})}),L.keyboard&&("focus"!==L.trigger&&J.focus(),y()),L.autoClose&&A()}},J.leave=function(){return clearTimeout(O),P="out",L.delay&&L.delay.hide?void(O=setTimeout(function(){"out"===P&&J.hide()},L.delay.hide)):J.hide()};var V,W;J.hide=function(a){if(J.$isShown){M.$emit(L.prefixEvent+".hide.before",J),V=a,W=R;var b=j.leave(R,o);b&&b.then&&b.then(o),J.$isShown=M.$isShown=!1,p(M),L.keyboard&&null!==R&&z(),L.autoClose&&null!==R&&B()}},J.toggle=function(){J.$isShown?J.leave():J.enter()},J.focus=function(){R[0].focus()},J.setEnabled=function(a){L.bsEnabled=a},J.setViewport=function(a){L.viewport=a},J.$applyPlacement=function(){if(R){var b=L.placement,c=/\s?auto?\s?/i,d=c.test(b);d&&(b=b.replace(c,"")||a.placement),R.addClass(L.placement);var e=D(),f=R.prop("offsetWidth"),h=R.prop("offsetHeight");if(d){var i=b,j=L.container?q(L.container):g.parent(),k=D(j);i.indexOf("bottom")>=0&&e.bottom+h>k.bottom?b=i.replace("bottom","top"):i.indexOf("top")>=0&&e.top-h<k.top&&(b=i.replace("top","bottom")),("right"===i||"bottom-left"===i||"top-left"===i)&&e.right+f>k.width?b="right"===i?"left":b.replace("left","right"):("left"===i||"bottom-right"===i||"top-right"===i)&&e.left-f<k.left&&(b="left"===i?"right":b.replace("right","left")),R.removeClass(i).addClass(b)}var l=E(b,e,f,h);F(l,b)}},J.$onKeyUp=function(a){27===a.which&&J.$isShown&&(J.hide(),a.stopPropagation())},J.$onFocusKeyUp=function(a){27===a.which&&(g[0].blur(),a.stopPropagation())},J.$onFocusElementMouseDown=function(a){d=a,a.preventDefault(),a.stopPropagation(),J.$isShown?g[0].blur():g[0].focus()};var X=!1;return J}function p(a){a.$$phase||a.$root&&a.$root.$$phase||a.$digest()}function q(a,c){return angular.element((c||b).querySelectorAll(a))}function r(a){return w[a]?w[a]:w[a]=i.get(a,{cache:h}).then(function(a){return a.data})}var s=String.prototype.trim,t="createTouch"in c.document,u=/ng-bind="/gi,v=angular.element(c.document),w={};return o}]}).directive("bsTooltip",["$window","$location","$sce","$tooltip","$$rAF",function(a,b,c,d,e){return{restrict:"EAC",scope:!0,link:function(a,b,f,g){var h={scope:a};angular.forEach(["template","contentTemplate","placement","container","delay","trigger","keyboard","html","animation","backdropAnimation","type","customClass","id"],function(a){angular.isDefined(f[a])&&(h[a]=f[a])}),b.attr("data-target")&&(h.target=b.attr("data-target")),a.hasOwnProperty("title")||(a.title=""),f.$observe("title",function(b){if(angular.isDefined(b)||!a.hasOwnProperty("title")){var d=a.title;a.title=c.trustAsHtml(b),angular.isDefined(d)&&e(function(){i&&i.$applyPlacement()})}}),f.bsTooltip&&a.$watch(f.bsTooltip,function(b,c){angular.isObject(b)?angular.extend(a,b):a.title=b,angular.isDefined(c)&&e(function(){i&&i.$applyPlacement()})},!0),f.bsShow&&a.$watch(f.bsShow,function(a,b){i&&angular.isDefined(a)&&(angular.isString(a)&&(a=!!a.match(/true|,?(tooltip),?/i)),a===!0?i.show():i.hide())}),f.bsEnabled&&a.$watch(f.bsEnabled,function(a,b){i&&angular.isDefined(a)&&(angular.isString(a)&&(a=!!a.match(/true|1|,?(tooltip),?/i)),a===!1?i.setEnabled(!1):i.setEnabled(!0))}),f.viewport&&a.$watch(f.viewport,function(a){i&&angular.isDefined(a)&&i.setViewport(a)});var i=d(b,h);a.$on("$destroy",function(){i&&i.destroy(),h=null,i=null})}}}])}(window,document),!function(){"use strict";angular.module("mgcrea.ngStrap.aside").run(["$templateCache",function(a){a.put("aside/aside.tpl.html",'<div class="aside" tabindex="-1" role="dialog"><div class="aside-dialog"><div class="aside-content"><div class="aside-header" ng-show="title"><button type="button" class="close" ng-click="$hide()">&times;</button><h4 class="aside-title" ng-bind="title"></h4></div><div class="aside-body" ng-bind="content"></div><div class="aside-footer"><button type="button" class="btn btn-default" ng-click="$hide()">Close</button></div></div></div></div>')}]),angular.module("mgcrea.ngStrap.alert").run(["$templateCache",function(a){a.put("alert/alert.tpl.html",'<div class="alert" ng-class="[type ? \'alert-\' + type : null]"><button type="button" class="close" ng-if="dismissable" ng-click="$hide()">&times;</button> <strong ng-bind="title"></strong>&nbsp;<span ng-bind-html="content"></span></div>')}]),angular.module("mgcrea.ngStrap.datepicker").run(["$templateCache",function(a){a.put("datepicker/datepicker.tpl.html",'<div class="dropdown-menu datepicker" ng-class="\'datepicker-mode-\' + $mode" style="max-width: 320px"><table style="table-layout: fixed; height: 100%; width: 100%"><thead><tr class="text-center"><th><button tabindex="-1" type="button" class="btn btn-default pull-left" ng-click="$selectPane(-1)"><i class="{{$iconLeft}}"></i></button></th><th colspan="{{ rows[0].length - 2 }}"><button tabindex="-1" type="button" class="btn btn-default btn-block text-strong" ng-click="$toggleMode()"><strong style="text-transform: capitalize" ng-bind="title"></strong></button></th><th><button tabindex="-1" type="button" class="btn btn-default pull-right" ng-click="$selectPane(+1)"><i class="{{$iconRight}}"></i></button></th></tr><tr ng-show="showLabels" ng-bind-html="labels"></tr></thead><tbody><tr ng-repeat="(i, row) in rows" height="{{ 100 / rows.length }}%"><td class="text-center" ng-repeat="(j, el) in row"><button tabindex="-1" type="button" class="btn btn-default" style="width: 100%" ng-class="{\'btn-primary\': el.selected, \'btn-info btn-today\': el.isToday && !el.selected}" ng-click="$select(el.date)" ng-disabled="el.disabled"><span ng-class="{\'text-muted\': el.muted}" ng-bind="el.label"></span></button></td></tr></tbody></table></div>')}]),angular.module("mgcrea.ngStrap.dropdown").run(["$templateCache",function(a){a.put("dropdown/dropdown.tpl.html",'<ul tabindex="-1" class="dropdown-menu" role="menu"><li role="presentation" ng-class="{divider: item.divider}" ng-repeat="item in content"><a role="menuitem" tabindex="-1" ng-href="{{item.href}}" ng-if="!item.divider && item.href" target="{{item.target || \'\'}}" ng-bind="item.text"></a> <a role="menuitem" tabindex="-1" href="javascript:void(0)" ng-if="!item.divider && item.click" ng-click="$eval(item.click);$hide()" ng-bind="item.text"></a></li></ul>')}]),angular.module("mgcrea.ngStrap.modal").run(["$templateCache",function(a){a.put("modal/modal.tpl.html",'<div class="modal" tabindex="-1" role="dialog" aria-hidden="true"><div class="modal-dialog"><div class="modal-content"><div class="modal-header" ng-show="title"><button type="button" class="close" aria-label="Close" ng-click="$hide()"><span aria-hidden="true">&times;</span></button><h4 class="modal-title" ng-bind="title"></h4></div><div class="modal-body" ng-bind="content"></div><div class="modal-footer"><button type="button" class="btn btn-default" ng-click="$hide()">Close</button></div></div></div></div>')}]),angular.module("mgcrea.ngStrap.popover").run(["$templateCache",function(a){a.put("popover/popover.tpl.html",'<div class="popover"><div class="arrow"></div><h3 class="popover-title" ng-bind="title" ng-show="title"></h3><div class="popover-content" ng-bind="content"></div></div>')}]),angular.module("mgcrea.ngStrap.select").run(["$templateCache",function(a){a.put("select/select.tpl.html",'<ul tabindex="-1" class="select dropdown-menu" ng-show="$isVisible()" role="select"><li ng-if="$showAllNoneButtons"><div class="btn-group" style="margin-bottom: 5px; margin-left: 5px"><button type="button" class="btn btn-default btn-xs" ng-click="$selectAll()">{{$allText}}</button> <button type="button" class="btn btn-default btn-xs" ng-click="$selectNone()">{{$noneText}}</button></div></li><li role="presentation" ng-repeat="match in $matches" ng-class="{active: $isActive($index)}"><a style="cursor: default" role="menuitem" tabindex="-1" ng-click="$select($index, $event)"><i class="{{$iconCheckmark}} pull-right" ng-if="$isMultiple && $isActive($index)"></i> <span ng-bind="match.label"></span></a></li></ul>')}]),angular.module("mgcrea.ngStrap.tab").run(["$templateCache",function(a){a.put("tab/tab.tpl.html",'<ul class="nav" ng-class="$navClass" role="tablist"><li role="presentation" ng-repeat="$pane in $panes track by $index" ng-class="[ $index == $panes.$active ? $activeClass : \'\', $pane.disabled ? \'disabled\' : \'\' ]"><a role="tab" data-toggle="tab" ng-click="!$pane.disabled && $setActive($index)" data-index="{{ $index }}" ng-bind-html="$pane.title" aria-controls="$pane.title"></a></li></ul><div ng-transclude class="tab-content"></div>')}]),angular.module("mgcrea.ngStrap.timepicker").run(["$templateCache",function(a){a.put("timepicker/timepicker.tpl.html",'<div class="dropdown-menu timepicker" style="min-width: 0px;width: auto"><table height="100%"><thead><tr class="text-center"><th><button tabindex="-1" type="button" class="btn btn-default pull-left" ng-click="$arrowAction(-1, 0)"><i class="{{ $iconUp }}"></i></button></th><th>&nbsp;</th><th><button tabindex="-1" type="button" class="btn btn-default pull-left" ng-click="$arrowAction(-1, 1)"><i class="{{ $iconUp }}"></i></button></th></tr></thead><tbody><tr ng-repeat="(i, row) in rows"><td class="text-center"><button tabindex="-1" style="width: 100%" type="button" class="btn btn-default" ng-class="{\'btn-primary\': row[0].selected}" ng-click="$select(row[0].date, 0)" ng-disabled="row[0].disabled"><span ng-class="{\'text-muted\': row[0].muted}" ng-bind="row[0].label"></span></button></td><td><span ng-bind="i == midIndex ? timeSeparator : \' \'"></span></td><td class="text-center"><button tabindex="-1" ng-if="row[1].date" style="width: 100%" type="button" class="btn btn-default" ng-class="{\'btn-primary\': row[1].selected}" ng-click="$select(row[1].date, 1)" ng-disabled="row[1].disabled"><span ng-class="{\'text-muted\': row[1].muted}" ng-bind="row[1].label"></span></button></td><td ng-if="showAM">&nbsp;</td><td ng-if="showAM"><button tabindex="-1" ng-show="i == midIndex - !isAM * 1" style="width: 100%" type="button" ng-class="{\'btn-primary\': !!isAM}" class="btn btn-default" ng-click="$switchMeridian()" ng-disabled="el.disabled">AM</button> <button tabindex="-1" ng-show="i == midIndex + 1 - !isAM * 1" style="width: 100%" type="button" ng-class="{\'btn-primary\': !isAM}" class="btn btn-default" ng-click="$switchMeridian()" ng-disabled="el.disabled">PM</button></td></tr></tbody><tfoot><tr class="text-center"><th><button tabindex="-1" type="button" class="btn btn-default pull-left" ng-click="$arrowAction(1, 0)"><i class="{{ $iconDown }}"></i></button></th><th>&nbsp;</th><th><button tabindex="-1" type="button" class="btn btn-default pull-left" ng-click="$arrowAction(1, 1)"><i class="{{ $iconDown }}"></i></button></th></tr></tfoot></table></div>')}]),angular.module("mgcrea.ngStrap.typeahead").run(["$templateCache",function(a){a.put("typeahead/typeahead.tpl.html",'<ul tabindex="-1" class="typeahead dropdown-menu" ng-show="$isVisible()" role="select"><li role="presentation" ng-repeat="match in $matches" ng-class="{active: $index == $activeIndex}"><a role="menuitem" tabindex="-1" ng-click="$select($index, $event)" ng-bind="match.label"></a></li></ul>')}]),angular.module("mgcrea.ngStrap.tooltip").run(["$templateCache",function(a){a.put("tooltip/tooltip.tpl.html",'<div class="tooltip in" ng-show="title"><div class="tooltip-arrow"></div><div class="tooltip-inner" ng-bind="title"></div></div>')}])}(window,document),function(a,b){return"function"==typeof define&&define.amd?void define("angular-file-upload",["angular"],function(a){return b(a)}):b(a)}("undefined"==typeof angular?null:angular,function(a){var b=a.module("angularFileUpload",[]);return b.value("fileUploaderOptions",{url:"/",alias:"file",headers:{},queue:[],progress:0,autoUpload:!1,removeAfterUpload:!1,method:"POST",filters:[],formData:[],queueLimit:Number.MAX_VALUE,withCredentials:!1}).factory("FileUploader",["fileUploaderOptions","$rootScope","$http","$window","$compile",function(b,c,d,e,f){function g(c){var d=a.copy(b);a.extend(this,d,c,{isUploading:!1,_nextIndex:0,_failFilterIndex:-1,_directives:{select:[],drop:[],over:[]}}),this.filters.unshift({name:"queueLimit",fn:this._queueLimitFilter}),this.filters.unshift({name:"folder",fn:this._folderFilter})}function h(b){var c=a.isElement(b),d=c?b.value:b,e=a.isString(d)?"FakePath":"Object",f="_createFrom"+e;this[f](d)}function i(b,c,d){var e=a.isElement(c),f=e?a.element(c):null,h=e?null:c;a.extend(this,{url:b.url,alias:b.alias,headers:a.copy(b.headers),formData:a.copy(b.formData),removeAfterUpload:b.removeAfterUpload,withCredentials:b.withCredentials,method:b.method},d,{uploader:b,file:new g.FileLikeObject(c),isReady:!1,isUploading:!1,isUploaded:!1,isSuccess:!1,isCancel:!1,isError:!1,progress:0,index:null,_file:h,_input:f}),f&&this._replaceNode(f)}function j(b){a.extend(this,b),this.uploader._directives[this.prop].push(this),this._saveLinks(),this.bind()}function k(a){k.super_.apply(this,arguments),this.uploader.isHTML5||this.element.removeAttr("multiple"),this.element.prop("value",null)}function l(a){l.super_.apply(this,arguments)}function m(a){m.super_.apply(this,arguments)}return g.prototype.isHTML5=!(!e.File||!e.FormData),g.prototype.addToQueue=function(b,c,d){var e=this.isArrayLikeObject(b)?b:[b],f=this._getFilters(d),h=this.queue.length,i=[];a.forEach(e,function(a){var b=new g.FileLikeObject(a);if(this._isValidFile(b,f,c)){var d=new g.FileItem(this,a,c);i.push(d),this.queue.push(d),this._onAfterAddingFile(d)}else{var e=this.filters[this._failFilterIndex];this._onWhenAddingFileFailed(b,e,c)}},this),this.queue.length!==h&&(this._onAfterAddingAll(i),this.progress=this._getTotalProgress()),this._render(),this.autoUpload&&this.uploadAll()},g.prototype.removeFromQueue=function(a){var b=this.getIndexOfItem(a),c=this.queue[b];c.isUploading&&c.cancel(),this.queue.splice(b,1),c._destroy(),this.progress=this._getTotalProgress()},g.prototype.clearQueue=function(){for(;this.queue.length;)this.queue[0].remove();this.progress=0},g.prototype.uploadItem=function(a){var b=this.getIndexOfItem(a),c=this.queue[b],d=this.isHTML5?"_xhrTransport":"_iframeTransport";c._prepareToUploading(),this.isUploading||(this.isUploading=!0,this[d](c))},g.prototype.cancelItem=function(a){var b=this.getIndexOfItem(a),c=this.queue[b],d=this.isHTML5?"_xhr":"_form";c&&c.isUploading&&c[d].abort()},g.prototype.uploadAll=function(){var b=this.getNotUploadedItems().filter(function(a){return!a.isUploading});b.length&&(a.forEach(b,function(a){a._prepareToUploading()}),b[0].upload())},g.prototype.cancelAll=function(){var b=this.getNotUploadedItems();a.forEach(b,function(a){a.cancel()})},g.prototype.isFile=function(a){
var b=e.File;return b&&a instanceof b},g.prototype.isFileLikeObject=function(a){return a instanceof g.FileLikeObject},g.prototype.isArrayLikeObject=function(b){return a.isObject(b)&&"length"in b},g.prototype.getIndexOfItem=function(b){return a.isNumber(b)?b:this.queue.indexOf(b)},g.prototype.getNotUploadedItems=function(){return this.queue.filter(function(a){return!a.isUploaded})},g.prototype.getReadyItems=function(){return this.queue.filter(function(a){return a.isReady&&!a.isUploading}).sort(function(a,b){return a.index-b.index})},g.prototype.destroy=function(){a.forEach(this._directives,function(b){a.forEach(this._directives[b],function(a){a.destroy()},this)},this)},g.prototype.onAfterAddingAll=function(a){},g.prototype.onAfterAddingFile=function(a){},g.prototype.onWhenAddingFileFailed=function(a,b,c){},g.prototype.onBeforeUploadItem=function(a){},g.prototype.onProgressItem=function(a,b){},g.prototype.onProgressAll=function(a){},g.prototype.onSuccessItem=function(a,b,c,d){},g.prototype.onErrorItem=function(a,b,c,d){},g.prototype.onCancelItem=function(a,b,c,d){},g.prototype.onCompleteItem=function(a,b,c,d){},g.prototype.onCompleteAll=function(){},g.prototype._getTotalProgress=function(a){if(this.removeAfterUpload)return a||0;var b=this.getNotUploadedItems().length,c=b?this.queue.length-b:this.queue.length,d=100/this.queue.length,e=(a||0)*d/100;return Math.round(c*d+e)},g.prototype._getFilters=function(b){if(a.isUndefined(b))return this.filters;if(a.isArray(b))return b;var c=b.match(/[^\s,]+/g);return this.filters.filter(function(a){return-1!==c.indexOf(a.name)},this)},g.prototype._render=function(){c.$$phase||c.$apply()},g.prototype._folderFilter=function(a){return!(!a.size&&!a.type)},g.prototype._queueLimitFilter=function(){return this.queue.length<this.queueLimit},g.prototype._isValidFile=function(a,b,c){return this._failFilterIndex=-1,b.length?b.every(function(b){return this._failFilterIndex++,b.fn.call(this,a,c)},this):!0},g.prototype._isSuccessCode=function(a){return a>=200&&300>a||304===a},g.prototype._transformResponse=function(b,c){var e=this._headersGetter(c);return a.forEach(d.defaults.transformResponse,function(a){b=a(b,e)}),b},g.prototype._parseHeaders=function(b){var c,d,e,f={};return b?(a.forEach(b.split("\n"),function(a){e=a.indexOf(":"),c=a.slice(0,e).trim().toLowerCase(),d=a.slice(e+1).trim(),c&&(f[c]=f[c]?f[c]+", "+d:d)}),f):f},g.prototype._headersGetter=function(a){return function(b){return b?a[b.toLowerCase()]||null:a}},g.prototype._xhrTransport=function(b){var c=b._xhr=new XMLHttpRequest,d=new FormData,e=this;e._onBeforeUploadItem(b),a.forEach(b.formData,function(b){a.forEach(b,function(a,b){d.append(b,a)})}),d.append(b.alias,b._file,b.file.name),c.upload.onprogress=function(a){var c=Math.round(a.lengthComputable?100*a.loaded/a.total:0);e._onProgressItem(b,c)},c.onload=function(){var a=e._parseHeaders(c.getAllResponseHeaders()),d=e._transformResponse(c.response,a),f=e._isSuccessCode(c.status)?"Success":"Error",g="_on"+f+"Item";e[g](b,d,c.status,a),e._onCompleteItem(b,d,c.status,a)},c.onerror=function(){var a=e._parseHeaders(c.getAllResponseHeaders()),d=e._transformResponse(c.response,a);e._onErrorItem(b,d,c.status,a),e._onCompleteItem(b,d,c.status,a)},c.onabort=function(){var a=e._parseHeaders(c.getAllResponseHeaders()),d=e._transformResponse(c.response,a);e._onCancelItem(b,d,c.status,a),e._onCompleteItem(b,d,c.status,a)},c.open(b.method,b.url,!0),c.withCredentials=b.withCredentials,a.forEach(b.headers,function(a,b){c.setRequestHeader(b,a)}),c.send(d),this._render()},g.prototype._iframeTransport=function(b){var c=a.element('<form style="display: none;" />'),d=a.element('<iframe name="iframeTransport'+Date.now()+'">'),e=b._input,f=this;b._form&&b._form.replaceWith(e),b._form=c,f._onBeforeUploadItem(b),e.prop("name",b.alias),a.forEach(b.formData,function(b){a.forEach(b,function(b,d){var e=a.element('<input type="hidden" name="'+d+'" />');e.val(b),c.append(e)})}),c.prop({action:b.url,method:"POST",target:d.prop("name"),enctype:"multipart/form-data",encoding:"multipart/form-data"}),d.bind("load",function(){try{var a=d[0].contentDocument.body.innerHTML}catch(c){}var e={response:a,status:200,dummy:!0},g={},h=f._transformResponse(e.response,g);f._onSuccessItem(b,h,e.status,g),f._onCompleteItem(b,h,e.status,g)}),c.abort=function(){var a,g={status:0,dummy:!0},h={};d.unbind("load").prop("src","javascript:false;"),c.replaceWith(e),f._onCancelItem(b,a,g.status,h),f._onCompleteItem(b,a,g.status,h)},e.after(c),c.append(e).append(d),c[0].submit(),this._render()},g.prototype._onWhenAddingFileFailed=function(a,b,c){this.onWhenAddingFileFailed(a,b,c)},g.prototype._onAfterAddingFile=function(a){this.onAfterAddingFile(a)},g.prototype._onAfterAddingAll=function(a){this.onAfterAddingAll(a)},g.prototype._onBeforeUploadItem=function(a){a._onBeforeUpload(),this.onBeforeUploadItem(a)},g.prototype._onProgressItem=function(a,b){var c=this._getTotalProgress(b);this.progress=c,a._onProgress(b),this.onProgressItem(a,b),this.onProgressAll(c),this._render()},g.prototype._onSuccessItem=function(a,b,c,d){a._onSuccess(b,c,d),this.onSuccessItem(a,b,c,d)},g.prototype._onErrorItem=function(a,b,c,d){a._onError(b,c,d),this.onErrorItem(a,b,c,d)},g.prototype._onCancelItem=function(a,b,c,d){a._onCancel(b,c,d),this.onCancelItem(a,b,c,d)},g.prototype._onCompleteItem=function(b,c,d,e){b._onComplete(c,d,e),this.onCompleteItem(b,c,d,e);var f=this.getReadyItems()[0];return this.isUploading=!1,a.isDefined(f)?void f.upload():(this.onCompleteAll(),this.progress=this._getTotalProgress(),void this._render())},g.isFile=g.prototype.isFile,g.isFileLikeObject=g.prototype.isFileLikeObject,g.isArrayLikeObject=g.prototype.isArrayLikeObject,g.isHTML5=g.prototype.isHTML5,g.inherit=function(a,b){a.prototype=Object.create(b.prototype),a.prototype.constructor=a,a.super_=b},g.FileLikeObject=h,g.FileItem=i,g.FileDirective=j,g.FileSelect=k,g.FileDrop=l,g.FileOver=m,h.prototype._createFromFakePath=function(a){this.lastModifiedDate=null,this.size=null,this.type="like/"+a.slice(a.lastIndexOf(".")+1).toLowerCase(),this.name=a.slice(a.lastIndexOf("/")+a.lastIndexOf("\\")+2)},h.prototype._createFromObject=function(b){this.lastModifiedDate=a.copy(b.lastModifiedDate),this.size=b.size,this.type=b.type,this.name=b.name},i.prototype.upload=function(){this.uploader.uploadItem(this)},i.prototype.cancel=function(){this.uploader.cancelItem(this)},i.prototype.remove=function(){this.uploader.removeFromQueue(this)},i.prototype.onBeforeUpload=function(){},i.prototype.onProgress=function(a){},i.prototype.onSuccess=function(a,b,c){},i.prototype.onError=function(a,b,c){},i.prototype.onCancel=function(a,b,c){},i.prototype.onComplete=function(a,b,c){},i.prototype._onBeforeUpload=function(){this.isReady=!0,this.isUploading=!0,this.isUploaded=!1,this.isSuccess=!1,this.isCancel=!1,this.isError=!1,this.progress=0,this.onBeforeUpload()},i.prototype._onProgress=function(a){this.progress=a,this.onProgress(a)},i.prototype._onSuccess=function(a,b,c){this.isReady=!1,this.isUploading=!1,this.isUploaded=!0,this.isSuccess=!0,this.isCancel=!1,this.isError=!1,this.progress=100,this.index=null,this.onSuccess(a,b,c)},i.prototype._onError=function(a,b,c){this.isReady=!1,this.isUploading=!1,this.isUploaded=!0,this.isSuccess=!1,this.isCancel=!1,this.isError=!0,this.progress=0,this.index=null,this.onError(a,b,c)},i.prototype._onCancel=function(a,b,c){this.isReady=!1,this.isUploading=!1,this.isUploaded=!1,this.isSuccess=!1,this.isCancel=!0,this.isError=!1,this.progress=0,this.index=null,this.onCancel(a,b,c)},i.prototype._onComplete=function(a,b,c){this.onComplete(a,b,c),this.removeAfterUpload&&this.remove()},i.prototype._destroy=function(){this._input&&this._input.remove(),this._form&&this._form.remove(),delete this._form,delete this._input},i.prototype._prepareToUploading=function(){this.index=this.index||++this.uploader._nextIndex,this.isReady=!0},i.prototype._replaceNode=function(a){var b=f(a.clone())(a.scope());b.prop("value",null),a.css("display","none"),a.after(b)},j.prototype.events={},j.prototype.bind=function(){for(var a in this.events){var b=this.events[a];this.element.bind(a,this[b])}},j.prototype.unbind=function(){for(var a in this.events)this.element.unbind(a,this.events[a])},j.prototype.destroy=function(){var a=this.uploader._directives[this.prop].indexOf(this);this.uploader._directives[this.prop].splice(a,1),this.unbind()},j.prototype._saveLinks=function(){for(var a in this.events){var b=this.events[a];this[b]=this[b].bind(this)}},g.inherit(k,j),k.prototype.events={$destroy:"destroy",change:"onChange"},k.prototype.prop="select",k.prototype.getOptions=function(){},k.prototype.getFilters=function(){},k.prototype.isEmptyAfterSelection=function(){return!!this.element.attr("multiple")},k.prototype.onChange=function(){var a=this.uploader.isHTML5?this.element[0].files:this.element[0],b=this.getOptions(),c=this.getFilters();this.uploader.isHTML5||this.destroy(),this.uploader.addToQueue(a,b,c),this.isEmptyAfterSelection()&&this.element.prop("value",null)},g.inherit(l,j),l.prototype.events={$destroy:"destroy",drop:"onDrop",dragover:"onDragOver",dragleave:"onDragLeave"},l.prototype.prop="drop",l.prototype.getOptions=function(){},l.prototype.getFilters=function(){},l.prototype.onDrop=function(b){var c=this._getTransfer(b);if(c){var d=this.getOptions(),e=this.getFilters();this._preventAndStop(b),a.forEach(this.uploader._directives.over,this._removeOverClass,this),this.uploader.addToQueue(c.files,d,e)}},l.prototype.onDragOver=function(b){var c=this._getTransfer(b);this._haveFiles(c.types)&&(c.dropEffect="copy",this._preventAndStop(b),a.forEach(this.uploader._directives.over,this._addOverClass,this))},l.prototype.onDragLeave=function(b){b.currentTarget===this.element[0]&&(this._preventAndStop(b),a.forEach(this.uploader._directives.over,this._removeOverClass,this))},l.prototype._getTransfer=function(a){return a.dataTransfer?a.dataTransfer:a.originalEvent.dataTransfer},l.prototype._preventAndStop=function(a){a.preventDefault(),a.stopPropagation()},l.prototype._haveFiles=function(a){return a?a.indexOf?-1!==a.indexOf("Files"):a.contains?a.contains("Files"):!1:!1},l.prototype._addOverClass=function(a){a.addOverClass()},l.prototype._removeOverClass=function(a){a.removeOverClass()},g.inherit(m,j),m.prototype.events={$destroy:"destroy"},m.prototype.prop="over",m.prototype.overClass="nv-file-over",m.prototype.addOverClass=function(){this.element.addClass(this.getOverClass())},m.prototype.removeOverClass=function(){this.element.removeClass(this.getOverClass())},m.prototype.getOverClass=function(){return this.overClass},g}]).directive("nvFileSelect",["$parse","FileUploader",function(a,b){return{link:function(c,d,e){var f=c.$eval(e.uploader);if(!(f instanceof b))throw new TypeError('"Uploader" must be an instance of FileUploader');var g=new b.FileSelect({uploader:f,element:d});g.getOptions=a(e.options).bind(g,c),g.getFilters=function(){return e.filters}}}}]).directive("nvFileDrop",["$parse","FileUploader",function(a,b){return{link:function(c,d,e){var f=c.$eval(e.uploader);if(!(f instanceof b))throw new TypeError('"Uploader" must be an instance of FileUploader');if(f.isHTML5){var g=new b.FileDrop({uploader:f,element:d});g.getOptions=a(e.options).bind(g,c),g.getFilters=function(){return e.filters}}}}}]).directive("nvFileOver",["FileUploader",function(a){return{link:function(b,c,d){var e=b.$eval(d.uploader);if(!(e instanceof a))throw new TypeError('"Uploader" must be an instance of FileUploader');var f=new a.FileOver({uploader:e,element:c});f.getOverClass=function(){return d.overClass||this.overClass}}}}]),b});var define,require,esl;!function(a){function b(a){m(a,N)||(O[a]=1)}function c(a,b){function c(a){0===a.indexOf(".")&&e.push(a)}var e=[];if("string"==typeof a?c(a):G(a,function(a){c(a)}),e.length>0)throw Error("[REQUIRE_FATAL]Relative ID is not allowed in global require: "+e.join(", "));var f=R.waitSeconds;return f&&a instanceof Array&&(I&&clearTimeout(I),I=setTimeout(d,1e3*f)),Q(a,b)}function d(){function a(g,h){if(!f[g]&&!m(g,N)){f[g]=1,m(g,M)||d[g]||(d[g]=1,b.push(g));var i=J[g];i?h&&(d[g]||(d[g]=1,b.push(g)),G(i.depMs,function(b){a(b.absId,b.hard)})):e[g]||(e[g]=1,c.push(g))}}var b=[],c=[],d={},e={},f={};for(var g in O)a(g,1);if(b.length||c.length)throw Error("[MODULE_TIMEOUT]Hang( "+(b.join(", ")||"none")+" ) Miss( "+(c.join(", ")||"none")+" )")}function e(a){G(S,function(b){h(a,b.deps,b.factory)}),S.length=0}function f(a,b,c){if(null==c&&(null==b?(c=a,a=null):(c=b,b=null,a instanceof Array&&(b=a,a=null))),null!=c){var d=window.opera;if(!a&&document.attachEvent&&(!d||"[object Opera]"!=""+d)){var e=D();a=e&&e.getAttribute("data-require-id")}a?h(a,b,c):S[0]={deps:b,factory:c}}}function g(){var a=R.config[this.id];return a&&"object"==typeof a?a:{}}function h(a,b,c){J[a]||(J[a]={id:a,depsDec:b,deps:b||["require","exports","module"],factoryDeps:[],factory:c,exports:{},config:g,state:K,require:y(a),depMs:[],depMkv:{},depRs:[]})}function i(a){var b=J[a];if(b&&!m(a,L)){var c=b.deps,d=b.factory,e=0;"function"==typeof d&&(e=Math.min(d.length,c.length),!b.depsDec&&(""+d).replace(/(\/\*([\s\S]*?)\*\/|([^:]|^)\/\/(.*)$)/gm,"").replace(/require\(\s*(['"'])([^'"]+)\1\s*\)/g,function(a,b,d){c.push(d)}));var f=[],g=[];G(c,function(c,d){var h,i,j=B(c),k=z(j.mod,a);k&&!P[k]?(j.res&&(i={id:c,mod:k,res:j.res},g.push(c),b.depRs.push(i)),h=b.depMkv[k],h||(h={id:j.mod,absId:k,hard:e>d},b.depMs.push(h),b.depMkv[k]=h,f.push(k))):h={absId:k},e>d&&b.factoryDeps.push(i||h)}),b.state=L,l(a),r(f),g.length&&b.require(g,function(){G(b.depRs,function(b){b.absId||(b.absId=z(b.id,a))}),j()})}}function j(){for(var a in O)i(a),k(a),n(a)}function k(a){function b(a){if(i(a),!m(a,L))return!1;if(m(a,M)||c[a])return!0;c[a]=1;var d=J[a],e=!0;return G(d.depMs,function(a){return e=b(a.absId)}),e&&G(d.depRs,function(a){return e=!!a.absId}),e&&(d.state=M),e}var c={};b(a)}function l(b){function c(){if(!d&&e.state===M){d=1;var c=1;if(G(e.factoryDeps,function(a){var b=a.absId;return P[b]?void 0:(n(b),c=m(b,N))}),c){try{var f=e.factory,g="function"==typeof f?f.apply(a,o(e.factoryDeps,{require:e.require,exports:e.exports,module:e})):f;null!=g&&(e.exports=g),e.invokeFactory=null}catch(h){if(/^\[MODULE_MISS\]"([^"]+)/.test(h.message)){var i=e.depMkv[RegExp.$1];return i&&(i.hard=1),void(d=0)}throw h}q(b)}}}var d,e=J[b];e.invokeFactory=c}function m(a,b){return J[a]&&J[a].state>=b}function n(a){var b=J[a];b&&b.invokeFactory&&b.invokeFactory()}function o(a,b){var c=[];return G(a,function(a,d){"object"==typeof a&&(a=a.absId),c[d]=b[a]||J[a].exports}),c}function p(a,b){if(m(a,N))return void b();var c=T[a];c||(c=T[a]=[]),c.push(b)}function q(a){var b=J[a];b.state=N,delete O[a];for(var c=T[a]||[],d=c.length;d--;)c[d]();c.length=0,T[a]=null}function r(b,c,d){function e(){if("function"==typeof c&&!f){var d=1;G(b,function(a){return P[a]?void 0:d=!!m(a,N)}),d&&(f=1,c.apply(a,o(b,P)))}}var f=0;G(b,function(a){P[a]||m(a,N)||(p(a,e),(a.indexOf("!")>0?t:s)(a,d))}),e()}function s(b){function c(){var a=Y[b];E(a||b,d)}function d(){if(g){var c;"function"==typeof g.init&&(c=g.init.apply(a,o(h,P))),null==c&&g.exports&&(c=a,G(g.exports.split("."),function(a){return c=c[a],!!c})),f(b,h,c||{})}else e(b);j()}if(!U[b]&&!J[b]){U[b]=1;var g=R.shim[b];g instanceof Array&&(R.shim[b]=g={deps:g});var h=g&&(g.deps||[]);h?(G(h,function(a){R.shim[a]||(R.shim[a]={})}),Q(h,c)):c()}}function t(a,b){function c(b){i.exports=b||!0,q(a)}function d(d){var e=b?J[b].require:Q;d.load(h.res,e,c,g.call({id:a}))}if(!J[a]){var f=Y[a];if(f)return void s(f);var h=B(a),i={id:a,state:L};J[a]=i,c.fromText=function(a,b){Function(b)(),e(a)},d(Q(h.mod))}}function u(a,b){var c=C(a,1,b);return c.sort(H),c}function v(){function a(a){Y[a]=b}R.baseUrl=R.baseUrl.replace(/\/$/,"")+"/",V=u(R.paths),X=u(R.map,1),G(X,function(a){a.v=u(a.v)}),W=[],G(R.packages,function(a){var b=a;"string"==typeof a&&(b={name:a.split("/")[0],location:a,main:"main"}),b.location=b.location||b.name,b.main=(b.main||"main").replace(/\.js$/i,""),b.reg=F(b.name),W.push(b)}),W.sort(H),Z=u(R.urlArgs,1),Y={};for(var b in R.bundles)G(R.bundles[b],a)}function w(a,b,c){G(b,function(b){return b.reg.test(a)?(c(b.v,b.k,b),!1):void 0})}function x(a){var b=/(\.[a-z0-9]+)$/i,c=/(\?[^#]*)$/,d="",e=a,f="";c.test(a)&&(f=RegExp.$1,a=a.replace(c,"")),b.test(a)&&(d=RegExp.$1,e=a.replace(b,""));var g,h=e;return w(e,V,function(a,b){h=h.replace(b,a),g=1}),g||w(e,W,function(a,b,c){h=h.replace(c.name,c.location)}),/^([a-z]{2,10}:\/)?\//i.test(h)||(h=R.baseUrl+h),h+=d+f,w(e,Z,function(a){h+=(h.indexOf("?")>0?"&":"?")+a}),h}function y(a){function c(c,e){if("string"==typeof c){if(!d[c]){var f=z(c,a);if(n(f),!m(f,N))throw Error('[MODULE_MISS]"'+f+'" is not exists!');d[c]=J[f].exports}return d[c]}if(c instanceof Array){var g=[],h=[];G(c,function(c,d){var e=B(c),f=z(e.mod,a),i=e.res,j=f;if(i){var k=f+"!"+i;0!==i.indexOf(".")&&Y[k]?f=j=k:j=null}h[d]=j,b(f),g.push(f)}),r(g,function(){G(h,function(d,e){null==d&&(d=h[e]=z(c[e],a),b(d))}),r(h,e,a),j()},a),j()}}var d={};return c.toUrl=function(b){return x(z(b,a))},c}function z(a,b){if(!a)return"";b=b||"";var c=B(a);if(!c)return a;var d=c.res,e=A(c.mod,b);if(G(W,function(a){var b=a.name;return b===e?(e=b+"/"+a.main,!1):void 0}),w(b,X,function(a){w(e,a,function(a,b){e=e.replace(b,a)})}),d){var f=m(e,N)&&Q(e);d=f&&f.normalize?f.normalize(d,function(a){return z(a,b)}):z(d,b),e+="!"+d}return e}function A(a,b){if(0===a.indexOf(".")){var c=b.split("/"),d=a.split("/"),e=c.length-1,f=d.length,g=0,h=0;a:for(var i=0;f>i;i++)switch(d[i]){case"..":if(!(e>g))break a;g++,h++;break;case".":h++;break;default:break a}return c.length=e-g,d=d.slice(h),c.concat(d).join("/")}return a}function B(a){var b=a.split("!");return b[0]?{mod:b[0],res:b[1]}:void 0}function C(a,b,c){var d=[];for(var e in a)if(a.hasOwnProperty(e)){var f={k:e,v:a[e]};d.push(f),b&&(f.reg="*"===e&&c?/^/:F(e))}return d}function D(){if($)return $;if(_&&"interactive"===_.readyState)return _;for(var a=document.getElementsByTagName("script"),b=a.length;b--;){var c=a[b];if("interactive"===c.readyState)return _=c,c}}function E(a,b){function c(){var a=d.readyState;(void 0===a||/^(loaded|complete)$/.test(a))&&(d.onload=d.onreadystatechange=null,d=null,b())}var d=document.createElement("script");d.setAttribute("data-require-id",a),d.src=x(a+".js"),d.async=!0,d.readyState?d.onreadystatechange=c:d.onload=c,$=d,ba?aa.insertBefore(d,ba):aa.appendChild(d),$=null}function F(a){return RegExp("^"+a+"(/|$)")}function G(a,b){if(a instanceof Array)for(var c=0,d=a.length;d>c&&b(a[c],c)!==!1;c++);}function H(a,b){var c=a.k||a.name,d=b.k||b.name;return"*"===d?-1:"*"===c?1:d.length-c.length}var I,J={},K=1,L=2,M=3,N=4,O={},P={require:c,exports:1,module:1},Q=y(),R={baseUrl:"./",paths:{},config:{},map:{},packages:[],shim:{},waitSeconds:0,bundles:{},urlArgs:{}};c.version="2.0.2",c.loader="esl",c.toUrl=Q.toUrl;var S=[];f.amd={};var T={},U={};c.config=function(a){if(a){for(var b in R){var c=a[b],d=R[b];if(c)if("urlArgs"===b&&"string"==typeof c)R.urlArgs["*"]=c;else if(d instanceof Array)d.push.apply(d,c);else if("object"==typeof d)for(var e in c)d[e]=c[e];else R[b]=c}v()}},v();var V,W,X,Y,Z,$,_,aa=document.getElementsByTagName("head")[0],ba=document.getElementsByTagName("base")[0];ba&&(aa=ba.parentNode),define||(define=f,require||(require=c),esl=c)}(this),define("echarts",["echarts/echarts"],function(a){return a}),define("echarts/echarts",["require","./config","zrender/tool/util","zrender/tool/event","zrender/tool/env","zrender","zrender/config","./chart/island","./component/toolbox","./component","./component/title","./component/tooltip","./component/legend","./util/ecData","./chart","zrender/tool/color","./component/timeline","zrender/shape/Image","zrender/loadingEffect/Bar","zrender/loadingEffect/Bubble","zrender/loadingEffect/DynamicLine","zrender/loadingEffect/Ring","zrender/loadingEffect/Spin","zrender/loadingEffect/Whirling","./theme/macarons","./theme/infographic"],function(a){function b(){g.Dispatcher.call(this)}function c(a){a.innerHTML="",this._themeConfig={},this.dom=a,this._connected=!1,this._status={dragIn:!1,dragOut:!1,needRefresh:!1},this._curEventType=!1,this._chartList=[],this._messageCenter=new b,this._messageCenterOutSide=new b,this.resize=this.resize(),this._init()}function d(a,b,c,d,e){for(var f=a._chartList,g=f.length;g--;){var h=f[g];"function"==typeof h[b]&&h[b](c,d,e)}}var e=a("./config"),f=a("zrender/tool/util"),g=a("zrender/tool/event"),h={},i=a("zrender/tool/env").canvasSupported,j=new Date-0,k={},l="_echarts_instance_";h.version="2.2.1",h.dependencies={zrender:"2.0.8"},h.init=function(b,d){var e=a("zrender");e.version.replace(".","")-0<h.dependencies.zrender.replace(".","")-0&&console.error("ZRender "+e.version+" is too old for ECharts "+h.version+". Current version need ZRender "+h.dependencies.zrender+"+"),b=b instanceof Array?b[0]:b;var f=b.getAttribute(l);return f||(f=j++,b.setAttribute(l,f)),k[f]&&k[f].dispose(),k[f]=new c(b),k[f].id=f,k[f].canvasSupported=i,k[f].setTheme(d),k[f]},h.getInstanceById=function(a){return k[a]},f.merge(b.prototype,g.Dispatcher.prototype,!0);var m=a("zrender/config").EVENT,n=["CLICK","DBLCLICK","MOUSEOVER","MOUSEOUT","DRAGSTART","DRAGEND","DRAGENTER","DRAGOVER","DRAGLEAVE","DROP"];return c.prototype={_init:function(){var b=this,c=a("zrender").init(this.dom);this._zr=c,this._messageCenter.dispatch=function(a,c,d,e){d=d||{},d.type=a,d.event=c,b._messageCenter.dispatchWithContext(a,d,e),"HOVER"!=a&&"MOUSEOUT"!=a?setTimeout(function(){b._messageCenterOutSide.dispatchWithContext(a,d,e)},50):b._messageCenterOutSide.dispatchWithContext(a,d,e)},this._onevent=function(a){return b.__onevent(a)};for(var d in e.EVENT)"CLICK"!=d&&"DBLCLICK"!=d&&"HOVER"!=d&&"MOUSEOUT"!=d&&"MAP_ROAM"!=d&&this._messageCenter.bind(e.EVENT[d],this._onevent,this);var f={};this._onzrevent=function(a){return b[f[a.type]](a)};for(var g=0,h=n.length;h>g;g++){var i=n[g],j=m[i];f[j]="_on"+i.toLowerCase(),c.on(j,this._onzrevent)}this.chart={},this.component={};var k=a("./chart/island");this._island=new k(this._themeConfig,this._messageCenter,c,{},this),this.chart.island=this._island;var l=a("./component/toolbox");this._toolbox=new l(this._themeConfig,this._messageCenter,c,{},this),this.component.toolbox=this._toolbox;var o=a("./component");o.define("title",a("./component/title")),o.define("tooltip",a("./component/tooltip")),o.define("legend",a("./component/legend")),(0===c.getWidth()||0===c.getHeight())&&console.error("Dom’s width & height should be ready before init.")},__onevent:function(a){a.__echartsId=a.__echartsId||this.id;var b=a.__echartsId===this.id;switch(this._curEventType||(this._curEventType=a.type),a.type){case e.EVENT.LEGEND_SELECTED:this._onlegendSelected(a);break;case e.EVENT.DATA_ZOOM:if(!b){var c=this.component.dataZoom;c&&(c.silence(!0),c.absoluteZoom(a.zoom),c.silence(!1))}this._ondataZoom(a);break;case e.EVENT.DATA_RANGE:b&&this._ondataRange(a);break;case e.EVENT.MAGIC_TYPE_CHANGED:if(!b){var d=this.component.toolbox;d&&(d.silence(!0),d.setMagicType(a.magicType),d.silence(!1))}this._onmagicTypeChanged(a);break;case e.EVENT.DATA_VIEW_CHANGED:b&&this._ondataViewChanged(a);break;case e.EVENT.TOOLTIP_HOVER:b&&this._tooltipHover(a);break;case e.EVENT.RESTORE:this._onrestore();break;case e.EVENT.REFRESH:b&&this._onrefresh(a);break;case e.EVENT.TOOLTIP_IN_GRID:case e.EVENT.TOOLTIP_OUT_GRID:if(b){if(this._connected){var f=this.component.grid;f&&(a.x=(a.event.zrenderX-f.getX())/f.getWidth(),a.y=(a.event.zrenderY-f.getY())/f.getHeight())}}else{var f=this.component.grid;f&&this._zr.trigger("mousemove",{connectTrigger:!0,zrenderX:f.getX()+a.x*f.getWidth(),zrenderY:f.getY()+a.y*f.getHeight()})}}if(this._connected&&b&&this._curEventType===a.type){for(var g in this._connected)this._connected[g].connectedEventHandler(a);this._curEventType=null}(!b||!this._connected&&b)&&(this._curEventType=null)},_onclick:function(a){if(d(this,"onclick",a),a.target){var b=this._eventPackage(a.target);b&&null!=b.seriesIndex&&this._messageCenter.dispatch(e.EVENT.CLICK,a.event,b,this)}},_ondblclick:function(a){if(d(this,"ondblclick",a),a.target){var b=this._eventPackage(a.target);b&&null!=b.seriesIndex&&this._messageCenter.dispatch(e.EVENT.DBLCLICK,a.event,b,this)}},_onmouseover:function(a){if(a.target){var b=this._eventPackage(a.target);b&&null!=b.seriesIndex&&this._messageCenter.dispatch(e.EVENT.HOVER,a.event,b,this)}},_onmouseout:function(a){if(a.target){var b=this._eventPackage(a.target);b&&null!=b.seriesIndex&&this._messageCenter.dispatch(e.EVENT.MOUSEOUT,a.event,b,this)}},_ondragstart:function(a){this._status={dragIn:!1,dragOut:!1,needRefresh:!1},d(this,"ondragstart",a)},_ondragenter:function(a){d(this,"ondragenter",a)},_ondragover:function(a){d(this,"ondragover",a)},_ondragleave:function(a){d(this,"ondragleave",a)},_ondrop:function(a){d(this,"ondrop",a,this._status),this._island.ondrop(a,this._status)},_ondragend:function(a){if(d(this,"ondragend",a,this._status),this._timeline&&this._timeline.ondragend(a,this._status),this._island.ondragend(a,this._status),this._status.needRefresh){this._syncBackupData(this._option);var b=this._messageCenter;b.dispatch(e.EVENT.DATA_CHANGED,a.event,this._eventPackage(a.target),this),b.dispatch(e.EVENT.REFRESH,null,null,this)}},_onlegendSelected:function(a){this._status.needRefresh=!1,d(this,"onlegendSelected",a,this._status),this._status.needRefresh&&this._messageCenter.dispatch(e.EVENT.REFRESH,null,null,this)},_ondataZoom:function(a){this._status.needRefresh=!1,d(this,"ondataZoom",a,this._status),this._status.needRefresh&&this._messageCenter.dispatch(e.EVENT.REFRESH,null,null,this)},_ondataRange:function(a){this._clearEffect(),this._status.needRefresh=!1,d(this,"ondataRange",a,this._status),this._status.needRefresh&&this._zr.refreshNextFrame()},_onmagicTypeChanged:function(){this._clearEffect(),this._render(this._toolbox.getMagicOption())},_ondataViewChanged:function(a){this._syncBackupData(a.option),this._messageCenter.dispatch(e.EVENT.DATA_CHANGED,null,a,this),this._messageCenter.dispatch(e.EVENT.REFRESH,null,null,this)},_tooltipHover:function(a){var b=[];d(this,"ontooltipHover",a,b)},_onrestore:function(){this.restore()},_onrefresh:function(a){this._refreshInside=!0,this.refresh(a),this._refreshInside=!1},_syncBackupData:function(a){this.component.dataZoom&&this.component.dataZoom.syncBackupData(a)},_eventPackage:function(b){if(b){var c=a("./util/ecData"),d=c.get(b,"seriesIndex"),e=c.get(b,"dataIndex");return e=-1!=d&&this.component.dataZoom?this.component.dataZoom.getRealDataIndex(d,e):e,{seriesIndex:d,seriesName:(c.get(b,"series")||{}).name,dataIndex:e,data:c.get(b,"data"),name:c.get(b,"name"),value:c.get(b,"value"),special:c.get(b,"special")}}},_noDataCheck:function(a){for(var b=a.series,c=0,d=b.length;d>c;c++)if(b[c].type==e.CHART_TYPE_MAP||b[c].data&&b[c].data.length>0||b[c].markPoint&&b[c].markPoint.data&&b[c].markPoint.data.length>0||b[c].markLine&&b[c].markLine.data&&b[c].markLine.data.length>0||b[c].nodes&&b[c].nodes.length>0||b[c].links&&b[c].links.length>0||b[c].matrix&&b[c].matrix.length>0||b[c].eventList&&b[c].eventList.length>0)return!1;var f=this._option&&this._option.noDataLoadingOption||this._themeConfig.noDataLoadingOption||e.noDataLoadingOption||{text:this._option&&this._option.noDataText||this._themeConfig.noDataText||e.noDataText,effect:this._option&&this._option.noDataEffect||this._themeConfig.noDataEffect||e.noDataEffect};return this.clear(),this.showLoading(f),!0},_render:function(b){if(this._mergeGlobalConifg(b),!this._noDataCheck(b)){var c=b.backgroundColor;if(c)if(i||-1==c.indexOf("rgba"))this.dom.style.backgroundColor=c;else{var d=c.split(",");this.dom.style.filter="alpha(opacity="+100*d[3].substring(0,d[3].lastIndexOf(")"))+")",d.length=3,d[0]=d[0].replace("a",""),this.dom.style.backgroundColor=d.join(",")+")"}this._zr.clearAnimation(),this._chartList=[];var f=a("./chart"),g=a("./component");(b.xAxis||b.yAxis)&&(b.grid=b.grid||{},b.dataZoom=b.dataZoom||{});for(var h,j,k,l=["title","legend","tooltip","dataRange","roamController","grid","dataZoom","xAxis","yAxis","polar"],m=0,n=l.length;n>m;m++)j=l[m],k=this.component[j],b[j]?(k?k.refresh&&k.refresh(b):(h=g.get(/^[xy]Axis$/.test(j)?"axis":j),k=new h(this._themeConfig,this._messageCenter,this._zr,b,this,j),this.component[j]=k),this._chartList.push(k)):k&&(k.dispose(),this.component[j]=null,delete this.component[j]);for(var o,p,q,r={},m=0,n=b.series.length;n>m;m++)p=b.series[m].type,p?r[p]||(r[p]=!0,o=f.get(p),o?(this.chart[p]?(q=this.chart[p],q.refresh(b)):q=new o(this._themeConfig,this._messageCenter,this._zr,b,this),this._chartList.push(q),this.chart[p]=q):console.error(p+" has not been required.")):console.error("series["+m+"] chart type has not been defined.");for(p in this.chart)p==e.CHART_TYPE_ISLAND||r[p]||(this.chart[p].dispose(),this.chart[p]=null,delete this.chart[p]);this.component.grid&&this.component.grid.refixAxisShape(this.component),this._island.refresh(b),this._toolbox.refresh(b),b.animation&&!b.renderAsImage?this._zr.refresh():this._zr.render();var s="IMG"+this.id,t=document.getElementById(s);b.renderAsImage&&i?(t?t.src=this.getDataURL(b.renderAsImage):(t=this.getImage(b.renderAsImage),t.id=s,t.style.position="absolute",t.style.left=0,t.style.top=0,this.dom.firstChild.appendChild(t)),this.un(),this._zr.un(),this._disposeChartList(),this._zr.clear()):t&&t.parentNode.removeChild(t),t=null,this._option=b}},restore:function(){this._clearEffect(),this._option=f.clone(this._optionRestore),this._disposeChartList(),this._island.clear(),this._toolbox.reset(this._option,!0),this._render(this._option)},refresh:function(a){this._clearEffect(),a=a||{};var b=a.option;!this._refreshInside&&b&&(b=this.getOption(),f.merge(b,a.option,!0),f.merge(this._optionRestore,a.option,!0),this._toolbox.reset(b)),this._island.refresh(b),this._toolbox.refresh(b),this._zr.clearAnimation();for(var c=0,d=this._chartList.length;d>c;c++)this._chartList[c].refresh&&this._chartList[c].refresh(b);this.component.grid&&this.component.grid.refixAxisShape(this.component),this._zr.refresh()},_disposeChartList:function(){this._clearEffect(),this._zr.clearAnimation();for(var a=this._chartList.length;a--;){var b=this._chartList[a];if(b){var c=b.type;this.chart[c]&&delete this.chart[c],this.component[c]&&delete this.component[c],b.dispose&&b.dispose()}}this._chartList=[]},_mergeGlobalConifg:function(b){for(var c=["backgroundColor","calculable","calculableColor","calculableHolderColor","nameConnector","valueConnector","animation","animationThreshold","animationDuration","animationDurationUpdate","animationEasing","addDataAnimation","symbolList","DRAG_ENABLE_TIME"],d=c.length;d--;){var f=c[d];null==b[f]&&(b[f]=null!=this._themeConfig[f]?this._themeConfig[f]:e[f])}var g=b.color;g&&g.length||(g=this._themeConfig.color||e.color),this._zr.getColor=function(b){var c=a("zrender/tool/color");return c.getColor(b,g)},i||(b.animation=!1,b.addDataAnimation=!1)},setOption:function(a,b){return a.timeline?this._setTimelineOption(a):this._setOption(a,b)},_setOption:function(a,b){return this._option=!b&&this._option?f.merge(this.getOption(),f.clone(a),!0):f.clone(a),this._optionRestore=f.clone(this._option),this._option.series&&0!==this._option.series.length?(this.component.dataZoom&&(this._option.dataZoom||this._option.toolbox&&this._option.toolbox.feature&&this._option.toolbox.feature.dataZoom&&this._option.toolbox.feature.dataZoom.show)&&this.component.dataZoom.syncOption(this._option),this._toolbox.reset(this._option),this._render(this._option),this):void this._zr.clear()},getOption:function(){function a(a){var d=c._optionRestore[a];if(d)if(d instanceof Array)for(var e=d.length;e--;)b[a][e].data=f.clone(d[e].data);else b[a].data=f.clone(d.data)}var b=f.clone(this._option),c=this;return a("xAxis"),a("yAxis"),a("series"),b},setSeries:function(a,b){return b?(this._option.series=a,this.setOption(this._option,b)):this.setOption({series:a}),this},getSeries:function(){return this.getOption().series},_setTimelineOption:function(b){
this._timeline&&this._timeline.dispose();var c=a("./component/timeline"),d=new c(this._themeConfig,this._messageCenter,this._zr,b,this);return this._timeline=d,this.component.timeline=this._timeline,this},addData:function(a,b,c,d,g){function h(){if(C._zr){C._zr.clearAnimation();for(var a=0,b=z.length;b>a;a++)z[a].motionlessOnce=j.addDataAnimation&&z[a].addDataAnimation;C._messageCenter.dispatch(e.EVENT.REFRESH,null,{option:j},C)}}for(var i=a instanceof Array?a:[[a,b,c,d,g]],j=this.getOption(),k=this._optionRestore,l=0,m=i.length;m>l;l++){a=i[l][0],b=i[l][1],c=i[l][2],d=i[l][3],g=i[l][4];var n=k.series[a],o=c?"unshift":"push",p=c?"pop":"shift";if(n){var q=n.data,r=j.series[a].data;if(q[o](b),r[o](b),d||(q[p](),b=r[p]()),null!=g){var s,t;if(n.type===e.CHART_TYPE_PIE&&(s=k.legend)&&(t=s.data)){var u=j.legend.data;if(t[o](g),u[o](g),!d){var v=f.indexOf(t,b.name);-1!=v&&t.splice(v,1),v=f.indexOf(u,b.name),-1!=v&&u.splice(v,1)}}else if(null!=k.xAxis&&null!=k.yAxis){var w,x,y=n.xAxisIndex||0;(null==k.xAxis[y].type||"category"===k.xAxis[y].type)&&(w=k.xAxis[y].data,x=j.xAxis[y].data,w[o](g),x[o](g),d||(w[p](),x[p]())),y=n.yAxisIndex||0,"category"===k.yAxis[y].type&&(w=k.yAxis[y].data,x=j.yAxis[y].data,w[o](g),x[o](g),d||(w[p](),x[p]()))}}this._option.series[a].data=j.series[a].data}}this._zr.clearAnimation();for(var z=this._chartList,A=0,B=function(){A--,0===A&&h()},l=0,m=z.length;m>l;l++)j.addDataAnimation&&z[l].addDataAnimation&&(A++,z[l].addDataAnimation(i,B));this.component.dataZoom&&this.component.dataZoom.syncOption(j),this._option=j;var C=this;return j.addDataAnimation||setTimeout(h,0),this},addMarkPoint:function(a,b){return this._addMark(a,b,"markPoint")},addMarkLine:function(a,b){return this._addMark(a,b,"markLine")},_addMark:function(a,b,c){var d,e=this._option.series;if(e&&(d=e[a])){var g=this._optionRestore.series,h=g[a],i=d[c],j=h[c];i=d[c]=i||{data:[]},j=h[c]=j||{data:[]};for(var k in b)"data"===k?(i.data=i.data.concat(b.data),j.data=j.data.concat(b.data)):"object"!=typeof b[k]||null==i[k]?i[k]=j[k]=b[k]:(f.merge(i[k],b[k],!0),f.merge(j[k],b[k],!0));var l=this.chart[d.type];l&&l.addMark(a,b,c)}return this},delMarkPoint:function(a,b){return this._delMark(a,b,"markPoint")},delMarkLine:function(a,b){return this._delMark(a,b,"markLine")},_delMark:function(a,b,c){var d,e,f,g=this._option.series;if(!(g&&(d=g[a])&&(e=d[c])&&(f=e.data)))return this;b=b.split(" > ");for(var h=-1,i=0,j=f.length;j>i;i++){var k=f[i];if(k instanceof Array){if(k[0].name===b[0]&&k[1].name===b[1]){h=i;break}}else if(k.name===b[0]){h=i;break}}if(h>-1){f.splice(h,1),this._optionRestore.series[a][c].data.splice(h,1);var l=this.chart[d.type];l&&l.delMark(a,b.join(" > "),c)}return this},getDom:function(){return this.dom},getZrender:function(){return this._zr},getDataURL:function(a){if(!i)return"";if(0===this._chartList.length){var b="IMG"+this.id,c=document.getElementById(b);if(c)return c.src}var d=this.component.tooltip;switch(d&&d.hideTip(),a){case"jpeg":break;default:a="png"}var e=this._option.backgroundColor;return e&&"rgba(0,0,0,0)"===e.replace(" ","")&&(e="#fff"),this._zr.toDataURL("image/"+a,e)},getImage:function(a){var b=this._optionRestore.title,c=document.createElement("img");return c.src=this.getDataURL(a),c.title=b&&b.text||"ECharts",c},getConnectedDataURL:function(b){if(!this.isConnected())return this.getDataURL(b);var c=this.dom,d={self:{img:this.getDataURL(b),left:c.offsetLeft,top:c.offsetTop,right:c.offsetLeft+c.offsetWidth,bottom:c.offsetTop+c.offsetHeight}},e=d.self.left,f=d.self.top,g=d.self.right,h=d.self.bottom;for(var i in this._connected)c=this._connected[i].getDom(),d[i]={img:this._connected[i].getDataURL(b),left:c.offsetLeft,top:c.offsetTop,right:c.offsetLeft+c.offsetWidth,bottom:c.offsetTop+c.offsetHeight},e=Math.min(e,d[i].left),f=Math.min(f,d[i].top),g=Math.max(g,d[i].right),h=Math.max(h,d[i].bottom);var j=document.createElement("div");j.style.position="absolute",j.style.left="-4000px",j.style.width=g-e+"px",j.style.height=h-f+"px",document.body.appendChild(j);var k=a("zrender").init(j),l=a("zrender/shape/Image");for(var i in d)k.addShape(new l({style:{x:d[i].left-e,y:d[i].top-f,image:d[i].img}}));k.render();var m=this._option.backgroundColor;m&&"rgba(0,0,0,0)"===m.replace(/ /g,"")&&(m="#fff");var n=k.toDataURL("image/png",m);return setTimeout(function(){k.dispose(),j.parentNode.removeChild(j),j=null},100),n},getConnectedImage:function(a){var b=this._optionRestore.title,c=document.createElement("img");return c.src=this.getConnectedDataURL(a),c.title=b&&b.text||"ECharts",c},on:function(a,b){return this._messageCenterOutSide.bind(a,b,this),this},un:function(a,b){return this._messageCenterOutSide.unbind(a,b),this},connect:function(a){if(!a)return this;if(this._connected||(this._connected={}),a instanceof Array)for(var b=0,c=a.length;c>b;b++)this._connected[a[b].id]=a[b];else this._connected[a.id]=a;return this},disConnect:function(a){if(!a||!this._connected)return this;if(a instanceof Array)for(var b=0,c=a.length;c>b;b++)delete this._connected[a[b].id];else delete this._connected[a.id];for(var d in this._connected)return this;return this._connected=!1,this},connectedEventHandler:function(a){a.__echartsId!=this.id&&this._onevent(a)},isConnected:function(){return!!this._connected},showLoading:function(b){var c={bar:a("zrender/loadingEffect/Bar"),bubble:a("zrender/loadingEffect/Bubble"),dynamicLine:a("zrender/loadingEffect/DynamicLine"),ring:a("zrender/loadingEffect/Ring"),spin:a("zrender/loadingEffect/Spin"),whirling:a("zrender/loadingEffect/Whirling")};this._toolbox.hideDataView(),b=b||{};var d=b.textStyle||{};b.textStyle=d;var g=f.merge(f.merge(f.clone(d),this._themeConfig.textStyle),e.textStyle);d.textFont=g.fontStyle+" "+g.fontWeight+" "+g.fontSize+"px "+g.fontFamily,d.text=b.text||this._option&&this._option.loadingText||this._themeConfig.loadingText||e.loadingText,null!=b.x&&(d.x=b.x),null!=b.y&&(d.y=b.y),b.effectOption=b.effectOption||{},b.effectOption.textStyle=d;var h=b.effect;return("string"==typeof h||null==h)&&(h=c[b.effect||this._option&&this._option.loadingEffect||this._themeConfig.loadingEffect||e.loadingEffect]||c.spin),this._zr.showLoading(new h(b.effectOption)),this},hideLoading:function(){return this._zr.hideLoading(),this},setTheme:function(b){if(b){if("string"==typeof b)switch(b){case"macarons":b=a("./theme/macarons");break;case"infographic":b=a("./theme/infographic");break;default:b={}}else b=b||{};this._themeConfig=b}if(!i){var c=this._themeConfig.textStyle;c&&c.fontFamily&&c.fontFamily2&&(c.fontFamily=c.fontFamily2),c=e.textStyle,c.fontFamily=c.fontFamily2}this._timeline&&this._timeline.setTheme(!0),this._optionRestore&&this.restore()},resize:function(){var a=this;return function(){if(a._clearEffect(),a._zr.resize(),a._option&&a._option.renderAsImage&&i)return a._render(a._option),a;a._zr.clearAnimation(),a._island.resize(),a._toolbox.resize(),a._timeline&&a._timeline.resize();for(var b=0,c=a._chartList.length;c>b;b++)a._chartList[b].resize&&a._chartList[b].resize();return a.component.grid&&a.component.grid.refixAxisShape(a.component),a._zr.refresh(),a._messageCenter.dispatch(e.EVENT.RESIZE,null,null,a),a}},_clearEffect:function(){this._zr.modLayer(e.EFFECT_ZLEVEL,{motionBlur:!1}),this._zr.painter.clearLayer(e.EFFECT_ZLEVEL)},clear:function(){return this._disposeChartList(),this._zr.clear(),this._option={},this._optionRestore={},this.dom.style.backgroundColor=null,this},dispose:function(){var a=this.dom.getAttribute(l);a&&delete k[a],this._island.dispose(),this._toolbox.dispose(),this._timeline&&this._timeline.dispose(),this._messageCenter.unbind(),this.clear(),this._zr.dispose(),this._zr=null}},h}),define("echarts/config",[],function(){var a={CHART_TYPE_LINE:"line",CHART_TYPE_BAR:"bar",CHART_TYPE_SCATTER:"scatter",CHART_TYPE_PIE:"pie",CHART_TYPE_RADAR:"radar",CHART_TYPE_MAP:"map",CHART_TYPE_K:"k",CHART_TYPE_ISLAND:"island",CHART_TYPE_FORCE:"force",CHART_TYPE_CHORD:"chord",CHART_TYPE_GAUGE:"gauge",CHART_TYPE_FUNNEL:"funnel",CHART_TYPE_EVENTRIVER:"eventRiver",COMPONENT_TYPE_TITLE:"title",COMPONENT_TYPE_LEGEND:"legend",COMPONENT_TYPE_DATARANGE:"dataRange",COMPONENT_TYPE_DATAVIEW:"dataView",COMPONENT_TYPE_DATAZOOM:"dataZoom",COMPONENT_TYPE_TOOLBOX:"toolbox",COMPONENT_TYPE_TOOLTIP:"tooltip",COMPONENT_TYPE_GRID:"grid",COMPONENT_TYPE_AXIS:"axis",COMPONENT_TYPE_POLAR:"polar",COMPONENT_TYPE_X_AXIS:"xAxis",COMPONENT_TYPE_Y_AXIS:"yAxis",COMPONENT_TYPE_AXIS_CATEGORY:"categoryAxis",COMPONENT_TYPE_AXIS_VALUE:"valueAxis",COMPONENT_TYPE_TIMELINE:"timeline",COMPONENT_TYPE_ROAMCONTROLLER:"roamController",backgroundColor:"rgba(0,0,0,0)",color:["#ff7f50","#87cefa","#da70d6","#32cd32","#6495ed","#ff69b4","#ba55d3","#cd5c5c","#ffa500","#40e0d0","#1e90ff","#ff6347","#7b68ee","#00fa9a","#ffd700","#6699FF","#ff6666","#3cb371","#b8860b","#30e0e0"],markPoint:{clickable:!0,symbol:"pin",symbolSize:10,large:!1,effect:{show:!1,loop:!0,period:15,type:"scale",scaleSize:2,bounceDistance:10},itemStyle:{normal:{borderWidth:2,label:{show:!0,position:"inside"}},emphasis:{label:{show:!0}}}},markLine:{clickable:!0,symbol:["circle","arrow"],symbolSize:[2,4],smoothness:.2,precision:2,effect:{show:!1,loop:!0,period:15,scaleSize:2},bundling:{enable:!1,maxTurningAngle:45},itemStyle:{normal:{borderWidth:1.5,label:{show:!0,position:"end"},lineStyle:{type:"dashed"}},emphasis:{label:{show:!1},lineStyle:{}}}},textStyle:{decoration:"none",fontFamily:"Arial, Verdana, sans-serif",fontFamily2:"微软雅黑",fontSize:12,fontStyle:"normal",fontWeight:"normal"},EVENT:{REFRESH:"refresh",RESTORE:"restore",RESIZE:"resize",CLICK:"click",DBLCLICK:"dblclick",HOVER:"hover",MOUSEOUT:"mouseout",DATA_CHANGED:"dataChanged",DATA_ZOOM:"dataZoom",DATA_RANGE:"dataRange",DATA_RANGE_SELECTED:"dataRangeSelected",DATA_RANGE_HOVERLINK:"dataRangeHoverLink",LEGEND_SELECTED:"legendSelected",LEGEND_HOVERLINK:"legendHoverLink",MAP_SELECTED:"mapSelected",PIE_SELECTED:"pieSelected",MAGIC_TYPE_CHANGED:"magicTypeChanged",DATA_VIEW_CHANGED:"dataViewChanged",TIMELINE_CHANGED:"timelineChanged",MAP_ROAM:"mapRoam",FORCE_LAYOUT_END:"forceLayoutEnd",TOOLTIP_HOVER:"tooltipHover",TOOLTIP_IN_GRID:"tooltipInGrid",TOOLTIP_OUT_GRID:"tooltipOutGrid",ROAMCONTROLLER:"roamController"},DRAG_ENABLE_TIME:120,EFFECT_ZLEVEL:10,symbolList:["circle","rectangle","triangle","diamond","emptyCircle","emptyRectangle","emptyTriangle","emptyDiamond"],loadingEffect:"spin",loadingText:"数据读取中...",noDataEffect:"bubble",noDataText:"暂无数据",calculable:!1,calculableColor:"rgba(255,165,0,0.6)",calculableHolderColor:"#ccc",nameConnector:" & ",valueConnector:": ",animation:!0,addDataAnimation:!0,animationThreshold:2e3,animationDuration:2e3,animationDurationUpdate:500,animationEasing:"ExponentialOut"};return a}),define("zrender/tool/util",["require","../dep/excanvas"],function(a){function b(a){return a&&1===a.nodeType&&"string"==typeof a.nodeName}function c(a){if("object"==typeof a&&null!==a){var d=a;if(a instanceof Array){d=[];for(var e=0,f=a.length;f>e;e++)d[e]=c(a[e])}else if(!q[r.call(a)]&&!b(a)){d={};for(var g in a)a.hasOwnProperty(g)&&(d[g]=c(a[g]))}return d}return a}function d(a,c,d,f){if(c.hasOwnProperty(d)){var g=a[d];"object"!=typeof g||q[r.call(g)]||b(g)?!f&&d in a||(a[d]=c[d]):e(a[d],c[d],f)}}function e(a,b,c){for(var e in b)d(a,b,e,c);return a}function f(){if(!l)if(a("../dep/excanvas"),window.G_vmlCanvasManager){var b=document.createElement("div");b.style.position="absolute",b.style.top="-1000px",document.body.appendChild(b),l=G_vmlCanvasManager.initElement(b).getContext("2d")}else l=document.createElement("canvas").getContext("2d");return l}function g(){return n||(m=document.createElement("canvas"),o=m.width,p=m.height,n=m.getContext("2d")),n}function h(a,b){var c,d=100;a+s>o&&(o=a+s+d,m.width=o,c=!0),b+t>p&&(p=b+t+d,m.height=p,c=!0),-s>a&&(s=Math.ceil(-a/d)*d,o+=s,m.width=o,c=!0),-t>b&&(t=Math.ceil(-b/d)*d,p+=t,m.height=p,c=!0),c&&n.translate(s,t)}function i(){return{x:s,y:t}}function j(a,b){if(a.indexOf)return a.indexOf(b);for(var c=0,d=a.length;d>c;c++)if(a[c]===b)return c;return-1}function k(a,b){function c(){}var d=a.prototype;c.prototype=b.prototype,a.prototype=new c;for(var e in d)a.prototype[e]=d[e];a.constructor=a}var l,m,n,o,p,q={"[object Function]":1,"[object RegExp]":1,"[object Date]":1,"[object Error]":1,"[object CanvasGradient]":1},r=Object.prototype.toString,s=0,t=0;return{inherits:k,clone:c,merge:e,getContext:f,getPixelContext:g,getPixelOffset:i,adjustCanvasSize:h,indexOf:j}}),define("zrender/tool/event",["require","../mixin/Eventful"],function(a){"use strict";function b(a){return void 0!==a.zrenderX&&a.zrenderX||void 0!==a.offsetX&&a.offsetX||void 0!==a.layerX&&a.layerX||void 0!==a.clientX&&a.clientX}function c(a){return void 0!==a.zrenderY&&a.zrenderY||void 0!==a.offsetY&&a.offsetY||void 0!==a.layerY&&a.layerY||void 0!==a.clientY&&a.clientY}function d(a){return void 0!==a.zrenderDelta&&a.zrenderDelta||void 0!==a.wheelDelta&&a.wheelDelta||void 0!==a.detail&&-a.detail}var e=a("../mixin/Eventful"),f="function"==typeof window.addEventListener?function(a){a.preventDefault(),a.stopPropagation(),a.cancelBubble=!0}:function(a){a.returnValue=!1,a.cancelBubble=!0};return{getX:b,getY:c,getDelta:d,stop:f,Dispatcher:e}}),define("zrender/tool/env",[],function(){function a(a){var b=this.os={},c=this.browser={},d=a.match(/Web[kK]it[\/]{0,1}([\d.]+)/),e=a.match(/(Android);?[\s\/]+([\d.]+)?/),f=a.match(/(iPad).*OS\s([\d_]+)/),g=a.match(/(iPod)(.*OS\s([\d_]+))?/),h=!f&&a.match(/(iPhone\sOS)\s([\d_]+)/),i=a.match(/(webOS|hpwOS)[\s\/]([\d.]+)/),j=i&&a.match(/TouchPad/),k=a.match(/Kindle\/([\d.]+)/),l=a.match(/Silk\/([\d._]+)/),m=a.match(/(BlackBerry).*Version\/([\d.]+)/),n=a.match(/(BB10).*Version\/([\d.]+)/),o=a.match(/(RIM\sTablet\sOS)\s([\d.]+)/),p=a.match(/PlayBook/),q=a.match(/Chrome\/([\d.]+)/)||a.match(/CriOS\/([\d.]+)/),r=a.match(/Firefox\/([\d.]+)/),s=a.match(/MSIE ([\d.]+)/),t=d&&a.match(/Mobile\//)&&!q,u=a.match(/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/)&&!q,s=a.match(/MSIE\s([\d.]+)/);return(c.webkit=!!d)&&(c.version=d[1]),e&&(b.android=!0,b.version=e[2]),h&&!g&&(b.ios=b.iphone=!0,b.version=h[2].replace(/_/g,".")),f&&(b.ios=b.ipad=!0,b.version=f[2].replace(/_/g,".")),g&&(b.ios=b.ipod=!0,b.version=g[3]?g[3].replace(/_/g,"."):null),i&&(b.webos=!0,b.version=i[2]),j&&(b.touchpad=!0),m&&(b.blackberry=!0,b.version=m[2]),n&&(b.bb10=!0,b.version=n[2]),o&&(b.rimtabletos=!0,b.version=o[2]),p&&(c.playbook=!0),k&&(b.kindle=!0,b.version=k[1]),l&&(c.silk=!0,c.version=l[1]),!l&&b.android&&a.match(/Kindle Fire/)&&(c.silk=!0),q&&(c.chrome=!0,c.version=q[1]),r&&(c.firefox=!0,c.version=r[1]),s&&(c.ie=!0,c.version=s[1]),t&&(a.match(/Safari/)||b.ios)&&(c.safari=!0),u&&(c.webview=!0),s&&(c.ie=!0,c.version=s[1]),b.tablet=!!(f||p||e&&!a.match(/Mobile/)||r&&a.match(/Tablet/)||s&&!a.match(/Phone/)&&a.match(/Touch/)),b.phone=!(b.tablet||b.ipod||!(e||h||i||m||n||q&&a.match(/Android/)||q&&a.match(/CriOS\/([\d.]+)/)||r&&a.match(/Mobile/)||s&&a.match(/Touch/))),{browser:c,os:b,canvasSupported:document.createElement("canvas").getContext?!0:!1}}return a(navigator.userAgent)}),define("zrender",["zrender/zrender"],function(a){return a}),define("zrender/zrender",["require","./dep/excanvas","./tool/util","./tool/log","./tool/guid","./Handler","./Painter","./Storage","./animation/Animation","./tool/env"],function(a){function b(a){return function(){for(var b=a.animatingElements,c=0,d=b.length;d>c;c++)a.storage.mod(b[c].id);(b.length||a._needsRefreshNextFrame)&&a.refresh()}}a("./dep/excanvas");var c=a("./tool/util"),d=a("./tool/log"),e=a("./tool/guid"),f=a("./Handler"),g=a("./Painter"),h=a("./Storage"),i=a("./animation/Animation"),j={},k={};k.version="2.0.8",k.init=function(a){var b=new l(e(),a);return j[b.id]=b,b},k.dispose=function(a){if(a)a.dispose();else{for(var b in j)j[b].dispose();j={}}return k},k.getInstance=function(a){return j[a]},k.delInstance=function(a){return delete j[a],k};var l=function(c,d){this.id=c,this.env=a("./tool/env"),this.storage=new h,this.painter=new g(d,this.storage),this.handler=new f(d,this.storage,this.painter),this.animatingElements=[],this.animation=new i({stage:{update:b(this)}}),this.animation.start();var e=this;this.painter.refreshNextFrame=function(){e.refreshNextFrame()},this._needsRefreshNextFrame=!1;var e=this,j=this.storage,k=j.delFromMap;j.delFromMap=function(a){var b=j.get(a);e.stopAnimation(b),k.call(j,a)}};return l.prototype.getId=function(){return this.id},l.prototype.addShape=function(a){return this.addElement(a),this},l.prototype.addGroup=function(a){return this.addElement(a),this},l.prototype.delShape=function(a){return this.delElement(a),this},l.prototype.delGroup=function(a){return this.delElement(a),this},l.prototype.modShape=function(a,b){return this.modElement(a,b),this},l.prototype.modGroup=function(a,b){return this.modElement(a,b),this},l.prototype.addElement=function(a){return this.storage.addRoot(a),this._needsRefreshNextFrame=!0,this},l.prototype.delElement=function(a){return this.storage.delRoot(a),this._needsRefreshNextFrame=!0,this},l.prototype.modElement=function(a,b){return this.storage.mod(a,b),this._needsRefreshNextFrame=!0,this},l.prototype.modLayer=function(a,b){return this.painter.modLayer(a,b),this._needsRefreshNextFrame=!0,this},l.prototype.addHoverShape=function(a){return this.storage.addHover(a),this},l.prototype.render=function(a){return this.painter.render(a),this._needsRefreshNextFrame=!1,this},l.prototype.refresh=function(a){return this.painter.refresh(a),this._needsRefreshNextFrame=!1,this},l.prototype.refreshNextFrame=function(){return this._needsRefreshNextFrame=!0,this},l.prototype.refreshHover=function(a){return this.painter.refreshHover(a),this},l.prototype.refreshShapes=function(a,b){return this.painter.refreshShapes(a,b),this},l.prototype.resize=function(){return this.painter.resize(),this},l.prototype.animate=function(a,b,e){if("string"==typeof a&&(a=this.storage.get(a)),a){var f;if(b){for(var g=b.split("."),h=a,i=0,j=g.length;j>i;i++)h&&(h=h[g[i]]);h&&(f=h)}else f=a;if(!f)return void d('Property "'+b+'" is not existed in element '+a.id);var k=this.animatingElements;null==a.__animators&&(a.__animators=[]);var l=a.__animators;0===l.length&&k.push(a);var m=this.animation.animate(f,{loop:e}).done(function(){var b=c.indexOf(a.__animators,m);if(b>=0&&l.splice(b,1),0===l.length){var b=c.indexOf(k,a);k.splice(b,1)}});return l.push(m),m}d("Element not existed")},l.prototype.stopAnimation=function(a){if(a.__animators){for(var b=a.__animators,d=b.length,e=0;d>e;e++)b[e].stop();if(d>0){var f=this.animatingElements,g=c.indexOf(f,a);g>=0&&f.splice(g,1)}b.length=0}return this},l.prototype.clearAnimation=function(){return this.animation.clear(),this.animatingElements.length=0,this},l.prototype.showLoading=function(a){return this.painter.showLoading(a),this},l.prototype.hideLoading=function(){return this.painter.hideLoading(),this},l.prototype.getWidth=function(){return this.painter.getWidth()},l.prototype.getHeight=function(){return this.painter.getHeight()},l.prototype.toDataURL=function(a,b,c){return this.painter.toDataURL(a,b,c)},l.prototype.shapeToImage=function(a,b,c){var d=e();return this.painter.shapeToImage(d,a,b,c)},l.prototype.on=function(a,b,c){return this.handler.on(a,b,c),this},l.prototype.un=function(a,b){return this.handler.un(a,b),this},l.prototype.trigger=function(a,b){return this.handler.trigger(a,b),this},l.prototype.clear=function(){return this.storage.delRoot(),this.painter.clear(),this},l.prototype.dispose=function(){this.animation.stop(),this.clear(),this.storage.dispose(),this.painter.dispose(),this.handler.dispose(),this.animation=this.animatingElements=this.storage=this.painter=this.handler=null,k.delInstance(this.id)},k}),define("zrender/config",[],function(){var a={EVENT:{RESIZE:"resize",CLICK:"click",DBLCLICK:"dblclick",MOUSEWHEEL:"mousewheel",MOUSEMOVE:"mousemove",MOUSEOVER:"mouseover",MOUSEOUT:"mouseout",MOUSEDOWN:"mousedown",MOUSEUP:"mouseup",GLOBALOUT:"globalout",DRAGSTART:"dragstart",DRAGEND:"dragend",DRAGENTER:"dragenter",DRAGOVER:"dragover",DRAGLEAVE:"dragleave",DROP:"drop",touchClickDelay:300},catchBrushException:!1,debugMode:0,devicePixelRatio:Math.max(window.devicePixelRatio||1,1)};return a}),define("echarts/chart/island",["require","./base","zrender/shape/Circle","../config","../util/ecData","zrender/tool/util","zrender/tool/event","zrender/tool/color","../util/accMath","../chart"],function(a){function b(a,b,d,e,g){c.call(this,a,b,d,e,g),this._nameConnector,this._valueConnector,this._zrHeight=this.zr.getHeight(),this._zrWidth=this.zr.getWidth();var i=this;i.shapeHandler.onmousewheel=function(a){var b=a.target,c=a.event,d=h.getDelta(c);d=d>0?-1:1,b.style.r-=d,b.style.r=5>b.style.r?5:b.style.r;var e=f.get(b,"value"),g=e*i.option.island.calculateStep;e=g>1?Math.round(e-g*d):+(e-g*d).toFixed(2);var j=f.get(b,"name");b.style.text=j+":"+e,f.set(b,"value",e),f.set(b,"name",j),i.zr.modShape(b.id),i.zr.refreshNextFrame(),h.stop(c)}}var c=a("./base"),d=a("zrender/shape/Circle"),e=a("../config");e.island={zlevel:0,z:5,r:15,calculateStep:.1};var f=a("../util/ecData"),g=a("zrender/tool/util"),h=a("zrender/tool/event");return b.prototype={type:e.CHART_TYPE_ISLAND,_combine:function(b,c){var d=a("zrender/tool/color"),e=a("../util/accMath"),g=e.accAdd(f.get(b,"value"),f.get(c,"value")),h=f.get(b,"name")+this._nameConnector+f.get(c,"name");b.style.text=h+this._valueConnector+g,f.set(b,"value",g),f.set(b,"name",h),b.style.r=this.option.island.r,b.style.color=d.mix(b.style.color,c.style.color)},refresh:function(a){a&&(a.island=this.reformOption(a.island),this.option=a,this._nameConnector=this.option.nameConnector,this._valueConnector=this.option.valueConnector)},getOption:function(){return this.option},resize:function(){var a=this.zr.getWidth(),b=this.zr.getHeight(),c=a/(this._zrWidth||a),d=b/(this._zrHeight||b);if(1!==c||1!==d){this._zrWidth=a,this._zrHeight=b;for(var e=0,f=this.shapeList.length;f>e;e++)this.zr.modShape(this.shapeList[e].id,{style:{x:Math.round(this.shapeList[e].style.x*c),y:Math.round(this.shapeList[e].style.y*d)}})}},add:function(a){var b=f.get(a,"name"),c=f.get(a,"value"),e=null!=f.get(a,"series")?f.get(a,"series").name:"",g=this.getFont(this.option.island.textStyle),h={zlevel:this.getZlevelBase(),z:this.getZBase(),style:{x:a.style.x,y:a.style.y,r:this.option.island.r,color:a.style.color||a.style.strokeColor,text:b+this._valueConnector+c,textFont:g},draggable:!0,hoverable:!0,onmousewheel:this.shapeHandler.onmousewheel,_type:"island"};"#fff"===h.style.color&&(h.style.color=a.style.strokeColor),this.setCalculable(h),h.dragEnableTime=0,f.pack(h,{name:e},-1,c,-1,b),h=new d(h),this.shapeList.push(h),this.zr.addShape(h)},del:function(a){this.zr.delShape(a.id);for(var b=[],c=0,d=this.shapeList.length;d>c;c++)this.shapeList[c].id!=a.id&&b.push(this.shapeList[c]);this.shapeList=b},ondrop:function(a,b){if(this.isDrop&&a.target){var c=a.target,d=a.dragged;this._combine(c,d),this.zr.modShape(c.id),b.dragIn=!0,this.isDrop=!1}},ondragend:function(a,b){var c=a.target;this.isDragend?b.dragIn&&(this.del(c),b.needRefresh=!0):b.dragIn||(c.style.x=h.getX(a.event),c.style.y=h.getY(a.event),this.add(c),b.needRefresh=!0),this.isDragend=!1}},g.inherits(b,c),a("../chart").define("island",b),b}),define("echarts/component/toolbox",["require","./base","zrender/shape/Line","zrender/shape/Image","zrender/shape/Rectangle","../util/shape/Icon","../config","zrender/tool/util","zrender/config","zrender/tool/event","./dataView","../component"],function(a){function b(a,b,d,e,f){c.call(this,a,b,d,e,f),this.dom=f.dom,this._magicType={},this._magicMap={},this._isSilence=!1,this._iconList,this._iconShapeMap={},this._featureTitle={},this._featureIcon={},this._featureColor={},this._featureOption={},this._enableColor="red",this._disableColor="#ccc",this._markShapeList=[];var g=this;g._onMark=function(a){g.__onMark(a)},g._onMarkUndo=function(a){g.__onMarkUndo(a)},g._onMarkClear=function(a){g.__onMarkClear(a)},g._onDataZoom=function(a){g.__onDataZoom(a)},g._onDataZoomReset=function(a){g.__onDataZoomReset(a)},g._onDataView=function(a){g.__onDataView(a)},g._onRestore=function(a){g.__onRestore(a)},g._onSaveAsImage=function(a){g.__onSaveAsImage(a)},g._onMagicType=function(a){g.__onMagicType(a)},g._onCustomHandler=function(a){g.__onCustomHandler(a)},g._onmousemove=function(a){return g.__onmousemove(a)},g._onmousedown=function(a){return g.__onmousedown(a)},g._onmouseup=function(a){return g.__onmouseup(a)},g._onclick=function(a){return g.__onclick(a)}}var c=a("./base"),d=a("zrender/shape/Line"),e=a("zrender/shape/Image"),f=a("zrender/shape/Rectangle"),g=a("../util/shape/Icon"),h=a("../config");h.toolbox={zlevel:0,z:6,show:!1,orient:"horizontal",x:"right",y:"top",color:["#1e90ff","#22bb22","#4b0082","#d2691e"],disableColor:"#ddd",effectiveColor:"red",backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderWidth:0,padding:5,itemGap:10,itemSize:16,showTitle:!0,feature:{mark:{show:!1,title:{mark:"辅助线开关",markUndo:"删除辅助线",markClear:"清空辅助线"},lineStyle:{width:1,color:"#1e90ff",type:"dashed"}},dataZoom:{show:!1,title:{dataZoom:"区域缩放",dataZoomReset:"区域缩放后退"}},dataView:{show:!1,title:"数据视图",readOnly:!1,lang:["数据视图","关闭","刷新"]},magicType:{show:!1,title:{line:"折线图切换",bar:"柱形图切换",stack:"堆积",tiled:"平铺",force:"力导向布局图切换",chord:"和弦图切换",pie:"饼图切换",funnel:"漏斗图切换"},type:[]},restore:{show:!1,title:"还原"},saveAsImage:{show:!1,title:"保存为图片",type:"png",lang:["点击保存"]}}};var i=a("zrender/tool/util"),j=a("zrender/config"),k=a("zrender/tool/event"),l="stack",m="tiled";return b.prototype={type:h.COMPONENT_TYPE_TOOLBOX,_buildShape:function(){this._iconList=[];var a=this.option.toolbox;this._enableColor=a.effectiveColor,this._disableColor=a.disableColor;var b=a.feature,c=[];for(var d in b)if(b[d].show)switch(d){case"mark":c.push({key:d,name:"mark"}),c.push({key:d,name:"markUndo"}),c.push({key:d,name:"markClear"});break;case"magicType":for(var e=0,f=b[d].type.length;f>e;e++)b[d].title[b[d].type[e]+"Chart"]=b[d].title[b[d].type[e]],b[d].option&&(b[d].option[b[d].type[e]+"Chart"]=b[d].option[b[d].type[e]]),c.push({key:d,name:b[d].type[e]+"Chart"});break;case"dataZoom":c.push({key:d,name:"dataZoom"}),c.push({key:d,name:"dataZoomReset"});break;case"saveAsImage":this.canvasSupported&&c.push({key:d,name:"saveAsImage"});break;default:c.push({key:d,name:d})}if(c.length>0){for(var g,d,e=0,f=c.length;f>e;e++)g=c[e].name,d=c[e].key,this._iconList.push(g),this._featureTitle[g]=b[d].title[g]||b[d].title,b[d].icon&&(this._featureIcon[g]=b[d].icon[g]||b[d].icon),b[d].color&&(this._featureColor[g]=b[d].color[g]||b[d].color),b[d].option&&(this._featureOption[g]=b[d].option[g]||b[d].option);this._itemGroupLocation=this._getItemGroupLocation(),this._buildBackground(),this._buildItem();for(var e=0,f=this.shapeList.length;f>e;e++)this.zr.addShape(this.shapeList[e]);this._iconShapeMap.mark&&(this._iconDisable(this._iconShapeMap.markUndo),this._iconDisable(this._iconShapeMap.markClear)),this._iconShapeMap.dataZoomReset&&0===this._zoomQueue.length&&this._iconDisable(this._iconShapeMap.dataZoomReset)}},_buildItem:function(){var b,c,d,f,h=this.option.toolbox,i=this._iconList.length,j=this._itemGroupLocation.x,k=this._itemGroupLocation.y,l=h.itemSize,m=h.itemGap,n=h.color instanceof Array?h.color:[h.color],o=this.getFont(h.textStyle);"horizontal"===h.orient?(c=.5>this._itemGroupLocation.y/this.zr.getHeight()?"bottom":"top",d=.5>this._itemGroupLocation.x/this.zr.getWidth()?"left":"right",f=.5>this._itemGroupLocation.y/this.zr.getHeight()?"top":"bottom"):c=.5>this._itemGroupLocation.x/this.zr.getWidth()?"right":"left",this._iconShapeMap={};for(var p=this,q=0;i>q;q++){switch(b={type:"icon",zlevel:this.getZlevelBase(),z:this.getZBase(),style:{x:j,y:k,width:l,height:l,iconType:this._iconList[q],lineWidth:1,strokeColor:this._featureColor[this._iconList[q]]||n[q%n.length],brushType:"stroke"},highlightStyle:{lineWidth:1,text:h.showTitle?this._featureTitle[this._iconList[q]]:void 0,textFont:o,textPosition:c,strokeColor:this._featureColor[this._iconList[q]]||n[q%n.length]},hoverable:!0,clickable:!0},this._featureIcon[this._iconList[q]]&&(b.style.image=this._featureIcon[this._iconList[q]].replace(RegExp("^image:\\/\\/"),""),b.style.opacity=.8,b.highlightStyle.opacity=1,b.type="image"),"horizontal"===h.orient&&(0===q&&"left"===d&&(b.highlightStyle.textPosition="specific",b.highlightStyle.textAlign=d,b.highlightStyle.textBaseline=f,b.highlightStyle.textX=j,b.highlightStyle.textY="top"===f?k+l+10:k-10),q===i-1&&"right"===d&&(b.highlightStyle.textPosition="specific",b.highlightStyle.textAlign=d,b.highlightStyle.textBaseline=f,b.highlightStyle.textX=j+l,b.highlightStyle.textY="top"===f?k+l+10:k-10)),this._iconList[q]){case"mark":b.onclick=p._onMark;break;case"markUndo":b.onclick=p._onMarkUndo;break;case"markClear":b.onclick=p._onMarkClear;break;case"dataZoom":b.onclick=p._onDataZoom;break;case"dataZoomReset":b.onclick=p._onDataZoomReset;break;case"dataView":if(!this._dataView){var r=a("./dataView");this._dataView=new r(this.ecTheme,this.messageCenter,this.zr,this.option,this.myChart)}b.onclick=p._onDataView;break;case"restore":b.onclick=p._onRestore;break;case"saveAsImage":b.onclick=p._onSaveAsImage;break;default:this._iconList[q].match("Chart")?(b._name=this._iconList[q].replace("Chart",""),b.onclick=p._onMagicType):b.onclick=p._onCustomHandler}"icon"===b.type?b=new g(b):"image"===b.type&&(b=new e(b)),this.shapeList.push(b),this._iconShapeMap[this._iconList[q]]=b,"horizontal"===h.orient?j+=l+m:k+=l+m}},_buildBackground:function(){var a=this.option.toolbox,b=this.reformCssArray(this.option.toolbox.padding);this.shapeList.push(new f({zlevel:this.getZlevelBase(),z:this.getZBase(),hoverable:!1,style:{x:this._itemGroupLocation.x-b[3],y:this._itemGroupLocation.y-b[0],width:this._itemGroupLocation.width+b[3]+b[1],height:this._itemGroupLocation.height+b[0]+b[2],brushType:0===a.borderWidth?"fill":"both",color:a.backgroundColor,strokeColor:a.borderColor,lineWidth:a.borderWidth}}))},_getItemGroupLocation:function(){var a=this.option.toolbox,b=this.reformCssArray(this.option.toolbox.padding),c=this._iconList.length,d=a.itemGap,e=a.itemSize,f=0,g=0;"horizontal"===a.orient?(f=(e+d)*c-d,g=e):(g=(e+d)*c-d,f=e);var h,i=this.zr.getWidth();switch(a.x){case"center":h=Math.floor((i-f)/2);break;case"left":h=b[3]+a.borderWidth;break;case"right":h=i-f-b[1]-a.borderWidth;break;default:h=a.x-0,h=isNaN(h)?0:h}var j,k=this.zr.getHeight();switch(a.y){case"top":j=b[0]+a.borderWidth;break;case"bottom":j=k-g-b[2]-a.borderWidth;break;case"center":j=Math.floor((k-g)/2);break;default:j=a.y-0,j=isNaN(j)?0:j}return{x:h,y:j,width:f,height:g}},__onmousemove:function(a){this._marking&&(this._markShape.style.xEnd=k.getX(a.event),this._markShape.style.yEnd=k.getY(a.event),this.zr.addHoverShape(this._markShape)),this._zooming&&(this._zoomShape.style.width=k.getX(a.event)-this._zoomShape.style.x,this._zoomShape.style.height=k.getY(a.event)-this._zoomShape.style.y,this.zr.addHoverShape(this._zoomShape),this.dom.style.cursor="crosshair",k.stop(a.event)),this._zoomStart&&"pointer"!=this.dom.style.cursor&&"move"!=this.dom.style.cursor&&(this.dom.style.cursor="crosshair")},__onmousedown:function(a){if(!a.target){this._zooming=!0;var b=k.getX(a.event),c=k.getY(a.event),d=this.option.dataZoom||{};return this._zoomShape=new f({zlevel:this.getZlevelBase(),z:this.getZBase(),style:{x:b,y:c,width:1,height:1,brushType:"both"},highlightStyle:{lineWidth:2,color:d.fillerColor||h.dataZoom.fillerColor,strokeColor:d.handleColor||h.dataZoom.handleColor,brushType:"both"}}),this.zr.addHoverShape(this._zoomShape),!0}},__onmouseup:function(){if(!this._zoomShape||10>Math.abs(this._zoomShape.style.width)||10>Math.abs(this._zoomShape.style.height))return this._zooming=!1,!0;if(this._zooming&&this.component.dataZoom){this._zooming=!1;var a=this.component.dataZoom.rectZoom(this._zoomShape.style);a&&(this._zoomQueue.push({start:a.start,end:a.end,start2:a.start2,end2:a.end2}),this._iconEnable(this._iconShapeMap.dataZoomReset),this.zr.refreshNextFrame())}return!0},__onclick:function(a){if(!a.target)if(this._marking)this._marking=!1,
this._markShapeList.push(this._markShape),this._iconEnable(this._iconShapeMap.markUndo),this._iconEnable(this._iconShapeMap.markClear),this.zr.addShape(this._markShape),this.zr.refreshNextFrame();else if(this._markStart){this._marking=!0;var b=k.getX(a.event),c=k.getY(a.event);this._markShape=new d({zlevel:this.getZlevelBase(),z:this.getZBase(),style:{xStart:b,yStart:c,xEnd:b,yEnd:c,lineWidth:this.query(this.option,"toolbox.feature.mark.lineStyle.width"),strokeColor:this.query(this.option,"toolbox.feature.mark.lineStyle.color"),lineType:this.query(this.option,"toolbox.feature.mark.lineStyle.type")}}),this.zr.addHoverShape(this._markShape)}},__onMark:function(a){var b=a.target;if(this._marking||this._markStart)this._resetMark(),this.zr.refreshNextFrame();else{this._resetZoom(),this.zr.modShape(b.id,{style:{strokeColor:this._enableColor}}),this.zr.refreshNextFrame(),this._markStart=!0;var c=this;setTimeout(function(){c.zr&&c.zr.on(j.EVENT.CLICK,c._onclick)&&c.zr.on(j.EVENT.MOUSEMOVE,c._onmousemove)},10)}return!0},__onMarkUndo:function(){if(this._marking)this._marking=!1;else{var a=this._markShapeList.length;if(a>=1){var b=this._markShapeList[a-1];this.zr.delShape(b.id),this.zr.refreshNextFrame(),this._markShapeList.pop(),1===a&&(this._iconDisable(this._iconShapeMap.markUndo),this._iconDisable(this._iconShapeMap.markClear))}}return!0},__onMarkClear:function(){this._marking&&(this._marking=!1);var a=this._markShapeList.length;if(a>0){for(;a--;)this.zr.delShape(this._markShapeList.pop().id);this._iconDisable(this._iconShapeMap.markUndo),this._iconDisable(this._iconShapeMap.markClear),this.zr.refreshNextFrame()}return!0},__onDataZoom:function(a){var b=a.target;if(this._zooming||this._zoomStart)this._resetZoom(),this.zr.refreshNextFrame(),this.dom.style.cursor="default";else{this._resetMark(),this.zr.modShape(b.id,{style:{strokeColor:this._enableColor}}),this.zr.refreshNextFrame(),this._zoomStart=!0;var c=this;setTimeout(function(){c.zr&&c.zr.on(j.EVENT.MOUSEDOWN,c._onmousedown)&&c.zr.on(j.EVENT.MOUSEUP,c._onmouseup)&&c.zr.on(j.EVENT.MOUSEMOVE,c._onmousemove)},10),this.dom.style.cursor="crosshair"}return!0},__onDataZoomReset:function(){return this._zooming&&(this._zooming=!1),this._zoomQueue.pop(),this._zoomQueue.length>0?this.component.dataZoom.absoluteZoom(this._zoomQueue[this._zoomQueue.length-1]):(this.component.dataZoom.rectZoom(),this._iconDisable(this._iconShapeMap.dataZoomReset),this.zr.refreshNextFrame()),!0},_resetMark:function(){this._marking=!1,this._markStart&&(this._markStart=!1,this._iconShapeMap.mark&&this.zr.modShape(this._iconShapeMap.mark.id,{style:{strokeColor:this._iconShapeMap.mark.highlightStyle.strokeColor}}),this.zr.un(j.EVENT.CLICK,this._onclick),this.zr.un(j.EVENT.MOUSEMOVE,this._onmousemove))},_resetZoom:function(){this._zooming=!1,this._zoomStart&&(this._zoomStart=!1,this._iconShapeMap.dataZoom&&this.zr.modShape(this._iconShapeMap.dataZoom.id,{style:{strokeColor:this._iconShapeMap.dataZoom.highlightStyle.strokeColor}}),this.zr.un(j.EVENT.MOUSEDOWN,this._onmousedown),this.zr.un(j.EVENT.MOUSEUP,this._onmouseup),this.zr.un(j.EVENT.MOUSEMOVE,this._onmousemove))},_iconDisable:function(a){"image"!=a.type?this.zr.modShape(a.id,{hoverable:!1,clickable:!1,style:{strokeColor:this._disableColor}}):this.zr.modShape(a.id,{hoverable:!1,clickable:!1,style:{opacity:.3}})},_iconEnable:function(a){"image"!=a.type?this.zr.modShape(a.id,{hoverable:!0,clickable:!0,style:{strokeColor:a.highlightStyle.strokeColor}}):this.zr.modShape(a.id,{hoverable:!0,clickable:!0,style:{opacity:.8}})},__onDataView:function(){return this._dataView.show(this.option),!0},__onRestore:function(){return this._resetMark(),this._resetZoom(),this.messageCenter.dispatch(h.EVENT.RESTORE,null,null,this.myChart),!0},__onSaveAsImage:function(){var a=this.option.toolbox.feature.saveAsImage,b=a.type||"png";"png"!=b&&"jpeg"!=b&&(b="png");var c;c=this.myChart.isConnected()?this.myChart.getConnectedDataURL(b):this.zr.toDataURL("image/"+b,this.option.backgroundColor&&"rgba(0,0,0,0)"===this.option.backgroundColor.replace(" ","")?"#fff":this.option.backgroundColor);var d=document.createElement("div");d.id="__echarts_download_wrap__",d.style.cssText="position:fixed;z-index:99999;display:block;top:0;left:0;background-color:rgba(33,33,33,0.5);text-align:center;width:100%;height:100%;line-height:"+document.documentElement.clientHeight+"px;";var e=document.createElement("a");e.href=c,e.setAttribute("download",(a.name?a.name:this.option.title&&(this.option.title.text||this.option.title.subtext)?this.option.title.text||this.option.title.subtext:"ECharts")+"."+b),e.innerHTML='<img style="vertical-align:middle" src="'+c+'" title="'+(window.ActiveXObject||"ActiveXObject"in window?"右键->图片另存为":a.lang?a.lang[0]:"点击保存")+'"/>',d.appendChild(e),document.body.appendChild(d),e=null,d=null,setTimeout(function(){var a=document.getElementById("__echarts_download_wrap__");a&&(a.onclick=function(){var a=document.getElementById("__echarts_download_wrap__");a.onclick=null,a.innerHTML="",document.body.removeChild(a),a=null},a=null)},500)},__onMagicType:function(a){this._resetMark();var b=a.target._name;return this._magicType[b]||(this._magicType[b]=!0,b===h.CHART_TYPE_LINE?this._magicType[h.CHART_TYPE_BAR]=!1:b===h.CHART_TYPE_BAR&&(this._magicType[h.CHART_TYPE_LINE]=!1),b===h.CHART_TYPE_PIE?this._magicType[h.CHART_TYPE_FUNNEL]=!1:b===h.CHART_TYPE_FUNNEL&&(this._magicType[h.CHART_TYPE_PIE]=!1),b===h.CHART_TYPE_FORCE?this._magicType[h.CHART_TYPE_CHORD]=!1:b===h.CHART_TYPE_CHORD&&(this._magicType[h.CHART_TYPE_FORCE]=!1),b===l?this._magicType[m]=!1:b===m&&(this._magicType[l]=!1),this.messageCenter.dispatch(h.EVENT.MAGIC_TYPE_CHANGED,a.event,{magicType:this._magicType},this.myChart)),!0},setMagicType:function(a){this._resetMark(),this._magicType=a,!this._isSilence&&this.messageCenter.dispatch(h.EVENT.MAGIC_TYPE_CHANGED,null,{magicType:this._magicType},this.myChart)},__onCustomHandler:function(a){var b=a.target.style.iconType,c=this.option.toolbox.feature[b].onclick;"function"==typeof c&&c.call(this,this.option)},reset:function(a,b){if(b&&this.clear(),this.query(a,"toolbox.show")&&this.query(a,"toolbox.feature.magicType.show")){var c=a.toolbox.feature.magicType.type,d=c.length;for(this._magicMap={};d--;)this._magicMap[c[d]]=!0;d=a.series.length;for(var e,f;d--;)e=a.series[d].type,this._magicMap[e]&&(f=a.xAxis instanceof Array?a.xAxis[a.series[d].xAxisIndex||0]:a.xAxis,f&&"category"===(f.type||"category")&&(f.__boundaryGap=null!=f.boundaryGap?f.boundaryGap:!0),f=a.yAxis instanceof Array?a.yAxis[a.series[d].yAxisIndex||0]:a.yAxis,f&&"category"===f.type&&(f.__boundaryGap=null!=f.boundaryGap?f.boundaryGap:!0),a.series[d].__type=e,a.series[d].__itemStyle=i.clone(a.series[d].itemStyle||{})),(this._magicMap[l]||this._magicMap[m])&&(a.series[d].__stack=a.series[d].stack)}this._magicType=b?{}:this._magicType||{};for(var g in this._magicType)if(this._magicType[g]){this.option=a,this.getMagicOption();break}var h=a.dataZoom;if(h&&h.show){var j=null!=h.start&&h.start>=0&&100>=h.start?h.start:0,k=null!=h.end&&h.end>=0&&100>=h.end?h.end:100;j>k&&(j+=k,k=j-k,j-=k),this._zoomQueue=[{start:j,end:k,start2:0,end2:100}]}else this._zoomQueue=[]},getMagicOption:function(){var a,b;if(this._magicType[h.CHART_TYPE_LINE]||this._magicType[h.CHART_TYPE_BAR]){for(var c=this._magicType[h.CHART_TYPE_LINE]?!1:!0,d=0,e=this.option.series.length;e>d;d++)b=this.option.series[d].type,(b==h.CHART_TYPE_LINE||b==h.CHART_TYPE_BAR)&&(a=this.option.xAxis instanceof Array?this.option.xAxis[this.option.series[d].xAxisIndex||0]:this.option.xAxis,a&&"category"===(a.type||"category")&&(a.boundaryGap=c?!0:a.__boundaryGap),a=this.option.yAxis instanceof Array?this.option.yAxis[this.option.series[d].yAxisIndex||0]:this.option.yAxis,a&&"category"===a.type&&(a.boundaryGap=c?!0:a.__boundaryGap));this._defaultMagic(h.CHART_TYPE_LINE,h.CHART_TYPE_BAR)}if(this._defaultMagic(h.CHART_TYPE_CHORD,h.CHART_TYPE_FORCE),this._defaultMagic(h.CHART_TYPE_PIE,h.CHART_TYPE_FUNNEL),this._magicType[l]||this._magicType[m])for(var d=0,e=this.option.series.length;e>d;d++)this._magicType[l]?(this.option.series[d].stack="_ECHARTS_STACK_KENER_2014_",b=l):this._magicType[m]&&(this.option.series[d].stack=null,b=m),this._featureOption[b+"Chart"]&&i.merge(this.option.series[d],this._featureOption[b+"Chart"]||{},!0);return this.option},_defaultMagic:function(a,b){if(this._magicType[a]||this._magicType[b])for(var c=0,d=this.option.series.length;d>c;c++){var e=this.option.series[c].type;(e==a||e==b)&&(this.option.series[c].type=this._magicType[a]?a:b,this.option.series[c].itemStyle=i.clone(this.option.series[c].__itemStyle),e=this.option.series[c].type,this._featureOption[e+"Chart"]&&i.merge(this.option.series[c],this._featureOption[e+"Chart"]||{},!0))}},silence:function(a){this._isSilence=a},resize:function(){this._resetMark(),this.clear(),this.option&&this.option.toolbox&&this.option.toolbox.show&&this._buildShape(),this._dataView&&this._dataView.resize()},hideDataView:function(){this._dataView&&this._dataView.hide()},clear:function(a){this.zr&&(this.zr.delShape(this.shapeList),this.shapeList=[],a||(this.zr.delShape(this._markShapeList),this._markShapeList=[]))},onbeforDispose:function(){this._dataView&&(this._dataView.dispose(),this._dataView=null),this._markShapeList=null},refresh:function(a){a&&(this._resetMark(),this._resetZoom(),a.toolbox=this.reformOption(a.toolbox),this.option=a,this.clear(!0),a.toolbox.show&&this._buildShape(),this.hideDataView())}},i.inherits(b,c),a("../component").define("toolbox",b),b}),define("echarts/component",[],function(){var a={},b={};return a.define=function(c,d){return b[c]=d,a},a.get=function(a){return b[a]},a}),define("echarts/component/title",["require","./base","zrender/shape/Text","zrender/shape/Rectangle","../config","zrender/tool/util","zrender/tool/area","zrender/tool/color","../component"],function(a){function b(a,b,d,e,f){c.call(this,a,b,d,e,f),this.refresh(e)}var c=a("./base"),d=a("zrender/shape/Text"),e=a("zrender/shape/Rectangle"),f=a("../config");f.title={zlevel:0,z:6,show:!0,text:"",subtext:"",x:"left",y:"top",backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderWidth:0,padding:5,itemGap:5,textStyle:{fontSize:18,fontWeight:"bolder",color:"#333"},subtextStyle:{color:"#aaa"}};var g=a("zrender/tool/util"),h=a("zrender/tool/area"),i=a("zrender/tool/color");return b.prototype={type:f.COMPONENT_TYPE_TITLE,_buildShape:function(){if(this.titleOption.show){this._itemGroupLocation=this._getItemGroupLocation(),this._buildBackground(),this._buildItem();for(var a=0,b=this.shapeList.length;b>a;a++)this.zr.addShape(this.shapeList[a])}},_buildItem:function(){var a=this.titleOption.text,b=this.titleOption.link,c=this.titleOption.target,e=this.titleOption.subtext,f=this.titleOption.sublink,g=this.titleOption.subtarget,h=this.getFont(this.titleOption.textStyle),j=this.getFont(this.titleOption.subtextStyle),k=this._itemGroupLocation.x,l=this._itemGroupLocation.y,m=this._itemGroupLocation.width,n=this._itemGroupLocation.height,o={zlevel:this.getZlevelBase(),z:this.getZBase(),style:{y:l,color:this.titleOption.textStyle.color,text:a,textFont:h,textBaseline:"top"},highlightStyle:{color:i.lift(this.titleOption.textStyle.color,1),brushType:"fill"},hoverable:!1};b&&(o.hoverable=!0,o.clickable=!0,o.onclick=function(){c&&"self"==c?window.location=b:window.open(b)});var p={zlevel:this.getZlevelBase(),z:this.getZBase(),style:{y:l+n,color:this.titleOption.subtextStyle.color,text:e,textFont:j,textBaseline:"bottom"},highlightStyle:{color:i.lift(this.titleOption.subtextStyle.color,1),brushType:"fill"},hoverable:!1};switch(f&&(p.hoverable=!0,p.clickable=!0,p.onclick=function(){g&&"self"==g?window.location=f:window.open(f)}),this.titleOption.x){case"center":o.style.x=p.style.x=k+m/2,o.style.textAlign=p.style.textAlign="center";break;case"left":o.style.x=p.style.x=k,o.style.textAlign=p.style.textAlign="left";break;case"right":o.style.x=p.style.x=k+m,o.style.textAlign=p.style.textAlign="right";break;default:k=this.titleOption.x-0,k=isNaN(k)?0:k,o.style.x=p.style.x=k}this.titleOption.textAlign&&(o.style.textAlign=p.style.textAlign=this.titleOption.textAlign),this.shapeList.push(new d(o)),""!==e&&this.shapeList.push(new d(p))},_buildBackground:function(){var a=this.reformCssArray(this.titleOption.padding);this.shapeList.push(new e({zlevel:this.getZlevelBase(),z:this.getZBase(),hoverable:!1,style:{x:this._itemGroupLocation.x-a[3],y:this._itemGroupLocation.y-a[0],width:this._itemGroupLocation.width+a[3]+a[1],height:this._itemGroupLocation.height+a[0]+a[2],brushType:0===this.titleOption.borderWidth?"fill":"both",color:this.titleOption.backgroundColor,strokeColor:this.titleOption.borderColor,lineWidth:this.titleOption.borderWidth}}))},_getItemGroupLocation:function(){var a,b=this.reformCssArray(this.titleOption.padding),c=this.titleOption.text,d=this.titleOption.subtext,e=this.getFont(this.titleOption.textStyle),f=this.getFont(this.titleOption.subtextStyle),g=Math.max(h.getTextWidth(c,e),h.getTextWidth(d,f)),i=h.getTextHeight(c,e)+(""===d?0:this.titleOption.itemGap+h.getTextHeight(d,f)),j=this.zr.getWidth();switch(this.titleOption.x){case"center":a=Math.floor((j-g)/2);break;case"left":a=b[3]+this.titleOption.borderWidth;break;case"right":a=j-g-b[1]-this.titleOption.borderWidth;break;default:a=this.titleOption.x-0,a=isNaN(a)?0:a}var k,l=this.zr.getHeight();switch(this.titleOption.y){case"top":k=b[0]+this.titleOption.borderWidth;break;case"bottom":k=l-i-b[2]-this.titleOption.borderWidth;break;case"center":k=Math.floor((l-i)/2);break;default:k=this.titleOption.y-0,k=isNaN(k)?0:k}return{x:a,y:k,width:g,height:i}},refresh:function(a){a&&(this.option=a,this.option.title=this.reformOption(this.option.title),this.titleOption=this.option.title,this.titleOption.textStyle=this.getTextStyle(this.titleOption.textStyle),this.titleOption.subtextStyle=this.getTextStyle(this.titleOption.subtextStyle)),this.clear(),this._buildShape()}},g.inherits(b,c),a("../component").define("title",b),b}),define("echarts/component/tooltip",["require","./base","../util/shape/Cross","zrender/shape/Line","zrender/shape/Rectangle","../config","../util/ecData","zrender/config","zrender/tool/event","zrender/tool/area","zrender/tool/color","zrender/tool/util","zrender/shape/Base","../component"],function(a){function b(a,b,f,g,h){c.call(this,a,b,f,g,h),this.dom=h.dom;var i=this;i._onmousemove=function(a){return i.__onmousemove(a)},i._onglobalout=function(a){return i.__onglobalout(a)},this.zr.on(j.EVENT.MOUSEMOVE,i._onmousemove),this.zr.on(j.EVENT.GLOBALOUT,i._onglobalout),i._hide=function(a){return i.__hide(a)},i._tryShow=function(a){return i.__tryShow(a)},i._refixed=function(a){return i.__refixed(a)},i._setContent=function(a,b){return i.__setContent(a,b)},this._tDom=this._tDom||document.createElement("div"),this._tDom.onselectstart=function(){return!1},this._tDom.onmouseover=function(){i._mousein=!0},this._tDom.onmouseout=function(){i._mousein=!1},this._tDom.className="echarts-tooltip",this._tDom.style.position="absolute",this.hasAppend=!1,this._axisLineShape&&this.zr.delShape(this._axisLineShape.id),this._axisLineShape=new e({zlevel:this.getZlevelBase(),z:this.getZBase(),invisible:!0,hoverable:!1}),this.shapeList.push(this._axisLineShape),this.zr.addShape(this._axisLineShape),this._axisShadowShape&&this.zr.delShape(this._axisShadowShape.id),this._axisShadowShape=new e({zlevel:this.getZlevelBase(),z:1,invisible:!0,hoverable:!1}),this.shapeList.push(this._axisShadowShape),this.zr.addShape(this._axisShadowShape),this._axisCrossShape&&this.zr.delShape(this._axisCrossShape.id),this._axisCrossShape=new d({zlevel:this.getZlevelBase(),z:this.getZBase(),invisible:!0,hoverable:!1}),this.shapeList.push(this._axisCrossShape),this.zr.addShape(this._axisCrossShape),this.showing=!1,this.refresh(g)}var c=a("./base"),d=a("../util/shape/Cross"),e=a("zrender/shape/Line"),f=a("zrender/shape/Rectangle"),g=new f({}),h=a("../config");h.tooltip={zlevel:1,z:8,show:!0,showContent:!0,trigger:"item",islandFormatter:"{a} <br/>{b} : {c}",showDelay:20,hideDelay:100,transitionDuration:.4,enterable:!1,backgroundColor:"rgba(0,0,0,0.7)",borderColor:"#333",borderRadius:4,borderWidth:0,padding:5,axisPointer:{type:"line",lineStyle:{color:"#48b",width:2,type:"solid"},crossStyle:{color:"#1e90ff",width:1,type:"dashed"},shadowStyle:{color:"rgba(150,150,150,0.3)",width:"auto",type:"default"}},textStyle:{color:"#fff"}};var i=a("../util/ecData"),j=a("zrender/config"),k=a("zrender/tool/event"),l=a("zrender/tool/area"),m=a("zrender/tool/color"),n=a("zrender/tool/util"),o=a("zrender/shape/Base");return b.prototype={type:h.COMPONENT_TYPE_TOOLTIP,_gCssText:"position:absolute;display:block;border-style:solid;white-space:nowrap;",_style:function(a){if(!a)return"";var b=[];if(a.transitionDuration){var c="left "+a.transitionDuration+"s,top "+a.transitionDuration+"s";b.push("transition:"+c),b.push("-moz-transition:"+c),b.push("-webkit-transition:"+c),b.push("-o-transition:"+c)}a.backgroundColor&&(b.push("background-Color:"+m.toHex(a.backgroundColor)),b.push("filter:alpha(opacity=70)"),b.push("background-Color:"+a.backgroundColor)),null!=a.borderWidth&&b.push("border-width:"+a.borderWidth+"px"),null!=a.borderColor&&b.push("border-color:"+a.borderColor),null!=a.borderRadius&&(b.push("border-radius:"+a.borderRadius+"px"),b.push("-moz-border-radius:"+a.borderRadius+"px"),b.push("-webkit-border-radius:"+a.borderRadius+"px"),b.push("-o-border-radius:"+a.borderRadius+"px"));var d=a.textStyle;d&&(d.color&&b.push("color:"+d.color),d.decoration&&b.push("text-decoration:"+d.decoration),d.align&&b.push("text-align:"+d.align),d.fontFamily&&b.push("font-family:"+d.fontFamily),d.fontSize&&b.push("font-size:"+d.fontSize+"px"),d.fontSize&&b.push("line-height:"+Math.round(3*d.fontSize/2)+"px"),d.fontStyle&&b.push("font-style:"+d.fontStyle),d.fontWeight&&b.push("font-weight:"+d.fontWeight));var e=a.padding;return null!=e&&(e=this.reformCssArray(e),b.push("padding:"+e[0]+"px "+e[1]+"px "+e[2]+"px "+e[3]+"px")),b=b.join(";")+";"},__hide:function(){this._lastDataIndex=-1,this._lastSeriesIndex=-1,this._lastItemTriggerId=-1,this._tDom&&(this._tDom.style.display="none");var a=!1;this._axisLineShape.invisible||(this._axisLineShape.invisible=!0,this.zr.modShape(this._axisLineShape.id),a=!0),this._axisShadowShape.invisible||(this._axisShadowShape.invisible=!0,this.zr.modShape(this._axisShadowShape.id),a=!0),this._axisCrossShape.invisible||(this._axisCrossShape.invisible=!0,this.zr.modShape(this._axisCrossShape.id),a=!0),this._lastTipShape&&this._lastTipShape.tipShape.length>0&&(this.zr.delShape(this._lastTipShape.tipShape),this._lastTipShape=!1,this.shapeList.length=2),a&&this.zr.refreshNextFrame(),this.showing=!1},_show:function(a,b,c,d){var e=this._tDom.offsetHeight,f=this._tDom.offsetWidth;a&&("function"==typeof a&&(a=a([b,c])),a instanceof Array&&(b=a[0],c=a[1])),b+f>this._zrWidth&&(b-=f+40),c+e>this._zrHeight&&(c-=e-20),20>c&&(c=0),this._tDom.style.cssText=this._gCssText+this._defaultCssText+(d?d:"")+"left:"+b+"px;top:"+c+"px;",(10>e||10>f)&&setTimeout(this._refixed,20),this.showing=!0},__refixed:function(){if(this._tDom){var a="",b=this._tDom.offsetHeight,c=this._tDom.offsetWidth;this._tDom.offsetLeft+c>this._zrWidth&&(a+="left:"+(this._zrWidth-c-20)+"px;"),this._tDom.offsetTop+b>this._zrHeight&&(a+="top:"+(this._zrHeight-b-10)+"px;"),""!==a&&(this._tDom.style.cssText+=a)}},__tryShow:function(){var a,b;if(this._curTarget){if("island"===this._curTarget._type&&this.option.tooltip.show)return void this._showItemTrigger();var c=i.get(this._curTarget,"series"),d=i.get(this._curTarget,"data");a=this.deepQuery([d,c,this.option],"tooltip.show"),null!=c&&null!=d&&a?(b=this.deepQuery([d,c,this.option],"tooltip.trigger"),"axis"===b?this._showAxisTrigger(c.xAxisIndex,c.yAxisIndex,i.get(this._curTarget,"dataIndex")):this._showItemTrigger()):(clearTimeout(this._hidingTicket),clearTimeout(this._showingTicket),this._hidingTicket=setTimeout(this._hide,this._hideDelay))}else this._findPolarTrigger()||this._findAxisTrigger()},_findAxisTrigger:function(){if(!this.component.xAxis||!this.component.yAxis)return void(this._hidingTicket=setTimeout(this._hide,this._hideDelay));for(var a,b,c=this.option.series,d=0,e=c.length;e>d;d++)if("axis"===this.deepQuery([c[d],this.option],"tooltip.trigger"))return a=c[d].xAxisIndex||0,b=c[d].yAxisIndex||0,this.component.xAxis.getAxis(a)&&this.component.xAxis.getAxis(a).type===h.COMPONENT_TYPE_AXIS_CATEGORY?void this._showAxisTrigger(a,b,this._getNearestDataIndex("x",this.component.xAxis.getAxis(a))):this.component.yAxis.getAxis(b)&&this.component.yAxis.getAxis(b).type===h.COMPONENT_TYPE_AXIS_CATEGORY?void this._showAxisTrigger(a,b,this._getNearestDataIndex("y",this.component.yAxis.getAxis(b))):void this._showAxisTrigger(a,b,-1);"cross"===this.option.tooltip.axisPointer.type&&this._showAxisTrigger(-1,-1,-1)},_findPolarTrigger:function(){if(!this.component.polar)return!1;var a,b=k.getX(this._event),c=k.getY(this._event),d=this.component.polar.getNearestIndex([b,c]);return d?(a=d.valueIndex,d=d.polarIndex):d=-1,-1!=d?this._showPolarTrigger(d,a):!1},_getNearestDataIndex:function(a,b){var c=-1,d=k.getX(this._event),e=k.getY(this._event);if("x"===a){for(var f,g,h=this.component.grid.getXend(),i=b.getCoordByIndex(c);h>i&&(g=i,d>=i);)f=i,i=b.getCoordByIndex(++c);return 0>=c?c=0:g-d>=d-f?c-=1:null==b.getNameByIndex(c)&&(c-=1),c}for(var j,l,m=this.component.grid.getY(),i=b.getCoordByIndex(c);i>m&&(j=i,i>=e);)l=i,i=b.getCoordByIndex(++c);return 0>=c?c=0:e-j>=l-e?c-=1:null==b.getNameByIndex(c)&&(c-=1),c},_showAxisTrigger:function(a,b,c){if(!this._event.connectTrigger&&this.messageCenter.dispatch(h.EVENT.TOOLTIP_IN_GRID,this._event,null,this.myChart),null==this.component.xAxis||null==this.component.yAxis||null==a||null==b)return clearTimeout(this._hidingTicket),clearTimeout(this._showingTicket),void(this._hidingTicket=setTimeout(this._hide,this._hideDelay));var d,e,f,g,i=this.option.series,j=[],l=[],m="";if("axis"===this.option.tooltip.trigger){if(!this.option.tooltip.show)return;e=this.option.tooltip.formatter,f=this.option.tooltip.position}var n,o,p=-1!=a&&this.component.xAxis.getAxis(a).type===h.COMPONENT_TYPE_AXIS_CATEGORY?"xAxis":-1!=b&&this.component.yAxis.getAxis(b).type===h.COMPONENT_TYPE_AXIS_CATEGORY?"yAxis":!1;if(p){var q="xAxis"==p?a:b;d=this.component[p].getAxis(q);for(var r=0,s=i.length;s>r;r++)this._isSelected(i[r].name)&&i[r][p+"Index"]===q&&"axis"===this.deepQuery([i[r],this.option],"tooltip.trigger")&&(g=this.query(i[r],"tooltip.showContent")||g,e=this.query(i[r],"tooltip.formatter")||e,f=this.query(i[r],"tooltip.position")||f,m+=this._style(this.query(i[r],"tooltip")),null!=i[r].stack&&"xAxis"==p?(j.unshift(i[r]),l.unshift(r)):(j.push(i[r]),l.push(r)));this.messageCenter.dispatch(h.EVENT.TOOLTIP_HOVER,this._event,{seriesIndex:l,dataIndex:c},this.myChart);var t;"xAxis"==p?(n=this.subPixelOptimize(d.getCoordByIndex(c),this._axisLineWidth),o=k.getY(this._event),t=[n,this.component.grid.getY(),n,this.component.grid.getYend()]):(n=k.getX(this._event),o=this.subPixelOptimize(d.getCoordByIndex(c),this._axisLineWidth),t=[this.component.grid.getX(),o,this.component.grid.getXend(),o]),this._styleAxisPointer(j,t[0],t[1],t[2],t[3],d.getGap(),n,o)}else n=k.getX(this._event),o=k.getY(this._event),this._styleAxisPointer(i,this.component.grid.getX(),o,this.component.grid.getXend(),o,0,n,o),c>=0?this._showItemTrigger(!0):(clearTimeout(this._hidingTicket),clearTimeout(this._showingTicket),this._tDom.style.display="none");if(j.length>0){if(this._lastItemTriggerId=-1,this._lastDataIndex!=c||this._lastSeriesIndex!=l[0]){this._lastDataIndex=c,this._lastSeriesIndex=l[0];var u,v;if("function"==typeof e){for(var w=[],r=0,s=j.length;s>r;r++)u=j[r].data[c],v=this.getDataFromOption(u,"-"),w.push({seriesIndex:l[r],seriesName:j[r].name||"",series:j[r],dataIndex:c,data:u,name:d.getNameByIndex(c),value:v,0:j[r].name||"",1:d.getNameByIndex(c),2:v,3:u});this._curTicket="axis:"+c,this._tDom.innerHTML=e.call(this.myChart,w,this._curTicket,this._setContent)}else if("string"==typeof e){this._curTicket=NaN,e=e.replace("{a}","{a0}").replace("{b}","{b0}").replace("{c}","{c0}");for(var r=0,s=j.length;s>r;r++)e=e.replace("{a"+r+"}",this._encodeHTML(j[r].name||"")),e=e.replace("{b"+r+"}",this._encodeHTML(d.getNameByIndex(c))),u=j[r].data[c],u=this.getDataFromOption(u,"-"),e=e.replace("{c"+r+"}",u instanceof Array?u:this.numAddCommas(u));this._tDom.innerHTML=e}else{this._curTicket=NaN,e=this._encodeHTML(d.getNameByIndex(c));for(var r=0,s=j.length;s>r;r++)e+="<br/>"+this._encodeHTML(j[r].name||"")+" : ",u=j[r].data[c],u=this.getDataFromOption(u,"-"),e+=u instanceof Array?u:this.numAddCommas(u);this._tDom.innerHTML=e}}if(g===!1||!this.option.tooltip.showContent)return;this.hasAppend||(this._tDom.style.left=this._zrWidth/2+"px",this._tDom.style.top=this._zrHeight/2+"px",this.dom.firstChild.appendChild(this._tDom),this.hasAppend=!0),this._show(f,n+10,o+10,m)}},_showPolarTrigger:function(a,b){if(null==this.component.polar||null==a||null==b||0>b)return!1;var c,d,e,f=this.option.series,g=[],h=[],i="";if("axis"===this.option.tooltip.trigger){if(!this.option.tooltip.show)return!1;c=this.option.tooltip.formatter,d=this.option.tooltip.position}for(var j=this.option.polar[a].indicator[b].text,l=0,m=f.length;m>l;l++)this._isSelected(f[l].name)&&f[l].polarIndex===a&&"axis"===this.deepQuery([f[l],this.option],"tooltip.trigger")&&(e=this.query(f[l],"tooltip.showContent")||e,c=this.query(f[l],"tooltip.formatter")||c,d=this.query(f[l],"tooltip.position")||d,i+=this._style(this.query(f[l],"tooltip")),g.push(f[l]),h.push(l));if(g.length>0){for(var n,o,p,q=[],l=0,m=g.length;m>l;l++){n=g[l].data;for(var r=0,s=n.length;s>r;r++)o=n[r],this._isSelected(o.name)&&(o=null!=o?o:{name:"",value:{dataIndex:"-"}},p=this.getDataFromOption(o.value[b]),q.push({seriesIndex:h[l],seriesName:g[l].name||"",series:g[l],dataIndex:b,data:o,name:o.name,indicator:j,value:p,0:g[l].name||"",1:o.name,2:p,3:j}))}if(0>=q.length)return;if(this._lastItemTriggerId=-1,this._lastDataIndex!=b||this._lastSeriesIndex!=h[0])if(this._lastDataIndex=b,this._lastSeriesIndex=h[0],"function"==typeof c)this._curTicket="axis:"+b,this._tDom.innerHTML=c.call(this.myChart,q,this._curTicket,this._setContent);else if("string"==typeof c){c=c.replace("{a}","{a0}").replace("{b}","{b0}").replace("{c}","{c0}").replace("{d}","{d0}");for(var l=0,m=q.length;m>l;l++)c=c.replace("{a"+l+"}",this._encodeHTML(q[l].seriesName)),c=c.replace("{b"+l+"}",this._encodeHTML(q[l].name)),c=c.replace("{c"+l+"}",this.numAddCommas(q[l].value)),c=c.replace("{d"+l+"}",this._encodeHTML(q[l].indicator));this._tDom.innerHTML=c}else{c=this._encodeHTML(q[0].name)+"<br/>"+this._encodeHTML(q[0].indicator)+" : "+this.numAddCommas(q[0].value);for(var l=1,m=q.length;m>l;l++)c+="<br/>"+this._encodeHTML(q[l].name)+"<br/>",c+=this._encodeHTML(q[l].indicator)+" : "+this.numAddCommas(q[l].value);this._tDom.innerHTML=c}if(e===!1||!this.option.tooltip.showContent)return;return this.hasAppend||(this._tDom.style.left=this._zrWidth/2+"px",this._tDom.style.top=this._zrHeight/2+"px",this.dom.firstChild.appendChild(this._tDom),this.hasAppend=!0),this._show(d,k.getX(this._event),k.getY(this._event),i),!0}},_showItemTrigger:function(a){if(this._curTarget){var b,c,d,e=i.get(this._curTarget,"series"),f=i.get(this._curTarget,"seriesIndex"),g=i.get(this._curTarget,"data"),j=i.get(this._curTarget,"dataIndex"),l=i.get(this._curTarget,"name"),m=i.get(this._curTarget,"value"),n=i.get(this._curTarget,"special"),o=i.get(this._curTarget,"special2"),p=[g,e,this.option],q="";if("island"!=this._curTarget._type){var r=a?"axis":"item";this.option.tooltip.trigger===r&&(b=this.option.tooltip.formatter,c=this.option.tooltip.position),this.query(e,"tooltip.trigger")===r&&(d=this.query(e,"tooltip.showContent")||d,b=this.query(e,"tooltip.formatter")||b,c=this.query(e,"tooltip.position")||c,q+=this._style(this.query(e,"tooltip"))),d=this.query(g,"tooltip.showContent")||d,b=this.query(g,"tooltip.formatter")||b,c=this.query(g,"tooltip.position")||c,q+=this._style(this.query(g,"tooltip"))}else this._lastItemTriggerId=NaN,d=this.deepQuery(p,"tooltip.showContent"),b=this.deepQuery(p,"tooltip.islandFormatter"),c=this.deepQuery(p,"tooltip.islandPosition");this._lastDataIndex=-1,this._lastSeriesIndex=-1,this._lastItemTriggerId!==this._curTarget.id&&(this._lastItemTriggerId=this._curTarget.id,"function"==typeof b?(this._curTicket=(e.name||"")+":"+j,this._tDom.innerHTML=b.call(this.myChart,{seriesIndex:f,seriesName:e.name||"",series:e,dataIndex:j,data:g,name:l,value:m,percent:n,indicator:n,value2:o,indicator2:o,0:e.name||"",1:l,2:m,3:n,4:o,5:g,6:f,7:j},this._curTicket,this._setContent)):"string"==typeof b?(this._curTicket=NaN,b=b.replace("{a}","{a0}").replace("{b}","{b0}").replace("{c}","{c0}"),b=b.replace("{a0}",this._encodeHTML(e.name||"")).replace("{b0}",this._encodeHTML(l)).replace("{c0}",m instanceof Array?m:this.numAddCommas(m)),b=b.replace("{d}","{d0}").replace("{d0}",n||""),b=b.replace("{e}","{e0}").replace("{e0}",i.get(this._curTarget,"special2")||""),this._tDom.innerHTML=b):(this._curTicket=NaN,this._tDom.innerHTML=e.type===h.CHART_TYPE_RADAR&&n?this._itemFormatter.radar.call(this,e,l,m,n):e.type===h.CHART_TYPE_EVENTRIVER?this._itemFormatter.eventRiver.call(this,e,l,m,g):""+(null!=e.name?this._encodeHTML(e.name)+"<br/>":"")+(""===l?"":this._encodeHTML(l)+" : ")+(m instanceof Array?m:this.numAddCommas(m))));var s=k.getX(this._event),t=k.getY(this._event);this.deepQuery(p,"tooltip.axisPointer.show")&&this.component.grid?this._styleAxisPointer([e],this.component.grid.getX(),t,this.component.grid.getXend(),t,0,s,t):this._hide(),d!==!1&&this.option.tooltip.showContent&&(this.hasAppend||(this._tDom.style.left=this._zrWidth/2+"px",this._tDom.style.top=this._zrHeight/2+"px",this.dom.firstChild.appendChild(this._tDom),this.hasAppend=!0),this._show(c,s+20,t-20,q))}},_itemFormatter:{radar:function(a,b,c,d){var e="";e+=this._encodeHTML(""===b?a.name||"":b),e+=""===e?"":"<br />";for(var f=0;d.length>f;f++)e+=this._encodeHTML(d[f].text)+" : "+this.numAddCommas(c[f])+"<br />";return e},chord:function(a,b,c,d,e){if(null==e)return this._encodeHTML(b)+" ("+this.numAddCommas(c)+")";var f=this._encodeHTML(b),g=this._encodeHTML(d);return""+(null!=a.name?this._encodeHTML(a.name)+"<br/>":"")+f+" -> "+g+" ("+this.numAddCommas(c)+")<br />"+g+" -> "+f+" ("+this.numAddCommas(e)+")"},eventRiver:function(a,b,c,d){var e="";e+=this._encodeHTML(""===a.name?"":a.name+" : "),e+=this._encodeHTML(b),e+=""===e?"":"<br />",d=d.evolution;for(var f=0,g=d.length;g>f;f++)e+='<div style="padding-top:5px;">',d[f].detail&&(d[f].detail.img&&(e+='<img src="'+d[f].detail.img+'" style="float:left;width:40px;height:40px;">'),e+='<div style="margin-left:45px;">'+d[f].time+"<br/>",e+='<a href="'+d[f].detail.link+'" target="_blank">',e+=d[f].detail.text+"</a></div>",e+="</div>");return e}},_styleAxisPointer:function(a,b,c,d,e,f,g,h){if(a.length>0){var i,j,k=this.option.tooltip.axisPointer,l=k.type,m={line:{},cross:{},shadow:{}};for(var n in m)m[n].color=k[n+"Style"].color,m[n].width=k[n+"Style"].width,m[n].type=k[n+"Style"].type;for(var o=0,p=a.length;p>o;o++)i=a[o],j=this.query(i,"tooltip.axisPointer.type"),l=j||l,j&&(m[j].color=this.query(i,"tooltip.axisPointer."+j+"Style.color")||m[j].color,m[j].width=this.query(i,"tooltip.axisPointer."+j+"Style.width")||m[j].width,m[j].type=this.query(i,"tooltip.axisPointer."+j+"Style.type")||m[j].type);if("line"===l){var q=m.line.width,r=b==d;this._axisLineShape.style={xStart:r?this.subPixelOptimize(b,q):b,yStart:r?c:this.subPixelOptimize(c,q),xEnd:r?this.subPixelOptimize(d,q):d,yEnd:r?e:this.subPixelOptimize(e,q),strokeColor:m.line.color,lineWidth:q,lineType:m.line.type},this._axisLineShape.invisible=!1,this.zr.modShape(this._axisLineShape.id)}else if("cross"===l){var s=m.cross.width;this._axisCrossShape.style={brushType:"stroke",rect:this.component.grid.getArea(),x:this.subPixelOptimize(g,s),y:this.subPixelOptimize(h,s),
text:("( "+this.component.xAxis.getAxis(0).getValueFromCoord(g)+" , "+this.component.yAxis.getAxis(0).getValueFromCoord(h)+" )").replace("  , "," ").replace(" ,  "," "),textPosition:"specific",strokeColor:m.cross.color,lineWidth:s,lineType:m.cross.type},this.component.grid.getXend()-g>100?(this._axisCrossShape.style.textAlign="left",this._axisCrossShape.style.textX=g+10):(this._axisCrossShape.style.textAlign="right",this._axisCrossShape.style.textX=g-10),h-this.component.grid.getY()>50?(this._axisCrossShape.style.textBaseline="bottom",this._axisCrossShape.style.textY=h-10):(this._axisCrossShape.style.textBaseline="top",this._axisCrossShape.style.textY=h+10),this._axisCrossShape.invisible=!1,this.zr.modShape(this._axisCrossShape.id)}else"shadow"===l&&((null==m.shadow.width||"auto"===m.shadow.width||isNaN(m.shadow.width))&&(m.shadow.width=f),b===d?2>Math.abs(this.component.grid.getX()-b)?(m.shadow.width/=2,b=d+=m.shadow.width/2):2>Math.abs(this.component.grid.getXend()-b)&&(m.shadow.width/=2,b=d-=m.shadow.width/2):c===e&&(2>Math.abs(this.component.grid.getY()-c)?(m.shadow.width/=2,c=e+=m.shadow.width/2):2>Math.abs(this.component.grid.getYend()-c)&&(m.shadow.width/=2,c=e-=m.shadow.width/2)),this._axisShadowShape.style={xStart:b,yStart:c,xEnd:d,yEnd:e,strokeColor:m.shadow.color,lineWidth:m.shadow.width},this._axisShadowShape.invisible=!1,this.zr.modShape(this._axisShadowShape.id));this.zr.refreshNextFrame()}},__onmousemove:function(a){if(clearTimeout(this._hidingTicket),clearTimeout(this._showingTicket),!this._mousein||!this._enterable){var b=a.target,c=k.getX(a.event),d=k.getY(a.event);if(b){this._curTarget=b,this._event=a.event,this._event.zrenderX=c,this._event.zrenderY=d;var e;if(this._needAxisTrigger&&this.component.polar&&-1!=(e=this.component.polar.isInside([c,d])))for(var f=this.option.series,i=0,j=f.length;j>i;i++)if(f[i].polarIndex===e&&"axis"===this.deepQuery([f[i],this.option],"tooltip.trigger")){this._curTarget=null;break}this._showingTicket=setTimeout(this._tryShow,this._showDelay)}else this._curTarget=!1,this._event=a.event,this._event.zrenderX=c,this._event.zrenderY=d,this._needAxisTrigger&&this.component.grid&&l.isInside(g,this.component.grid.getArea(),c,d)?this._showingTicket=setTimeout(this._tryShow,this._showDelay):this._needAxisTrigger&&this.component.polar&&-1!=this.component.polar.isInside([c,d])?this._showingTicket=setTimeout(this._tryShow,this._showDelay):(!this._event.connectTrigger&&this.messageCenter.dispatch(h.EVENT.TOOLTIP_OUT_GRID,this._event,null,this.myChart),this._hidingTicket=setTimeout(this._hide,this._hideDelay))}},__onglobalout:function(){clearTimeout(this._hidingTicket),clearTimeout(this._showingTicket),this._hidingTicket=setTimeout(this._hide,this._hideDelay)},__setContent:function(a,b){this._tDom&&(a===this._curTicket&&(this._tDom.innerHTML=b),setTimeout(this._refixed,20))},ontooltipHover:function(a,b){if(!this._lastTipShape||this._lastTipShape&&this._lastTipShape.dataIndex!=a.dataIndex){this._lastTipShape&&this._lastTipShape.tipShape.length>0&&(this.zr.delShape(this._lastTipShape.tipShape),this.shapeList.length=2);for(var c=0,d=b.length;d>c;c++)b[c].zlevel=this.getZlevelBase(),b[c].z=this.getZBase(),b[c].style=o.prototype.getHighlightStyle(b[c].style,b[c].highlightStyle),b[c].draggable=!1,b[c].hoverable=!1,b[c].clickable=!1,b[c].ondragend=null,b[c].ondragover=null,b[c].ondrop=null,this.shapeList.push(b[c]),this.zr.addShape(b[c]);this._lastTipShape={dataIndex:a.dataIndex,tipShape:b}}},ondragend:function(){this._hide()},onlegendSelected:function(a){this._selectedMap=a.selected},_setSelectedMap:function(){this._selectedMap=this.component.legend?n.clone(this.component.legend.getSelectedMap()):{}},_isSelected:function(a){return null!=this._selectedMap[a]?this._selectedMap[a]:!0},showTip:function(a){if(a){var b,c=this.option.series;if(null!=a.seriesIndex)b=a.seriesIndex;else for(var d=a.seriesName,e=0,f=c.length;f>e;e++)if(c[e].name===d){b=e;break}var g=c[b];if(null!=g){var k=this.myChart.chart[g.type],l="axis"===this.deepQuery([g,this.option],"tooltip.trigger");if(k)if(l){var m=a.dataIndex;switch(k.type){case h.CHART_TYPE_LINE:case h.CHART_TYPE_BAR:case h.CHART_TYPE_K:if(null==this.component.xAxis||null==this.component.yAxis||m>=g.data.length)return;var n=g.xAxisIndex||0,o=g.yAxisIndex||0;this._event=this.component.xAxis.getAxis(n).type===h.COMPONENT_TYPE_AXIS_CATEGORY?{zrenderX:this.component.xAxis.getAxis(n).getCoordByIndex(m),zrenderY:this.component.grid.getY()+(this.component.grid.getYend()-this.component.grid.getY())/4}:{zrenderX:this.component.grid.getX()+(this.component.grid.getXend()-this.component.grid.getX())/4,zrenderY:this.component.yAxis.getAxis(o).getCoordByIndex(m)},this._showAxisTrigger(n,o,m);break;case h.CHART_TYPE_RADAR:if(null==this.component.polar||m>=g.data[0].value.length)return;var p=g.polarIndex||0,q=this.component.polar.getVector(p,m,"max");this._event={zrenderX:q[0],zrenderY:q[1]},this._showPolarTrigger(p,m)}}else{var r,s,t=k.shapeList;switch(k.type){case h.CHART_TYPE_LINE:case h.CHART_TYPE_BAR:case h.CHART_TYPE_K:case h.CHART_TYPE_SCATTER:for(var m=a.dataIndex,e=0,f=t.length;f>e;e++)if(null==t[e]._mark&&i.get(t[e],"seriesIndex")==b&&i.get(t[e],"dataIndex")==m){this._curTarget=t[e],r=t[e].style.x,s=k.type!=h.CHART_TYPE_K?t[e].style.y:t[e].style.y[0];break}break;case h.CHART_TYPE_RADAR:for(var m=a.dataIndex,e=0,f=t.length;f>e;e++)if("polygon"===t[e].type&&i.get(t[e],"seriesIndex")==b&&i.get(t[e],"dataIndex")==m){this._curTarget=t[e];var q=this.component.polar.getCenter(g.polarIndex||0);r=q[0],s=q[1];break}break;case h.CHART_TYPE_PIE:for(var u=a.name,e=0,f=t.length;f>e;e++)if("sector"===t[e].type&&i.get(t[e],"seriesIndex")==b&&i.get(t[e],"name")==u){this._curTarget=t[e];var v=this._curTarget.style,w=(v.startAngle+v.endAngle)/2*Math.PI/180;r=this._curTarget.style.x+Math.cos(w)*v.r/1.5,s=this._curTarget.style.y-Math.sin(w)*v.r/1.5;break}break;case h.CHART_TYPE_MAP:for(var u=a.name,x=g.mapType,e=0,f=t.length;f>e;e++)if("text"===t[e].type&&t[e]._mapType===x&&t[e].style._name===u){this._curTarget=t[e],r=this._curTarget.style.x+this._curTarget.position[0],s=this._curTarget.style.y+this._curTarget.position[1];break}break;case h.CHART_TYPE_CHORD:for(var u=a.name,e=0,f=t.length;f>e;e++)if("sector"===t[e].type&&i.get(t[e],"name")==u){this._curTarget=t[e];var v=this._curTarget.style,w=(v.startAngle+v.endAngle)/2*Math.PI/180;return r=this._curTarget.style.x+Math.cos(w)*(v.r-2),s=this._curTarget.style.y-Math.sin(w)*(v.r-2),void this.zr.trigger(j.EVENT.MOUSEMOVE,{zrenderX:r,zrenderY:s})}break;case h.CHART_TYPE_FORCE:for(var u=a.name,e=0,f=t.length;f>e;e++)if("circle"===t[e].type&&i.get(t[e],"name")==u){this._curTarget=t[e],r=this._curTarget.position[0],s=this._curTarget.position[1];break}}null!=r&&null!=s&&(this._event={zrenderX:r,zrenderY:s},this.zr.addHoverShape(this._curTarget),this.zr.refreshHover(),this._showItemTrigger())}}}},hideTip:function(){this._hide()},refresh:function(a){if(this._zrHeight=this.zr.getHeight(),this._zrWidth=this.zr.getWidth(),this._lastTipShape&&this._lastTipShape.tipShape.length>0&&this.zr.delShape(this._lastTipShape.tipShape),this._lastTipShape=!1,this.shapeList.length=2,this._lastDataIndex=-1,this._lastSeriesIndex=-1,this._lastItemTriggerId=-1,a){this.option=a,this.option.tooltip=this.reformOption(this.option.tooltip),this.option.tooltip.textStyle=n.merge(this.option.tooltip.textStyle,this.ecTheme.textStyle),this._needAxisTrigger=!1,"axis"===this.option.tooltip.trigger&&(this._needAxisTrigger=!0);for(var b=this.option.series,c=0,d=b.length;d>c;c++)if("axis"===this.query(b[c],"tooltip.trigger")){this._needAxisTrigger=!0;break}this._showDelay=this.option.tooltip.showDelay,this._hideDelay=this.option.tooltip.hideDelay,this._defaultCssText=this._style(this.option.tooltip),this._setSelectedMap(),this._axisLineWidth=this.option.tooltip.axisPointer.lineStyle.width,this._enterable=this.option.tooltip.enterable}if(this.showing){var e=this;setTimeout(function(){e.zr.trigger(j.EVENT.MOUSEMOVE,e.zr.handler._event)},50)}},onbeforDispose:function(){this._lastTipShape&&this._lastTipShape.tipShape.length>0&&this.zr.delShape(this._lastTipShape.tipShape),clearTimeout(this._hidingTicket),clearTimeout(this._showingTicket),this.zr.un(j.EVENT.MOUSEMOVE,this._onmousemove),this.zr.un(j.EVENT.GLOBALOUT,this._onglobalout),this.hasAppend&&this.dom.firstChild&&this.dom.firstChild.removeChild(this._tDom),this._tDom=null},_encodeHTML:function(a){return(a+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}},n.inherits(b,c),a("../component").define("tooltip",b),b}),define("echarts/component/legend",["require","./base","zrender/shape/Text","zrender/shape/Rectangle","zrender/shape/Sector","../util/shape/Icon","../util/shape/Candle","../config","zrender/tool/util","zrender/tool/area","../component"],function(a){function b(a,b,d,e,f){if(!this.query(e,"legend.data"))return void console.error("option.legend.data has not been defined.");c.call(this,a,b,d,e,f);var g=this;g._legendSelected=function(a){g.__legendSelected(a)},g._dispatchHoverLink=function(a){return g.__dispatchHoverLink(a)},this._colorIndex=0,this._colorMap={},this._selectedMap={},this._hasDataMap={},this.refresh(e)}var c=a("./base"),d=a("zrender/shape/Text"),e=a("zrender/shape/Rectangle"),f=a("zrender/shape/Sector"),g=a("../util/shape/Icon"),h=a("../util/shape/Candle"),i=a("../config");i.legend={zlevel:0,z:4,show:!0,orient:"horizontal",x:"center",y:"top",backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderWidth:0,padding:5,itemGap:10,itemWidth:20,itemHeight:14,textStyle:{color:"#333"},selectedMode:!0};var j=a("zrender/tool/util"),k=a("zrender/tool/area");b.prototype={type:i.COMPONENT_TYPE_LEGEND,_buildShape:function(){if(this.legendOption.show){this._itemGroupLocation=this._getItemGroupLocation(),this._buildBackground(),this._buildItem();for(var a=0,b=this.shapeList.length;b>a;a++)this.zr.addShape(this.shapeList[a])}},_buildItem:function(){var a,b,c,e,f,h,i,l,m=this.legendOption.data,n=m.length,o=this.legendOption.textStyle,p=this.zr.getWidth(),q=this.zr.getHeight(),r=this._itemGroupLocation.x,s=this._itemGroupLocation.y,t=this.legendOption.itemWidth,u=this.legendOption.itemHeight,v=this.legendOption.itemGap;"vertical"===this.legendOption.orient&&"right"===this.legendOption.x&&(r=this._itemGroupLocation.x+this._itemGroupLocation.width-t);for(var w=0;n>w;w++)f=j.merge(m[w].textStyle||{},o),h=this.getFont(f),a=this._getName(m[w]),i=this._getFormatterName(a),""!==a?(b=m[w].icon||this._getSomethingByName(a).type,l=this.getColor(a),"horizontal"===this.legendOption.orient?200>p-r&&t+5+k.getTextWidth(i,h)+(w===n-1||""===m[w+1]?0:v)>=p-r&&(r=this._itemGroupLocation.x,s+=u+v):200>q-s&&u+(w===n-1||""===m[w+1]?0:v)>=q-s&&("right"===this.legendOption.x?r-=this._itemGroupLocation.maxWidth+v:r+=this._itemGroupLocation.maxWidth+v,s=this._itemGroupLocation.y),c=this._getItemShapeByType(r,s,t,u,this._selectedMap[a]&&this._hasDataMap[a]?l:"#ccc",b,l),c._name=a,c=new g(c),e={zlevel:this.getZlevelBase(),z:this.getZBase(),style:{x:r+t+5,y:s+u/2,color:this._selectedMap[a]?"auto"===f.color?l:f.color:"#ccc",text:i,textFont:h,textBaseline:"middle"},highlightStyle:{color:l,brushType:"fill"},hoverable:!!this.legendOption.selectedMode,clickable:!!this.legendOption.selectedMode},"vertical"===this.legendOption.orient&&"right"===this.legendOption.x&&(e.style.x-=t+10,e.style.textAlign="right"),e._name=a,e=new d(e),this.legendOption.selectedMode&&(c.onclick=e.onclick=this._legendSelected,c.onmouseover=e.onmouseover=this._dispatchHoverLink,c.hoverConnect=e.id,e.hoverConnect=c.id),this.shapeList.push(c),this.shapeList.push(e),"horizontal"===this.legendOption.orient?r+=t+5+k.getTextWidth(i,h)+v:s+=u+v):"horizontal"===this.legendOption.orient?(r=this._itemGroupLocation.x,s+=u+v):("right"===this.legendOption.x?r-=this._itemGroupLocation.maxWidth+v:r+=this._itemGroupLocation.maxWidth+v,s=this._itemGroupLocation.y);"horizontal"===this.legendOption.orient&&"center"===this.legendOption.x&&s!=this._itemGroupLocation.y&&this._mLineOptimize()},_getName:function(a){return void 0!==a.name?a.name:a},_getFormatterName:function(a){var b,c=this.legendOption.formatter;return b="function"==typeof c?c.call(this.myChart,a):"string"==typeof c?c.replace("{name}",a):a},_getFormatterNameFromData:function(a){var b=this._getName(a);return this._getFormatterName(b)},_mLineOptimize:function(){for(var a=[],b=this._itemGroupLocation.x,c=2,d=this.shapeList.length;d>c;c++)this.shapeList[c].style.x===b?a.push((this._itemGroupLocation.width-(this.shapeList[c-1].style.x+k.getTextWidth(this.shapeList[c-1].style.text,this.shapeList[c-1].style.textFont)-b))/2):c===d-1&&a.push((this._itemGroupLocation.width-(this.shapeList[c].style.x+k.getTextWidth(this.shapeList[c].style.text,this.shapeList[c].style.textFont)-b))/2);for(var e=-1,c=1,d=this.shapeList.length;d>c;c++)this.shapeList[c].style.x===b&&e++,0!==a[e]&&(this.shapeList[c].style.x+=a[e])},_buildBackground:function(){var a=this.reformCssArray(this.legendOption.padding);this.shapeList.push(new e({zlevel:this.getZlevelBase(),z:this.getZBase(),hoverable:!1,style:{x:this._itemGroupLocation.x-a[3],y:this._itemGroupLocation.y-a[0],width:this._itemGroupLocation.width+a[3]+a[1],height:this._itemGroupLocation.height+a[0]+a[2],brushType:0===this.legendOption.borderWidth?"fill":"both",color:this.legendOption.backgroundColor,strokeColor:this.legendOption.borderColor,lineWidth:this.legendOption.borderWidth}}))},_getItemGroupLocation:function(){var a=this.legendOption.data,b=a.length,c=this.legendOption.itemGap,d=this.legendOption.itemWidth+5,e=this.legendOption.itemHeight,f=this.legendOption.textStyle,g=this.getFont(f),h=0,i=0,l=this.reformCssArray(this.legendOption.padding),m=this.zr.getWidth()-l[1]-l[3],n=this.zr.getHeight()-l[0]-l[2],o=0,p=0;if("horizontal"===this.legendOption.orient){i=e;for(var q=0;b>q;q++)if(""!==this._getName(a[q])){var r=k.getTextWidth(this._getFormatterNameFromData(a[q]),a[q].textStyle?this.getFont(j.merge(a[q].textStyle||{},f)):g);o+d+r+c>m?(o-=c,h=Math.max(h,o),i+=e+c,o=0):(o+=d+r+c,h=Math.max(h,o-c))}else o-=c,h=Math.max(h,o),i+=e+c,o=0}else{for(var q=0;b>q;q++)p=Math.max(p,k.getTextWidth(this._getFormatterNameFromData(a[q]),a[q].textStyle?this.getFont(j.merge(a[q].textStyle||{},f)):g));p+=d,h=p;for(var q=0;b>q;q++)""!==this._getName(a[q])?o+e+c>n?(h+=p+c,o-=c,i=Math.max(i,o),o=0):(o+=e+c,i=Math.max(i,o-c)):(h+=p+c,o-=c,i=Math.max(i,o),o=0)}m=this.zr.getWidth(),n=this.zr.getHeight();var s;switch(this.legendOption.x){case"center":s=Math.floor((m-h)/2);break;case"left":s=l[3]+this.legendOption.borderWidth;break;case"right":s=m-h-l[1]-l[3]-2*this.legendOption.borderWidth;break;default:s=this.parsePercent(this.legendOption.x,m)}var t;switch(this.legendOption.y){case"top":t=l[0]+this.legendOption.borderWidth;break;case"bottom":t=n-i-l[0]-l[2]-2*this.legendOption.borderWidth;break;case"center":t=Math.floor((n-i)/2);break;default:t=this.parsePercent(this.legendOption.y,n)}return{x:s,y:t,width:h,height:i,maxWidth:p}},_getSomethingByName:function(a){for(var b,c=this.option.series,d=0,e=c.length;e>d;d++){if(c[d].name===a)return{type:c[d].type,series:c[d],seriesIndex:d,data:null,dataIndex:-1};if(c[d].type===i.CHART_TYPE_PIE||c[d].type===i.CHART_TYPE_RADAR||c[d].type===i.CHART_TYPE_CHORD||c[d].type===i.CHART_TYPE_FORCE||c[d].type===i.CHART_TYPE_FUNNEL){b=c[d].categories||c[d].data||c[d].nodes;for(var f=0,g=b.length;g>f;f++)if(b[f].name===a)return{type:c[d].type,series:c[d],seriesIndex:d,data:b[f],dataIndex:f}}}return{type:"bar",series:null,seriesIndex:-1,data:null,dataIndex:-1}},_getItemShapeByType:function(a,b,c,d,e,f,g){var h,j="#ccc"===e?g:e,k={zlevel:this.getZlevelBase(),z:this.getZBase(),style:{iconType:"legendicon"+f,x:a,y:b,width:c,height:d,color:e,strokeColor:e,lineWidth:2},highlightStyle:{color:j,strokeColor:j,lineWidth:1},hoverable:this.legendOption.selectedMode,clickable:this.legendOption.selectedMode};if(f.match("image")){var h=f.replace(RegExp("^image:\\/\\/"),"");f="image"}switch(f){case"line":k.style.brushType="stroke",k.highlightStyle.lineWidth=3;break;case"radar":case"scatter":k.highlightStyle.lineWidth=3;break;case"k":k.style.brushType="both",k.highlightStyle.lineWidth=3,k.highlightStyle.color=k.style.color=this.deepQuery([this.ecTheme,i],"k.itemStyle.normal.color")||"#fff",k.style.strokeColor="#ccc"!=e?this.deepQuery([this.ecTheme,i],"k.itemStyle.normal.lineStyle.color")||"#ff3200":e;break;case"image":k.style.iconType="image",k.style.image=h,"#ccc"===e&&(k.style.opacity=.5)}return k},__legendSelected:function(a){var b=a.target._name;if("single"===this.legendOption.selectedMode)for(var c in this._selectedMap)this._selectedMap[c]=!1;this._selectedMap[b]=!this._selectedMap[b],this.messageCenter.dispatch(i.EVENT.LEGEND_SELECTED,a.event,{selected:this._selectedMap,target:b},this.myChart)},__dispatchHoverLink:function(a){this.messageCenter.dispatch(i.EVENT.LEGEND_HOVERLINK,a.event,{target:a.target._name},this.myChart)},refresh:function(a){if(a){this.option=a||this.option,this.option.legend=this.reformOption(this.option.legend),this.legendOption=this.option.legend;var b,c,d,e,f=this.legendOption.data||[];if(this.legendOption.selected)for(var g in this.legendOption.selected)this._selectedMap[g]=void 0!==this._selectedMap[g]?this._selectedMap[g]:this.legendOption.selected[g];for(var h=0,j=f.length;j>h;h++)b=this._getName(f[h]),""!==b&&(c=this._getSomethingByName(b),c.series?(this._hasDataMap[b]=!0,e=!c.data||c.type!==i.CHART_TYPE_PIE&&c.type!==i.CHART_TYPE_FORCE&&c.type!==i.CHART_TYPE_FUNNEL?[c.series]:[c.data,c.series],d=this.getItemStyleColor(this.deepQuery(e,"itemStyle.normal.color"),c.seriesIndex,c.dataIndex,c.data),d&&c.type!=i.CHART_TYPE_K&&this.setColor(b,d),this._selectedMap[b]=null!=this._selectedMap[b]?this._selectedMap[b]:!0):this._hasDataMap[b]=!1)}this.clear(),this._buildShape()},getRelatedAmount:function(a){for(var b,c=0,d=this.option.series,e=0,f=d.length;f>e;e++)if(d[e].name===a&&c++,d[e].type===i.CHART_TYPE_PIE||d[e].type===i.CHART_TYPE_RADAR||d[e].type===i.CHART_TYPE_CHORD||d[e].type===i.CHART_TYPE_FORCE||d[e].type===i.CHART_TYPE_FUNNEL){b=d[e].type!=i.CHART_TYPE_FORCE?d[e].data:d[e].categories;for(var g=0,h=b.length;h>g;g++)b[g].name===a&&"-"!=b[g].value&&c++}return c},setColor:function(a,b){this._colorMap[a]=b},getColor:function(a){return this._colorMap[a]||(this._colorMap[a]=this.zr.getColor(this._colorIndex++)),this._colorMap[a]},hasColor:function(a){return this._colorMap[a]?this._colorMap[a]:!1},add:function(a,b){for(var c=this.legendOption.data,d=0,e=c.length;e>d;d++)if(this._getName(c[d])===a)return;this.legendOption.data.push(a),this.setColor(a,b),this._selectedMap[a]=!0,this._hasDataMap[a]=!0},del:function(a){for(var b=this.legendOption.data,c=0,d=b.length;d>c;c++)if(this._getName(b[c])===a)return this.legendOption.data.splice(c,1)},getItemShape:function(a){if(null!=a)for(var b,c=0,d=this.shapeList.length;d>c;c++)if(b=this.shapeList[c],b._name===a&&"text"!=b.type)return b},setItemShape:function(a,b){for(var c,d=0,e=this.shapeList.length;e>d;d++)c=this.shapeList[d],c._name===a&&"text"!=c.type&&(this._selectedMap[a]||(b.style.color="#ccc",b.style.strokeColor="#ccc"),this.zr.modShape(c.id,b))},isSelected:function(a){return void 0!==this._selectedMap[a]?this._selectedMap[a]:!0},getSelectedMap:function(){return this._selectedMap},setSelected:function(a,b){if("single"===this.legendOption.selectedMode)for(var c in this._selectedMap)this._selectedMap[c]=!1;this._selectedMap[a]=b,this.messageCenter.dispatch(i.EVENT.LEGEND_SELECTED,null,{selected:this._selectedMap,target:a},this.myChart)},onlegendSelected:function(a,b){var c=a.selected;for(var d in c)this._selectedMap[d]!=c[d]&&(b.needRefresh=!0),this._selectedMap[d]=c[d]}};var l={line:function(a,b){var c=b.height/2;a.moveTo(b.x,b.y+c),a.lineTo(b.x+b.width,b.y+c)},pie:function(a,b){var c=b.x,d=b.y,e=b.width,g=b.height;f.prototype.buildPath(a,{x:c+e/2,y:d+g+2,r:g,r0:6,startAngle:45,endAngle:135})},eventRiver:function(a,b){var c=b.x,d=b.y,e=b.width,f=b.height;a.moveTo(c,d+f),a.bezierCurveTo(c+e,d+f,c,d+4,c+e,d+4),a.lineTo(c+e,d),a.bezierCurveTo(c,d,c+e,d+f-4,c,d+f-4),a.lineTo(c,d+f)},k:function(a,b){var c=b.x,d=b.y,e=b.width,f=b.height;h.prototype.buildPath(a,{x:c+e/2,y:[d+1,d+1,d+f-6,d+f],width:e-6})},bar:function(a,b){var c=b.x,d=b.y+1,e=b.width,f=b.height-2,g=3;a.moveTo(c+g,d),a.lineTo(c+e-g,d),a.quadraticCurveTo(c+e,d,c+e,d+g),a.lineTo(c+e,d+f-g),a.quadraticCurveTo(c+e,d+f,c+e-g,d+f),a.lineTo(c+g,d+f),a.quadraticCurveTo(c,d+f,c,d+f-g),a.lineTo(c,d+g),a.quadraticCurveTo(c,d,c+g,d)},force:function(a,b){g.prototype.iconLibrary.circle(a,b)},radar:function(a,b){var c=6,d=b.x+b.width/2,e=b.y+b.height/2,f=b.height/2,g=2*Math.PI/c,h=-Math.PI/2,i=d+f*Math.cos(h),j=e+f*Math.sin(h);a.moveTo(i,j),h+=g;for(var k=0,l=c-1;l>k;k++)a.lineTo(d+f*Math.cos(h),e+f*Math.sin(h)),h+=g;a.lineTo(i,j)}};l.chord=l.pie,l.map=l.bar;for(var m in l)g.prototype.iconLibrary["legendicon"+m]=l[m];return j.inherits(b,c),a("../component").define("legend",b),b}),define("echarts/util/ecData",[],function(){function a(a,b,c,d,e,f,g,h){var i;return void 0!==d&&(i=null==d.value?d:d.value),a._echartsData={_series:b,_seriesIndex:c,_data:d,_dataIndex:e,_name:f,_value:i,_special:g,_special2:h},a._echartsData}function b(a,b){var c=a._echartsData;if(!b)return c;switch(b){case"series":case"seriesIndex":case"data":case"dataIndex":case"name":case"value":case"special":case"special2":return c&&c["_"+b]}return null}function c(a,b,c){switch(a._echartsData=a._echartsData||{},b){case"series":case"seriesIndex":case"data":case"dataIndex":case"name":case"value":case"special":case"special2":a._echartsData["_"+b]=c}}function d(a,b){b._echartsData={_series:a._echartsData._series,_seriesIndex:a._echartsData._seriesIndex,_data:a._echartsData._data,_dataIndex:a._echartsData._dataIndex,_name:a._echartsData._name,_value:a._echartsData._value,_special:a._echartsData._special,_special2:a._echartsData._special2}}return{pack:a,set:c,get:b,clone:d}}),define("echarts/chart",[],function(){var a={},b={};return a.define=function(c,d){return b[c]=d,a},a.get=function(a){return b[a]},a}),define("zrender/tool/color",["require","../tool/util"],function(a){function b(a){Q=a}function c(){Q=R}function d(a,b){return a=0|a,b=b||Q,b[a%b.length]}function e(a){S=a}function f(){T=S}function g(){return S}function h(a,b,c,d,e,f,g){O||(O=P.getContext());for(var h=O.createRadialGradient(a,b,c,d,e,f),i=0,j=g.length;j>i;i++)h.addColorStop(g[i][0],g[i][1]);return h.__nonRecursion=!0,h}function i(a,b,c,d,e){O||(O=P.getContext());for(var f=O.createLinearGradient(a,b,c,d),g=0,h=e.length;h>g;g++)f.addColorStop(e[g][0],e[g][1]);return f.__nonRecursion=!0,f}function j(a,b,c){a=o(a),b=o(b),a=E(a),b=E(b);for(var d=[],e=(b[0]-a[0])/c,f=(b[1]-a[1])/c,g=(b[2]-a[2])/c,h=(b[3]-a[3])/c,i=0,j=a[0],k=a[1],m=a[2],n=a[3];c>i;i++)d[i]=l([H(Math.floor(j),[0,255]),H(Math.floor(k),[0,255]),H(Math.floor(m),[0,255]),n.toFixed(4)-0],"rgba"),j+=e,k+=f,m+=g,n+=h;return j=b[0],k=b[1],m=b[2],n=b[3],d[i]=l([j,k,m,n],"rgba"),d}function k(a,b){var c=[],d=a.length;if(void 0===b&&(b=20),1===d)c=j(a[0],a[0],b);else if(d>1)for(var e=0,f=d-1;f>e;e++){var g=j(a[e],a[e+1],b);f-1>e&&g.pop(),c=c.concat(g)}return c}function l(a,b){if(b=b||"rgb",a&&(3===a.length||4===a.length)){if(a=G(a,function(a){return a>1?Math.ceil(a):a}),b.indexOf("hex")>-1)return"#"+((1<<24)+(a[0]<<16)+(a[1]<<8)+ +a[2]).toString(16).slice(1);if(b.indexOf("hs")>-1){var c=G(a.slice(1,3),function(a){return a+"%"});a[1]=c[0],a[2]=c[1]}return b.indexOf("a")>-1?(3===a.length&&a.push(1),a[3]=H(a[3],[0,1]),b+"("+a.slice(0,4).join(",")+")"):b+"("+a.slice(0,3).join(",")+")"}}function m(a){a=y(a),0>a.indexOf("rgba")&&(a=o(a));var b=[],c=0;return a.replace(/[\d.]+/g,function(a){a=3>c?0|a:+a,b[c++]=a}),b}function n(a,b){if(!I(a))return a;var c=E(a),d=c[3];return void 0===d&&(d=1),a.indexOf("hsb")>-1?c=J(c):a.indexOf("hsl")>-1&&(c=K(c)),b.indexOf("hsb")>-1||b.indexOf("hsv")>-1?c=M(c):b.indexOf("hsl")>-1&&(c=N(c)),c[3]=d,l(c,b)}function o(a){return n(a,"rgba")}function p(a){return n(a,"rgb")}function q(a){return n(a,"hex")}function r(a){return n(a,"hsva")}function s(a){return n(a,"hsv")}function t(a){return n(a,"hsba")}function u(a){return n(a,"hsb")}function v(a){return n(a,"hsla")}function w(a){return n(a,"hsl")}function x(a){for(var b in V)if(q(V[b])===q(a))return b;return null}function y(a){return(a+"").replace(/\s+/g,"")}function z(a){if(V[a]&&(a=V[a]),a=y(a),a=a.replace(/hsv/i,"hsb"),/^#[\da-f]{3}$/i.test(a)){a=parseInt(a.slice(1),16);var b=(3840&a)<<8,c=(240&a)<<4,d=15&a;a="#"+((1<<24)+(b<<4)+b+(c<<4)+c+(d<<4)+d).toString(16).slice(1)}return a}function A(a,b){if(!I(a))return a;var c=b>0?1:-1;void 0===b&&(b=0),b=Math.abs(b)>1?1:Math.abs(b),a=p(a);for(var d=E(a),e=0;3>e;e++)d[e]=1===c?0|d[e]*(1-b):0|(255-d[e])*b+d[e];return"rgb("+d.join(",")+")"}function B(a){if(!I(a))return a;var b=E(o(a));return b=G(b,function(a){return 255-a}),l(b,"rgb")}function C(a,b,c){if(!I(a)||!I(b))return a;void 0===c&&(c=.5),c=1-H(c,[0,1]);for(var d=2*c-1,e=E(o(a)),f=E(o(b)),g=e[3]-f[3],h=((-1===d*g?d:(d+g)/(1+d*g))+1)/2,i=1-h,j=[],k=0;3>k;k++)j[k]=e[k]*h+f[k]*i;var m=e[3]*c+f[3]*(1-c);return m=Math.max(0,Math.min(1,m)),1===e[3]&&1===f[3]?l(j,"rgb"):(j[3]=m,l(j,"rgba"))}function D(){return"#"+(Math.random().toString(16)+"0000").slice(2,8)}function E(a){a=z(a);var b=a.match(U);if(null===b)throw Error("The color format error");var c,d,e,f=[];if(b[2])c=b[2].replace("#","").split(""),e=[c[0]+c[1],c[2]+c[3],c[4]+c[5]],f=G(e,function(a){return H(parseInt(a,16),[0,255])});else if(b[4]){var g=b[4].split(",");d=g[3],e=g.slice(0,3),f=G(e,function(a){return a=Math.floor(a.indexOf("%")>0?2.55*parseInt(a,0):a),H(a,[0,255])}),void 0!==d&&f.push(H(parseFloat(d),[0,1]))}else if(b[5]||b[6]){var h=(b[5]||b[6]).split(","),i=parseInt(h[0],0)/360,j=h[1],k=h[2];d=h[3],f=G([j,k],function(a){return H(parseFloat(a)/100,[0,1])}),f.unshift(i),void 0!==d&&f.push(H(parseFloat(d),[0,1]))}return f}function F(a,b){if(!I(a))return a;null===b&&(b=1);var c=E(o(a));return c[3]=H(Number(b).toFixed(4),[0,1]),l(c,"rgba")}function G(a,b){if("function"!=typeof b)throw new TypeError;for(var c=a?a.length:0,d=0;c>d;d++)a[d]=b(a[d]);return a}function H(a,b){return b[0]>=a?a=b[0]:a>=b[1]&&(a=b[1]),a}function I(a){return a instanceof Array||"string"==typeof a}function J(a){var b,c,d,e=a[0],f=a[1],g=a[2];if(0===f)b=255*g,c=255*g,d=255*g;else{var h=6*e;6===h&&(h=0);var i=0|h,j=g*(1-f),k=g*(1-f*(h-i)),l=g*(1-f*(1-(h-i))),m=0,n=0,o=0;0===i?(m=g,n=l,o=j):1===i?(m=k,n=g,o=j):2===i?(m=j,n=g,o=l):3===i?(m=j,n=k,o=g):4===i?(m=l,n=j,o=g):(m=g,n=j,o=k),b=255*m,c=255*n,d=255*o}return[b,c,d]}function K(a){var b,c,d,e=a[0],f=a[1],g=a[2];if(0===f)b=255*g,c=255*g,d=255*g;else{var h;h=.5>g?g*(1+f):g+f-f*g;var i=2*g-h;b=255*L(i,h,e+1/3),c=255*L(i,h,e),d=255*L(i,h,e-1/3)}return[b,c,d]}function L(a,b,c){return 0>c&&(c+=1),c>1&&(c-=1),1>6*c?a+6*(b-a)*c:1>2*c?b:2>3*c?a+6*(b-a)*(2/3-c):a}function M(a){var b,c,d=a[0]/255,e=a[1]/255,f=a[2]/255,g=Math.min(d,e,f),h=Math.max(d,e,f),i=h-g,j=h;if(0===i)b=0,c=0;else{c=i/h;var k=((h-d)/6+i/2)/i,l=((h-e)/6+i/2)/i,m=((h-f)/6+i/2)/i;d===h?b=m-l:e===h?b=1/3+k-m:f===h&&(b=2/3+l-k),0>b&&(b+=1),b>1&&(b-=1)}return b=360*b,c=100*c,j=100*j,[b,c,j]}function N(a){var b,c,d=a[0]/255,e=a[1]/255,f=a[2]/255,g=Math.min(d,e,f),h=Math.max(d,e,f),i=h-g,j=(h+g)/2;if(0===i)b=0,c=0;else{c=.5>j?i/(h+g):i/(2-h-g);var k=((h-d)/6+i/2)/i,l=((h-e)/6+i/2)/i,m=((h-f)/6+i/2)/i;d===h?b=m-l:e===h?b=1/3+k-m:f===h&&(b=2/3+l-k),0>b&&(b+=1),b>1&&(b-=1)}return b=360*b,c=100*c,j=100*j,[b,c,j]}var O,P=a("../tool/util"),Q=["#ff9277"," #dddd00"," #ffc877"," #bbe3ff"," #d5ffbb","#bbbbff"," #ddb000"," #b0dd00"," #e2bbff"," #ffbbe3","#ff7777"," #ff9900"," #83dd00"," #77e3ff"," #778fff","#c877ff"," #ff77ab"," #ff6600"," #aa8800"," #77c7ff","#ad77ff"," #ff77ff"," #dd0083"," #777700"," #00aa00","#0088aa"," #8400dd"," #aa0088"," #dd0000"," #772e00"],R=Q,S="rgba(255,255,0,0.5)",T=S,U=/^\s*((#[a-f\d]{6})|(#[a-f\d]{3})|rgba?\(\s*([\d\.]+%?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+%?(?:\s*,\s*[\d\.]+%?)?)\s*\)|hsba?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+%?(?:\s*,\s*[\d\.]+)?)%?\s*\)|hsla?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+%?(?:\s*,\s*[\d\.]+)?)%?\s*\))\s*$/i,V={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#0ff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000",blanchedalmond:"#ffebcd",blue:"#00f",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#0ff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgrey:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#f0f",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#789",lightslategrey:"#789",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#0f0",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#f0f",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#f00",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#fff",whitesmoke:"#f5f5f5",yellow:"#ff0",yellowgreen:"#9acd32"};return{customPalette:b,resetPalette:c,getColor:d,getHighlightColor:g,customHighlight:e,resetHighlight:f,getRadialGradient:h,getLinearGradient:i,getGradientColors:k,getStepColors:j,reverse:B,mix:C,lift:A,trim:y,random:D,toRGB:p,toRGBA:o,toHex:q,toHSL:w,toHSLA:v,toHSB:u,toHSBA:t,toHSV:s,toHSVA:r,toName:x,toColor:l,toArray:m,alpha:F,getData:E}}),define("echarts/component/timeline",["require","./base","zrender/shape/Rectangle","../util/shape/Icon","../util/shape/Chain","../config","zrender/tool/util","zrender/tool/area","zrender/tool/event","../component"],function(a){function b(a,b,c,e,f){d.call(this,a,b,c,e,f);var g=this;if(g._onclick=function(a){return g.__onclick(a)},g._ondrift=function(a,b){return g.__ondrift(this,a,b)},g._ondragend=function(){return g.__ondragend()},g._setCurrentOption=function(){var a=g.timelineOption;
g.currentIndex%=a.data.length;var b=g.options[g.currentIndex]||{};g.myChart.setOption(b,a.notMerge),g.messageCenter.dispatch(h.EVENT.TIMELINE_CHANGED,null,{currentIndex:g.currentIndex,data:null!=a.data[g.currentIndex].name?a.data[g.currentIndex].name:a.data[g.currentIndex]},g.myChart)},g._onFrame=function(){g._setCurrentOption(),g._syncHandleShape(),g.timelineOption.autoPlay&&(g.playTicket=setTimeout(function(){return g.currentIndex+=1,!g.timelineOption.loop&&g.currentIndex>=g.timelineOption.data.length?(g.currentIndex=g.timelineOption.data.length-1,void g.stop()):void g._onFrame()},g.timelineOption.playInterval))},this.setTheme(!1),this.options=this.option.options,this.currentIndex=this.timelineOption.currentIndex%this.timelineOption.data.length,this.timelineOption.notMerge||0===this.currentIndex||(this.options[this.currentIndex]=i.merge(this.options[this.currentIndex],this.options[0])),this.timelineOption.show&&(this._buildShape(),this._syncHandleShape()),this._setCurrentOption(),this.timelineOption.autoPlay){var g=this;this.playTicket=setTimeout(function(){g.play()},null!=this.ecTheme.animationDuration?this.ecTheme.animationDuration:h.animationDuration)}}function c(a,b){var c=2,d=b.x+c,e=b.y+c+2,g=b.width-c,h=b.height-c,i=b.symbol;if("last"===i)a.moveTo(d+g-2,e+h/3),a.lineTo(d+g-2,e),a.lineTo(d+2,e+h/2),a.lineTo(d+g-2,e+h),a.lineTo(d+g-2,e+2*(h/3)),a.moveTo(d,e),a.lineTo(d,e);else if("next"===i)a.moveTo(d+2,e+h/3),a.lineTo(d+2,e),a.lineTo(d+g-2,e+h/2),a.lineTo(d+2,e+h),a.lineTo(d+2,e+2*(h/3)),a.moveTo(d,e),a.lineTo(d,e);else if("play"===i)if("stop"===b.status)a.moveTo(d+2,e),a.lineTo(d+g-2,e+h/2),a.lineTo(d+2,e+h),a.lineTo(d+2,e);else{var j="both"===b.brushType?2:3;a.rect(d+2,e,j,h),a.rect(d+g-j-2,e,j,h)}else if(i.match("image")){var k="";k=i.replace(RegExp("^image:\\/\\/"),""),(i=f.prototype.iconLibrary.image)(a,{x:d,y:e,width:g,height:h,image:k})}}var d=a("./base"),e=a("zrender/shape/Rectangle"),f=a("../util/shape/Icon"),g=a("../util/shape/Chain"),h=a("../config");h.timeline={zlevel:0,z:4,show:!0,type:"time",notMerge:!1,realtime:!0,x:80,x2:80,y2:0,height:50,backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderWidth:0,padding:5,controlPosition:"left",autoPlay:!1,loop:!0,playInterval:2e3,lineStyle:{width:1,color:"#666",type:"dashed"},label:{show:!0,interval:"auto",rotate:0,textStyle:{color:"#333"}},checkpointStyle:{symbol:"auto",symbolSize:"auto",color:"auto",borderColor:"auto",borderWidth:"auto",label:{show:!1,textStyle:{color:"auto"}}},controlStyle:{itemSize:15,itemGap:5,normal:{color:"#333"},emphasis:{color:"#1e90ff"}},symbol:"emptyDiamond",symbolSize:4,currentIndex:0};var i=a("zrender/tool/util"),j=a("zrender/tool/area"),k=a("zrender/tool/event");return b.prototype={type:h.COMPONENT_TYPE_TIMELINE,_buildShape:function(){if(this._location=this._getLocation(),this._buildBackground(),this._buildControl(),this._chainPoint=this._getChainPoint(),this.timelineOption.label.show)for(var a=this._getInterval(),b=0,c=this._chainPoint.length;c>b;b+=a)this._chainPoint[b].showLabel=!0;this._buildChain(),this._buildHandle();for(var b=0,d=this.shapeList.length;d>b;b++)this.zr.addShape(this.shapeList[b])},_getLocation:function(){var a,b=this.timelineOption,c=this.reformCssArray(this.timelineOption.padding),d=this.zr.getWidth(),e=this.parsePercent(b.x,d),f=this.parsePercent(b.x2,d);null==b.width?(a=d-e-f,f=d-f):(a=this.parsePercent(b.width,d),f=e+a);var g,h,i=this.zr.getHeight(),j=this.parsePercent(b.height,i);return null!=b.y?(g=this.parsePercent(b.y,i),h=g+j):(h=i-this.parsePercent(b.y2,i),g=h-j),{x:e+c[3],y:g+c[0],x2:f-c[1],y2:h-c[2],width:a-c[1]-c[3],height:j-c[0]-c[2]}},_getReformedLabel:function(a){var b=this.timelineOption,c=null!=b.data[a].name?b.data[a].name:b.data[a],d=b.data[a].formatter||b.label.formatter;return d&&("function"==typeof d?c=d.call(this.myChart,c):"string"==typeof d&&(c=d.replace("{value}",c))),c},_getInterval:function(){var a=this._chainPoint,b=this.timelineOption,c=b.label.interval;if("auto"===c){var d=b.label.textStyle.fontSize,e=b.data,f=b.data.length;if(f>3){var g,h,i=!1;for(c=0;!i&&f>c;){c++,i=!0;for(var k=c;f>k;k+=c){if(g=a[k].x-a[k-c].x,0!==b.label.rotate)h=d;else if(e[k].textStyle)h=j.getTextWidth(a[k].name,a[k].textFont);else{var l=a[k].name+"",m=(l.match(/\w/g)||"").length,n=l.length-m;h=2*m*d/3+n*d}if(h>g){i=!1;break}}}}else c=1}else c=c-0+1;return c},_getChainPoint:function(){function a(a){return null!=j[a].name?j[a].name:j[a]+""}var b,c=this.timelineOption,d=c.symbol.toLowerCase(),e=c.symbolSize,f=c.label.rotate,g=c.label.textStyle,h=this.getFont(g),j=c.data,k=this._location.x,l=this._location.y+3*(this._location.height/4),m=this._location.x2-this._location.x,n=j.length,o=[];if(n>1){var p=m/n;if(p=p>50?50:20>p?5:p,m-=2*p,"number"===c.type)for(var q=0;n>q;q++)o.push(k+p+m/(n-1)*q);else{o[0]=new Date(a(0).replace(/-/g,"/")),o[n-1]=new Date(a(n-1).replace(/-/g,"/"))-o[0];for(var q=1;n>q;q++)o[q]=k+p+m*(new Date(a(q).replace(/-/g,"/"))-o[0])/o[n-1];o[0]=k+p}}else o.push(k+m/2);for(var r,s,t,u,v,w=[],q=0;n>q;q++)k=o[q],r=j[q].symbol&&j[q].symbol.toLowerCase()||d,r.match("empty")?(r=r.replace("empty",""),t=!0):t=!1,r.match("star")&&(s=r.replace("star","")-0||5,r="star"),b=j[q].textStyle?i.merge(j[q].textStyle||{},g):g,u=b.align||"center",f?(u=f>0?"right":"left",v=[f*Math.PI/180,k,l-5]):v=!1,w.push({x:k,n:s,isEmpty:t,symbol:r,symbolSize:j[q].symbolSize||e,color:j[q].color,borderColor:j[q].borderColor,borderWidth:j[q].borderWidth,name:this._getReformedLabel(q),textColor:b.color,textAlign:u,textBaseline:b.baseline||"middle",textX:k,textY:l-(f?5:0),textFont:j[q].textStyle?this.getFont(b):h,rotation:v,showLabel:!1});return w},_buildBackground:function(){var a=this.timelineOption,b=this.reformCssArray(this.timelineOption.padding),c=this._location.width,d=this._location.height;(0!==a.borderWidth||"rgba(0,0,0,0)"!=a.backgroundColor.replace(/\s/g,""))&&this.shapeList.push(new e({zlevel:this.getZlevelBase(),z:this.getZBase(),hoverable:!1,style:{x:this._location.x-b[3],y:this._location.y-b[0],width:c+b[1]+b[3],height:d+b[0]+b[2],brushType:0===a.borderWidth?"fill":"both",color:a.backgroundColor,strokeColor:a.borderColor,lineWidth:a.borderWidth}}))},_buildControl:function(){var a=this,b=this.timelineOption,c=b.lineStyle,d=b.controlStyle;if("none"!==b.controlPosition){var e,g=d.itemSize,h=d.itemGap;"left"===b.controlPosition?(e=this._location.x,this._location.x+=3*(g+h)):(e=this._location.x2-(3*(g+h)-h),this._location.x2-=3*(g+h));var j=this._location.y,k={zlevel:this.getZlevelBase(),z:this.getZBase()+1,style:{iconType:"timelineControl",symbol:"last",x:e,y:j,width:g,height:g,brushType:"stroke",color:d.normal.color,strokeColor:d.normal.color,lineWidth:c.width},highlightStyle:{color:d.emphasis.color,strokeColor:d.emphasis.color,lineWidth:c.width+1},clickable:!0};this._ctrLastShape=new f(k),this._ctrLastShape.onclick=function(){a.last()},this.shapeList.push(this._ctrLastShape),e+=g+h,this._ctrPlayShape=new f(i.clone(k)),this._ctrPlayShape.style.brushType="fill",this._ctrPlayShape.style.symbol="play",this._ctrPlayShape.style.status=this.timelineOption.autoPlay?"playing":"stop",this._ctrPlayShape.style.x=e,this._ctrPlayShape.onclick=function(){"stop"===a._ctrPlayShape.style.status?a.play():a.stop()},this.shapeList.push(this._ctrPlayShape),e+=g+h,this._ctrNextShape=new f(i.clone(k)),this._ctrNextShape.style.symbol="next",this._ctrNextShape.style.x=e,this._ctrNextShape.onclick=function(){a.next()},this.shapeList.push(this._ctrNextShape)}},_buildChain:function(){var a=this.timelineOption,b=a.lineStyle;this._timelineShae={zlevel:this.getZlevelBase(),z:this.getZBase(),style:{x:this._location.x,y:this.subPixelOptimize(this._location.y,b.width),width:this._location.x2-this._location.x,height:this._location.height,chainPoint:this._chainPoint,brushType:"both",strokeColor:b.color,lineWidth:b.width,lineType:b.type},hoverable:!1,clickable:!0,onclick:this._onclick},this._timelineShae=new g(this._timelineShae),this.shapeList.push(this._timelineShae)},_buildHandle:function(){var a=this._chainPoint[this.currentIndex],b=a.symbolSize+1;b=5>b?5:b,this._handleShape={zlevel:this.getZlevelBase(),z:this.getZBase()+1,hoverable:!1,draggable:!0,style:{iconType:"diamond",n:a.n,x:a.x-b,y:this._location.y+this._location.height/4-b,width:2*b,height:2*b,brushType:"both",textPosition:"specific",textX:a.x,textY:this._location.y-this._location.height/4,textAlign:"center",textBaseline:"middle"},highlightStyle:{},ondrift:this._ondrift,ondragend:this._ondragend},this._handleShape=new f(this._handleShape),this.shapeList.push(this._handleShape)},_syncHandleShape:function(){if(this.timelineOption.show){var a=this.timelineOption,b=a.checkpointStyle,c=this._chainPoint[this.currentIndex];this._handleShape.style.text=b.label.show?c.name:"",this._handleShape.style.textFont=c.textFont,this._handleShape.style.n=c.n,"auto"===b.symbol?this._handleShape.style.iconType="none"!=c.symbol?c.symbol:"diamond":(this._handleShape.style.iconType=b.symbol,b.symbol.match("star")&&(this._handleShape.style.n=b.symbol.replace("star","")-0||5,this._handleShape.style.iconType="star"));var d;"auto"===b.symbolSize?(d=c.symbolSize+2,d=5>d?5:d):d=b.symbolSize-0,this._handleShape.style.color="auto"===b.color?c.color?c.color:a.controlStyle.emphasis.color:b.color,this._handleShape.style.textColor="auto"===b.label.textStyle.color?this._handleShape.style.color:b.label.textStyle.color,this._handleShape.highlightStyle.strokeColor=this._handleShape.style.strokeColor="auto"===b.borderColor?c.borderColor?c.borderColor:"#fff":b.borderColor,this._handleShape.style.lineWidth="auto"===b.borderWidth?c.borderWidth?c.borderWidth:0:b.borderWidth-0,this._handleShape.highlightStyle.lineWidth=this._handleShape.style.lineWidth+1,this.zr.animate(this._handleShape.id,"style").when(500,{x:c.x-d,textX:c.x,y:this._location.y+this._location.height/4-d,width:2*d,height:2*d}).start("ExponentialOut")}},_findChainIndex:function(a){var b=this._chainPoint,c=b.length;if(b[0].x>=a)return 0;if(a>=b[c-1].x)return c-1;for(var d=0;c-1>d;d++)if(a>=b[d].x&&b[d+1].x>=a)return Math.abs(a-b[d].x)<Math.abs(a-b[d+1].x)?d:d+1},__onclick:function(a){var b=k.getX(a.event),c=this._findChainIndex(b);return c===this.currentIndex?!0:(this.currentIndex=c,this.timelineOption.autoPlay&&this.stop(),clearTimeout(this.playTicket),void this._onFrame())},__ondrift:function(a,b){this.timelineOption.autoPlay&&this.stop();var c,d=this._chainPoint,e=d.length;a.style.x+b<=d[0].x-d[0].symbolSize?(a.style.x=d[0].x-d[0].symbolSize,c=0):a.style.x+b>=d[e-1].x-d[e-1].symbolSize?(a.style.x=d[e-1].x-d[e-1].symbolSize,c=e-1):(a.style.x+=b,c=this._findChainIndex(a.style.x));var f=d[c],g=f.symbolSize+2;if(a.style.iconType=f.symbol,a.style.n=f.n,a.style.textX=a.style.x+g/2,a.style.y=this._location.y+this._location.height/4-g,a.style.width=2*g,a.style.height=2*g,a.style.text=f.name,c===this.currentIndex)return!0;if(this.currentIndex=c,this.timelineOption.realtime){clearTimeout(this.playTicket);var h=this;this.playTicket=setTimeout(function(){h._setCurrentOption()},200)}return!0},__ondragend:function(){this.isDragend=!0},ondragend:function(a,b){this.isDragend&&a.target&&(!this.timelineOption.realtime&&this._setCurrentOption(),b.dragOut=!0,b.dragIn=!0,b.needRefresh=!1,this.isDragend=!1,this._syncHandleShape())},last:function(){return this.timelineOption.autoPlay&&this.stop(),this.currentIndex-=1,0>this.currentIndex&&(this.currentIndex=this.timelineOption.data.length-1),this._onFrame(),this.currentIndex},next:function(){return this.timelineOption.autoPlay&&this.stop(),this.currentIndex+=1,this.currentIndex>=this.timelineOption.data.length&&(this.currentIndex=0),this._onFrame(),this.currentIndex},play:function(a,b){return this._ctrPlayShape&&"playing"!=this._ctrPlayShape.style.status&&(this._ctrPlayShape.style.status="playing",this.zr.modShape(this._ctrPlayShape.id),this.zr.refreshNextFrame()),this.timelineOption.autoPlay=null!=b?b:!0,this.timelineOption.autoPlay||clearTimeout(this.playTicket),this.currentIndex=null!=a?a:this.currentIndex+1,this.currentIndex>=this.timelineOption.data.length&&(this.currentIndex=0),this._onFrame(),this.currentIndex},stop:function(){return this._ctrPlayShape&&"stop"!=this._ctrPlayShape.style.status&&(this._ctrPlayShape.style.status="stop",this.zr.modShape(this._ctrPlayShape.id),this.zr.refreshNextFrame()),this.timelineOption.autoPlay=!1,clearTimeout(this.playTicket),this.currentIndex},resize:function(){this.timelineOption.show&&(this.clear(),this._buildShape(),this._syncHandleShape())},setTheme:function(a){this.timelineOption=this.reformOption(i.clone(this.option.timeline)),this.timelineOption.label.textStyle=this.getTextStyle(this.timelineOption.label.textStyle),this.timelineOption.checkpointStyle.label.textStyle=this.getTextStyle(this.timelineOption.checkpointStyle.label.textStyle),this.myChart.canvasSupported||(this.timelineOption.realtime=!1),this.timelineOption.show&&a&&(this.clear(),this._buildShape(),this._syncHandleShape())},onbeforDispose:function(){clearTimeout(this.playTicket)}},f.prototype.iconLibrary.timelineControl=c,i.inherits(b,d),a("../component").define("timeline",b),b}),define("zrender/shape/Image",["require","./Base","../tool/util"],function(a){var b=a("./Base"),c=function(a){b.call(this,a)};return c.prototype={type:"image",brush:function(a,b,c){var d=this.style||{};b&&(d=this.getHighlightStyle(d,this.highlightStyle||{}));var e=d.image,f=this;if(this._imageCache||(this._imageCache={}),"string"==typeof e){var g=e;this._imageCache[g]?e=this._imageCache[g]:(e=new Image,e.onload=function(){e.onload=null,f.modSelf(),c()},e.src=g,this._imageCache[g]=e)}if(e){if("IMG"==e.nodeName.toUpperCase())if(window.ActiveXObject){if("complete"!=e.readyState)return}else if(!e.complete)return;var h=d.width||e.width,i=d.height||e.height,j=d.x,k=d.y;if(!e.width||!e.height)return;if(a.save(),this.doClip(a),this.setContext(a,d),this.setTransform(a),d.sWidth&&d.sHeight){var l=d.sx||0,m=d.sy||0;a.drawImage(e,l,m,d.sWidth,d.sHeight,j,k,h,i)}else if(d.sx&&d.sy){var l=d.sx,m=d.sy,n=h-l,o=i-m;a.drawImage(e,l,m,n,o,j,k,h,i)}else a.drawImage(e,j,k,h,i);d.width||(d.width=h),d.height||(d.height=i),this.style.width||(this.style.width=h),this.style.height||(this.style.height=i),this.drawText(a,d,this.style),a.restore()}},getRect:function(a){return{x:a.x,y:a.y,width:a.width,height:a.height}},clearCache:function(){this._imageCache={}}},a("../tool/util").inherits(c,b),c}),define("zrender/loadingEffect/Bar",["require","./Base","../tool/util","../tool/color","../shape/Rectangle"],function(a){function b(a){c.call(this,a)}var c=a("./Base"),d=a("../tool/util"),e=a("../tool/color"),f=a("../shape/Rectangle");return d.inherits(b,c),b.prototype._start=function(a,b){var c=d.merge(this.options,{textStyle:{color:"#888"},backgroundColor:"rgba(250, 250, 250, 0.8)",effectOption:{x:0,y:this.canvasHeight/2-30,width:this.canvasWidth,height:5,brushType:"fill",timeInterval:100}}),g=this.createTextShape(c.textStyle),h=this.createBackgroundShape(c.backgroundColor),i=c.effectOption,j=new f({highlightStyle:d.clone(i)});return j.highlightStyle.color=i.color||e.getLinearGradient(i.x,i.y,i.x+i.width,i.y+i.height,[[0,"#ff6400"],[.5,"#ffe100"],[1,"#b1ff00"]]),null!=c.progress?(a(h),j.highlightStyle.width=this.adjust(c.progress,[0,1])*c.effectOption.width,a(j),a(g),void b()):(j.highlightStyle.width=0,setInterval(function(){a(h),j.highlightStyle.width<i.width?j.highlightStyle.width+=8:j.highlightStyle.width=0,a(j),a(g),b()},i.timeInterval))},b}),define("zrender/loadingEffect/Bubble",["require","./Base","../tool/util","../tool/color","../shape/Circle"],function(a){function b(a){c.call(this,a)}var c=a("./Base"),d=a("../tool/util"),e=a("../tool/color"),f=a("../shape/Circle");return d.inherits(b,c),b.prototype._start=function(a,b){for(var c=d.merge(this.options,{textStyle:{color:"#888"},backgroundColor:"rgba(250, 250, 250, 0.8)",effect:{n:50,lineWidth:2,brushType:"stroke",color:"random",timeInterval:100}}),g=this.createTextShape(c.textStyle),h=this.createBackgroundShape(c.backgroundColor),i=c.effect,j=i.n,k=i.brushType,l=i.lineWidth,m=[],n=this.canvasWidth,o=this.canvasHeight,p=0;j>p;p++){var q="random"==i.color?e.alpha(e.random(),.3):i.color;m[p]=new f({highlightStyle:{x:Math.ceil(Math.random()*n),y:Math.ceil(Math.random()*o),r:Math.ceil(40*Math.random()),brushType:k,color:q,strokeColor:q,lineWidth:l},animationY:Math.ceil(20*Math.random())})}return setInterval(function(){a(h);for(var c=0;j>c;c++){var d=m[c].highlightStyle;0>=d.y-m[c].animationY+d.r&&(m[c].highlightStyle.y=o+d.r,m[c].highlightStyle.x=Math.ceil(Math.random()*n)),m[c].highlightStyle.y-=m[c].animationY,a(m[c])}a(g),b()},i.timeInterval)},b}),define("zrender/loadingEffect/DynamicLine",["require","./Base","../tool/util","../tool/color","../shape/Line"],function(a){function b(a){c.call(this,a)}var c=a("./Base"),d=a("../tool/util"),e=a("../tool/color"),f=a("../shape/Line");return d.inherits(b,c),b.prototype._start=function(a,b){for(var c=d.merge(this.options,{textStyle:{color:"#fff"},backgroundColor:"rgba(0, 0, 0, 0.8)",effectOption:{n:30,lineWidth:1,color:"random",timeInterval:100}}),g=this.createTextShape(c.textStyle),h=this.createBackgroundShape(c.backgroundColor),i=c.effectOption,j=i.n,k=i.lineWidth,l=[],m=this.canvasWidth,n=this.canvasHeight,o=0;j>o;o++){var p=-Math.ceil(1e3*Math.random()),q=Math.ceil(400*Math.random()),r=Math.ceil(Math.random()*n),s="random"==i.color?e.random():i.color;l[o]=new f({highlightStyle:{xStart:p,yStart:r,xEnd:p+q,yEnd:r,strokeColor:s,lineWidth:k},animationX:Math.ceil(100*Math.random()),len:q})}return setInterval(function(){a(h);for(var c=0;j>c;c++){var d=l[c].highlightStyle;d.xStart>=m&&(l[c].len=Math.ceil(400*Math.random()),d.xStart=-400,d.xEnd=-400+l[c].len,d.yStart=Math.ceil(Math.random()*n),d.yEnd=d.yStart),d.xStart+=l[c].animationX,d.xEnd+=l[c].animationX,a(l[c])}a(g),b()},i.timeInterval)},b}),define("zrender/loadingEffect/Ring",["require","./Base","../tool/util","../tool/color","../shape/Ring","../shape/Sector"],function(a){function b(a){c.call(this,a)}var c=a("./Base"),d=a("../tool/util"),e=a("../tool/color"),f=a("../shape/Ring"),g=a("../shape/Sector");return d.inherits(b,c),b.prototype._start=function(a,b){var c=d.merge(this.options,{textStyle:{color:"#07a"},backgroundColor:"rgba(250, 250, 250, 0.8)",effect:{x:this.canvasWidth/2,y:this.canvasHeight/2,r0:60,r:100,color:"#bbdcff",brushType:"fill",textPosition:"inside",textFont:"normal 30px verdana",textColor:"rgba(30, 144, 255, 0.6)",timeInterval:100}}),h=c.effect,i=c.textStyle;null==i.x&&(i.x=h.x),null==i.y&&(i.y=h.y+(h.r0+h.r)/2-5);for(var j=this.createTextShape(c.textStyle),k=this.createBackgroundShape(c.backgroundColor),l=h.x,m=h.y,n=h.r0+6,o=h.r-6,p=h.color,q=e.lift(p,.1),r=new f({highlightStyle:d.clone(h)}),s=[],t=e.getGradientColors(["#ff6400","#ffe100","#97ff00"],25),u=15,v=240,w=0;16>w;w++)s.push(new g({highlightStyle:{x:l,y:m,r0:n,r:o,startAngle:v-u,endAngle:v,brushType:"fill",color:q},_color:e.getLinearGradient(l+n*Math.cos(v,!0),m-n*Math.sin(v,!0),l+n*Math.cos(v-u,!0),m-n*Math.sin(v-u,!0),[[0,t[2*w]],[1,t[2*w+1]]])})),v-=u;v=360;for(var w=0;4>w;w++)s.push(new g({highlightStyle:{x:l,y:m,r0:n,r:o,startAngle:v-u,endAngle:v,brushType:"fill",color:q},_color:e.getLinearGradient(l+n*Math.cos(v,!0),m-n*Math.sin(v,!0),l+n*Math.cos(v-u,!0),m-n*Math.sin(v-u,!0),[[0,t[2*w+32]],[1,t[2*w+33]]])})),v-=u;var x=0;if(null!=c.progress){a(k),x=100*this.adjust(c.progress,[0,1]).toFixed(2)/5,r.highlightStyle.text=5*x+"%",a(r);for(var w=0;20>w;w++)s[w].highlightStyle.color=x>w?s[w]._color:q,a(s[w]);return a(j),void b()}return setInterval(function(){a(k),x+=x>=20?-20:1,a(r);for(var c=0;20>c;c++)s[c].highlightStyle.color=x>c?s[c]._color:q,a(s[c]);a(j),b()},h.timeInterval)},b}),define("zrender/loadingEffect/Spin",["require","./Base","../tool/util","../tool/color","../tool/area","../shape/Sector"],function(a){function b(a){c.call(this,a)}var c=a("./Base"),d=a("../tool/util"),e=a("../tool/color"),f=a("../tool/area"),g=a("../shape/Sector");return d.inherits(b,c),b.prototype._start=function(a,b){var c=d.merge(this.options,{textStyle:{color:"#fff",textAlign:"start"},backgroundColor:"rgba(0, 0, 0, 0.8)"}),h=this.createTextShape(c.textStyle),i=10,j=f.getTextWidth(h.highlightStyle.text,h.highlightStyle.textFont),k=f.getTextHeight(h.highlightStyle.text,h.highlightStyle.textFont),l=d.merge(this.options.effect||{},{r0:9,r:15,n:18,color:"#fff",timeInterval:100}),m=this.getLocation(this.options.textStyle,j+i+2*l.r,Math.max(2*l.r,k));l.x=m.x+l.r,l.y=h.highlightStyle.y=m.y+m.height/2,h.highlightStyle.x=l.x+l.r+i;for(var n=this.createBackgroundShape(c.backgroundColor),o=l.n,p=l.x,q=l.y,r=l.r0,s=l.r,t=l.color,u=[],v=Math.round(180/o),w=0;o>w;w++)u[w]=new g({highlightStyle:{x:p,y:q,r0:r,r:s,startAngle:2*v*w,endAngle:2*v*w+v,color:e.alpha(t,(w+1)/o),brushType:"fill"}});var x=[0,p,q];return setInterval(function(){a(n),x[0]-=.3;for(var c=0;o>c;c++)u[c].rotation=x,a(u[c]);a(h),b()},l.timeInterval)},b}),define("zrender/loadingEffect/Whirling",["require","./Base","../tool/util","../tool/area","../shape/Ring","../shape/Droplet","../shape/Circle"],function(a){function b(a){c.call(this,a)}var c=a("./Base"),d=a("../tool/util"),e=a("../tool/area"),f=a("../shape/Ring"),g=a("../shape/Droplet"),h=a("../shape/Circle");return d.inherits(b,c),b.prototype._start=function(a,b){var c=d.merge(this.options,{textStyle:{color:"#888",textAlign:"start"},backgroundColor:"rgba(250, 250, 250, 0.8)"}),i=this.createTextShape(c.textStyle),j=10,k=e.getTextWidth(i.highlightStyle.text,i.highlightStyle.textFont),l=e.getTextHeight(i.highlightStyle.text,i.highlightStyle.textFont),m=d.merge(this.options.effect||{},{r:18,colorIn:"#fff",colorOut:"#555",colorWhirl:"#6cf",timeInterval:50}),n=this.getLocation(this.options.textStyle,k+j+2*m.r,Math.max(2*m.r,l));m.x=n.x+m.r,m.y=i.highlightStyle.y=n.y+n.height/2,i.highlightStyle.x=m.x+m.r+j;var o=this.createBackgroundShape(c.backgroundColor),p=new g({highlightStyle:{a:Math.round(m.r/2),b:Math.round(m.r-m.r/6),brushType:"fill",color:m.colorWhirl}}),q=new h({highlightStyle:{r:Math.round(m.r/6),brushType:"fill",color:m.colorIn}}),r=new f({highlightStyle:{r0:Math.round(m.r-m.r/3),r:m.r,brushType:"fill",color:m.colorOut}}),s=[0,m.x,m.y];return p.highlightStyle.x=q.highlightStyle.x=r.highlightStyle.x=s[1],p.highlightStyle.y=q.highlightStyle.y=r.highlightStyle.y=s[2],setInterval(function(){a(o),a(r),s[0]-=.3,p.rotation=s,a(p),a(q),a(i),b()},m.timeInterval)},b}),define("echarts/theme/macarons",[],function(){var a={color:["#2ec7c9","#b6a2de","#5ab1ef","#ffb980","#d87a80","#8d98b3","#e5cf0d","#97b552","#95706d","#dc69aa","#07a2a4","#9a7fd1","#588dd5","#f5994e","#c05050","#59678c","#c9ab00","#7eb00a","#6f5553","#c14089"],title:{textStyle:{fontWeight:"normal",color:"#008acd"}},dataRange:{itemWidth:15,color:["#5ab1ef","#e0ffff"]},toolbox:{color:["#1e90ff","#1e90ff","#1e90ff","#1e90ff"],effectiveColor:"#ff4500"},tooltip:{backgroundColor:"rgba(50,50,50,0.5)",axisPointer:{type:"line",lineStyle:{color:"#008acd"},crossStyle:{color:"#008acd"},shadowStyle:{color:"rgba(200,200,200,0.2)"}}},dataZoom:{dataBackgroundColor:"#efefff",fillerColor:"rgba(182,162,222,0.2)",handleColor:"#008acd"},grid:{borderColor:"#eee"},categoryAxis:{axisLine:{lineStyle:{color:"#008acd"}},splitLine:{lineStyle:{color:["#eee"]}}},valueAxis:{axisLine:{lineStyle:{color:"#008acd"}},splitArea:{show:!0,areaStyle:{color:["rgba(250,250,250,0.1)","rgba(200,200,200,0.1)"]}},splitLine:{lineStyle:{color:["#eee"]}}},polar:{axisLine:{lineStyle:{color:"#ddd"}},splitArea:{show:!0,areaStyle:{color:["rgba(250,250,250,0.2)","rgba(200,200,200,0.2)"]}},splitLine:{lineStyle:{color:"#ddd"}}},timeline:{lineStyle:{color:"#008acd"},controlStyle:{normal:{color:"#008acd"},emphasis:{color:"#008acd"}},symbol:"emptyCircle",symbolSize:3},bar:{itemStyle:{normal:{barBorderRadius:5},emphasis:{barBorderRadius:5}}},line:{smooth:!0,symbol:"emptyCircle",symbolSize:3},k:{itemStyle:{normal:{color:"#d87a80",color0:"#2ec7c9",lineStyle:{color:"#d87a80",color0:"#2ec7c9"}}}},scatter:{symbol:"circle",symbolSize:4},radar:{symbol:"emptyCircle",symbolSize:3},map:{itemStyle:{normal:{areaStyle:{color:"#ddd"},label:{textStyle:{color:"#d87a80"}}},emphasis:{areaStyle:{color:"#fe994e"}}}},force:{itemStyle:{normal:{linkStyle:{color:"#1e90ff"}}}},chord:{itemStyle:{normal:{borderWidth:1,borderColor:"rgba(128, 128, 128, 0.5)",chordStyle:{lineStyle:{color:"rgba(128, 128, 128, 0.5)"}}},emphasis:{borderWidth:1,borderColor:"rgba(128, 128, 128, 0.5)",chordStyle:{lineStyle:{color:"rgba(128, 128, 128, 0.5)"}}}}},gauge:{axisLine:{lineStyle:{color:[[.2,"#2ec7c9"],[.8,"#5ab1ef"],[1,"#d87a80"]],width:10}},axisTick:{splitNumber:10,length:15,lineStyle:{color:"auto"}},splitLine:{length:22,lineStyle:{color:"auto"}},pointer:{width:5}},textStyle:{fontFamily:"微软雅黑, Arial, Verdana, sans-serif"}};return a}),define("echarts/theme/infographic",[],function(){var a={color:["#C1232B","#B5C334","#FCCE10","#E87C25","#27727B","#FE8463","#9BCA63","#FAD860","#F3A43B","#60C0DD","#D7504B","#C6E579","#F4E001","#F0805A","#26C0C0"],title:{textStyle:{fontWeight:"normal",color:"#27727B"}},dataRange:{x:"right",y:"center",itemWidth:5,itemHeight:25,color:["#C1232B","#FCCE10"]},toolbox:{color:["#C1232B","#B5C334","#FCCE10","#E87C25","#27727B","#FE8463","#9BCA63","#FAD860","#F3A43B","#60C0DD"],effectiveColor:"#ff4500"},tooltip:{backgroundColor:"rgba(50,50,50,0.5)",axisPointer:{type:"line",lineStyle:{color:"#27727B",type:"dashed"},crossStyle:{color:"#27727B"},shadowStyle:{color:"rgba(200,200,200,0.3)"}}},dataZoom:{dataBackgroundColor:"rgba(181,195,52,0.3)",fillerColor:"rgba(181,195,52,0.2)",handleColor:"#27727B"},grid:{borderWidth:0},categoryAxis:{axisLine:{lineStyle:{color:"#27727B"}},splitLine:{show:!1}},valueAxis:{axisLine:{show:!1},splitArea:{show:!1},splitLine:{lineStyle:{color:["#ccc"],type:"dashed"}}},polar:{axisLine:{lineStyle:{color:"#ddd"}},splitArea:{show:!0,areaStyle:{color:["rgba(250,250,250,0.2)","rgba(200,200,200,0.2)"]}},splitLine:{lineStyle:{color:"#ddd"}}},timeline:{lineStyle:{color:"#27727B"},controlStyle:{normal:{color:"#27727B"},emphasis:{color:"#27727B"}},symbol:"emptyCircle",symbolSize:3},line:{itemStyle:{normal:{borderWidth:2,borderColor:"#fff",lineStyle:{width:3}},emphasis:{borderWidth:0}},symbol:"circle",symbolSize:3.5},k:{itemStyle:{normal:{color:"#C1232B",color0:"#B5C334",lineStyle:{width:1,color:"#C1232B",color0:"#B5C334"}}}},scatter:{itemStyle:{normal:{borderWidth:1,borderColor:"rgba(200,200,200,0.5)"},emphasis:{borderWidth:0}},symbol:"star4",symbolSize:4},radar:{symbol:"emptyCircle",symbolSize:3},map:{itemStyle:{normal:{areaStyle:{color:"#ddd"},label:{textStyle:{color:"#C1232B"}}},emphasis:{areaStyle:{color:"#fe994e"},label:{textStyle:{color:"rgb(100,0,0)"}}}}},force:{itemStyle:{normal:{linkStyle:{color:"#27727B"}}}},chord:{itemStyle:{normal:{borderWidth:1,borderColor:"rgba(128, 128, 128, 0.5)",chordStyle:{lineStyle:{color:"rgba(128, 128, 128, 0.5)"}}},emphasis:{borderWidth:1,borderColor:"rgba(128, 128, 128, 0.5)",chordStyle:{lineStyle:{color:"rgba(128, 128, 128, 0.5)"}}}}},gauge:{center:["50%","80%"],radius:"100%",startAngle:180,endAngle:0,axisLine:{show:!0,lineStyle:{color:[[.2,"#B5C334"],[.8,"#27727B"],[1,"#C1232B"]],width:"40%"}},axisTick:{splitNumber:2,length:5,lineStyle:{color:"#fff"}},axisLabel:{textStyle:{color:"#fff",fontWeight:"bolder"}},splitLine:{length:"5%",lineStyle:{color:"#fff"}},pointer:{width:"40%",length:"80%",color:"#fff"},title:{offsetCenter:[0,-20],textStyle:{color:"auto",fontSize:20}},detail:{offsetCenter:[0,0],textStyle:{color:"auto",fontSize:40}}},textStyle:{fontFamily:"微软雅黑, Arial, Verdana, sans-serif"}};return a}),define("zrender/dep/excanvas",["require"],function(){return document.createElement("canvas").getContext?G_vmlCanvasManager=!1:function(){function a(){return this.context_||(this.context_=new u(this))}function b(a,b){var c=O.call(arguments,2);return function(){return a.apply(b,c.concat(O.call(arguments)))}}function c(a){return(a+"").replace(/&/g,"&amp;").replace(/"/g,"&quot;")}function d(a,b,c){a.namespaces[b]||a.namespaces.add(b,c,"#default#VML")}function e(a){if(d(a,"g_vml_","urn:schemas-microsoft-com:vml"),d(a,"g_o_","urn:schemas-microsoft-com:office:office"),!a.styleSheets.ex_canvas_){var b=a.createStyleSheet();b.owningElement.id="ex_canvas_",b.cssText="canvas{display:inline-block;overflow:hidden;text-align:left;width:300px;height:150px}"}}function f(a){var b=a.srcElement;switch(a.propertyName){case"width":b.getContext().clearRect(),b.style.width=b.attributes.width.nodeValue+"px",b.firstChild.style.width=b.clientWidth+"px";break;case"height":b.getContext().clearRect(),b.style.height=b.attributes.height.nodeValue+"px",b.firstChild.style.height=b.clientHeight+"px"}}function g(a){var b=a.srcElement;b.firstChild&&(b.firstChild.style.width=b.clientWidth+"px",b.firstChild.style.height=b.clientHeight+"px")}function h(){return[[1,0,0],[0,1,0],[0,0,1]]}function i(a,b){for(var c=h(),d=0;3>d;d++)for(var e=0;3>e;e++){for(var f=0,g=0;3>g;g++)f+=a[d][g]*b[g][e];c[d][e]=f}return c}function j(a,b){b.fillStyle=a.fillStyle,b.lineCap=a.lineCap,b.lineJoin=a.lineJoin,b.lineWidth=a.lineWidth,b.miterLimit=a.miterLimit,b.shadowBlur=a.shadowBlur,b.shadowColor=a.shadowColor,b.shadowOffsetX=a.shadowOffsetX,b.shadowOffsetY=a.shadowOffsetY,b.strokeStyle=a.strokeStyle,b.globalAlpha=a.globalAlpha,b.font=a.font,b.textAlign=a.textAlign,b.textBaseline=a.textBaseline,b.scaleX_=a.scaleX_,b.scaleY_=a.scaleY_,b.lineScale_=a.lineScale_}function k(a){var b=a.indexOf("(",3),c=a.indexOf(")",b+1),d=a.substring(b+1,c).split(",");return(4!=d.length||"a"!=a.charAt(3))&&(d[3]=1),d}function l(a){return parseFloat(a)/100}function m(a,b,c){return Math.min(c,Math.max(b,a))}function n(a){var b,c,d,e,f,g;if(e=parseFloat(a[0])/360%360,0>e&&e++,f=m(l(a[1]),0,1),g=m(l(a[2]),0,1),0==f)b=c=d=g;else{var h=.5>g?g*(1+f):g+f-g*f,i=2*g-h;b=o(i,h,e+1/3),c=o(i,h,e),d=o(i,h,e-1/3)}return"#"+Q[Math.floor(255*b)]+Q[Math.floor(255*c)]+Q[Math.floor(255*d)]}function o(a,b,c){return 0>c&&c++,c>1&&c--,1>6*c?a+6*(b-a)*c:1>2*c?b:2>3*c?a+6*(b-a)*(2/3-c):a}function p(a){if(a in U)return U[a];var b,c=1;if(a+="","#"==a.charAt(0))b=a;else if(/^rgb/.test(a)){for(var d,e=k(a),b="#",f=0;3>f;f++)d=-1!=e[f].indexOf("%")?Math.floor(255*l(e[f])):+e[f],b+=Q[m(d,0,255)];c=+e[3]}else if(/^hsl/.test(a)){var e=k(a);b=n(e),c=e[3]}else b=T[a]||a;return U[a]={color:b,alpha:c}}function q(a){if(W[a])return W[a];var b,c=document.createElement("div"),d=c.style;try{d.font=a,b=d.fontFamily.split(",")[0]}catch(e){}return W[a]={style:d.fontStyle||V.style,variant:d.fontVariant||V.variant,weight:d.fontWeight||V.weight,size:d.fontSize||V.size,family:b||V.family}}function r(a,b){var c={};for(var d in a)c[d]=a[d];var e=parseFloat(b.currentStyle.fontSize),f=parseFloat(a.size);return c.size="number"==typeof a.size?a.size:-1!=a.size.indexOf("px")?f:-1!=a.size.indexOf("em")?e*f:-1!=a.size.indexOf("%")?e/100*f:-1!=a.size.indexOf("pt")?f/.75:e,c}function s(a){return a.style+" "+a.variant+" "+a.weight+" "+a.size+"px '"+a.family+"'"}function t(a){return X[a]||"square"}function u(a){this.m_=h(),this.mStack_=[],this.aStack_=[],this.currentPath_=[],this.strokeStyle="#000",this.fillStyle="#000",this.lineWidth=1,this.lineJoin="miter",this.lineCap="butt",this.miterLimit=1*M,this.globalAlpha=1,this.font="12px 微软雅黑",this.textAlign="left",this.textBaseline="alphabetic",this.canvas=a;var b="width:"+a.clientWidth+"px;height:"+a.clientHeight+"px;overflow:hidden;position:absolute",c=a.ownerDocument.createElement("div");c.style.cssText=b,a.appendChild(c);var d=c.cloneNode(!1);d.style.backgroundColor="#fff",d.style.filter="alpha(opacity=0)",a.appendChild(d),this.element_=c,this.scaleX_=1,this.scaleY_=1,this.lineScale_=1}function v(a,b,c,d){a.currentPath_.push({type:"bezierCurveTo",cp1x:b.x,cp1y:b.y,cp2x:c.x,cp2y:c.y,x:d.x,y:d.y}),a.currentX_=d.x,a.currentY_=d.y}function w(a,b){var c=p(a.strokeStyle),d=c.color,e=c.alpha*a.globalAlpha,f=a.lineScale_*a.lineWidth;1>f&&(e*=f),b.push("<g_vml_:stroke",' opacity="',e,'"',' joinstyle="',a.lineJoin,'"',' miterlimit="',a.miterLimit,'"',' endcap="',t(a.lineCap),'"',' weight="',f,'px"',' color="',d,'" />');
}function x(a,b,c,d){var e=a.fillStyle,f=a.scaleX_,g=a.scaleY_,h=d.x-c.x,i=d.y-c.y;if(e instanceof B){var j=0,k={x:0,y:0},l=0,m=1;if("gradient"==e.type_){var n=e.x0_/f,o=e.y0_/g,q=e.x1_/f,r=e.y1_/g,s=y(a,n,o),t=y(a,q,r),u=t.x-s.x,v=t.y-s.y;j=180*Math.atan2(u,v)/Math.PI,0>j&&(j+=360),1e-6>j&&(j=0)}else{var s=y(a,e.x0_,e.y0_);k={x:(s.x-c.x)/h,y:(s.y-c.y)/i},h/=f*M,i/=g*M;var w=G.max(h,i);l=2*e.r0_/w,m=2*e.r1_/w-l}var x=e.colors_;x.sort(function(a,b){return a.offset-b.offset});for(var z=x.length,A=x[0].color,D=x[z-1].color,E=x[0].alpha*a.globalAlpha,F=x[z-1].alpha*a.globalAlpha,H=[],I=0;z>I;I++){var J=x[I];H.push(J.offset*m+l+" "+J.color)}b.push('<g_vml_:fill type="',e.type_,'"',' method="none" focus="100%"',' color="',A,'"',' color2="',D,'"',' colors="',H.join(","),'"',' opacity="',F,'"',' g_o_:opacity2="',E,'"',' angle="',j,'"',' focusposition="',k.x,",",k.y,'" />')}else if(e instanceof C){if(h&&i){var K=-c.x,L=-c.y;b.push("<g_vml_:fill",' position="',K/h*f*f,",",L/i*g*g,'"',' type="tile"',' src="',e.src_,'" />')}}else{var N=p(a.fillStyle),O=N.color,P=N.alpha*a.globalAlpha;b.push('<g_vml_:fill color="',O,'" opacity="',P,'" />')}}function y(a,b,c){var d=a.m_;return{x:M*(b*d[0][0]+c*d[1][0]+d[2][0])-N,y:M*(b*d[0][1]+c*d[1][1]+d[2][1])-N}}function z(a){return isFinite(a[0][0])&&isFinite(a[0][1])&&isFinite(a[1][0])&&isFinite(a[1][1])&&isFinite(a[2][0])&&isFinite(a[2][1])}function A(a,b,c){if(z(b)&&(a.m_=b,a.scaleX_=Math.sqrt(b[0][0]*b[0][0]+b[0][1]*b[0][1]),a.scaleY_=Math.sqrt(b[1][0]*b[1][0]+b[1][1]*b[1][1]),c)){var d=b[0][0]*b[1][1]-b[0][1]*b[1][0];a.lineScale_=L(K(d))}}function B(a){this.type_=a,this.x0_=0,this.y0_=0,this.r0_=0,this.x1_=0,this.y1_=0,this.r1_=0,this.colors_=[]}function C(a,b){switch(E(a),b){case"repeat":case null:case"":this.repetition_="repeat";break;case"repeat-x":case"repeat-y":case"no-repeat":this.repetition_=b;break;default:D("SYNTAX_ERR")}this.src_=a.src,this.width_=a.width,this.height_=a.height}function D(a){throw new F(a)}function E(a){a&&1==a.nodeType&&"IMG"==a.tagName||D("TYPE_MISMATCH_ERR"),"complete"!=a.readyState&&D("INVALID_STATE_ERR")}function F(a){this.code=this[a],this.message=a+": DOM Exception "+this.code}var G=Math,H=G.round,I=G.sin,J=G.cos,K=G.abs,L=G.sqrt,M=10,N=M/2;+navigator.userAgent.match(/MSIE ([\d.]+)?/)[1];var O=Array.prototype.slice;e(document);var P={init:function(a){var c=a||document;c.createElement("canvas"),c.attachEvent("onreadystatechange",b(this.init_,this,c))},init_:function(a){for(var b=a.getElementsByTagName("canvas"),c=0;b.length>c;c++)this.initElement(b[c])},initElement:function(b){if(!b.getContext){b.getContext=a,e(b.ownerDocument),b.innerHTML="",b.attachEvent("onpropertychange",f),b.attachEvent("onresize",g);var c=b.attributes;c.width&&c.width.specified?b.style.width=c.width.nodeValue+"px":b.width=b.clientWidth,c.height&&c.height.specified?b.style.height=c.height.nodeValue+"px":b.height=b.clientHeight}return b}};P.init();for(var Q=[],R=0;16>R;R++)for(var S=0;16>S;S++)Q[16*R+S]=R.toString(16)+S.toString(16);var T={aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000000",blanchedalmond:"#FFEBCD",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#00FFFF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgreen:"#006400",darkgrey:"#A9A9A9",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",grey:"#808080",greenyellow:"#ADFF2F",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgreen:"#90EE90",lightgrey:"#D3D3D3",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#FF00FF",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",oldlace:"#FDF5E6",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",whitesmoke:"#F5F5F5",yellowgreen:"#9ACD32"},U={},V={style:"normal",variant:"normal",weight:"normal",size:12,family:"微软雅黑"},W={},X={butt:"flat",round:"round"},Y=u.prototype;Y.clearRect=function(){this.textMeasureEl_&&(this.textMeasureEl_.removeNode(!0),this.textMeasureEl_=null),this.element_.innerHTML=""},Y.beginPath=function(){this.currentPath_=[]},Y.moveTo=function(a,b){var c=y(this,a,b);this.currentPath_.push({type:"moveTo",x:c.x,y:c.y}),this.currentX_=c.x,this.currentY_=c.y},Y.lineTo=function(a,b){var c=y(this,a,b);this.currentPath_.push({type:"lineTo",x:c.x,y:c.y}),this.currentX_=c.x,this.currentY_=c.y},Y.bezierCurveTo=function(a,b,c,d,e,f){var g=y(this,e,f),h=y(this,a,b),i=y(this,c,d);v(this,h,i,g)},Y.quadraticCurveTo=function(a,b,c,d){var e=y(this,a,b),f=y(this,c,d),g={x:this.currentX_+2/3*(e.x-this.currentX_),y:this.currentY_+2/3*(e.y-this.currentY_)},h={x:g.x+(f.x-this.currentX_)/3,y:g.y+(f.y-this.currentY_)/3};v(this,g,h,f)},Y.arc=function(a,b,c,d,e,f){c*=M;var g=f?"at":"wa",h=a+J(d)*c-N,i=b+I(d)*c-N,j=a+J(e)*c-N,k=b+I(e)*c-N;h!=j||f||(h+=.125);var l=y(this,a,b),m=y(this,h,i),n=y(this,j,k);this.currentPath_.push({type:g,x:l.x,y:l.y,radius:c,xStart:m.x,yStart:m.y,xEnd:n.x,yEnd:n.y})},Y.rect=function(a,b,c,d){this.moveTo(a,b),this.lineTo(a+c,b),this.lineTo(a+c,b+d),this.lineTo(a,b+d),this.closePath()},Y.strokeRect=function(a,b,c,d){var e=this.currentPath_;this.beginPath(),this.moveTo(a,b),this.lineTo(a+c,b),this.lineTo(a+c,b+d),this.lineTo(a,b+d),this.closePath(),this.stroke(),this.currentPath_=e},Y.fillRect=function(a,b,c,d){var e=this.currentPath_;this.beginPath(),this.moveTo(a,b),this.lineTo(a+c,b),this.lineTo(a+c,b+d),this.lineTo(a,b+d),this.closePath(),this.fill(),this.currentPath_=e},Y.createLinearGradient=function(a,b,c,d){var e=new B("gradient");return e.x0_=a,e.y0_=b,e.x1_=c,e.y1_=d,e},Y.createRadialGradient=function(a,b,c,d,e,f){var g=new B("gradientradial");return g.x0_=a,g.y0_=b,g.r0_=c,g.x1_=d,g.y1_=e,g.r1_=f,g},Y.drawImage=function(a){var b,c,d,e,f,g,h,i,j=a.runtimeStyle.width,k=a.runtimeStyle.height;a.runtimeStyle.width="auto",a.runtimeStyle.height="auto";var l=a.width,m=a.height;if(a.runtimeStyle.width=j,a.runtimeStyle.height=k,3==arguments.length)b=arguments[1],c=arguments[2],f=g=0,h=d=l,i=e=m;else if(5==arguments.length)b=arguments[1],c=arguments[2],d=arguments[3],e=arguments[4],f=g=0,h=l,i=m;else{if(9!=arguments.length)throw Error("Invalid number of arguments");f=arguments[1],g=arguments[2],h=arguments[3],i=arguments[4],b=arguments[5],c=arguments[6],d=arguments[7],e=arguments[8]}var n=y(this,b,c),o=[],p=10,q=10,r=t=1;if(o.push(" <g_vml_:group",' coordsize="',M*p,",",M*q,'"',' coordorigin="0,0"',' style="width:',p,"px;height:",q,"px;position:absolute;"),1!=this.m_[0][0]||this.m_[0][1]||1!=this.m_[1][1]||this.m_[1][0]){var s=[],r=this.scaleX_,t=this.scaleY_;s.push("M11=",this.m_[0][0]/r,",","M12=",this.m_[1][0]/t,",","M21=",this.m_[0][1]/r,",","M22=",this.m_[1][1]/t,",","Dx=",H(n.x/M),",","Dy=",H(n.y/M),"");var u=n,v=y(this,b+d,c),w=y(this,b,c+e),x=y(this,b+d,c+e);u.x=G.max(u.x,v.x,w.x,x.x),u.y=G.max(u.y,v.y,w.y,x.y),o.push("padding:0 ",H(u.x/M),"px ",H(u.y/M),"px 0;filter:progid:DXImageTransform.Microsoft.Matrix(",s.join(""),", SizingMethod='clip');")}else o.push("top:",H(n.y/M),"px;left:",H(n.x/M),"px;");o.push(' ">'),(f||g)&&o.push('<div style="overflow: hidden; width:',Math.ceil((d+f*d/h)*r),"px;"," height:",Math.ceil((e+g*e/i)*t),"px;"," filter:progid:DxImageTransform.Microsoft.Matrix(Dx=",-f*d/h*r,",Dy=",-g*e/i*t,');">'),o.push('<div style="width:',Math.round(r*l*d/h),"px;"," height:",Math.round(t*m*e/i),"px;"," filter:"),1>this.globalAlpha&&o.push(" progid:DXImageTransform.Microsoft.Alpha(opacity="+100*this.globalAlpha+")"),o.push(" progid:DXImageTransform.Microsoft.AlphaImageLoader(src=",a.src,',sizingMethod=scale)">'),(f||g)&&o.push("</div>"),o.push("</div></div>"),this.element_.insertAdjacentHTML("BeforeEnd",o.join(""))},Y.stroke=function(a){var b=[],c=10,d=10;b.push("<g_vml_:shape",' filled="',!!a,'"',' style="position:absolute;width:',c,"px;height:",d,'px;"',' coordorigin="0,0"',' coordsize="',M*c,",",M*d,'"',' stroked="',!a,'"',' path="');for(var e={x:null,y:null},f={x:null,y:null},g=0;this.currentPath_.length>g;g++){var h,i=this.currentPath_[g];switch(i.type){case"moveTo":h=i,b.push(" m ",H(i.x),",",H(i.y));break;case"lineTo":b.push(" l ",H(i.x),",",H(i.y));break;case"close":b.push(" x "),i=null;break;case"bezierCurveTo":b.push(" c ",H(i.cp1x),",",H(i.cp1y),",",H(i.cp2x),",",H(i.cp2y),",",H(i.x),",",H(i.y));break;case"at":case"wa":b.push(" ",i.type," ",H(i.x-this.scaleX_*i.radius),",",H(i.y-this.scaleY_*i.radius)," ",H(i.x+this.scaleX_*i.radius),",",H(i.y+this.scaleY_*i.radius)," ",H(i.xStart),",",H(i.yStart)," ",H(i.xEnd),",",H(i.yEnd))}i&&((null==e.x||i.x<e.x)&&(e.x=i.x),(null==f.x||i.x>f.x)&&(f.x=i.x),(null==e.y||i.y<e.y)&&(e.y=i.y),(null==f.y||i.y>f.y)&&(f.y=i.y))}b.push(' ">'),a?x(this,b,e,f):w(this,b),b.push("</g_vml_:shape>"),this.element_.insertAdjacentHTML("beforeEnd",b.join(""))},Y.fill=function(){this.stroke(!0)},Y.closePath=function(){this.currentPath_.push({type:"close"})},Y.save=function(){var a={};j(this,a),this.aStack_.push(a),this.mStack_.push(this.m_),this.m_=i(h(),this.m_)},Y.restore=function(){this.aStack_.length&&(j(this.aStack_.pop(),this),this.m_=this.mStack_.pop())},Y.translate=function(a,b){var c=[[1,0,0],[0,1,0],[a,b,1]];A(this,i(c,this.m_),!1)},Y.rotate=function(a){var b=J(a),c=I(a),d=[[b,c,0],[-c,b,0],[0,0,1]];A(this,i(d,this.m_),!1)},Y.scale=function(a,b){var c=[[a,0,0],[0,b,0],[0,0,1]];A(this,i(c,this.m_),!0)},Y.transform=function(a,b,c,d,e,f){var g=[[a,b,0],[c,d,0],[e,f,1]];A(this,i(g,this.m_),!0)},Y.setTransform=function(a,b,c,d,e,f){var g=[[a,b,0],[c,d,0],[e,f,1]];A(this,g,!0)},Y.drawText_=function(a,b,d,e,f){var g=this.m_,h=1e3,i=0,j=h,k={x:0,y:0},l=[],m=r(q(this.font),this.element_),n=s(m),o=this.element_.currentStyle,p=this.textAlign.toLowerCase();switch(p){case"left":case"center":case"right":break;case"end":p="ltr"==o.direction?"right":"left";break;case"start":p="rtl"==o.direction?"right":"left";break;default:p="left"}switch(this.textBaseline){case"hanging":case"top":k.y=m.size/1.75;break;case"middle":break;default:case null:case"alphabetic":case"ideographic":case"bottom":k.y=-m.size/2.25}switch(p){case"right":i=h,j=.05;break;case"center":i=j=h/2}var t=y(this,b+k.x,d+k.y);l.push('<g_vml_:line from="',-i,' 0" to="',j,' 0.05" ',' coordsize="100 100" coordorigin="0 0"',' filled="',!f,'" stroked="',!!f,'" style="position:absolute;width:1px;height:1px;">'),f?w(this,l):x(this,l,{x:-i,y:0},{x:j,y:m.size});var u=g[0][0].toFixed(3)+","+g[1][0].toFixed(3)+","+g[0][1].toFixed(3)+","+g[1][1].toFixed(3)+",0,0",v=H(t.x/M)+","+H(t.y/M);l.push('<g_vml_:skew on="t" matrix="',u,'" ',' offset="',v,'" origin="',i,' 0" />','<g_vml_:path textpathok="true" />','<g_vml_:textpath on="true" string="',c(a),'" style="v-text-align:',p,";font:",c(n),'" /></g_vml_:line>'),this.element_.insertAdjacentHTML("beforeEnd",l.join(""))},Y.fillText=function(a,b,c,d){this.drawText_(a,b,c,d,!1)},Y.strokeText=function(a,b,c,d){this.drawText_(a,b,c,d,!0)},Y.measureText=function(a){if(!this.textMeasureEl_){var b='<span style="position:absolute;top:-20000px;left:0;padding:0;margin:0;border:none;white-space:pre;"></span>';this.element_.insertAdjacentHTML("beforeEnd",b),this.textMeasureEl_=this.element_.lastChild}var c=this.element_.ownerDocument;this.textMeasureEl_.innerHTML="";try{this.textMeasureEl_.style.font=this.font}catch(d){}return this.textMeasureEl_.appendChild(c.createTextNode(a)),{width:this.textMeasureEl_.offsetWidth}},Y.clip=function(){},Y.arcTo=function(){},Y.createPattern=function(a,b){return new C(a,b)},B.prototype.addColorStop=function(a,b){b=p(b),this.colors_.push({offset:a,color:b.color,alpha:b.alpha})};var Z=F.prototype=Error();Z.INDEX_SIZE_ERR=1,Z.DOMSTRING_SIZE_ERR=2,Z.HIERARCHY_REQUEST_ERR=3,Z.WRONG_DOCUMENT_ERR=4,Z.INVALID_CHARACTER_ERR=5,Z.NO_DATA_ALLOWED_ERR=6,Z.NO_MODIFICATION_ALLOWED_ERR=7,Z.NOT_FOUND_ERR=8,Z.NOT_SUPPORTED_ERR=9,Z.INUSE_ATTRIBUTE_ERR=10,Z.INVALID_STATE_ERR=11,Z.SYNTAX_ERR=12,Z.INVALID_MODIFICATION_ERR=13,Z.NAMESPACE_ERR=14,Z.INVALID_ACCESS_ERR=15,Z.VALIDATION_ERR=16,Z.TYPE_MISMATCH_ERR=17,G_vmlCanvasManager=P,CanvasRenderingContext2D=u,CanvasGradient=B,CanvasPattern=C,DOMException=F}(),G_vmlCanvasManager}),define("zrender/mixin/Eventful",["require"],function(){var a=function(){this._handlers={}};return a.prototype.one=function(a,b,c){var d=this._handlers;return b&&a?(d[a]||(d[a]=[]),d[a].push({h:b,one:!0,ctx:c||this}),this):this},a.prototype.bind=function(a,b,c){var d=this._handlers;return b&&a?(d[a]||(d[a]=[]),d[a].push({h:b,one:!1,ctx:c||this}),this):this},a.prototype.unbind=function(a,b){var c=this._handlers;if(!a)return this._handlers={},this;if(b){if(c[a]){for(var d=[],e=0,f=c[a].length;f>e;e++)c[a][e].h!=b&&d.push(c[a][e]);c[a]=d}c[a]&&0===c[a].length&&delete c[a]}else delete c[a];return this},a.prototype.dispatch=function(a){if(this._handlers[a]){var b=arguments,c=b.length;c>3&&(b=Array.prototype.slice.call(b,1));for(var d=this._handlers[a],e=d.length,f=0;e>f;){switch(c){case 1:d[f].h.call(d[f].ctx);break;case 2:d[f].h.call(d[f].ctx,b[1]);break;case 3:d[f].h.call(d[f].ctx,b[1],b[2]);break;default:d[f].h.apply(d[f].ctx,b)}d[f].one?(d.splice(f,1),e--):f++}}return this},a.prototype.dispatchWithContext=function(a){if(this._handlers[a]){var b=arguments,c=b.length;c>4&&(b=Array.prototype.slice.call(b,1,b.length-1));for(var d=b[b.length-1],e=this._handlers[a],f=e.length,g=0;f>g;){switch(c){case 1:e[g].h.call(d);break;case 2:e[g].h.call(d,b[1]);break;case 3:e[g].h.call(d,b[1],b[2]);break;default:e[g].h.apply(d,b)}e[g].one?(e.splice(g,1),f--):g++}}return this},a}),define("zrender/tool/log",["require","../config"],function(a){var b=a("../config");return function(){if(0!==b.debugMode)if(1==b.debugMode)for(var a in arguments)throw Error(arguments[a]);else if(b.debugMode>1)for(var a in arguments)console.log(arguments[a])}}),define("zrender/tool/guid",[],function(){var a=2311;return function(){return"zrender__"+a++}}),define("zrender/Handler",["require","./config","./tool/env","./tool/event","./tool/util","./tool/vector","./tool/matrix","./mixin/Eventful"],function(a){"use strict";function b(a,b){return function(c){return a.call(b,c)}}function c(a,b){return function(c,d,e){return a.call(b,c,d,e)}}function d(a){for(var c=n.length;c--;){var d=n[c];a["_"+d+"Handler"]=b(o[d],a)}}function e(a,b,c){if(this._draggingTarget&&this._draggingTarget.id==a.id||a.isSilent())return!1;var d=this._event;if(a.isCover(b,c)){a.hoverable&&this.storage.addHover(a);for(var e=a.parent;e;){if(e.clipShape&&!e.clipShape.isCover(this._mouseX,this._mouseY))return!1;e=e.parent}return this._lastHover!=a&&(this._processOutShape(d),this._processDragLeave(d),this._lastHover=a,this._processDragEnter(d)),this._processOverShape(d),this._processDragOver(d),this._hasfound=1,!0}return!1}var f=a("./config"),g=a("./tool/env"),h=a("./tool/event"),i=a("./tool/util"),j=a("./tool/vector"),k=a("./tool/matrix"),l=f.EVENT,m=a("./mixin/Eventful"),n=["resize","click","dblclick","mousewheel","mousemove","mouseout","mouseup","mousedown","touchstart","touchend","touchmove"],o={resize:function(a){a=a||window.event,this._lastHover=null,this._isMouseDown=0,this.dispatch(l.RESIZE,a)},click:function(a){a=this._zrenderEventFixed(a);var b=this._lastHover;(b&&b.clickable||!b)&&5>this._clickThreshold&&this._dispatchAgency(b,l.CLICK,a),this._mousemoveHandler(a)},dblclick:function(a){a=a||window.event,a=this._zrenderEventFixed(a);var b=this._lastHover;(b&&b.clickable||!b)&&5>this._clickThreshold&&this._dispatchAgency(b,l.DBLCLICK,a),this._mousemoveHandler(a)},mousewheel:function(a){a=this._zrenderEventFixed(a);var b=a.wheelDelta||-a.detail,c=b>0?1.1:1/1.1,d=!1,e=this._mouseX,f=this._mouseY;this.painter.eachBuildinLayer(function(b){var g=b.position;if(b.zoomable){b.__zoom=b.__zoom||1;var i=b.__zoom;i*=c,i=Math.max(Math.min(b.maxZoom,i),b.minZoom),c=i/b.__zoom,b.__zoom=i,g[0]-=(e-g[0])*(c-1),g[1]-=(f-g[1])*(c-1),b.scale[0]*=c,b.scale[1]*=c,b.dirty=!0,d=!0,h.stop(a)}}),d&&this.painter.refresh(),this._dispatchAgency(this._lastHover,l.MOUSEWHEEL,a),this._mousemoveHandler(a)},mousemove:function(a){if(!this.painter.isLoading()){a=this._zrenderEventFixed(a),this._lastX=this._mouseX,this._lastY=this._mouseY,this._mouseX=h.getX(a),this._mouseY=h.getY(a);var b=this._mouseX-this._lastX,c=this._mouseY-this._lastY;this._processDragStart(a),this._hasfound=0,this._event=a,this._iterateAndFindHover(),this._hasfound||((!this._draggingTarget||this._lastHover&&this._lastHover!=this._draggingTarget)&&(this._processOutShape(a),this._processDragLeave(a)),this._lastHover=null,this.storage.delHover(),this.painter.clearHover());var d="default";if(this._draggingTarget)this.storage.drift(this._draggingTarget.id,b,c),this._draggingTarget.modSelf(),this.storage.addHover(this._draggingTarget),this._clickThreshold++;else if(this._isMouseDown){var e=!1;this.painter.eachBuildinLayer(function(a){a.panable&&(d="move",a.position[0]+=b,a.position[1]+=c,e=!0,a.dirty=!0)}),e&&this.painter.refresh()}this._draggingTarget||this._hasfound&&this._lastHover.draggable?d="move":this._hasfound&&this._lastHover.clickable&&(d="pointer"),this.root.style.cursor=d,this._dispatchAgency(this._lastHover,l.MOUSEMOVE,a),(this._draggingTarget||this._hasfound||this.storage.hasHoverShape())&&this.painter.refreshHover()}},mouseout:function(a){a=this._zrenderEventFixed(a);var b=a.toElement||a.relatedTarget;if(b!=this.root)for(;b&&9!=b.nodeType;){if(b==this.root)return void this._mousemoveHandler(a);b=b.parentNode}a.zrenderX=this._lastX,a.zrenderY=this._lastY,this.root.style.cursor="default",this._isMouseDown=0,this._processOutShape(a),this._processDrop(a),this._processDragEnd(a),this.painter.isLoading()||this.painter.refreshHover(),this.dispatch(l.GLOBALOUT,a)},mousedown:function(a){return this._clickThreshold=0,2==this._lastDownButton?(this._lastDownButton=a.button,void(this._mouseDownTarget=null)):(this._lastMouseDownMoment=new Date,a=this._zrenderEventFixed(a),this._isMouseDown=1,this._mouseDownTarget=this._lastHover,this._dispatchAgency(this._lastHover,l.MOUSEDOWN,a),void(this._lastDownButton=a.button))},mouseup:function(a){a=this._zrenderEventFixed(a),this.root.style.cursor="default",this._isMouseDown=0,this._mouseDownTarget=null,this._dispatchAgency(this._lastHover,l.MOUSEUP,a),this._processDrop(a),this._processDragEnd(a)},touchstart:function(a){a=this._zrenderEventFixed(a,!0),this._lastTouchMoment=new Date,this._mobileFindFixed(a),this._mousedownHandler(a)},touchmove:function(a){a=this._zrenderEventFixed(a,!0),this._mousemoveHandler(a),this._isDragging&&h.stop(a)},touchend:function(a){a=this._zrenderEventFixed(a,!0),this._mouseupHandler(a);var b=new Date;b-this._lastTouchMoment<l.touchClickDelay&&(this._mobileFindFixed(a),this._clickHandler(a),b-this._lastClickMoment<l.touchClickDelay/2&&(this._dblclickHandler(a),this._lastHover&&this._lastHover.clickable&&h.stop(a)),this._lastClickMoment=b),this.painter.clearHover()}},p=function(a,b,f){m.call(this),this.root=a,this.storage=b,this.painter=f,this._lastX=this._lastY=this._mouseX=this._mouseY=0,this._findHover=c(e,this),this._domHover=f.getDomHover(),d(this),window.addEventListener?(window.addEventListener("resize",this._resizeHandler),g.os.tablet||g.os.phone?(a.addEventListener("touchstart",this._touchstartHandler),a.addEventListener("touchmove",this._touchmoveHandler),a.addEventListener("touchend",this._touchendHandler)):(a.addEventListener("click",this._clickHandler),a.addEventListener("dblclick",this._dblclickHandler),a.addEventListener("mousewheel",this._mousewheelHandler),a.addEventListener("mousemove",this._mousemoveHandler),a.addEventListener("mousedown",this._mousedownHandler),a.addEventListener("mouseup",this._mouseupHandler)),a.addEventListener("DOMMouseScroll",this._mousewheelHandler),a.addEventListener("mouseout",this._mouseoutHandler)):(window.attachEvent("onresize",this._resizeHandler),a.attachEvent("onclick",this._clickHandler),a.ondblclick=this._dblclickHandler,a.attachEvent("onmousewheel",this._mousewheelHandler),a.attachEvent("onmousemove",this._mousemoveHandler),a.attachEvent("onmouseout",this._mouseoutHandler),a.attachEvent("onmousedown",this._mousedownHandler),a.attachEvent("onmouseup",this._mouseupHandler))};p.prototype.on=function(a,b,c){return this.bind(a,b,c),this},p.prototype.un=function(a,b){return this.unbind(a,b),this},p.prototype.trigger=function(a,b){switch(a){case l.RESIZE:case l.CLICK:case l.DBLCLICK:case l.MOUSEWHEEL:case l.MOUSEMOVE:case l.MOUSEDOWN:case l.MOUSEUP:case l.MOUSEOUT:this["_"+a+"Handler"](b)}},p.prototype.dispose=function(){var a=this.root;window.removeEventListener?(window.removeEventListener("resize",this._resizeHandler),g.os.tablet||g.os.phone?(a.removeEventListener("touchstart",this._touchstartHandler),a.removeEventListener("touchmove",this._touchmoveHandler),a.removeEventListener("touchend",this._touchendHandler)):(a.removeEventListener("click",this._clickHandler),a.removeEventListener("dblclick",this._dblclickHandler),a.removeEventListener("mousewheel",this._mousewheelHandler),a.removeEventListener("mousemove",this._mousemoveHandler),a.removeEventListener("mousedown",this._mousedownHandler),a.removeEventListener("mouseup",this._mouseupHandler)),a.removeEventListener("DOMMouseScroll",this._mousewheelHandler),a.removeEventListener("mouseout",this._mouseoutHandler)):(window.detachEvent("onresize",this._resizeHandler),a.detachEvent("onclick",this._clickHandler),a.detachEvent("dblclick",this._dblclickHandler),a.detachEvent("onmousewheel",this._mousewheelHandler),a.detachEvent("onmousemove",this._mousemoveHandler),a.detachEvent("onmouseout",this._mouseoutHandler),a.detachEvent("onmousedown",this._mousedownHandler),a.detachEvent("onmouseup",this._mouseupHandler)),this.root=this._domHover=this.storage=this.painter=null,this.un()},p.prototype._processDragStart=function(a){var b=this._lastHover;if(this._isMouseDown&&b&&b.draggable&&!this._draggingTarget&&this._mouseDownTarget==b){if(b.dragEnableTime&&new Date-this._lastMouseDownMoment<b.dragEnableTime)return;var c=b;this._draggingTarget=c,this._isDragging=1,c.invisible=!0,this.storage.mod(c.id),this._dispatchAgency(c,l.DRAGSTART,a),this.painter.refresh()}},p.prototype._processDragEnter=function(a){this._draggingTarget&&this._dispatchAgency(this._lastHover,l.DRAGENTER,a,this._draggingTarget)},p.prototype._processDragOver=function(a){this._draggingTarget&&this._dispatchAgency(this._lastHover,l.DRAGOVER,a,this._draggingTarget)},p.prototype._processDragLeave=function(a){this._draggingTarget&&this._dispatchAgency(this._lastHover,l.DRAGLEAVE,a,this._draggingTarget)},p.prototype._processDrop=function(a){this._draggingTarget&&(this._draggingTarget.invisible=!1,this.storage.mod(this._draggingTarget.id),this.painter.refresh(),this._dispatchAgency(this._lastHover,l.DROP,a,this._draggingTarget))},p.prototype._processDragEnd=function(a){this._draggingTarget&&(this._dispatchAgency(this._draggingTarget,l.DRAGEND,a),this._lastHover=null),this._isDragging=0,this._draggingTarget=null},p.prototype._processOverShape=function(a){this._dispatchAgency(this._lastHover,l.MOUSEOVER,a)},p.prototype._processOutShape=function(a){this._dispatchAgency(this._lastHover,l.MOUSEOUT,a)},p.prototype._dispatchAgency=function(a,b,c,d){var e="on"+b,f={type:b,event:c,target:a,cancelBubble:!1},g=a;for(d&&(f.dragged=d);g&&(g[e]&&(f.cancelBubble=g[e](f)),g.dispatch(b,f),g=g.parent,!f.cancelBubble););if(a)f.cancelBubble||this.dispatch(b,f);else if(!d){var h={type:b,event:c};this.dispatch(b,h),this.painter.eachOtherLayer(function(a){"function"==typeof a[e]&&a[e](h),a.dispatch&&a.dispatch(b,h)})}},p.prototype._iterateAndFindHover=function(){var a=k.create();return function(){for(var b,c,d=this.storage.getShapeList(),e=[0,0],f=d.length-1;f>=0;f--){var g=d[f];if(b!==g.zlevel&&(c=this.painter.getLayer(g.zlevel,c),e[0]=this._mouseX,e[1]=this._mouseY,c.needTransform&&(k.invert(a,c.transform),j.applyTransform(e,e,a))),this._findHover(g,e[0],e[1]))break}}}();var q=[{x:10},{x:-20},{x:10,y:10},{y:-20}];return p.prototype._mobileFindFixed=function(a){this._lastHover=null,this._mouseX=a.zrenderX,this._mouseY=a.zrenderY,this._event=a,this._iterateAndFindHover();for(var b=0;!this._lastHover&&q.length>b;b++){var c=q[b];c.x&&(this._mouseX+=c.x),c.y&&(this._mouseY+=c.y),this._iterateAndFindHover()}this._lastHover&&(a.zrenderX=this._mouseX,a.zrenderY=this._mouseY)},p.prototype._zrenderEventFixed=function(a,b){if(a.zrenderFixed)return a;if(b){var c="touchend"!=a.type?a.targetTouches[0]:a.changedTouches[0];if(c){var d=this.painter._domRoot.getBoundingClientRect();a.zrenderX=c.clientX-d.left,a.zrenderY=c.clientY-d.top}}else{a=a||window.event;var e=a.toElement||a.relatedTarget||a.srcElement||a.target;e&&e!=this._domHover&&(a.zrenderX=(void 0!==a.offsetX?a.offsetX:a.layerX)+e.offsetLeft,a.zrenderY=(void 0!==a.offsetY?a.offsetY:a.layerY)+e.offsetTop)}return a.zrenderFixed=1,a},i.merge(p.prototype,m.prototype,!0),p}),define("zrender/Painter",["require","./config","./tool/util","./tool/log","./loadingEffect/Base","./Layer","./shape/Image"],function(a){"use strict";function b(){return!1}function c(){}function d(a){return a?a.isBuildin?!0:"function"!=typeof a.resize||"function"!=typeof a.refresh?!1:!0:!1}var e=a("./config"),f=a("./tool/util"),g=a("./tool/log"),h=a("./loadingEffect/Base"),i=a("./Layer"),j=function(a,c){this.root=a,a.style["-webkit-tap-highlight-color"]="transparent",a.style["-webkit-user-select"]="none",a.style["user-select"]="none",a.style["-webkit-touch-callout"]="none",this.storage=c,a.innerHTML="",this._width=this._getWidth(),this._height=this._getHeight();var d=document.createElement("div");this._domRoot=d,d.style.position="relative",d.style.overflow="hidden",d.style.width=this._width+"px",d.style.height=this._height+"px",a.appendChild(d),this._layers={},this._zlevelList=[],this._layerConfig={},this._loadingEffect=new h({}),this.shapeToImage=this._createShapeToImageProcessor(),this._bgDom=document.createElement("div"),this._bgDom.style.cssText=["position:absolute;left:0px;top:0px;width:",this._width,"px;height:",this._height+"px;","-webkit-user-select:none;user-select;none;","-webkit-touch-callout:none;"].join(""),this._bgDom.setAttribute("data-zr-dom-id","bg"),d.appendChild(this._bgDom),this._bgDom.onselectstart=b;var e=new i("_zrender_hover_",this);this._layers.hover=e,d.appendChild(e.dom),e.initContext(),e.dom.onselectstart=b,e.dom.style["-webkit-user-select"]="none",e.dom.style["user-select"]="none",e.dom.style["-webkit-touch-callout"]="none",this.refreshNextFrame=null};return j.prototype.render=function(a){return this.isLoading()&&this.hideLoading(),this.refresh(a,!0),this},j.prototype.refresh=function(a,b){var c=this.storage.getShapeList(!0);this._paintList(c,b);for(var d=0;this._zlevelList.length>d;d++){var e=this._zlevelList[d],f=this._layers[e];!f.isBuildin&&f.refresh&&f.refresh()}return"function"==typeof a&&a(),this},j.prototype._preProcessLayer=function(a){a.unusedCount++,a.updateTransform()},j.prototype._postProcessLayer=function(a){a.dirty=!1,1==a.unusedCount&&a.clear()},j.prototype._paintList=function(a,b){void 0===b&&(b=!1),this._updateLayerStatus(a);var c,d,f;this.eachBuildinLayer(this._preProcessLayer);for(var h=0,i=a.length;i>h;h++){var j=a[h];if(d!==j.zlevel&&(c&&(c.needTransform&&f.restore(),f.flush&&f.flush()),d=j.zlevel,c=this.getLayer(d),c.isBuildin||g("ZLevel "+d+" has been used by unkown layer "+c.id),f=c.ctx,c.unusedCount=0,(c.dirty||b)&&c.clear(),c.needTransform&&(f.save(),c.setTransform(f))),(c.dirty||b)&&!j.invisible&&(!j.onbrush||j.onbrush&&!j.onbrush(f,!1)))if(e.catchBrushException)try{j.brush(f,!1,this.refreshNextFrame)}catch(k){g(k,"brush error of "+j.type,j)}else j.brush(f,!1,this.refreshNextFrame);j.__dirty=!1}c&&(c.needTransform&&f.restore(),f.flush&&f.flush()),this.eachBuildinLayer(this._postProcessLayer)},j.prototype.getLayer=function(a){var b=this._layers[a];return b||(b=new i(a,this),b.isBuildin=!0,this._layerConfig[a]&&f.merge(b,this._layerConfig[a],!0),b.updateTransform(),this.insertLayer(a,b),b.initContext()),b},j.prototype.insertLayer=function(a,b){if(this._layers[a])return void g("ZLevel "+a+" has been used already");if(!d(b))return void g("Layer of zlevel "+a+" is not valid");var c=this._zlevelList.length,e=null,f=-1;if(c>0&&a>this._zlevelList[0]){for(f=0;c-1>f&&!(a>this._zlevelList[f]&&this._zlevelList[f+1]>a);f++);e=this._layers[this._zlevelList[f]]}this._zlevelList.splice(f+1,0,a);var h=e?e.dom:this._bgDom;h.nextSibling?h.parentNode.insertBefore(b.dom,h.nextSibling):h.parentNode.appendChild(b.dom),this._layers[a]=b},j.prototype.eachLayer=function(a,b){for(var c=0;this._zlevelList.length>c;c++){var d=this._zlevelList[c];a.call(b,this._layers[d],d)}},j.prototype.eachBuildinLayer=function(a,b){for(var c=0;this._zlevelList.length>c;c++){var d=this._zlevelList[c],e=this._layers[d];e.isBuildin&&a.call(b,e,d)}},j.prototype.eachOtherLayer=function(a,b){for(var c=0;this._zlevelList.length>c;c++){var d=this._zlevelList[c],e=this._layers[d];e.isBuildin||a.call(b,e,d)}},j.prototype.getLayers=function(){return this._layers},j.prototype._updateLayerStatus=function(a){var b=this._layers,c={};this.eachBuildinLayer(function(a,b){c[b]=a.elCount,a.elCount=0});for(var d=0,e=a.length;e>d;d++){var f=a[d],g=f.zlevel,h=b[g];if(h){if(h.elCount++,h.dirty)continue;h.dirty=f.__dirty}}this.eachBuildinLayer(function(a,b){c[b]!==a.elCount&&(a.dirty=!0)})},j.prototype.refreshShapes=function(a,b){for(var c=0,d=a.length;d>c;c++){var e=a[c];e.modSelf()}return this.refresh(b),this},j.prototype.setLoadingEffect=function(a){return this._loadingEffect=a,this},j.prototype.clear=function(){return this.eachBuildinLayer(this._clearLayer),this},j.prototype._clearLayer=function(a){a.clear()},j.prototype.modLayer=function(a,b){if(b){this._layerConfig[a]?f.merge(this._layerConfig[a],b,!0):this._layerConfig[a]=b;var c=this._layers[a];c&&f.merge(c,this._layerConfig[a],!0)}},j.prototype.delLayer=function(a){var b=this._layers[a];b&&(this.modLayer(a,{position:b.position,rotation:b.rotation,scale:b.scale}),b.dom.parentNode.removeChild(b.dom),delete this._layers[a],this._zlevelList.splice(f.indexOf(this._zlevelList,a),1))},j.prototype.refreshHover=function(){this.clearHover();for(var a=this.storage.getHoverShapes(!0),b=0,c=a.length;c>b;b++)this._brushHover(a[b]);
var d=this._layers.hover.ctx;return d.flush&&d.flush(),this.storage.delHover(),this},j.prototype.clearHover=function(){var a=this._layers.hover;return a&&a.clear(),this},j.prototype.showLoading=function(a){return this._loadingEffect&&this._loadingEffect.stop(),a&&this.setLoadingEffect(a),this._loadingEffect.start(this),this.loading=!0,this},j.prototype.hideLoading=function(){return this._loadingEffect.stop(),this.clearHover(),this.loading=!1,this},j.prototype.isLoading=function(){return this.loading},j.prototype.resize=function(){var a=this._domRoot;a.style.display="none";var b=this._getWidth(),c=this._getHeight();if(a.style.display="",this._width!=b||c!=this._height){this._width=b,this._height=c,a.style.width=b+"px",a.style.height=c+"px";for(var d in this._layers)this._layers[d].resize(b,c);this.refresh(null,!0)}return this},j.prototype.clearLayer=function(a){var b=this._layers[a];b&&b.clear()},j.prototype.dispose=function(){this.isLoading()&&this.hideLoading(),this.root.innerHTML="",this.root=this.storage=this._domRoot=this._layers=null},j.prototype.getDomHover=function(){return this._layers.hover.dom},j.prototype.toDataURL=function(a,b,c){if(window.G_vmlCanvasManager)return null;var d=new i("image",this);this._bgDom.appendChild(d.dom),d.initContext();var f=d.ctx;d.clearColor=b||"#fff",d.clear();var h=this;this.storage.iterShape(function(a){if(!a.invisible&&(!a.onbrush||a.onbrush&&!a.onbrush(f,!1)))if(e.catchBrushException)try{a.brush(f,!1,h.refreshNextFrame)}catch(b){g(b,"brush error of "+a.type,a)}else a.brush(f,!1,h.refreshNextFrame)},{normal:"up",update:!0});var j=d.dom.toDataURL(a,c);return f=null,this._bgDom.removeChild(d.dom),j},j.prototype.getWidth=function(){return this._width},j.prototype.getHeight=function(){return this._height},j.prototype._getWidth=function(){var a=this.root,b=a.currentStyle||document.defaultView.getComputedStyle(a);return((a.clientWidth||parseInt(b.width,10))-parseInt(b.paddingLeft,10)-parseInt(b.paddingRight,10)).toFixed(0)-0},j.prototype._getHeight=function(){var a=this.root,b=a.currentStyle||document.defaultView.getComputedStyle(a);return((a.clientHeight||parseInt(b.height,10))-parseInt(b.paddingTop,10)-parseInt(b.paddingBottom,10)).toFixed(0)-0},j.prototype._brushHover=function(a){var b=this._layers.hover.ctx;if(!a.onbrush||a.onbrush&&!a.onbrush(b,!0)){var c=this.getLayer(a.zlevel);if(c.needTransform&&(b.save(),c.setTransform(b)),e.catchBrushException)try{a.brush(b,!0,this.refreshNextFrame)}catch(d){g(d,"hoverBrush error of "+a.type,a)}else a.brush(b,!0,this.refreshNextFrame);c.needTransform&&b.restore()}},j.prototype._shapeToImage=function(b,c,d,e,f){var g=document.createElement("canvas"),h=g.getContext("2d");g.style.width=d+"px",g.style.height=e+"px",g.setAttribute("width",d*f),g.setAttribute("height",e*f),h.clearRect(0,0,d*f,e*f);var i={position:c.position,rotation:c.rotation,scale:c.scale};c.position=[0,0,0],c.rotation=0,c.scale=[1,1],c&&c.brush(h,!1);var j=a("./shape/Image"),k=new j({id:b,style:{x:0,y:0,image:g}});return null!=i.position&&(k.position=c.position=i.position),null!=i.rotation&&(k.rotation=c.rotation=i.rotation),null!=i.scale&&(k.scale=c.scale=i.scale),k},j.prototype._createShapeToImageProcessor=function(){if(window.G_vmlCanvasManager)return c;var a=this;return function(b,c,d,f){return a._shapeToImage(b,c,d,f,e.devicePixelRatio)}},j}),define("zrender/Storage",["require","./tool/util","./Group"],function(a){"use strict";function b(a,b){return a.zlevel==b.zlevel?a.z==b.z?a.__renderidx-b.__renderidx:a.z-b.z:a.zlevel-b.zlevel}var c=a("./tool/util"),d=a("./Group"),e={hover:!1,normal:"down",update:!1},f=function(){this._elements={},this._hoverElements=[],this._roots=[],this._shapeList=[],this._shapeListOffset=0};return f.prototype.iterShape=function(a,b){if(b||(b=e),b.hover)for(var c=0,d=this._hoverElements.length;d>c;c++){var f=this._hoverElements[c];if(f.updateTransform(),a(f))return this}switch(b.update&&this.updateShapeList(),b.normal){case"down":for(var d=this._shapeList.length;d--;)if(a(this._shapeList[d]))return this;break;default:for(var c=0,d=this._shapeList.length;d>c;c++)if(a(this._shapeList[c]))return this}return this},f.prototype.getHoverShapes=function(a){for(var c=[],d=0,e=this._hoverElements.length;e>d;d++){c.push(this._hoverElements[d]);var f=this._hoverElements[d].hoverConnect;if(f){var g;f=f instanceof Array?f:[f];for(var h=0,i=f.length;i>h;h++)g=f[h].id?f[h]:this.get(f[h]),g&&c.push(g)}}if(c.sort(b),a)for(var d=0,e=c.length;e>d;d++)c[d].updateTransform();return c},f.prototype.getShapeList=function(a){return a&&this.updateShapeList(),this._shapeList},f.prototype.updateShapeList=function(){this._shapeListOffset=0;for(var a=0,c=this._roots.length;c>a;a++){var d=this._roots[a];this._updateAndAddShape(d)}this._shapeList.length=this._shapeListOffset;for(var a=0,c=this._shapeList.length;c>a;a++)this._shapeList[a].__renderidx=a;this._shapeList.sort(b)},f.prototype._updateAndAddShape=function(a,b){if(!a.ignore)if(a.updateTransform(),"group"==a.type){a.clipShape&&(a.clipShape.parent=a,a.clipShape.updateTransform(),b?(b=b.slice(),b.push(a.clipShape)):b=[a.clipShape]);for(var c=0;a._children.length>c;c++){var d=a._children[c];d.__dirty=a.__dirty||d.__dirty,this._updateAndAddShape(d,b)}a.__dirty=!1}else a.__clipShapes=b,this._shapeList[this._shapeListOffset++]=a},f.prototype.mod=function(a,b){if("string"==typeof a&&(a=this._elements[a]),a&&(a.modSelf(),b))if(b.parent||b._storage||b.__clipShapes){var d={};for(var e in b)"parent"!==e&&"_storage"!==e&&"__clipShapes"!==e&&b.hasOwnProperty(e)&&(d[e]=b[e]);c.merge(a,d,!0)}else c.merge(a,b,!0);return this},f.prototype.drift=function(a,b,c){var d=this._elements[a];return d&&(d.needTransform=!0,"horizontal"===d.draggable?c=0:"vertical"===d.draggable&&(b=0),(!d.ondrift||d.ondrift&&!d.ondrift(b,c))&&d.drift(b,c)),this},f.prototype.addHover=function(a){return a.updateNeedTransform(),this._hoverElements.push(a),this},f.prototype.delHover=function(){return this._hoverElements=[],this},f.prototype.hasHoverShape=function(){return this._hoverElements.length>0},f.prototype.addRoot=function(a){this._elements[a.id]||(a instanceof d&&a.addChildrenToStorage(this),this.addToMap(a),this._roots.push(a))},f.prototype.delRoot=function(a){if(void 0===a){for(var b=0;this._roots.length>b;b++){var e=this._roots[b];e instanceof d&&e.delChildrenFromStorage(this)}return this._elements={},this._hoverElements=[],this._roots=[],this._shapeList=[],void(this._shapeListOffset=0)}if(a instanceof Array)for(var b=0,f=a.length;f>b;b++)this.delRoot(a[b]);else{var g;g="string"==typeof a?this._elements[a]:a;var h=c.indexOf(this._roots,g);h>=0&&(this.delFromMap(g.id),this._roots.splice(h,1),g instanceof d&&g.delChildrenFromStorage(this))}},f.prototype.addToMap=function(a){return a instanceof d&&(a._storage=this),a.modSelf(),this._elements[a.id]=a,this},f.prototype.get=function(a){return this._elements[a]},f.prototype.delFromMap=function(a){var b=this._elements[a];return b&&(delete this._elements[a],b instanceof d&&(b._storage=null)),this},f.prototype.dispose=function(){this._elements=this._renderList=this._roots=this._hoverElements=null},f}),define("zrender/animation/Animation",["require","./Clip","../tool/color","../tool/util","../tool/event"],function(a){"use strict";function b(a,b){return a[b]}function c(a,b,c){a[b]=c}function d(a,b,c){return(b-a)*c+a}function e(a,b,c,e,f){var g=a.length;if(1==f)for(var h=0;g>h;h++)e[h]=d(a[h],b[h],c);else for(var i=a[0].length,h=0;g>h;h++)for(var j=0;i>j;j++)e[h][j]=d(a[h][j],b[h][j],c)}function f(a){switch(typeof a){case"undefined":case"string":return!1}return void 0!==a.length}function g(a,b,c,d,e,f,g,i,j){var k=a.length;if(1==j)for(var l=0;k>l;l++)i[l]=h(a[l],b[l],c[l],d[l],e,f,g);else for(var m=a[0].length,l=0;k>l;l++)for(var n=0;m>n;n++)i[l][n]=h(a[l][n],b[l][n],c[l][n],d[l][n],e,f,g)}function h(a,b,c,d,e,f,g){var h=.5*(c-a),i=.5*(d-b);return(2*(b-c)+h+i)*g+(-3*(b-c)-2*h-i)*f+h*e+b}function i(a){if(f(a)){var b=a.length;if(f(a[0])){for(var c=[],d=0;b>d;d++)c.push(p.call(a[d]));return c}return p.call(a)}return a}function j(a){return a[0]=Math.floor(a[0]),a[1]=Math.floor(a[1]),a[2]=Math.floor(a[2]),"rgba("+a.join(",")+")"}var k=a("./Clip"),l=a("../tool/color"),m=a("../tool/util"),n=a("../tool/event").Dispatcher,o=window.requestAnimationFrame||window.msRequestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||function(a){setTimeout(a,16)},p=Array.prototype.slice,q=function(a){a=a||{},this.stage=a.stage||{},this.onframe=a.onframe||function(){},this._clips=[],this._running=!1,this._time=0,n.call(this)};q.prototype={add:function(a){this._clips.push(a)},remove:function(a){var b=m.indexOf(this._clips,a);b>=0&&this._clips.splice(b,1)},_update:function(){for(var a=(new Date).getTime(),b=a-this._time,c=this._clips,d=c.length,e=[],f=[],g=0;d>g;g++){var h=c[g],i=h.step(a);i&&(e.push(i),f.push(h))}for(var g=0;d>g;)c[g]._needsRemove?(c[g]=c[d-1],c.pop(),d--):g++;d=e.length;for(var g=0;d>g;g++)f[g].fire(e[g]);this._time=a,this.onframe(b),this.dispatch("frame",b),this.stage.update&&this.stage.update()},start:function(){function a(){b._running&&(o(a),b._update())}var b=this;this._running=!0,this._time=(new Date).getTime(),o(a)},stop:function(){this._running=!1},clear:function(){this._clips=[]},animate:function(a,b){b=b||{};var c=new r(a,b.loop,b.getter,b.setter);return c.animation=this,c},constructor:q},m.merge(q.prototype,n.prototype,!0);var r=function(a,d,e,f){this._tracks={},this._target=a,this._loop=d||!1,this._getter=e||b,this._setter=f||c,this._clipCount=0,this._delay=0,this._doneList=[],this._onframeList=[],this._clipList=[]};return r.prototype={when:function(a,b){for(var c in b)this._tracks[c]||(this._tracks[c]=[],0!==a&&this._tracks[c].push({time:0,value:i(this._getter(this._target,c))})),this._tracks[c].push({time:parseInt(a,10),value:b[c]});return this},during:function(a){return this._onframeList.push(a),this},start:function(a){var b=this,c=this._setter,i=this._getter,m="spline"===a,n=function(){if(b._clipCount--,0===b._clipCount){b._tracks={};for(var a=b._doneList.length,c=0;a>c;c++)b._doneList[c].call(b)}},o=function(o,p){var q=o.length;if(q){var r=o[0].value,s=f(r),t=!1,u=s&&f(r[0])?2:1;o.sort(function(a,b){return a.time-b.time});var v;if(q){v=o[q-1].time;for(var w=[],x=[],y=0;q>y;y++){w.push(o[y].time/v);var z=o[y].value;"string"==typeof z&&(z=l.toArray(z),0===z.length&&(z[0]=z[1]=z[2]=0,z[3]=1),t=!0),x.push(z)}var A,y,B,C,D,E,F,G=0,H=0;if(t)var I=[0,0,0,0];var J=function(a,f){if(H>f){for(A=Math.min(G+1,q-1),y=A;y>=0&&!(f>=w[y]);y--);y=Math.min(y,q-2)}else{for(y=G;q>y&&!(w[y]>f);y++);y=Math.min(y-1,q-2)}G=y,H=f;var k=w[y+1]-w[y];if(0!==k){if(B=(f-w[y])/k,m)if(D=x[y],C=x[0===y?y:y-1],E=x[y>q-2?q-1:y+1],F=x[y>q-3?q-1:y+2],s)g(C,D,E,F,B,B*B,B*B*B,i(a,p),u);else{var l;t?(l=g(C,D,E,F,B,B*B,B*B*B,I,1),l=j(I)):l=h(C,D,E,F,B,B*B,B*B*B),c(a,p,l)}else if(s)e(x[y],x[y+1],B,i(a,p),u);else{var l;t?(e(x[y],x[y+1],B,I,1),l=j(I)):l=d(x[y],x[y+1],B),c(a,p,l)}for(y=0;b._onframeList.length>y;y++)b._onframeList[y](a,f)}},K=new k({target:b._target,life:v,loop:b._loop,delay:b._delay,onframe:J,ondestroy:n});a&&"spline"!==a&&(K.easing=a),b._clipList.push(K),b._clipCount++,b.animation.add(K)}}};for(var p in this._tracks)o(this._tracks[p],p);return this},stop:function(){for(var a=0;this._clipList.length>a;a++){var b=this._clipList[a];this.animation.remove(b)}this._clipList=[]},delay:function(a){return this._delay=a,this},done:function(a){return a&&this._doneList.push(a),this}},q}),define("zrender/tool/vector",[],function(){var a="undefined"==typeof Float32Array?Array:Float32Array,b={create:function(b,c){var d=new a(2);return d[0]=b||0,d[1]=c||0,d},copy:function(a,b){return a[0]=b[0],a[1]=b[1],a},clone:function(b){var c=new a(2);return c[0]=b[0],c[1]=b[1],c},set:function(a,b,c){return a[0]=b,a[1]=c,a},add:function(a,b,c){return a[0]=b[0]+c[0],a[1]=b[1]+c[1],a},scaleAndAdd:function(a,b,c,d){return a[0]=b[0]+c[0]*d,a[1]=b[1]+c[1]*d,a},sub:function(a,b,c){return a[0]=b[0]-c[0],a[1]=b[1]-c[1],a},len:function(a){return Math.sqrt(this.lenSquare(a))},lenSquare:function(a){return a[0]*a[0]+a[1]*a[1]},mul:function(a,b,c){return a[0]=b[0]*c[0],a[1]=b[1]*c[1],a},div:function(a,b,c){return a[0]=b[0]/c[0],a[1]=b[1]/c[1],a},dot:function(a,b){return a[0]*b[0]+a[1]*b[1]},scale:function(a,b,c){return a[0]=b[0]*c,a[1]=b[1]*c,a},normalize:function(a,c){var d=b.len(c);return 0===d?(a[0]=0,a[1]=0):(a[0]=c[0]/d,a[1]=c[1]/d),a},distance:function(a,b){return Math.sqrt((a[0]-b[0])*(a[0]-b[0])+(a[1]-b[1])*(a[1]-b[1]))},distanceSquare:function(a,b){return(a[0]-b[0])*(a[0]-b[0])+(a[1]-b[1])*(a[1]-b[1])},negate:function(a,b){return a[0]=-b[0],a[1]=-b[1],a},lerp:function(a,b,c,d){return a[0]=b[0]+d*(c[0]-b[0]),a[1]=b[1]+d*(c[1]-b[1]),a},applyTransform:function(a,b,c){var d=b[0],e=b[1];return a[0]=c[0]*d+c[2]*e+c[4],a[1]=c[1]*d+c[3]*e+c[5],a},min:function(a,b,c){return a[0]=Math.min(b[0],c[0]),a[1]=Math.min(b[1],c[1]),a},max:function(a,b,c){return a[0]=Math.max(b[0],c[0]),a[1]=Math.max(b[1],c[1]),a}};return b.length=b.len,b.lengthSquare=b.lenSquare,b.dist=b.distance,b.distSquare=b.distanceSquare,b}),define("zrender/tool/matrix",[],function(){var a="undefined"==typeof Float32Array?Array:Float32Array,b={create:function(){var c=new a(6);return b.identity(c),c},identity:function(a){return a[0]=1,a[1]=0,a[2]=0,a[3]=1,a[4]=0,a[5]=0,a},copy:function(a,b){return a[0]=b[0],a[1]=b[1],a[2]=b[2],a[3]=b[3],a[4]=b[4],a[5]=b[5],a},mul:function(a,b,c){return a[0]=b[0]*c[0]+b[2]*c[1],a[1]=b[1]*c[0]+b[3]*c[1],a[2]=b[0]*c[2]+b[2]*c[3],a[3]=b[1]*c[2]+b[3]*c[3],a[4]=b[0]*c[4]+b[2]*c[5]+b[4],a[5]=b[1]*c[4]+b[3]*c[5]+b[5],a},translate:function(a,b,c){return a[0]=b[0],a[1]=b[1],a[2]=b[2],a[3]=b[3],a[4]=b[4]+c[0],a[5]=b[5]+c[1],a},rotate:function(a,b,c){var d=b[0],e=b[2],f=b[4],g=b[1],h=b[3],i=b[5],j=Math.sin(c),k=Math.cos(c);return a[0]=d*k+g*j,a[1]=-d*j+g*k,a[2]=e*k+h*j,a[3]=-e*j+k*h,a[4]=k*f+j*i,a[5]=k*i-j*f,a},scale:function(a,b,c){var d=c[0],e=c[1];return a[0]=b[0]*d,a[1]=b[1]*e,a[2]=b[2]*d,a[3]=b[3]*e,a[4]=b[4]*d,a[5]=b[5]*e,a},invert:function(a,b){var c=b[0],d=b[2],e=b[4],f=b[1],g=b[3],h=b[5],i=c*g-f*d;return i?(i=1/i,a[0]=g*i,a[1]=-f*i,a[2]=-d*i,a[3]=c*i,a[4]=(d*h-g*e)*i,a[5]=(f*e-c*h)*i,a):null},mulVector:function(a,b,c){var d=b[0],e=b[2],f=b[4],g=b[1],h=b[3],i=b[5];return a[0]=c[0]*d+c[1]*e+f,a[1]=c[0]*g+c[1]*h+i,a}};return b}),define("zrender/loadingEffect/Base",["require","../tool/util","../shape/Text","../shape/Rectangle"],function(a){function b(a){this.setOptions(a)}var c=a("../tool/util"),d=a("../shape/Text"),e=a("../shape/Rectangle"),f="Loading...",g="normal 16px Arial";return b.prototype.createTextShape=function(a){return new d({highlightStyle:c.merge({x:this.canvasWidth/2,y:this.canvasHeight/2,text:f,textAlign:"center",textBaseline:"middle",textFont:g,color:"#333",brushType:"fill"},a,!0)})},b.prototype.createBackgroundShape=function(a){return new e({highlightStyle:{x:0,y:0,width:this.canvasWidth,height:this.canvasHeight,brushType:"fill",color:a}})},b.prototype.start=function(a){function b(b){a.storage.addHover(b)}function c(){a.refreshHover()}this.canvasWidth=a._width,this.canvasHeight=a._height,this.loadingTimer=this._start(b,c)},b.prototype._start=function(){return setInterval(function(){},1e4)},b.prototype.stop=function(){clearInterval(this.loadingTimer)},b.prototype.setOptions=function(a){this.options=a||{}},b.prototype.adjust=function(a,b){return b[0]>=a?a=b[0]:a>=b[1]&&(a=b[1]),a},b.prototype.getLocation=function(a,b,c){var d=null!=a.x?a.x:"center";switch(d){case"center":d=Math.floor((this.canvasWidth-b)/2);break;case"left":d=0;break;case"right":d=this.canvasWidth-b}var e=null!=a.y?a.y:"center";switch(e){case"center":e=Math.floor((this.canvasHeight-c)/2);break;case"top":e=0;break;case"bottom":e=this.canvasHeight-c}return{x:d,y:e,width:b,height:c}},b}),define("zrender/Layer",["require","./mixin/Transformable","./tool/util","./config"],function(a){function b(){return!1}function c(a,b,c){var d=document.createElement(b),e=c.getWidth(),f=c.getHeight();return d.style.position="absolute",d.style.left=0,d.style.top=0,d.style.width=e+"px",d.style.height=f+"px",d.width=e*g.devicePixelRatio,d.height=f*g.devicePixelRatio,d.setAttribute("data-zr-dom-id",a),d}var d=a("./mixin/Transformable"),e=a("./tool/util"),f=window.G_vmlCanvasManager,g=a("./config"),h=function(a,e){this.id=a,this.dom=c(a,"canvas",e),this.dom.onselectstart=b,this.dom.style["-webkit-user-select"]="none",this.dom.style["user-select"]="none",this.dom.style["-webkit-touch-callout"]="none",this.dom.style["-webkit-tap-highlight-color"]="rgba(0,0,0,0)",f&&f.initElement(this.dom),this.domBack=null,this.ctxBack=null,this.painter=e,this.unusedCount=0,this.config=null,this.dirty=!0,this.elCount=0,this.clearColor=0,this.motionBlur=!1,this.lastFrameAlpha=.7,this.zoomable=!1,this.panable=!1,this.maxZoom=1/0,this.minZoom=0,d.call(this)};return h.prototype.initContext=function(){this.ctx=this.dom.getContext("2d");var a=g.devicePixelRatio;1!=a&&this.ctx.scale(a,a)},h.prototype.createBackBuffer=function(){if(!f){this.domBack=c("back-"+this.id,"canvas",this.painter),this.ctxBack=this.domBack.getContext("2d");var a=g.devicePixelRatio;1!=a&&this.ctxBack.scale(a,a)}},h.prototype.resize=function(a,b){var c=g.devicePixelRatio;this.dom.style.width=a+"px",this.dom.style.height=b+"px",this.dom.setAttribute("width",a*c),this.dom.setAttribute("height",b*c),1!=c&&this.ctx.scale(c,c),this.domBack&&(this.domBack.setAttribute("width",a*c),this.domBack.setAttribute("height",b*c),1!=c&&this.ctxBack.scale(c,c))},h.prototype.clear=function(){var a=this.dom,b=this.ctx,c=a.width,d=a.height,e=this.clearColor&&!f,h=this.motionBlur&&!f,i=this.lastFrameAlpha,j=g.devicePixelRatio;if(h&&(this.domBack||this.createBackBuffer(),this.ctxBack.globalCompositeOperation="copy",this.ctxBack.drawImage(a,0,0,c/j,d/j)),b.clearRect(0,0,c/j,d/j),e&&(b.save(),b.fillStyle=this.clearColor,b.fillRect(0,0,c/j,d/j),b.restore()),h){var k=this.domBack;b.save(),b.globalAlpha=i,b.drawImage(k,0,0,c/j,d/j),b.restore()}},e.merge(h.prototype,d.prototype),h}),define("zrender/shape/Text",["require","../tool/area","./Base","../tool/util"],function(a){var b=a("../tool/area"),c=a("./Base"),d=function(a){c.call(this,a)};return d.prototype={type:"text",brush:function(a,c){var d=this.style;if(c&&(d=this.getHighlightStyle(d,this.highlightStyle||{})),void 0!==d.text&&d.text!==!1){a.save(),this.doClip(a),this.setContext(a,d),this.setTransform(a),d.textFont&&(a.font=d.textFont),a.textAlign=d.textAlign||"start",a.textBaseline=d.textBaseline||"middle";var e,f=(d.text+"").split("\n"),g=b.getTextHeight("国",d.textFont),h=this.getRect(d),i=d.x;e="top"==d.textBaseline?h.y:"bottom"==d.textBaseline?h.y+g:h.y+g/2;for(var j=0,k=f.length;k>j;j++){if(d.maxWidth)switch(d.brushType){case"fill":a.fillText(f[j],i,e,d.maxWidth);break;case"stroke":a.strokeText(f[j],i,e,d.maxWidth);break;case"both":a.fillText(f[j],i,e,d.maxWidth),a.strokeText(f[j],i,e,d.maxWidth);break;default:a.fillText(f[j],i,e,d.maxWidth)}else switch(d.brushType){case"fill":a.fillText(f[j],i,e);break;case"stroke":a.strokeText(f[j],i,e);break;case"both":a.fillText(f[j],i,e),a.strokeText(f[j],i,e);break;default:a.fillText(f[j],i,e)}e+=g}a.restore()}},getRect:function(a){if(a.__rect)return a.__rect;var c=b.getTextWidth(a.text,a.textFont),d=b.getTextHeight(a.text,a.textFont),e=a.x;"end"==a.textAlign||"right"==a.textAlign?e-=c:"center"==a.textAlign&&(e-=c/2);var f;return f="top"==a.textBaseline?a.y:"bottom"==a.textBaseline?a.y-d:a.y-d/2,a.__rect={x:e,y:f,width:c,height:d},a.__rect}},a("../tool/util").inherits(d,c),d}),define("zrender/shape/Rectangle",["require","./Base","../tool/util"],function(a){var b=a("./Base"),c=function(a){b.call(this,a)};return c.prototype={type:"rectangle",_buildRadiusPath:function(a,b){var c,d,e,f,g=b.x,h=b.y,i=b.width,j=b.height,k=b.radius;"number"==typeof k?c=d=e=f=k:k instanceof Array?1===k.length?c=d=e=f=k[0]:2===k.length?(c=e=k[0],d=f=k[1]):3===k.length?(c=k[0],d=f=k[1],e=k[2]):(c=k[0],d=k[1],e=k[2],f=k[3]):c=d=e=f=0;var l;c+d>i&&(l=c+d,c*=i/l,d*=i/l),e+f>i&&(l=e+f,e*=i/l,f*=i/l),d+e>j&&(l=d+e,d*=j/l,e*=j/l),c+f>j&&(l=c+f,c*=j/l,f*=j/l),a.moveTo(g+c,h),a.lineTo(g+i-d,h),0!==d&&a.quadraticCurveTo(g+i,h,g+i,h+d),a.lineTo(g+i,h+j-e),0!==e&&a.quadraticCurveTo(g+i,h+j,g+i-e,h+j),a.lineTo(g+f,h+j),0!==f&&a.quadraticCurveTo(g,h+j,g,h+j-f),a.lineTo(g,h+c),0!==c&&a.quadraticCurveTo(g,h,g+c,h)},buildPath:function(a,b){b.radius?this._buildRadiusPath(a,b):(a.moveTo(b.x,b.y),a.lineTo(b.x+b.width,b.y),a.lineTo(b.x+b.width,b.y+b.height),a.lineTo(b.x,b.y+b.height),a.lineTo(b.x,b.y)),a.closePath()},getRect:function(a){if(a.__rect)return a.__rect;var b;return b="stroke"==a.brushType||"fill"==a.brushType?a.lineWidth||1:0,a.__rect={x:Math.round(a.x-b/2),y:Math.round(a.y-b/2),width:a.width+b,height:a.height+b},a.__rect}},a("../tool/util").inherits(c,b),c}),define("zrender/tool/area",["require","./util","./curve"],function(a){"use strict";function b(a){return a%=G,0>a&&(a+=G),a}function c(a,b,c,f){if(!b||!a)return!1;var g=a.type;y=y||z.getContext();var h=d(a,b,c,f);if(void 0!==h)return h;if(a.buildPath&&y.isPointInPath)return e(a,y,b,c,f);switch(g){case"ellipse":return!0;case"trochoid":var i="out"==b.location?b.r1+b.r2+b.d:b.r1-b.r2+b.d;return n(b,c,f,i);case"rose":return n(b,c,f,b.maxr);default:return!1}}function d(a,b,c,d){var e=a.type;switch(e){case"bezier-curve":return void 0===b.cpX2?i(b.xStart,b.yStart,b.cpX1,b.cpY1,b.xEnd,b.yEnd,b.lineWidth,c,d):h(b.xStart,b.yStart,b.cpX1,b.cpY1,b.cpX2,b.cpY2,b.xEnd,b.yEnd,b.lineWidth,c,d);case"line":return g(b.xStart,b.yStart,b.xEnd,b.yEnd,b.lineWidth,c,d);case"polyline":return k(b.pointList,b.lineWidth,c,d);case"ring":return l(b.x,b.y,b.r0,b.r,c,d);case"circle":return n(b.x,b.y,b.r,c,d);case"sector":var f=b.startAngle*Math.PI/180,j=b.endAngle*Math.PI/180;return b.clockWise||(f=-f,j=-j),o(b.x,b.y,b.r0,b.r,f,j,!b.clockWise,c,d);case"path":return b.pathArray&&v(b.pathArray,Math.max(b.lineWidth,5),b.brushType,c,d);case"polygon":case"star":case"isogon":return p(b.pointList,c,d);case"text":var q=b.__rect||a.getRect(b);return m(q.x,q.y,q.width,q.height,c,d);case"rectangle":case"image":return m(b.x,b.y,b.width,b.height,c,d)}}function e(a,b,c,d,e){return b.beginPath(),a.buildPath(b,c),b.closePath(),b.isPointInPath(d,e)}function f(a,b,d,e){return!c(a,b,d,e)}function g(a,b,c,d,e,f,g){if(0===e)return!1;var h=Math.max(e,5),i=0,j=a;if(g>b+h&&g>d+h||b-h>g&&d-h>g||f>a+h&&f>c+h||a-h>f&&c-h>f)return!1;if(a===c)return h/2>=Math.abs(f-a);i=(b-d)/(a-c),j=(a*d-c*b)/(a-c);var k=i*f-g+j,l=k*k/(i*i+1);return h/2*h/2>=l}function h(a,b,c,d,e,f,g,h,i,j,k){if(0===i)return!1;var l=Math.max(i,5);if(k>b+l&&k>d+l&&k>f+l&&k>h+l||b-l>k&&d-l>k&&f-l>k&&h-l>k||j>a+l&&j>c+l&&j>e+l&&j>g+l||a-l>j&&c-l>j&&e-l>j&&g-l>j)return!1;var m=A.cubicProjectPoint(a,b,c,d,e,f,g,h,j,k,null);return l/2>=m}function i(a,b,c,d,e,f,g,h,i){if(0===g)return!1;var j=Math.max(g,5);if(i>b+j&&i>d+j&&i>f+j||b-j>i&&d-j>i&&f-j>i||h>a+j&&h>c+j&&h>e+j||a-j>h&&c-j>h&&e-j>h)return!1;var k=A.quadraticProjectPoint(a,b,c,d,e,f,h,i,null);return j/2>=k}function j(a,c,d,e,f,g,h,i,j){if(0===h)return!1;var k=Math.max(h,5);i-=a,j-=c;var l=Math.sqrt(i*i+j*j);if(l-k>d||d>l+k)return!1;if(Math.abs(e-f)>=G)return!0;if(g){var m=e;e=b(f),f=b(m)}else e=b(e),f=b(f);e>f&&(f+=G);var n=Math.atan2(j,i);return 0>n&&(n+=G),n>=e&&f>=n||n+G>=e&&f>=n+G}function k(a,b,c,d){for(var b=Math.max(b,10),e=0,f=a.length-1;f>e;e++){var h=a[e][0],i=a[e][1],j=a[e+1][0],k=a[e+1][1];if(g(h,i,j,k,b,c,d))return!0}return!1}function l(a,b,c,d,e,f){var g=(e-a)*(e-a)+(f-b)*(f-b);return d*d>g&&g>c*c}function m(a,b,c,d,e,f){return e>=a&&a+c>=e&&f>=b&&b+d>=f}function n(a,b,c,d,e){return c*c>(d-a)*(d-a)+(e-b)*(e-b)}function o(a,b,c,d,e,f,g,h,i){return j(a,b,(c+d)/2,e,f,g,d-c,h,i)}function p(a,b,c){for(var d=a.length,e=0,f=0,g=d-1;d>f;f++){var h=a[g][0],i=a[g][1],j=a[f][0],k=a[f][1];e+=q(h,i,j,k,b,c),g=f}return 0!==e}function q(a,b,c,d,e,f){if(f>b&&f>d||b>f&&d>f)return 0;if(d==b)return 0;var g=b>d?1:-1,h=(f-b)/(d-b),i=h*(c-a)+a;return i>e?g:0}function r(){var a=I[0];I[0]=I[1],I[1]=a}function s(a,b,c,d,e,f,g,h,i,j){if(j>b&&j>d&&j>f&&j>h||b>j&&d>j&&f>j&&h>j)return 0;var k=A.cubicRootAt(b,d,f,h,j,H);if(0===k)return 0;for(var l,m,n=0,o=-1,p=0;k>p;p++){var q=H[p],s=A.cubicAt(a,c,e,g,q);i>s||(0>o&&(o=A.cubicExtrema(b,d,f,h,I),I[1]<I[0]&&o>1&&r(),l=A.cubicAt(b,d,f,h,I[0]),o>1&&(m=A.cubicAt(b,d,f,h,I[1]))),n+=2==o?I[0]>q?b>l?1:-1:I[1]>q?l>m?1:-1:m>h?1:-1:I[0]>q?b>l?1:-1:l>h?1:-1)}return n}function t(a,b,c,d,e,f,g,h){if(h>b&&h>d&&h>f||b>h&&d>h&&f>h)return 0;var i=A.quadraticRootAt(b,d,f,h,H);if(0===i)return 0;var j=A.quadraticExtremum(b,d,f);if(j>=0&&1>=j){for(var k=0,l=A.quadraticAt(b,d,f,j),m=0;i>m;m++){var n=A.quadraticAt(a,c,e,H[m]);n>g||(k+=j>H[m]?b>l?1:-1:l>f?1:-1)}return k}var n=A.quadraticAt(a,c,e,H[0]);return n>g?0:b>f?1:-1}function u(a,c,d,e,f,g,h,i){if(i-=c,i>d||-d>i)return 0;var j=Math.sqrt(d*d-i*i);if(H[0]=-j,H[1]=j,Math.abs(e-f)>=G){e=0,f=G;var k=g?1:-1;return h>=H[0]+a&&H[1]+a>=h?k:0}if(g){var j=e;e=b(f),f=b(j)}else e=b(e),f=b(f);e>f&&(f+=G);for(var l=0,m=0;2>m;m++){var n=H[m];if(n+a>h){var o=Math.atan2(i,n),k=g?1:-1;0>o&&(o=G+o),(o>=e&&f>=o||o+G>=e&&f>=o+G)&&(o>Math.PI/2&&1.5*Math.PI>o&&(k=-k),l+=k)}}return l}function v(a,b,c,d,e){var f=0,k=0,l=0,m=0,n=0,o=!0,p=!0;c=c||"fill";for(var r="stroke"===c||"both"===c,v="fill"===c||"both"===c,w=0;a.length>w;w++){var x=a[w],y=x.points;if(o||"M"===x.command){if(w>0&&(v&&(f+=q(k,l,m,n,d,e)),0!==f))return!0;m=y[y.length-2],n=y[y.length-1],o=!1,p&&"A"!==x.command&&(p=!1,k=m,l=n)}switch(x.command){case"M":k=y[0],l=y[1];break;case"L":if(r&&g(k,l,y[0],y[1],b,d,e))return!0;v&&(f+=q(k,l,y[0],y[1],d,e)),k=y[0],l=y[1];break;case"C":if(r&&h(k,l,y[0],y[1],y[2],y[3],y[4],y[5],b,d,e))return!0;v&&(f+=s(k,l,y[0],y[1],y[2],y[3],y[4],y[5],d,e)),k=y[4],l=y[5];break;case"Q":if(r&&i(k,l,y[0],y[1],y[2],y[3],b,d,e))return!0;v&&(f+=t(k,l,y[0],y[1],y[2],y[3],d,e)),k=y[2],l=y[3];break;case"A":var z=y[0],A=y[1],B=y[2],C=y[3],D=y[4],E=y[5],F=Math.cos(D)*B+z,G=Math.sin(D)*C+A;p?(p=!1,m=F,n=G):f+=q(k,l,F,G);var H=(d-z)*C/B+z;if(r&&j(z,A,C,D,D+E,1-y[7],b,H,e))return!0;v&&(f+=u(z,A,C,D,D+E,1-y[7],H,e)),k=Math.cos(D+E)*B+z,l=Math.sin(D+E)*C+A;break;case"z":if(r&&g(k,l,m,n,b,d,e))return!0;o=!0}}return v&&(f+=q(k,l,m,n,d,e)),0!==f}function w(a,b){var c=a+":"+b;if(B[c])return B[c];y=y||z.getContext(),y.save(),b&&(y.font=b),a=(a+"").split("\n");for(var d=0,e=0,f=a.length;f>e;e++)d=Math.max(y.measureText(a[e]).width,d);return y.restore(),B[c]=d,++D>F&&(D=0,B={}),d}function x(a,b){var c=a+":"+b;if(C[c])return C[c];y=y||z.getContext(),y.save(),b&&(y.font=b),a=(a+"").split("\n");var d=(y.measureText("国").width+2)*a.length;return y.restore(),C[c]=d,++E>F&&(E=0,C={}),d}var y,z=a("./util"),A=a("./curve"),B={},C={},D=0,E=0,F=5e3,G=2*Math.PI,H=[-1,-1,-1],I=[-1,-1];return{isInside:c,isOutside:f,getTextWidth:w,getTextHeight:x,isInsidePath:v,isInsidePolygon:p,isInsideSector:o,isInsideCircle:n,isInsideLine:g,isInsideRect:m,isInsidePolyline:k,isInsideCubicStroke:h,isInsideQuadraticStroke:i}}),define("zrender/shape/Base",["require","../tool/matrix","../tool/guid","../tool/util","../tool/log","../mixin/Transformable","../mixin/Eventful","../tool/area","../tool/color"],function(a){function b(b,d,e,f,g,h,i){g&&(b.font=g),b.textAlign=h,b.textBaseline=i;var j=c(d,e,f,g,h,i);d=(d+"").split("\n");var k=a("../tool/area").getTextHeight("国",g);switch(i){case"top":f=j.y;break;case"bottom":f=j.y+k;break;default:f=j.y+k/2}for(var l=0,m=d.length;m>l;l++)b.fillText(d[l],e,f),f+=k}function c(b,c,d,e,f,g){var h=a("../tool/area"),i=h.getTextWidth(b,e),j=h.getTextHeight("国",e);switch(b=(b+"").split("\n"),f){case"end":case"right":c-=i;break;case"center":c-=i/2}switch(g){case"top":break;case"bottom":d-=j*b.length;break;default:d-=j*b.length/2}return{x:c,y:d,width:i,height:j*b.length}}var d=window.G_vmlCanvasManager,e=a("../tool/matrix"),f=a("../tool/guid"),g=a("../tool/util"),h=a("../tool/log"),i=a("../mixin/Transformable"),j=a("../mixin/Eventful"),k=function(a){a=a||{},this.id=a.id||f();for(var b in a)this[b]=a[b];this.style=this.style||{},this.highlightStyle=this.highlightStyle||null,this.parent=null,this.__dirty=!0,this.__clipShapes=[],i.call(this),j.call(this)};k.prototype.invisible=!1,k.prototype.ignore=!1,k.prototype.zlevel=0,k.prototype.draggable=!1,k.prototype.clickable=!1,k.prototype.hoverable=!0,k.prototype.z=0,k.prototype.brush=function(a,b){var c=this.beforeBrush(a,b);switch(a.beginPath(),this.buildPath(a,c),c.brushType){case"both":a.fill();case"stroke":c.lineWidth>0&&a.stroke();break;default:a.fill()}this.drawText(a,c,this.style),this.afterBrush(a)},k.prototype.beforeBrush=function(a,b){var c=this.style;return this.brushTypeOnly&&(c.brushType=this.brushTypeOnly),b&&(c=this.getHighlightStyle(c,this.highlightStyle||{},this.brushTypeOnly)),"stroke"==this.brushTypeOnly&&(c.strokeColor=c.strokeColor||c.color),a.save(),this.doClip(a),this.setContext(a,c),this.setTransform(a),c},k.prototype.afterBrush=function(a){a.restore()};var l=[["color","fillStyle"],["strokeColor","strokeStyle"],["opacity","globalAlpha"],["lineCap","lineCap"],["lineJoin","lineJoin"],["miterLimit","miterLimit"],["lineWidth","lineWidth"],["shadowBlur","shadowBlur"],["shadowColor","shadowColor"],["shadowOffsetX","shadowOffsetX"],["shadowOffsetY","shadowOffsetY"]];k.prototype.setContext=function(a,b){for(var c=0,d=l.length;d>c;c++){var e=l[c][0],f=b[e],g=l[c][1];void 0!==f&&(a[g]=f)}};var m=e.create();return k.prototype.doClip=function(a){if(this.__clipShapes&&!d)for(var b=0;this.__clipShapes.length>b;b++){var c=this.__clipShapes[b];if(c.needTransform){var f=c.transform;e.invert(m,f),a.transform(f[0],f[1],f[2],f[3],f[4],f[5])}if(a.beginPath(),c.buildPath(a,c.style),a.clip(),c.needTransform){var f=m;a.transform(f[0],f[1],f[2],f[3],f[4],f[5])}}},k.prototype.getHighlightStyle=function(b,c,d){var e={};for(var f in b)e[f]=b[f];var g=a("../tool/color"),h=g.getHighlightColor();"stroke"!=b.brushType?(e.strokeColor=h,e.lineWidth=(b.lineWidth||1)+this.getHighlightZoom(),e.brushType="both"):"stroke"!=d?(e.strokeColor=h,e.lineWidth=(b.lineWidth||1)+this.getHighlightZoom()):e.strokeColor=c.strokeColor||g.mix(b.strokeColor,g.toRGB(h));for(var f in c)void 0!==c[f]&&(e[f]=c[f]);return e},k.prototype.getHighlightZoom=function(){return"text"!=this.type?6:2},k.prototype.drift=function(a,b){this.position[0]+=a,this.position[1]+=b},k.prototype.buildPath=function(){h("buildPath not implemented in "+this.type)},k.prototype.getRect=function(){h("getRect not implemented in "+this.type)},k.prototype.isCover=function(b,c){var d=this.transformCoordToLocal(b,c);return b=d[0],c=d[1],this.isCoverRect(b,c)?a("../tool/area").isInside(this,this.style,b,c):!1},k.prototype.isCoverRect=function(a,b){var c=this.style.__rect;return c||(c=this.style.__rect=this.getRect(this.style)),a>=c.x&&c.x+c.width>=a&&b>=c.y&&c.y+c.height>=b},k.prototype.drawText=function(a,c,d){if(void 0!==c.text&&c.text!==!1){var e=c.textColor||c.color||c.strokeColor;a.fillStyle=e;var f,g,h,i,j=10,k=c.textPosition||this.textPosition||"top";switch(k){case"inside":case"top":case"bottom":case"left":case"right":if(this.getRect){var l=(d||c).__rect||this.getRect(d||c);switch(k){case"inside":h=l.x+l.width/2,i=l.y+l.height/2,f="center",g="middle","stroke"!=c.brushType&&e==c.color&&(a.fillStyle="#fff");break;case"left":h=l.x-j,i=l.y+l.height/2,f="end",g="middle";break;case"right":h=l.x+l.width+j,i=l.y+l.height/2,f="start",g="middle";break;case"top":h=l.x+l.width/2,i=l.y-j,f="center",g="bottom";break;case"bottom":h=l.x+l.width/2,i=l.y+l.height+j,f="center",g="top"}}break;case"start":case"end":var m=c.pointList||[[c.xStart||0,c.yStart||0],[c.xEnd||0,c.yEnd||0]],n=m.length;if(2>n)return;var o,p,q,r;switch(k){case"start":o=m[1][0],p=m[0][0],q=m[1][1],r=m[0][1];break;case"end":o=m[n-2][0],p=m[n-1][0],q=m[n-2][1],r=m[n-1][1]}h=p,i=r;var s=180*(Math.atan((q-r)/(p-o))/Math.PI);0>p-o?s+=180:0>q-r&&(s+=360),j=5,s>=30&&150>=s?(f="center",g="bottom",i-=j):s>150&&210>s?(f="right",g="middle",h-=j):s>=210&&330>=s?(f="center",
g="top",i+=j):(f="left",g="middle",h+=j);break;case"specific":h=c.textX||0,i=c.textY||0,f="start",g="middle"}null!=h&&null!=i&&b(a,c.text,h,i,c.textFont,c.textAlign||f,c.textBaseline||g)}},k.prototype.modSelf=function(){this.__dirty=!0,this.style&&(this.style.__rect=null),this.highlightStyle&&(this.highlightStyle.__rect=null)},k.prototype.isSilent=function(){return!(this.hoverable||this.draggable||this.clickable||this.onmousemove||this.onmouseover||this.onmouseout||this.onmousedown||this.onmouseup||this.onclick||this.ondragenter||this.ondragover||this.ondragleave||this.ondrop)},g.merge(k.prototype,i.prototype,!0),g.merge(k.prototype,j.prototype,!0),k}),define("zrender/tool/curve",["require","./vector"],function(a){function b(a){return a>-q&&q>a}function c(a){return a>q||-q>a}function d(a,b,c,d,e){var f=1-e;return f*f*(f*a+3*e*b)+e*e*(e*d+3*f*c)}function e(a,b,c,d,e){var f=1-e;return 3*(((b-a)*f+2*(c-b)*e)*f+(d-c)*e*e)}function f(a,c,d,e,f,g){var h=e+3*(c-d)-a,i=3*(d-2*c+a),j=3*(c-a),k=a-f,l=i*i-3*h*j,m=i*j-9*h*k,n=j*j-3*i*k,o=0;if(b(l)&&b(m))if(b(i))g[0]=0;else{var p=-j/i;p>=0&&1>=p&&(g[o++]=p)}else{var q=m*m-4*l*n;if(b(q)){var t=m/l,p=-i/h+t,u=-t/2;p>=0&&1>=p&&(g[o++]=p),u>=0&&1>=u&&(g[o++]=u)}else if(q>0){var v=Math.sqrt(q),w=l*i+1.5*h*(-m+v),x=l*i+1.5*h*(-m-v);w=0>w?-Math.pow(-w,s):Math.pow(w,s),x=0>x?-Math.pow(-x,s):Math.pow(x,s);var p=(-i-(w+x))/(3*h);p>=0&&1>=p&&(g[o++]=p)}else{var y=(2*l*i-3*h*m)/(2*Math.sqrt(l*l*l)),z=Math.acos(y)/3,A=Math.sqrt(l),B=Math.cos(z),p=(-i-2*A*B)/(3*h),u=(-i+A*(B+r*Math.sin(z)))/(3*h),C=(-i+A*(B-r*Math.sin(z)))/(3*h);p>=0&&1>=p&&(g[o++]=p),u>=0&&1>=u&&(g[o++]=u),C>=0&&1>=C&&(g[o++]=C)}}return o}function g(a,d,e,f,g){var h=6*e-12*d+6*a,i=9*d+3*f-3*a-9*e,j=3*d-3*a,k=0;if(b(i)){if(c(h)){var l=-j/h;l>=0&&1>=l&&(g[k++]=l)}}else{var m=h*h-4*i*j;if(b(m))g[0]=-h/(2*i);else if(m>0){var n=Math.sqrt(m),l=(-h+n)/(2*i),o=(-h-n)/(2*i);l>=0&&1>=l&&(g[k++]=l),o>=0&&1>=o&&(g[k++]=o)}}return k}function h(a,b,c,d,e,f){var g=(b-a)*e+a,h=(c-b)*e+b,i=(d-c)*e+c,j=(h-g)*e+g,k=(i-h)*e+h,l=(k-j)*e+j;f[0]=a,f[1]=g,f[2]=j,f[3]=l,f[4]=l,f[5]=k,f[6]=i,f[7]=d}function i(a,b,c,e,f,g,h,i,j,k,l){var m,n=.005,o=1/0;t[0]=j,t[1]=k;for(var r=0;1>r;r+=.05){u[0]=d(a,c,f,h,r),u[1]=d(b,e,g,i,r);var s=p.distSquare(t,u);o>s&&(m=r,o=s)}o=1/0;for(var w=0;32>w&&!(q>n);w++){var x=m-n,y=m+n;u[0]=d(a,c,f,h,x),u[1]=d(b,e,g,i,x);var s=p.distSquare(u,t);if(x>=0&&o>s)m=x,o=s;else{v[0]=d(a,c,f,h,y),v[1]=d(b,e,g,i,y);var z=p.distSquare(v,t);1>=y&&o>z?(m=y,o=z):n*=.5}}return l&&(l[0]=d(a,c,f,h,m),l[1]=d(b,e,g,i,m)),Math.sqrt(o)}function j(a,b,c,d){var e=1-d;return e*(e*a+2*d*b)+d*d*c}function k(a,b,c,d){return 2*((1-d)*(b-a)+d*(c-b))}function l(a,d,e,f,g){var h=a-2*d+e,i=2*(d-a),j=a-f,k=0;if(b(h)){if(c(i)){var l=-j/i;l>=0&&1>=l&&(g[k++]=l)}}else{var m=i*i-4*h*j;if(b(m)){var l=-i/(2*h);l>=0&&1>=l&&(g[k++]=l)}else if(m>0){var n=Math.sqrt(m),l=(-i+n)/(2*h),o=(-i-n)/(2*h);l>=0&&1>=l&&(g[k++]=l),o>=0&&1>=o&&(g[k++]=o)}}return k}function m(a,b,c){var d=a+c-2*b;return 0===d?.5:(a-b)/d}function n(a,b,c,d,e){var f=(b-a)*d+a,g=(c-b)*d+b,h=(g-f)*d+f;e[0]=a,e[1]=f,e[2]=h,e[3]=h,e[4]=g,e[5]=c}function o(a,b,c,d,e,f,g,h,i){var k,l=.005,m=1/0;t[0]=g,t[1]=h;for(var n=0;1>n;n+=.05){u[0]=j(a,c,e,n),u[1]=j(b,d,f,n);var o=p.distSquare(t,u);m>o&&(k=n,m=o)}m=1/0;for(var r=0;32>r&&!(q>l);r++){var s=k-l,w=k+l;u[0]=j(a,c,e,s),u[1]=j(b,d,f,s);var o=p.distSquare(u,t);if(s>=0&&m>o)k=s,m=o;else{v[0]=j(a,c,e,w),v[1]=j(b,d,f,w);var x=p.distSquare(v,t);1>=w&&m>x?(k=w,m=x):l*=.5}}return i&&(i[0]=j(a,c,e,k),i[1]=j(b,d,f,k)),Math.sqrt(m)}var p=a("./vector"),q=1e-4,r=Math.sqrt(3),s=1/3,t=p.create(),u=p.create(),v=p.create();return{cubicAt:d,cubicDerivativeAt:e,cubicRootAt:f,cubicExtrema:g,cubicSubdivide:h,cubicProjectPoint:i,quadraticAt:j,quadraticDerivativeAt:k,quadraticRootAt:l,quadraticExtremum:m,quadraticSubdivide:n,quadraticProjectPoint:o}}),define("zrender/mixin/Transformable",["require","../tool/matrix","../tool/vector"],function(a){"use strict";function b(a){return a>-h&&h>a}function c(a){return a>h||-h>a}var d=a("../tool/matrix"),e=a("../tool/vector"),f=[0,0],g=d.translate,h=5e-5,i=function(){this.position||(this.position=[0,0]),void 0===this.rotation&&(this.rotation=[0,0,0]),this.scale||(this.scale=[1,1,0,0]),this.needLocalTransform=!1,this.needTransform=!1};return i.prototype={constructor:i,updateNeedTransform:function(){this.needLocalTransform=c(this.rotation[0])||c(this.position[0])||c(this.position[1])||c(this.scale[0]-1)||c(this.scale[1]-1)},updateTransform:function(){this.updateNeedTransform();var a=this.parent&&this.parent.needTransform;if(this.needTransform=this.needLocalTransform||a,this.needTransform){var b=this.transform||d.create();if(d.identity(b),this.needLocalTransform){var e=this.scale;if(c(e[0])||c(e[1])){f[0]=-e[2]||0,f[1]=-e[3]||0;var h=c(f[0])||c(f[1]);h&&g(b,b,f),d.scale(b,b,e),h&&(f[0]=-f[0],f[1]=-f[1],g(b,b,f))}if(this.rotation instanceof Array){if(0!==this.rotation[0]){f[0]=-this.rotation[1]||0,f[1]=-this.rotation[2]||0;var h=c(f[0])||c(f[1]);h&&g(b,b,f),d.rotate(b,b,this.rotation[0]),h&&(f[0]=-f[0],f[1]=-f[1],g(b,b,f))}}else 0!==this.rotation&&d.rotate(b,b,this.rotation);(c(this.position[0])||c(this.position[1]))&&g(b,b,this.position)}a&&(this.needLocalTransform?d.mul(b,this.parent.transform,b):d.copy(b,this.parent.transform)),this.transform=b,this.invTransform=this.invTransform||d.create(),d.invert(this.invTransform,b)}},setTransform:function(a){if(this.needTransform){var b=this.transform;a.transform(b[0],b[1],b[2],b[3],b[4],b[5])}},lookAt:function(){var a=e.create();return function(c){this.transform||(this.transform=d.create());var f=this.transform;if(e.sub(a,c,this.position),!b(a[0])||!b(a[1])){e.normalize(a,a);var g=this.scale;f[2]=a[0]*g[1],f[3]=a[1]*g[1],f[0]=a[1]*g[0],f[1]=-a[0]*g[0],f[4]=this.position[0],f[5]=this.position[1],this.decomposeTransform()}}}(),decomposeTransform:function(){if(this.transform){var a=this.transform,b=a[0]*a[0]+a[1]*a[1],d=this.position,e=this.scale,f=this.rotation;c(b-1)&&(b=Math.sqrt(b));var g=a[2]*a[2]+a[3]*a[3];c(g-1)&&(g=Math.sqrt(g)),d[0]=a[4],d[1]=a[5],e[0]=b,e[1]=g,e[2]=e[3]=0,f[0]=Math.atan2(-a[1]/g,a[0]/b),f[1]=f[2]=0}},transformCoordToLocal:function(a,b){var c=[a,b];return this.needTransform&&this.invTransform&&d.mulVector(c,this.invTransform,c),c}},i}),define("zrender/Group",["require","./tool/guid","./tool/util","./mixin/Transformable","./mixin/Eventful"],function(a){var b=a("./tool/guid"),c=a("./tool/util"),d=a("./mixin/Transformable"),e=a("./mixin/Eventful"),f=function(a){a=a||{},this.id=a.id||b();for(var c in a)this[c]=a[c];this.type="group",this.clipShape=null,this._children=[],this._storage=null,this.__dirty=!0,d.call(this),e.call(this)};return f.prototype.ignore=!1,f.prototype.children=function(){return this._children.slice()},f.prototype.childAt=function(a){return this._children[a]},f.prototype.addChild=function(a){a!=this&&a.parent!=this&&(a.parent&&a.parent.removeChild(a),this._children.push(a),a.parent=this,this._storage&&this._storage!==a._storage&&(this._storage.addToMap(a),a instanceof f&&a.addChildrenToStorage(this._storage)))},f.prototype.removeChild=function(a){var b=c.indexOf(this._children,a);b>=0&&this._children.splice(b,1),a.parent=null,this._storage&&(this._storage.delFromMap(a.id),a instanceof f&&a.delChildrenFromStorage(this._storage))},f.prototype.clearChildren=function(){for(var a=0;this._children.length>a;a++){var b=this._children[a];this._storage&&(this._storage.delFromMap(b.id),b instanceof f&&b.delChildrenFromStorage(this._storage))}this._children.length=0},f.prototype.eachChild=function(a,b){for(var c=!!b,d=0;this._children.length>d;d++){var e=this._children[d];c?a.call(b,e):a(e)}},f.prototype.traverse=function(a,b){for(var c=!!b,d=0;this._children.length>d;d++){var e=this._children[d];c?a.call(b,e):a(e),"group"===e.type&&e.traverse(a,b)}},f.prototype.addChildrenToStorage=function(a){for(var b=0;this._children.length>b;b++){var c=this._children[b];a.addToMap(c),c instanceof f&&c.addChildrenToStorage(a)}},f.prototype.delChildrenFromStorage=function(a){for(var b=0;this._children.length>b;b++){var c=this._children[b];a.delFromMap(c.id),c instanceof f&&c.delChildrenFromStorage(a)}},f.prototype.modSelf=function(){this.__dirty=!0},c.merge(f.prototype,d.prototype,!0),c.merge(f.prototype,e.prototype,!0),f}),define("zrender/animation/Clip",["require","./easing"],function(a){function b(a){this._targetPool=a.target||{},this._targetPool instanceof Array||(this._targetPool=[this._targetPool]),this._life=a.life||1e3,this._delay=a.delay||0,this._startTime=(new Date).getTime()+this._delay,this._endTime=this._startTime+1e3*this._life,this.loop=void 0===a.loop?!1:a.loop,this.gap=a.gap||0,this.easing=a.easing||"Linear",this.onframe=a.onframe,this.ondestroy=a.ondestroy,this.onrestart=a.onrestart}var c=a("./easing");return b.prototype={step:function(a){var b=(a-this._startTime)/this._life;if(!(0>b)){b=Math.min(b,1);var d="string"==typeof this.easing?c[this.easing]:this.easing,e="function"==typeof d?d(b):b;return this.fire("frame",e),1==b?this.loop?(this.restart(),"restart"):(this._needsRemove=!0,"destroy"):null}},restart:function(){var a=(new Date).getTime(),b=(a-this._startTime)%this._life;this._startTime=(new Date).getTime()-b+this.gap,this._needsRemove=!1},fire:function(a,b){for(var c=0,d=this._targetPool.length;d>c;c++)this["on"+a]&&this["on"+a](this._targetPool[c],b)},constructor:b},b}),define("zrender/animation/easing",[],function(){var a={Linear:function(a){return a},QuadraticIn:function(a){return a*a},QuadraticOut:function(a){return a*(2-a)},QuadraticInOut:function(a){return 1>(a*=2)?.5*a*a:-.5*(--a*(a-2)-1)},CubicIn:function(a){return a*a*a},CubicOut:function(a){return--a*a*a+1},CubicInOut:function(a){return 1>(a*=2)?.5*a*a*a:.5*((a-=2)*a*a+2)},QuarticIn:function(a){return a*a*a*a},QuarticOut:function(a){return 1- --a*a*a*a},QuarticInOut:function(a){return 1>(a*=2)?.5*a*a*a*a:-.5*((a-=2)*a*a*a-2)},QuinticIn:function(a){return a*a*a*a*a},QuinticOut:function(a){return--a*a*a*a*a+1},QuinticInOut:function(a){return 1>(a*=2)?.5*a*a*a*a*a:.5*((a-=2)*a*a*a*a+2)},SinusoidalIn:function(a){return 1-Math.cos(a*Math.PI/2)},SinusoidalOut:function(a){return Math.sin(a*Math.PI/2)},SinusoidalInOut:function(a){return.5*(1-Math.cos(Math.PI*a))},ExponentialIn:function(a){return 0===a?0:Math.pow(1024,a-1)},ExponentialOut:function(a){return 1===a?1:1-Math.pow(2,-10*a)},ExponentialInOut:function(a){return 0===a?0:1===a?1:1>(a*=2)?.5*Math.pow(1024,a-1):.5*(-Math.pow(2,-10*(a-1))+2)},CircularIn:function(a){return 1-Math.sqrt(1-a*a)},CircularOut:function(a){return Math.sqrt(1- --a*a)},CircularInOut:function(a){return 1>(a*=2)?-.5*(Math.sqrt(1-a*a)-1):.5*(Math.sqrt(1-(a-=2)*a)+1)},ElasticIn:function(a){var b,c=.1,d=.4;return 0===a?0:1===a?1:(!c||1>c?(c=1,b=d/4):b=d*Math.asin(1/c)/(2*Math.PI),-(c*Math.pow(2,10*(a-=1))*Math.sin(2*(a-b)*Math.PI/d)))},ElasticOut:function(a){var b,c=.1,d=.4;return 0===a?0:1===a?1:(!c||1>c?(c=1,b=d/4):b=d*Math.asin(1/c)/(2*Math.PI),c*Math.pow(2,-10*a)*Math.sin(2*(a-b)*Math.PI/d)+1)},ElasticInOut:function(a){var b,c=.1,d=.4;return 0===a?0:1===a?1:(!c||1>c?(c=1,b=d/4):b=d*Math.asin(1/c)/(2*Math.PI),1>(a*=2)?-.5*c*Math.pow(2,10*(a-=1))*Math.sin(2*(a-b)*Math.PI/d):.5*c*Math.pow(2,-10*(a-=1))*Math.sin(2*(a-b)*Math.PI/d)+1)},BackIn:function(a){var b=1.70158;return a*a*((b+1)*a-b)},BackOut:function(a){var b=1.70158;return--a*a*((b+1)*a+b)+1},BackInOut:function(a){var b=2.5949095;return 1>(a*=2)?.5*a*a*((b+1)*a-b):.5*((a-=2)*a*((b+1)*a+b)+2)},BounceIn:function(b){return 1-a.BounceOut(1-b)},BounceOut:function(a){return 1/2.75>a?7.5625*a*a:2/2.75>a?7.5625*(a-=1.5/2.75)*a+.75:2.5/2.75>a?7.5625*(a-=2.25/2.75)*a+.9375:7.5625*(a-=2.625/2.75)*a+.984375},BounceInOut:function(b){return.5>b?.5*a.BounceIn(2*b):.5*a.BounceOut(2*b-1)+.5}};return a}),define("echarts/chart/base",["require","zrender/shape/Image","../util/shape/Icon","../util/shape/MarkLine","../util/shape/Symbol","zrender/shape/Polyline","zrender/shape/ShapeBundle","../config","../util/ecData","../util/ecAnimation","../util/ecEffect","../util/accMath","../component/base","../layout/EdgeBundling","zrender/tool/util","zrender/tool/area"],function(a){function b(a){return null!=a.x&&null!=a.y}function c(a,b,c,d,e){o.call(this,a,b,c,d,e);var f=this;this.selectedMap={},this.lastShapeList=[],this.shapeHandler={onclick:function(){f.isClick=!0},ondragover:function(a){var b=a.target;b.highlightStyle=b.highlightStyle||{};var c=b.highlightStyle,d=c.brushTyep,e=c.strokeColor,g=c.lineWidth;c.brushType="stroke",c.strokeColor=f.ecTheme.calculableColor||j.calculableColor,c.lineWidth="icon"===b.type?30:10,f.zr.addHoverShape(b),setTimeout(function(){c&&(c.brushType=d,c.strokeColor=e,c.lineWidth=g)},20)},ondrop:function(a){null!=k.get(a.dragged,"data")&&(f.isDrop=!0)},ondragend:function(){f.isDragend=!0}}}var d=a("zrender/shape/Image"),e=a("../util/shape/Icon"),f=a("../util/shape/MarkLine"),g=a("../util/shape/Symbol"),h=a("zrender/shape/Polyline"),i=a("zrender/shape/ShapeBundle"),j=a("../config"),k=a("../util/ecData"),l=a("../util/ecAnimation"),m=a("../util/ecEffect"),n=a("../util/accMath"),o=a("../component/base"),p=a("../layout/EdgeBundling"),q=a("zrender/tool/util"),r=a("zrender/tool/area");return c.prototype={setCalculable:function(a){return a.dragEnableTime=this.ecTheme.DRAG_ENABLE_TIME||j.DRAG_ENABLE_TIME,a.ondragover=this.shapeHandler.ondragover,a.ondragend=this.shapeHandler.ondragend,a.ondrop=this.shapeHandler.ondrop,a},ondrop:function(a,b){if(this.isDrop&&a.target&&!b.dragIn){var c,d=a.target,e=a.dragged,f=k.get(d,"seriesIndex"),g=k.get(d,"dataIndex"),h=this.series,i=this.component.legend;if(-1===g){if(k.get(e,"seriesIndex")==f)return b.dragOut=b.dragIn=b.needRefresh=!0,void(this.isDrop=!1);c={value:k.get(e,"value"),name:k.get(e,"name")},this.type===j.CHART_TYPE_PIE&&0>c.value&&(c.value=0);for(var l=!1,m=h[f].data,o=0,p=m.length;p>o;o++)m[o].name===c.name&&"-"===m[o].value&&(h[f].data[o].value=c.value,l=!0);!l&&h[f].data.push(c),i&&i.add(c.name,e.style.color||e.style.strokeColor)}else c=h[f].data[g]||"-",null!=c.value?(h[f].data[g].value="-"!=c.value?n.accAdd(h[f].data[g].value,k.get(e,"value")):k.get(e,"value"),(this.type===j.CHART_TYPE_FUNNEL||this.type===j.CHART_TYPE_PIE)&&(i&&1===i.getRelatedAmount(c.name)&&this.component.legend.del(c.name),c.name+=this.option.nameConnector+k.get(e,"name"),i&&i.add(c.name,e.style.color||e.style.strokeColor))):h[f].data[g]="-"!=c?n.accAdd(h[f].data[g],k.get(e,"value")):k.get(e,"value");b.dragIn=b.dragIn||!0,this.isDrop=!1;var q=this;setTimeout(function(){q.zr.trigger("mousemove",a.event)},300)}},ondragend:function(a,b){if(this.isDragend&&a.target&&!b.dragOut){var c=a.target,d=k.get(c,"seriesIndex"),e=k.get(c,"dataIndex"),f=this.series;if(null!=f[d].data[e].value){f[d].data[e].value="-";var g=f[d].data[e].name,h=this.component.legend;h&&0===h.getRelatedAmount(g)&&h.del(g)}else f[d].data[e]="-";b.dragOut=!0,b.needRefresh=!0,this.isDragend=!1}},onlegendSelected:function(a,b){var c=a.selected;for(var d in this.selectedMap)this.selectedMap[d]!=c[d]&&(b.needRefresh=!0),this.selectedMap[d]=c[d]},_buildPosition:function(){this._symbol=this.option.symbolList,this._sIndex2ShapeMap={},this._sIndex2ColorMap={},this.selectedMap={},this.xMarkMap={};for(var a,b,c,d,e=this.series,f={top:[],bottom:[],left:[],right:[],other:[]},g=0,h=e.length;h>g;g++)e[g].type===this.type&&(e[g]=this.reformOption(e[g]),this.legendHoverLink=e[g].legendHoverLink||this.legendHoverLink,a=e[g].xAxisIndex,b=e[g].yAxisIndex,c=this.component.xAxis.getAxis(a),d=this.component.yAxis.getAxis(b),c.type===j.COMPONENT_TYPE_AXIS_CATEGORY?f[c.getPosition()].push(g):d.type===j.COMPONENT_TYPE_AXIS_CATEGORY?f[d.getPosition()].push(g):f.other.push(g));for(var i in f)f[i].length>0&&this._buildSinglePosition(i,f[i]);this.addShapeList()},_buildSinglePosition:function(a,b){var c=this._mapData(b),d=c.locationMap,e=c.maxDataLength;if(0!==e&&0!==d.length){switch(a){case"bottom":case"top":this._buildHorizontal(b,e,d,this.xMarkMap);break;case"left":case"right":this._buildVertical(b,e,d,this.xMarkMap);break;case"other":this._buildOther(b,e,d,this.xMarkMap)}for(var f=0,g=b.length;g>f;f++)this.buildMark(b[f])}},_mapData:function(a){for(var b,c,d,e,f=this.series,g=0,h={},i="__kener__stack__",k=this.component.legend,l=[],m=0,n=0,o=a.length;o>n;n++){if(b=f[a[n]],d=b.name,this._sIndex2ShapeMap[a[n]]=this._sIndex2ShapeMap[a[n]]||this.query(b,"symbol")||this._symbol[n%this._symbol.length],k){if(this.selectedMap[d]=k.isSelected(d),this._sIndex2ColorMap[a[n]]=k.getColor(d),e=k.getItemShape(d)){var p=e.style;if(this.type==j.CHART_TYPE_LINE)p.iconType="legendLineIcon",p.symbol=this._sIndex2ShapeMap[a[n]];else if(b.itemStyle.normal.barBorderWidth>0){var q=e.highlightStyle;p.brushType="both",p.x+=1,p.y+=1,p.width-=2,p.height-=2,p.strokeColor=q.strokeColor=b.itemStyle.normal.barBorderColor,q.lineWidth=3}k.setItemShape(d,e)}}else this.selectedMap[d]=!0,this._sIndex2ColorMap[a[n]]=this.zr.getColor(a[n]);this.selectedMap[d]&&(c=b.stack||i+a[n],null==h[c]?(h[c]=g,l[g]=[a[n]],g++):l[h[c]].push(a[n])),m=Math.max(m,b.data.length)}return{locationMap:l,maxDataLength:m}},_calculMarkMapXY:function(a,b,c){for(var d=this.series,e=0,f=b.length;f>e;e++)for(var g=0,h=b[e].length;h>g;g++){var i=b[e][g],j="xy"==c?0:"",k=this.component.grid,l=a[i];if("-1"!=c.indexOf("x")){l["counter"+j]>0&&(l["average"+j]=l["sum"+j]/l["counter"+j]);var m=this.component.xAxis.getAxis(d[i].xAxisIndex||0).getCoord(l["average"+j]);l["averageLine"+j]=[[m,k.getYend()],[m,k.getY()]],l["minLine"+j]=[[l["minX"+j],k.getYend()],[l["minX"+j],k.getY()]],l["maxLine"+j]=[[l["maxX"+j],k.getYend()],[l["maxX"+j],k.getY()]],l.isHorizontal=!1}if(j="xy"==c?1:"","-1"!=c.indexOf("y")){l["counter"+j]>0&&(l["average"+j]=l["sum"+j]/l["counter"+j]);var n=this.component.yAxis.getAxis(d[i].yAxisIndex||0).getCoord(l["average"+j]);l["averageLine"+j]=[[k.getX(),n],[k.getXend(),n]],l["minLine"+j]=[[k.getX(),l["minY"+j]],[k.getXend(),l["minY"+j]]],l["maxLine"+j]=[[k.getX(),l["maxY"+j]],[k.getXend(),l["maxY"+j]]],l.isHorizontal=!0}}},addLabel:function(a,b,c,d,e){var f=[c,b],g=this.deepMerge(f,"itemStyle.normal.label"),h=this.deepMerge(f,"itemStyle.emphasis.label"),i=g.textStyle||{},j=h.textStyle||{};if(g.show){var k=a.style;k.text=this._getLabelText(b,c,d,"normal"),k.textPosition=null==g.position?"horizontal"===e?"right":"top":g.position,k.textColor=i.color,k.textFont=this.getFont(i),k.textAlign=i.align,k.textBaseline=i.baseline}if(h.show){var l=a.highlightStyle;l.text=this._getLabelText(b,c,d,"emphasis"),l.textPosition=g.show?a.style.textPosition:null==h.position?"horizontal"===e?"right":"top":h.position,l.textColor=j.color,l.textFont=this.getFont(j),l.textAlign=j.align,l.textBaseline=j.baseline}return a},_getLabelText:function(a,b,c,d){var e=this.deepQuery([b,a],"itemStyle."+d+".label.formatter");e||"emphasis"!==d||(e=this.deepQuery([b,a],"itemStyle.normal.label.formatter"));var f=this.getDataFromOption(b,"-");return e?"function"==typeof e?e.call(this.myChart,{seriesName:a.name,series:a,name:c,value:f,data:b,status:d}):"string"==typeof e?e=e.replace("{a}","{a0}").replace("{b}","{b0}").replace("{c}","{c0}").replace("{a0}",a.name).replace("{b0}",c).replace("{c0}",this.numAddCommas(f)):void 0:f instanceof Array?null!=f[2]?this.numAddCommas(f[2]):f[0]+" , "+f[1]:this.numAddCommas(f)},buildMark:function(a){var b=this.series[a];this.selectedMap[b.name]&&(b.markLine&&this._buildMarkLine(a),b.markPoint&&this._buildMarkPoint(a))},_buildMarkPoint:function(a){for(var b,c,d=(this.markAttachStyle||{})[a],e=this.series[a],f=q.clone(e.markPoint),g=0,h=f.data.length;h>g;g++)b=f.data[g],c=this.getMarkCoord(a,b),b.x=null!=b.x?b.x:c[0],b.y=null!=b.y?b.y:c[1],!b.type||"max"!==b.type&&"min"!==b.type||(b.value=c[3],b.name=b.name||b.type,b.symbolSize=b.symbolSize||r.getTextWidth(c[3],this.getFont())/2+5);for(var i=this._markPoint(a,f),g=0,h=i.length;h>g;g++){var k=i[g];k.zlevel=this.getZlevelBase(),k.z=this.getZBase()+1;for(var l in d)k[l]=q.clone(d[l]);this.shapeList.push(k)}if(this.type===j.CHART_TYPE_FORCE||this.type===j.CHART_TYPE_CHORD)for(var g=0,h=i.length;h>g;g++)this.zr.addShape(i[g])},_buildMarkLine:function(a){for(var b,c=(this.markAttachStyle||{})[a],d=this.series[a],e=q.clone(d.markLine),f=0,g=e.data.length;g>f;f++){var h=e.data[f];!h.type||"max"!==h.type&&"min"!==h.type&&"average"!==h.type?b=[this.getMarkCoord(a,h[0]),this.getMarkCoord(a,h[1])]:(b=this.getMarkCoord(a,h),e.data[f]=[q.clone(h),{}],e.data[f][0].name=h.name||h.type,e.data[f][0].value="average"!==h.type?b[3]:+b[3].toFixed(null!=e.precision?e.precision:this.deepQuery([this.ecTheme,j],"markLine.precision")),b=b[2],h=[{},{}]),null!=b&&null!=b[0]&&null!=b[1]&&(e.data[f][0].x=null!=h[0].x?h[0].x:b[0][0],e.data[f][0].y=null!=h[0].y?h[0].y:b[0][1],e.data[f][1].x=null!=h[1].x?h[1].x:b[1][0],e.data[f][1].y=null!=h[1].y?h[1].y:b[1][1])}var k=this._markLine(a,e),l=e.large;if(l){var m=new i({style:{shapeList:k}}),n=k[0];if(n){q.merge(m.style,n.style),q.merge(m.highlightStyle={},n.highlightStyle),m.style.brushType="stroke",m.zlevel=this.getZlevelBase(),m.z=this.getZBase()+1,m.hoverable=!1;for(var o in c)m[o]=q.clone(c[o])}this.shapeList.push(m),this.zr.addShape(m),m._mark="largeLine";var p=e.effect;p.show&&(m.effect=p)}else{for(var f=0,g=k.length;g>f;f++){var r=k[f];r.zlevel=this.getZlevelBase(),r.z=this.getZBase()+1;for(var o in c)r[o]=q.clone(c[o]);this.shapeList.push(r)}if(this.type===j.CHART_TYPE_FORCE||this.type===j.CHART_TYPE_CHORD)for(var f=0,g=k.length;g>f;f++)this.zr.addShape(k[f])}},_markPoint:function(a,b){var c=this.series[a],d=this.component;q.merge(q.merge(b,q.clone(this.ecTheme.markPoint||{})),q.clone(j.markPoint)),b.name=c.name;var e,f,g,h,i,l,m,n=[],o=b.data,p=d.dataRange,r=d.legend,s=this.zr.getWidth(),t=this.zr.getHeight();if(b.large)e=this.getLargeMarkPointShape(a,b),e._mark="largePoint",e&&n.push(e);else for(var u=0,v=o.length;v>u;u++)null!=o[u].x&&null!=o[u].y&&(g=null!=o[u].value?o[u].value:"",r&&(f=r.getColor(c.name)),p&&(f=isNaN(g)?f:p.getColor(g),h=[o[u],b],i=this.deepQuery(h,"itemStyle.normal.color")||f,l=this.deepQuery(h,"itemStyle.emphasis.color")||i,null==i&&null==l)||(f=null==f?this.zr.getColor(a):f,o[u].tooltip=o[u].tooltip||b.tooltip||{trigger:"item"},o[u].name=null!=o[u].name?o[u].name:"",o[u].value=g,e=this.getSymbolShape(b,a,o[u],u,o[u].name,this.parsePercent(o[u].x,s),this.parsePercent(o[u].y,t),"pin",f,"rgba(0,0,0,0)","horizontal"),e._mark="point",m=this.deepMerge([o[u],b],"effect"),m.show&&(e.effect=m),c.type===j.CHART_TYPE_MAP&&(e._geo=this.getMarkGeo(o[u])),k.pack(e,c,a,o[u],u,o[u].name,g),n.push(e)));return n},_markLine:function(){function a(a,b){a[b]=a[b]instanceof Array?a[b].length>1?a[b]:[a[b][0],a[b][0]]:[a[b],a[b]]}return function(c,d){var e=this.series[c],f=this.component,g=f.dataRange,h=f.legend;q.merge(q.merge(d,q.clone(this.ecTheme.markLine||{})),q.clone(j.markLine));var i=h?h.getColor(e.name):this.zr.getColor(c);a(d,"symbol"),a(d,"symbolSize"),a(d,"symbolRotate");for(var l=d.data,m=[],n=this.zr.getWidth(),o=this.zr.getHeight(),r=0;l.length>r;r++){var s=l[r];if(b(s[0])&&b(s[1])){var t=this.deepMerge(s),u=[t,d],v=i,w=null!=t.value?t.value:"";if(g){v=isNaN(w)?v:g.getColor(w);var x=this.deepQuery(u,"itemStyle.normal.color")||v,y=this.deepQuery(u,"itemStyle.emphasis.color")||x;if(null==x&&null==y)continue}s[0].tooltip=t.tooltip||d.tooltip||{trigger:"item"},s[0].name=s[0].name||"",s[1].name=s[1].name||"",s[0].value=w,m.push({points:[[this.parsePercent(s[0].x,n),this.parsePercent(s[0].y,o)],[this.parsePercent(s[1].x,n),this.parsePercent(s[1].y,o)]],rawData:s,color:v})}}var z=this.query(d,"bundling.enable");if(z){var A=new p;A.maxTurningAngle=this.query(d,"bundling.maxTurningAngle")/180*Math.PI,m=A.run(m)}d.name=e.name;for(var B=[],r=0,C=m.length;C>r;r++){var D=m[r],E=D.rawEdge||D,s=E.rawData,w=null!=s.value?s.value:"",F=this.getMarkLineShape(d,c,s,r,D.points,z,E.color);F._mark="line";var G=this.deepMerge([s[0],s[1],d],"effect");G.show&&(F.effect=G,F.effect.large=d.large),e.type===j.CHART_TYPE_MAP&&(F._geo=[this.getMarkGeo(s[0]),this.getMarkGeo(s[1])]),k.pack(F,e,c,s[0],r,s[0].name+(""!==s[1].name?" > "+s[1].name:""),w),B.push(F)}return B}}(),getMarkCoord:function(){return[0,0]},getSymbolShape:function(a,b,c,f,g,h,i,j,l,m,n){var o=[c,a],p=this.getDataFromOption(c,"-");j=this.deepQuery(o,"symbol")||j;var q=this.deepQuery(o,"symbolSize");q="function"==typeof q?q(p):q;var r=this.deepQuery(o,"symbolRotate"),s=this.deepMerge(o,"itemStyle.normal"),t=this.deepMerge(o,"itemStyle.emphasis"),u=null!=s.borderWidth?s.borderWidth:s.lineStyle&&s.lineStyle.width;null==u&&(u=j.match("empty")?2:0);var v=null!=t.borderWidth?t.borderWidth:t.lineStyle&&t.lineStyle.width;null==v&&(v=u+2);var w=this.getItemStyleColor(s.color,b,f,c),x=this.getItemStyleColor(t.color,b,f,c),y=new e({style:{iconType:j.replace("empty","").toLowerCase(),x:h-q,y:i-q,width:2*q,height:2*q,brushType:"both",color:j.match("empty")?m:w||l,strokeColor:s.borderColor||w||l,lineWidth:u},highlightStyle:{color:j.match("empty")?m:x||w||l,strokeColor:t.borderColor||s.borderColor||x||w||l,lineWidth:v},clickable:this.deepQuery(o,"clickable")});return j.match("image")&&(y.style.image=j.replace(RegExp("^image:\\/\\/"),""),y=new d({style:y.style,highlightStyle:y.highlightStyle,clickable:this.deepQuery(o,"clickable")})),null!=r&&(y.rotation=[r*Math.PI/180,h,i]),j.match("star")&&(y.style.iconType="star",y.style.n=j.replace("empty","").replace("star","")-0||5),"none"===j&&(y.invisible=!0,y.hoverable=!1),y=this.addLabel(y,a,c,g,n),j.match("empty")&&(null==y.style.textColor&&(y.style.textColor=y.style.strokeColor),null==y.highlightStyle.textColor&&(y.highlightStyle.textColor=y.highlightStyle.strokeColor)),k.pack(y,a,b,c,f,g),y._x=h,y._y=i,y._dataIndex=f,y._seriesIndex=b,y},getMarkLineShape:function(a,b,c,d,e,g,i){var j=null!=c[0].value?c[0].value:"-",k=null!=c[1].value?c[1].value:"-",l=[c[0].symbol||a.symbol[0],c[1].symbol||a.symbol[1]],m=[c[0].symbolSize||a.symbolSize[0],c[1].symbolSize||a.symbolSize[1]];m[0]="function"==typeof m[0]?m[0](j):m[0],m[1]="function"==typeof m[1]?m[1](k):m[1];var n=[this.query(c[0],"symbolRotate")||a.symbolRotate[0],this.query(c[1],"symbolRotate")||a.symbolRotate[1]],o=[c[0],c[1],a],p=this.deepMerge(o,"itemStyle.normal");p.color=this.getItemStyleColor(p.color,b,d,c);var q=this.deepMerge(o,"itemStyle.emphasis");q.color=this.getItemStyleColor(q.color,b,d,c);var r=p.lineStyle,s=q.lineStyle,t=r.width;null==t&&(t=p.borderWidth);var u=s.width;null==u&&(u=null!=q.borderWidth?q.borderWidth:t+2);var v=this.deepQuery(o,"smoothness");this.deepQuery(o,"smooth")||(v=0);var w=g?h:f,x=new w({style:{symbol:l,symbolSize:m,symbolRotate:n,brushType:"both",lineType:r.type,shadowColor:r.shadowColor||r.color||p.borderColor||p.color||i,shadowBlur:r.shadowBlur,shadowOffsetX:r.shadowOffsetX,shadowOffsetY:r.shadowOffsetY,color:p.color||i,strokeColor:r.color||p.borderColor||p.color||i,lineWidth:t,symbolBorderColor:p.borderColor||p.color||i,symbolBorder:p.borderWidth},highlightStyle:{shadowColor:s.shadowColor,shadowBlur:s.shadowBlur,shadowOffsetX:s.shadowOffsetX,shadowOffsetY:s.shadowOffsetY,color:q.color||p.color||i,strokeColor:s.color||r.color||q.borderColor||p.borderColor||q.color||p.color||i,lineWidth:u,symbolBorderColor:q.borderColor||p.borderColor||q.color||p.color||i,symbolBorder:null==q.borderWidth?p.borderWidth+2:q.borderWidth},clickable:this.deepQuery(o,"clickable")}),y=x.style;return g?(y.pointList=e,y.smooth=v):(y.xStart=e[0][0],y.yStart=e[0][1],y.xEnd=e[1][0],y.yEnd=e[1][1],y.curveness=v,x.updatePoints(x.style)),x=this.addLabel(x,a,c[0],c[0].name+" : "+c[1].name)},getLargeMarkPointShape:function(a,b){var c,d,e,f,h,i,j=this.series[a],k=this.component,l=b.data,m=k.dataRange,n=k.legend,o=[l[0],b];if(n&&(d=n.getColor(j.name)),!m||(e=null!=l[0].value?l[0].value:"",d=isNaN(e)?d:m.getColor(e),f=this.deepQuery(o,"itemStyle.normal.color")||d,h=this.deepQuery(o,"itemStyle.emphasis.color")||f,null!=f||null!=h)){d=this.deepMerge(o,"itemStyle.normal").color||d;var p=this.deepQuery(o,"symbol")||"circle";p=p.replace("empty","").replace(/\d/g,""),i=this.deepMerge([l[0],b],"effect");var q=window.devicePixelRatio||1;return c=new g({style:{pointList:l,color:d,strokeColor:d,shadowColor:i.shadowColor||d,shadowBlur:(null!=i.shadowBlur?i.shadowBlur:8)*q,size:this.deepQuery(o,"symbolSize"),iconType:p,brushType:"fill",lineWidth:1},draggable:!1,hoverable:!1}),i.show&&(c.effect=i),c}},backupShapeList:function(){this.shapeList&&this.shapeList.length>0?(this.lastShapeList=this.shapeList,this.shapeList=[]):this.lastShapeList=[]},addShapeList:function(){var a,b,c=this.option.animationThreshold/(this.canvasSupported?2:4),d=this.lastShapeList,e=this.shapeList,f=d.length>0,g=f?this.query(this.option,"animationDurationUpdate"):this.query(this.option,"animationDuration"),h=this.query(this.option,"animationEasing"),i={},k={};if(this.option.animation&&!this.option.renderAsImage&&c>e.length&&!this.motionlessOnce){for(var l=0,m=d.length;m>l;l++)b=this._getAnimationKey(d[l]),b.match("undefined")?this.zr.delShape(d[l].id):(b+=d[l].type,i[b]?this.zr.delShape(d[l].id):i[b]=d[l]);for(var l=0,m=e.length;m>l;l++)b=this._getAnimationKey(e[l]),b.match("undefined")?this.zr.addShape(e[l]):(b+=e[l].type,k[b]=e[l]);for(b in i)k[b]||this.zr.delShape(i[b].id);for(b in k)i[b]?(this.zr.delShape(i[b].id),this._animateMod(i[b],k[b],g,h,0,f)):(a=this.type!=j.CHART_TYPE_LINE&&this.type!=j.CHART_TYPE_RADAR||0===b.indexOf("icon")?0:g/2,this._animateMod(!1,k[b],g,h,a,f));this.zr.refresh(),this.animationEffect()}else{this.motionlessOnce=!1,this.zr.delShape(d);for(var l=0,m=e.length;m>l;l++)this.zr.addShape(e[l])}},_getAnimationKey:function(a){return this.type!=j.CHART_TYPE_MAP?k.get(a,"seriesIndex")+"_"+k.get(a,"dataIndex")+(a._mark?a._mark:"")+(this.type===j.CHART_TYPE_RADAR?k.get(a,"special"):""):k.get(a,"seriesIndex")+"_"+k.get(a,"dataIndex")+(a._mark?a._mark:"undefined")},_animateMod:function(a,b,c,d,e,f){switch(b.type){case"polyline":case"half-smooth-polygon":l.pointList(this.zr,a,b,c,d);break;case"rectangle":l.rectangle(this.zr,a,b,c,d);break;case"image":case"icon":l.icon(this.zr,a,b,c,d,e);break;case"candle":f?this.zr.addShape(b):l.candle(this.zr,a,b,c,d);break;case"ring":case"sector":case"circle":f?"sector"===b.type?l.sector(this.zr,a,b,c,d):this.zr.addShape(b):l.ring(this.zr,a,b,c+100*((k.get(b,"dataIndex")||0)%20),d);break;case"text":l.text(this.zr,a,b,c,d);break;case"polygon":f?l.pointList(this.zr,a,b,c,d):l.polygon(this.zr,a,b,c,d);break;case"ribbon":l.ribbon(this.zr,a,b,c,d);break;case"gauge-pointer":l.gaugePointer(this.zr,a,b,c,d);break;case"mark-line":l.markline(this.zr,a,b,c,d);break;case"bezier-curve":case"line":l.line(this.zr,a,b,c,d);break;default:this.zr.addShape(b)}},animationMark:function(a,b,c){for(var c=c||this.shapeList,d=0,e=c.length;e>d;d++)c[d]._mark&&this._animateMod(!1,c[d],a,b,0,!0);this.animationEffect(c)},animationEffect:function(a){if(!a&&this.clearEffectShape(),a=a||this.shapeList,null!=a){var b=j.EFFECT_ZLEVEL;this.canvasSupported&&this.zr.modLayer(b,{motionBlur:!0,lastFrameAlpha:.95});for(var c,d=0,e=a.length;e>d;d++)c=a[d],c._mark&&c.effect&&c.effect.show&&m[c._mark]&&(m[c._mark](this.zr,this.effectList,c,b),this.effectList[this.effectList.length-1]._mark=c._mark)}},clearEffectShape:function(a){var b=this.effectList;if(this.zr&&b&&b.length>0){a&&this.zr.modLayer(j.EFFECT_ZLEVEL,{motionBlur:!1}),this.zr.delShape(b);for(var c=0;b.length>c;c++)b[c].effectAnimator&&b[c].effectAnimator.stop()}this.effectList=[]},addMark:function(a,b,c){var d=this.series[a];if(this.selectedMap[d.name]){var e=this.query(this.option,"animationDurationUpdate"),f=this.query(this.option,"animationEasing"),g=d[c].data,h=this.shapeList.length;if(d[c].data=b.data,this["_build"+c.replace("m","M")](a),this.option.animation&&!this.option.renderAsImage)this.animationMark(e,f,this.shapeList.slice(h));else{for(var i=h,j=this.shapeList.length;j>i;i++)this.zr.addShape(this.shapeList[i]);this.zr.refreshNextFrame()}d[c].data=g}},delMark:function(a,b,c){
c=c.replace("mark","").replace("large","").toLowerCase();var d=this.series[a];if(this.selectedMap[d.name]){for(var e=!1,f=[this.shapeList,this.effectList],g=2;g--;)for(var h=0,i=f[g].length;i>h;h++)if(f[g][h]._mark==c&&k.get(f[g][h],"seriesIndex")==a&&k.get(f[g][h],"name")==b){this.zr.delShape(f[g][h].id),f[g].splice(h,1),e=!0;break}e&&this.zr.refreshNextFrame()}}},q.inherits(c,o),c}),define("zrender/shape/Circle",["require","./Base","../tool/util"],function(a){"use strict";var b=a("./Base"),c=function(a){b.call(this,a)};return c.prototype={type:"circle",buildPath:function(a,b){a.moveTo(b.x+b.r,b.y),a.arc(b.x,b.y,b.r,0,2*Math.PI,!0)},getRect:function(a){if(a.__rect)return a.__rect;var b;return b="stroke"==a.brushType||"fill"==a.brushType?a.lineWidth||1:0,a.__rect={x:Math.round(a.x-a.r-b/2),y:Math.round(a.y-a.r-b/2),width:2*a.r+b,height:2*a.r+b},a.__rect}},a("../tool/util").inherits(c,b),c}),define("echarts/util/accMath",[],function(){function a(a,b){var c=""+a,d=""+b,e=0;try{e=d.split(".")[1].length}catch(f){}try{e-=c.split(".")[1].length}catch(f){}return(c.replace(".","")-0)/(d.replace(".","")-0)*Math.pow(10,e)}function b(a,b){var c=""+a,d=""+b,e=0;try{e+=c.split(".")[1].length}catch(f){}try{e+=d.split(".")[1].length}catch(f){}return(c.replace(".","")-0)*(d.replace(".","")-0)/Math.pow(10,e)}function c(a,b){var c=0,d=0;try{c=(""+a).split(".")[1].length}catch(e){}try{d=(""+b).split(".")[1].length}catch(e){}var f=Math.pow(10,Math.max(c,d));return(Math.round(a*f)+Math.round(b*f))/f}function d(a,b){return c(a,-b)}return{accDiv:a,accMul:b,accAdd:c,accSub:d}}),define("echarts/util/shape/Icon",["require","zrender/tool/util","zrender/shape/Star","zrender/shape/Heart","zrender/shape/Droplet","zrender/shape/Image","zrender/shape/Base"],function(a){function b(a,b){var c=b.x,d=b.y,e=b.width/16,f=b.height/16;a.moveTo(c,d+b.height),a.lineTo(c+5*e,d+14*f),a.lineTo(c+b.width,d+3*f),a.lineTo(c+13*e,d),a.lineTo(c+2*e,d+11*f),a.lineTo(c,d+b.height),a.moveTo(c+6*e,d+10*f),a.lineTo(c+14*e,d+2*f),a.moveTo(c+10*e,d+13*f),a.lineTo(c+b.width,d+13*f),a.moveTo(c+13*e,d+10*f),a.lineTo(c+13*e,d+b.height)}function c(a,b){var c=b.x,d=b.y,e=b.width/16,f=b.height/16;a.moveTo(c,d+b.height),a.lineTo(c+5*e,d+14*f),a.lineTo(c+b.width,d+3*f),a.lineTo(c+13*e,d),a.lineTo(c+2*e,d+11*f),a.lineTo(c,d+b.height),a.moveTo(c+6*e,d+10*f),a.lineTo(c+14*e,d+2*f),a.moveTo(c+10*e,d+13*f),a.lineTo(c+b.width,d+13*f)}function d(a,b){var c=b.x,d=b.y,e=b.width/16,f=b.height/16;a.moveTo(c+4*e,d+15*f),a.lineTo(c+9*e,d+13*f),a.lineTo(c+14*e,d+8*f),a.lineTo(c+11*e,d+5*f),a.lineTo(c+6*e,d+10*f),a.lineTo(c+4*e,d+15*f),a.moveTo(c+5*e,d),a.lineTo(c+11*e,d),a.moveTo(c+5*e,d+f),a.lineTo(c+11*e,d+f),a.moveTo(c,d+2*f),a.lineTo(c+b.width,d+2*f),a.moveTo(c,d+5*f),a.lineTo(c+3*e,d+b.height),a.lineTo(c+13*e,d+b.height),a.lineTo(c+b.width,d+5*f)}function e(a,b){var c=b.x,d=b.y,e=b.width/16,f=b.height/16;a.moveTo(c,d+3*f),a.lineTo(c+6*e,d+3*f),a.moveTo(c+3*e,d),a.lineTo(c+3*e,d+6*f),a.moveTo(c+3*e,d+8*f),a.lineTo(c+3*e,d+b.height),a.lineTo(c+b.width,d+b.height),a.lineTo(c+b.width,d+3*f),a.lineTo(c+8*e,d+3*f)}function f(a,b){var c=b.x,d=b.y,e=b.width/16,f=b.height/16;a.moveTo(c+6*e,d),a.lineTo(c+2*e,d+3*f),a.lineTo(c+6*e,d+6*f),a.moveTo(c+2*e,d+3*f),a.lineTo(c+14*e,d+3*f),a.lineTo(c+14*e,d+11*f),a.moveTo(c+2*e,d+5*f),a.lineTo(c+2*e,d+13*f),a.lineTo(c+14*e,d+13*f),a.moveTo(c+10*e,d+10*f),a.lineTo(c+14*e,d+13*f),a.lineTo(c+10*e,d+b.height)}function g(a,b){var c=b.x,d=b.y,e=b.width/16,f=b.height/16,g=b.width/2;a.lineWidth=1.5,a.arc(c+g,d+g,g-e,0,2*Math.PI/3),a.moveTo(c+3*e,d+b.height),a.lineTo(c+0*e,d+12*f),a.lineTo(c+5*e,d+11*f),a.moveTo(c,d+8*f),a.arc(c+g,d+g,g-e,Math.PI,5*Math.PI/3),a.moveTo(c+13*e,d),a.lineTo(c+b.width,d+4*f),a.lineTo(c+11*e,d+5*f)}function h(a,b){var c=b.x,d=b.y,e=b.width/16,f=b.height/16;a.moveTo(c,d),a.lineTo(c,d+b.height),a.lineTo(c+b.width,d+b.height),a.moveTo(c+2*e,d+14*f),a.lineTo(c+7*e,d+6*f),a.lineTo(c+11*e,d+11*f),a.lineTo(c+15*e,d+2*f)}function i(a,b){var c=b.x,d=b.y,e=b.width/16,f=b.height/16;a.moveTo(c,d),a.lineTo(c,d+b.height),a.lineTo(c+b.width,d+b.height),a.moveTo(c+3*e,d+14*f),a.lineTo(c+3*e,d+6*f),a.lineTo(c+4*e,d+6*f),a.lineTo(c+4*e,d+14*f),a.moveTo(c+7*e,d+14*f),a.lineTo(c+7*e,d+2*f),a.lineTo(c+8*e,d+2*f),a.lineTo(c+8*e,d+14*f),a.moveTo(c+11*e,d+14*f),a.lineTo(c+11*e,d+9*f),a.lineTo(c+12*e,d+9*f),a.lineTo(c+12*e,d+14*f)}function j(a,b){var c=b.x,d=b.y,e=b.width-2,f=b.height-2,g=Math.min(e,f)/2;d+=2,a.moveTo(c+g+3,d+g-3),a.arc(c+g+3,d+g-3,g-1,0,-Math.PI/2,!0),a.lineTo(c+g+3,d+g-3),a.moveTo(c+g,d),a.lineTo(c+g,d+g),a.arc(c+g,d+g,g,-Math.PI/2,2*Math.PI,!0),a.lineTo(c+g,d+g),a.lineWidth=1.5}function k(a,b){var c=b.x,d=b.y,e=b.width/16,f=b.height/16;d-=f,a.moveTo(c+1*e,d+2*f),a.lineTo(c+15*e,d+2*f),a.lineTo(c+14*e,d+3*f),a.lineTo(c+2*e,d+3*f),a.moveTo(c+3*e,d+6*f),a.lineTo(c+13*e,d+6*f),a.lineTo(c+12*e,d+7*f),a.lineTo(c+4*e,d+7*f),a.moveTo(c+5*e,d+10*f),a.lineTo(c+11*e,d+10*f),a.lineTo(c+10*e,d+11*f),a.lineTo(c+6*e,d+11*f),a.moveTo(c+7*e,d+14*f),a.lineTo(c+9*e,d+14*f),a.lineTo(c+8*e,d+15*f),a.lineTo(c+7*e,d+15*f)}function l(a,b){var c=b.x,d=b.y,e=b.width,f=b.height,g=e/16,h=f/16,i=2*Math.min(g,h);a.moveTo(c+g+i,d+h+i),a.arc(c+g,d+h,i,Math.PI/4,3*Math.PI),a.lineTo(c+7*g-i,d+6*h-i),a.arc(c+7*g,d+6*h,i,5*(Math.PI/4),4*Math.PI),a.arc(c+7*g,d+6*h,i/2,5*(Math.PI/4),4*Math.PI),a.moveTo(c+7*g-i/2,d+6*h+i),a.lineTo(c+g+i,d+14*h-i),a.arc(c+g,d+14*h,i,-Math.PI/4,2*Math.PI),a.moveTo(c+7*g+i/2,d+6*h),a.lineTo(c+14*g-i,d+10*h-i/2),a.moveTo(c+16*g,d+10*h),a.arc(c+14*g,d+10*h,i,0,3*Math.PI),a.lineWidth=1.5}function m(a,b){var c=b.x,d=b.y,e=b.width,f=b.height,g=Math.min(e,f)/2;a.moveTo(c+e,d+f/2),a.arc(c+g,d+g,g,0,2*Math.PI),a.arc(c+g,d,g,Math.PI/4,4*(Math.PI/5)),a.arc(c,d+g,g,-Math.PI/3,Math.PI/3),a.arc(c+e,d+f,g,Math.PI,3*(Math.PI/2)),a.lineWidth=1.5}function n(a,b){for(var c=b.x,d=b.y,e=b.width,f=b.height,g=Math.round(f/3),h=Math.round((g-2)/2),i=3;i--;)a.rect(c,d+g*i+h,e,2)}function o(a,b){for(var c=b.x,d=b.y,e=b.width,f=b.height,g=Math.round(e/3),h=Math.round((g-2)/2),i=3;i--;)a.rect(c+g*i+h,d,2,f)}function p(a,b){var c=b.x,d=b.y,e=b.width/16;a.moveTo(c+e,d),a.lineTo(c+e,d+b.height),a.lineTo(c+15*e,d+b.height),a.lineTo(c+15*e,d),a.lineTo(c+e,d),a.moveTo(c+3*e,d+3*e),a.lineTo(c+13*e,d+3*e),a.moveTo(c+3*e,d+6*e),a.lineTo(c+13*e,d+6*e),a.moveTo(c+3*e,d+9*e),a.lineTo(c+13*e,d+9*e),a.moveTo(c+3*e,d+12*e),a.lineTo(c+9*e,d+12*e)}function q(a,b){var c=b.x,d=b.y,e=b.width/16,f=b.height/16;a.moveTo(c,d),a.lineTo(c,d+b.height),a.lineTo(c+b.width,d+b.height),a.lineTo(c+b.width,d),a.lineTo(c,d),a.moveTo(c+4*e,d),a.lineTo(c+4*e,d+8*f),a.lineTo(c+12*e,d+8*f),a.lineTo(c+12*e,d),a.moveTo(c+6*e,d+11*f),a.lineTo(c+6*e,d+13*f),a.lineTo(c+10*e,d+13*f),a.lineTo(c+10*e,d+11*f),a.lineTo(c+6*e,d+11*f)}function r(a,b){var c=b.x,d=b.y,e=b.width,f=b.height;a.moveTo(c,d+f/2),a.lineTo(c+e,d+f/2),a.moveTo(c+e/2,d),a.lineTo(c+e/2,d+f)}function s(a,b){var c=b.width/2,d=b.height/2,e=Math.min(c,d);a.moveTo(b.x+c+e,b.y+d),a.arc(b.x+c,b.y+d,e,0,2*Math.PI),a.closePath()}function t(a,b){a.rect(b.x,b.y,b.width,b.height),a.closePath()}function u(a,b){var c=b.width/2,d=b.height/2,e=b.x+c,f=b.y+d,g=Math.min(c,d);a.moveTo(e,f-g),a.lineTo(e+g,f+g),a.lineTo(e-g,f+g),a.lineTo(e,f-g),a.closePath()}function v(a,b){var c=b.width/2,d=b.height/2,e=b.x+c,f=b.y+d,g=Math.min(c,d);a.moveTo(e,f-g),a.lineTo(e+g,f),a.lineTo(e,f+g),a.lineTo(e-g,f),a.lineTo(e,f-g),a.closePath()}function w(a,b){var c=b.x,d=b.y,e=b.width/16;a.moveTo(c+8*e,d),a.lineTo(c+e,d+b.height),a.lineTo(c+8*e,d+3*(b.height/4)),a.lineTo(c+15*e,d+b.height),a.lineTo(c+8*e,d),a.closePath()}function x(b,c){var d=a("zrender/shape/Star"),e=c.width/2,f=c.height/2;d.prototype.buildPath(b,{x:c.x+e,y:c.y+f,r:Math.min(e,f),n:c.n||5})}function y(b,c){var d=a("zrender/shape/Heart");d.prototype.buildPath(b,{x:c.x+c.width/2,y:c.y+.2*c.height,a:c.width/2,b:.8*c.height})}function z(b,c){var d=a("zrender/shape/Droplet");d.prototype.buildPath(b,{x:c.x+.5*c.width,y:c.y+.5*c.height,a:.5*c.width,b:.8*c.height})}function A(a,b){var c=b.x,d=b.y-1.5*(b.height/2),e=b.width/2,f=b.height/2,g=Math.min(e,f);a.arc(c+e,d+f,g,4*(Math.PI/5),Math.PI/5),a.lineTo(c+e,d+f+1.5*g),a.closePath()}function B(b,c,d){var e=a("zrender/shape/Image");this._imageShape=this._imageShape||new e({style:{}});for(var f in c)this._imageShape.style[f]=c[f];this._imageShape.brush(b,!1,d)}function C(a){E.call(this,a)}var D=a("zrender/tool/util"),E=a("zrender/shape/Base");return C.prototype={type:"icon",iconLibrary:{mark:b,markUndo:c,markClear:d,dataZoom:e,dataZoomReset:f,restore:g,lineChart:h,barChart:i,pieChart:j,funnelChart:k,forceChart:l,chordChart:m,stackChart:n,tiledChart:o,dataView:p,saveAsImage:q,cross:r,circle:s,rectangle:t,triangle:u,diamond:v,arrow:w,star:x,heart:y,droplet:z,pin:A,image:B},brush:function(b,c,d){var e=c?this.highlightStyle:this.style;e=e||{};var f=e.iconType||this.style.iconType;if("image"===f){var g=a("zrender/shape/Image");g.prototype.brush.call(this,b,c,d)}else{var e=this.beforeBrush(b,c);switch(b.beginPath(),this.buildPath(b,e,d),e.brushType){case"both":b.fill();case"stroke":e.lineWidth>0&&b.stroke();break;default:b.fill()}this.drawText(b,e,this.style),this.afterBrush(b)}},buildPath:function(a,b,c){this.iconLibrary[b.iconType]?this.iconLibrary[b.iconType].call(this,a,b,c):(a.moveTo(b.x,b.y),a.lineTo(b.x+b.width,b.y),a.lineTo(b.x+b.width,b.y+b.height),a.lineTo(b.x,b.y+b.height),a.lineTo(b.x,b.y),a.closePath())},getRect:function(a){return a.__rect?a.__rect:(a.__rect={x:Math.round(a.x),y:Math.round(a.y-("pin"==a.iconType?1.5*(a.height/2):0)),width:a.width,height:a.height*("pin"===a.iconType?1.25:1)},a.__rect)},isCover:function(a,b){var c=this.transformCoordToLocal(a,b);a=c[0],b=c[1];var d=this.style.__rect;d||(d=this.style.__rect=this.getRect(this.style));var e=8>d.height||8>d.width?4:0;return a>=d.x-e&&d.x+d.width+e>=a&&b>=d.y-e&&d.y+d.height+e>=b}},D.inherits(C,E),C}),define("echarts/util/shape/MarkLine",["require","zrender/shape/Base","./Icon","zrender/shape/Line","zrender/shape/BezierCurve","zrender/tool/area","zrender/shape/util/dashedLineTo","zrender/tool/util","zrender/tool/curve"],function(a){function b(a){c.call(this,a),this.style.curveness>0&&this.updatePoints(this.style),this.highlightStyle.curveness>0&&this.updatePoints(this.highlightStyle)}var c=a("zrender/shape/Base"),d=a("./Icon"),e=a("zrender/shape/Line"),f=new e({}),g=a("zrender/shape/BezierCurve"),h=new g({}),i=a("zrender/tool/area"),j=a("zrender/shape/util/dashedLineTo"),k=a("zrender/tool/util"),l=a("zrender/tool/curve");return b.prototype={type:"mark-line",brush:function(a,b){var c=this.style;b&&(c=this.getHighlightStyle(c,this.highlightStyle||{})),a.save(),this.setContext(a,c),this.setTransform(a),a.save(),a.beginPath(),this.buildPath(a,c),a.stroke(),a.restore(),this.brushSymbol(a,c,0),this.brushSymbol(a,c,1),this.drawText(a,c,this.style),a.restore()},buildPath:function(a,b){var c=b.lineType||"solid";if(a.moveTo(b.xStart,b.yStart),b.curveness>0){var d=null;switch(c){case"dashed":d=[5,5];break;case"dotted":d=[1,1]}d&&a.setLineDash&&a.setLineDash(d),a.quadraticCurveTo(b.cpX1,b.cpY1,b.xEnd,b.yEnd)}else if("solid"==c)a.lineTo(b.xEnd,b.yEnd);else{var e=(b.lineWidth||1)*("dashed"==b.lineType?5:1);j(a,b.xStart,b.yStart,b.xEnd,b.yEnd,e)}},updatePoints:function(a){var b=a.curveness||0,c=1,d=a.xStart,e=a.yStart,f=a.xEnd,g=a.yEnd,h=(d+f)/2-c*(e-g)*b,i=(e+g)/2-c*(f-d)*b;a.cpX1=h,a.cpY1=i},brushSymbol:function(a,b,c){if("none"!=b.symbol[c]){a.save(),a.beginPath(),a.lineWidth=b.symbolBorder,a.strokeStyle=b.symbolBorderColor;var e=b.symbol[c].replace("empty","").toLowerCase();b.symbol[c].match("empty")&&(a.fillStyle="#fff");var f=b.xStart,g=b.yStart,h=b.xEnd,i=b.yEnd,j=0===c?f:h,k=0===c?g:i,m=b.curveness||0,n=null!=b.symbolRotate[c]?b.symbolRotate[c]-0:0;if(n=n/180*Math.PI,"arrow"==e&&0===n)if(0===m){var o=0===c?-1:1;n=Math.PI/2+Math.atan2(o*(i-g),o*(h-f))}else{var p=b.cpX1,q=b.cpY1,r=l.quadraticDerivativeAt,s=r(f,p,h,c),t=r(g,q,i,c);n=Math.PI/2+Math.atan2(t,s)}a.translate(j,k),0!==n&&a.rotate(n);var u=b.symbolSize[c];d.prototype.buildPath(a,{x:-u,y:-u,width:2*u,height:2*u,iconType:e}),a.closePath(),a.fill(),a.stroke(),a.restore()}},getRect:function(a){return a.curveness>0?h.getRect(a):f.getRect(a),a.__rect},isCover:function(a,b){var c=this.transformCoordToLocal(a,b);return a=c[0],b=c[1],this.isCoverRect(a,b)?this.style.curveness>0?i.isInside(h,this.style,a,b):i.isInside(f,this.style,a,b):!1}},k.inherits(b,c),b}),define("echarts/util/shape/Symbol",["require","zrender/shape/Base","zrender/shape/Polygon","zrender/tool/util","./normalIsCover"],function(a){function b(a){c.call(this,a)}var c=a("zrender/shape/Base"),d=a("zrender/shape/Polygon"),e=new d({}),f=a("zrender/tool/util");return b.prototype={type:"symbol",buildPath:function(a,b){var c=b.pointList,d=c.length;if(0!==d)for(var e,f,g,h,i,j=1e4,k=Math.ceil(d/j),l=c[0]instanceof Array,m=b.size?b.size:2,n=m,o=m/2,p=2*Math.PI,q=0;k>q;q++){a.beginPath(),e=q*j,f=e+j,f=f>d?d:f;for(var r=e;f>r;r++)if(b.random&&(g=b["randomMap"+r%20]/100,n=m*g*g,o=n/2),l?(h=c[r][0],i=c[r][1]):(h=c[r].x,i=c[r].y),3>n)a.rect(h-o,i-o,n,n);else switch(b.iconType){case"circle":a.moveTo(h,i),a.arc(h,i,o,0,p,!0);break;case"diamond":a.moveTo(h,i-o),a.lineTo(h+o/3,i-o/3),a.lineTo(h+o,i),a.lineTo(h+o/3,i+o/3),a.lineTo(h,i+o),a.lineTo(h-o/3,i+o/3),a.lineTo(h-o,i),a.lineTo(h-o/3,i-o/3),a.lineTo(h,i-o);break;default:a.rect(h-o,i-o,n,n)}if(a.closePath(),k-1>q)switch(b.brushType){case"both":a.fill(),b.lineWidth>0&&a.stroke();break;case"stroke":b.lineWidth>0&&a.stroke();break;default:a.fill()}}},getRect:function(a){return a.__rect||e.getRect(a)},isCover:a("./normalIsCover")},f.inherits(b,c),b}),define("zrender/shape/Polyline",["require","./Base","./util/smoothSpline","./util/smoothBezier","./util/dashedLineTo","./Polygon","../tool/util"],function(a){var b=a("./Base"),c=a("./util/smoothSpline"),d=a("./util/smoothBezier"),e=a("./util/dashedLineTo"),f=function(a){this.brushTypeOnly="stroke",this.textPosition="end",b.call(this,a)};return f.prototype={type:"polyline",buildPath:function(a,b){var d=b.pointList;if(!(2>d.length)){var f=Math.min(b.pointList.length,Math.round(b.pointListLength||b.pointList.length));if(b.smooth&&"spline"!==b.smooth){b.controlPointList||this.updateControlPoints(b);var g=b.controlPointList;a.moveTo(d[0][0],d[0][1]);for(var h,i,j,k=0;f-1>k;k++)h=g[2*k],i=g[2*k+1],j=d[k+1],a.bezierCurveTo(h[0],h[1],i[0],i[1],j[0],j[1])}else if("spline"===b.smooth&&(d=c(d),f=d.length),b.lineType&&"solid"!=b.lineType){if("dashed"==b.lineType||"dotted"==b.lineType){var l=(b.lineWidth||1)*("dashed"==b.lineType?5:1);a.moveTo(d[0][0],d[0][1]);for(var k=1;f>k;k++)e(a,d[k-1][0],d[k-1][1],d[k][0],d[k][1],l)}}else{a.moveTo(d[0][0],d[0][1]);for(var k=1;f>k;k++)a.lineTo(d[k][0],d[k][1])}}},updateControlPoints:function(a){a.controlPointList=d(a.pointList,a.smooth,!1,a.smoothConstraint)},getRect:function(b){return a("./Polygon").prototype.getRect(b)}},a("../tool/util").inherits(f,b),f}),define("zrender/shape/ShapeBundle",["require","./Base","../tool/util"],function(a){var b=a("./Base"),c=function(a){b.call(this,a)};return c.prototype={constructor:c,type:"shape-bundle",brush:function(a,b){var c=this.beforeBrush(a,b);a.beginPath();for(var d=0;c.shapeList.length>d;d++){var e=c.shapeList[d],f=e.style;b&&(f=e.getHighlightStyle(f,e.highlightStyle||{},e.brushTypeOnly)),e.buildPath(a,f)}switch(c.brushType){case"both":a.fill();case"stroke":c.lineWidth>0&&a.stroke();break;default:a.fill()}this.drawText(a,c,this.style),this.afterBrush(a)},getRect:function(a){if(a.__rect)return a.__rect;for(var b=1/0,c=-1/0,d=1/0,e=-1/0,f=0;a.shapeList.length>f;f++)var g=a.shapeList[f],h=g.getRect(g.style),b=Math.min(h.x,b),d=Math.min(h.y,d),c=Math.max(h.x+h.width,c),e=Math.max(h.y+h.height,e);return a.__rect={x:b,y:d,width:c-b,height:e-d},a.__rect},isCover:function(a,b){var c=this.transformCoordToLocal(a,b);if(a=c[0],b=c[1],this.isCoverRect(a,b))for(var d=0;this.style.shapeList.length>d;d++){var e=this.style.shapeList[d];if(e.isCover(a,b))return!0}return!1}},a("../tool/util").inherits(c,b),c}),define("echarts/util/ecAnimation",["require","zrender/tool/util","zrender/tool/curve","zrender/shape/Polygon"],function(a){function b(a,b,c,d,e){var f,g=c.style.pointList,h=g.length;if(!b){if(f=[],"vertical"!=c._orient)for(var i=g[0][1],j=0;h>j;j++)f[j]=[g[j][0],i];else for(var k=g[0][0],j=0;h>j;j++)f[j]=[k,g[j][1]];"half-smooth-polygon"==c.type&&(f[h-1]=o.clone(g[h-1]),f[h-2]=o.clone(g[h-2])),b={style:{pointList:f}}}f=b.style.pointList;var l=f.length;c.style.pointList=l==h?f:h>l?f.concat(g.slice(l)):f.slice(0,h),a.addShape(c),c.__animating=!0,a.animate(c.id,"style").when(d,{pointList:g}).during(function(){c.updateControlPoints&&c.updateControlPoints(c.style)}).done(function(){c.__animating=!1}).start(e)}function c(a,b){for(var c=arguments.length,d=2;c>d;d++){var e=arguments[d];a.style[e]=b.style[e]}}function d(a,b,d,e,f){var g=d.style;b||(b={position:d.position,style:{x:g.x,y:"vertical"==d._orient?g.y+g.height:g.y,width:"vertical"==d._orient?g.width:0,height:"vertical"!=d._orient?g.height:0}});var h=g.x,i=g.y,j=g.width,k=g.height,l=[d.position[0],d.position[1]];c(d,b,"x","y","width","height"),d.position=b.position,a.addShape(d),(l[0]!=b.position[0]||l[1]!=b.position[1])&&a.animate(d.id,"").when(e,{position:l}).start(f),d.__animating=!0,a.animate(d.id,"style").when(e,{x:h,y:i,width:j,height:k}).done(function(){d.__animating=!1}).start(f)}function e(a,b,c,d,e){if(!b){var f=c.style.y;b={style:{y:[f[0],f[0],f[0],f[0]]}}}var g=c.style.y;c.style.y=b.style.y,a.addShape(c),c.__animating=!0,a.animate(c.id,"style").when(d,{y:g}).done(function(){c.__animating=!1}).start(e)}function f(a,b,c,d,e){var f=c.style.x,g=c.style.y,h=c.style.r0,i=c.style.r;c.__animating=!0,"r"!=c._animationAdd?(c.style.r0=0,c.style.r=0,c.rotation=[2*Math.PI,f,g],a.addShape(c),a.animate(c.id,"style").when(d,{r0:h,r:i}).done(function(){c.__animating=!1}).start(e),a.animate(c.id,"").when(Math.round(2*(d/3)),{rotation:[0,f,g]}).start(e)):(c.style.r0=c.style.r,a.addShape(c),a.animate(c.id,"style").when(d,{r0:h}).done(function(){c.__animating=!1}).start(e))}function g(a,b,d,e,f){b||(b="r"!=d._animationAdd?{style:{startAngle:d.style.startAngle,endAngle:d.style.startAngle}}:{style:{r0:d.style.r}});var g=d.style.startAngle,h=d.style.endAngle;c(d,b,"startAngle","endAngle"),a.addShape(d),d.__animating=!0,a.animate(d.id,"style").when(e,{startAngle:g,endAngle:h}).done(function(){d.__animating=!1}).start(f)}function h(a,b,d,e,f){b||(b={style:{x:"left"==d.style.textAlign?d.style.x+100:d.style.x-100,y:d.style.y}});var g=d.style.x,h=d.style.y;c(d,b,"x","y"),a.addShape(d),d.__animating=!0,a.animate(d.id,"style").when(e,{x:g,y:h}).done(function(){d.__animating=!1}).start(f)}function i(b,c,d,e,f){var g=a("zrender/shape/Polygon").prototype.getRect(d.style),h=g.x+g.width/2,i=g.y+g.height/2;d.scale=[.1,.1,h,i],b.addShape(d),d.__animating=!0,b.animate(d.id,"").when(e,{scale:[1,1,h,i]}).done(function(){d.__animating=!1}).start(f)}function j(a,b,d,e,f){b||(b={style:{source0:0,source1:d.style.source1>0?360:-360,target0:0,target1:d.style.target1>0?360:-360}});var g=d.style.source0,h=d.style.source1,i=d.style.target0,j=d.style.target1;b.style&&c(d,b,"source0","source1","target0","target1"),a.addShape(d),d.__animating=!0,a.animate(d.id,"style").when(e,{source0:g,source1:h,target0:i,target1:j}).done(function(){d.__animating=!1}).start(f)}function k(a,b,c,d,e){b||(b={style:{angle:c.style.startAngle}});var f=c.style.angle;c.style.angle=b.style.angle,a.addShape(c),c.__animating=!0,a.animate(c.id,"style").when(d,{angle:f}).done(function(){c.__animating=!1}).start(e)}function l(a,b,c,e,f,g){if(c.style._x=c.style.x,c.style._y=c.style.y,c.style._width=c.style.width,c.style._height=c.style.height,b)d(a,b,c,e,f);else{var h=c._x||0,i=c._y||0;c.scale=[.01,.01,h,i],a.addShape(c),c.__animating=!0,a.animate(c.id,"").delay(g).when(e,{scale:[1,1,h,i]}).done(function(){c.__animating=!1}).start(f||"QuinticOut")}}function m(a,b,d,e,f){b||(b={style:{xStart:d.style.xStart,yStart:d.style.yStart,xEnd:d.style.xStart,yEnd:d.style.yStart}});var g=d.style.xStart,h=d.style.xEnd,i=d.style.yStart,j=d.style.yEnd;c(d,b,"xStart","xEnd","yStart","yEnd"),a.addShape(d),d.__animating=!0,a.animate(d.id,"style").when(e,{xStart:g,xEnd:h,yStart:i,yEnd:j}).done(function(){d.__animating=!1}).start(f)}function n(a,b,c,d,e){e=e||"QuinticOut",c.__animating=!0,a.addShape(c);var f=c.style,g=function(){c.__animating=!1},h=f.xStart,i=f.yStart,j=f.xEnd,k=f.yEnd;if(f.curveness>0){c.updatePoints(f);var l={p:0},m=f.cpX1,n=f.cpY1,o=[],q=[],r=p.quadraticSubdivide;a.animation.animate(l).when(d,{p:1}).during(function(){r(h,m,j,l.p,o),r(i,n,k,l.p,q),f.cpX1=o[1],f.cpY1=q[1],f.xEnd=o[2],f.yEnd=q[2],a.modShape(c)}).done(g).start(e)}else a.animate(c.id,"style").when(0,{xEnd:h,yEnd:i}).when(d,{xEnd:j,yEnd:k}).done(g).start(e)}var o=a("zrender/tool/util"),p=a("zrender/tool/curve");return{pointList:b,rectangle:d,candle:e,ring:f,sector:g,text:h,polygon:i,ribbon:j,gaugePointer:k,icon:l,line:m,markline:n}}),define("echarts/util/ecEffect",["require","../util/ecData","zrender/shape/Circle","zrender/shape/Image","zrender/tool/curve","../util/shape/Icon","../util/shape/Symbol","zrender/shape/ShapeBundle","zrender/shape/Polyline","zrender/tool/vector","zrender/tool/env"],function(a){function b(a,b,c,d){var e,g=c.effect,i=g.color||c.style.strokeColor||c.style.color,k=g.shadowColor||i,l=g.scaleSize,m=g.bounceDistance,n=void 0!==g.shadowBlur?g.shadowBlur:l;"image"!==c.type?(e=new j({zlevel:d,style:{brushType:"stroke",iconType:"droplet"!=c.style.iconType?c.style.iconType:"circle",x:n+1,y:n+1,n:c.style.n,width:c.style._width*l,height:c.style._height*l,lineWidth:1,strokeColor:i,shadowColor:k,shadowBlur:n},draggable:!1,hoverable:!1}),"pin"==c.style.iconType&&(e.style.y+=1.5*(e.style.height/2)),o&&(e.style.image=a.shapeToImage(e,e.style.width+2*n+2,e.style.height+2*n+2).style.image,e=new h({zlevel:e.zlevel,style:e.style,draggable:!1,hoverable:!1}))):e=new h({zlevel:d,style:c.style,draggable:!1,hoverable:!1}),f.clone(c,e),e.position=c.position,b.push(e),a.addShape(e);var p="image"!==c.type?window.devicePixelRatio||1:1,q=(e.style.width/p-c.style._width)/2;e.style.x=c.style._x-q,e.style.y=c.style._y-q,"pin"==c.style.iconType&&(e.style.y-=1.5*(c.style.height/2));var r=100*(g.period+10*Math.random());a.modShape(c.id,{invisible:!0});var s=e.style.x+e.style.width/2/p,t=e.style.y+e.style.height/2/p;"scale"===g.type?(a.modShape(e.id,{scale:[.1,.1,s,t]}),a.animate(e.id,"",g.loop).when(r,{scale:[1,1,s,t]}).done(function(){c.effect.show=!1,a.delShape(e.id)}).start()):a.animate(e.id,"style",g.loop).when(r,{y:e.style.y-m}).when(2*r,{y:e.style.y}).done(function(){c.effect.show=!1,a.delShape(e.id)}).start()}function c(a,b,c,d){var e=c.effect,f=e.color||c.style.strokeColor||c.style.color,g=e.scaleSize,h=e.shadowColor||f,i=void 0!==e.shadowBlur?e.shadowBlur:2*g,j=window.devicePixelRatio||1,l=new k({zlevel:d,position:c.position,scale:c.scale,style:{pointList:c.style.pointList,iconType:c.style.iconType,color:f,strokeColor:f,shadowColor:h,shadowBlur:i*j,random:!0,brushType:"fill",lineWidth:1,size:c.style.size},draggable:!1,hoverable:!1});b.push(l),a.addShape(l),a.modShape(c.id,{invisible:!0});for(var m=Math.round(100*e.period),n={},o={},p=0;20>p;p++)l.style["randomMap"+p]=0,n={},n["randomMap"+p]=100,o={},o["randomMap"+p]=0,l.style["randomMap"+p]=100*Math.random(),a.animate(l.id,"style",!0).when(m,n).when(2*m,o).when(3*m,n).when(4*m,n).delay(Math.random()*m*p).start()}function d(a,b,c,d,e){var h=c.effect,j=c.style,k=h.color||j.strokeColor||j.color,l=h.shadowColor||j.strokeColor||k,p=j.lineWidth*h.scaleSize,q=void 0!==h.shadowBlur?h.shadowBlur:p,r=new g({zlevel:d,style:{x:q,y:q,r:p,color:k,shadowColor:l,shadowBlur:q},hoverable:!1}),s=0;if(o&&!e){var d=r.zlevel;r=a.shapeToImage(r,2*(p+q),2*(p+q)),r.zlevel=d,r.hoverable=!1,s=q}e||(f.clone(c,r),r.position=c.position,b.push(r),a.addShape(r));var t=function(){e||(c.effect.show=!1,a.delShape(r.id)),r.effectAnimator=null};if(c instanceof m){for(var u=[0],v=0,w=j.pointList,x=j.controlPointList,y=1;w.length>y;y++){if(x){var z=x[2*(y-1)],A=x[2*(y-1)+1];v+=n.dist(w[y-1],z)+n.dist(z,A)+n.dist(A,w[y])}else v+=n.dist(w[y-1],w[y]);u.push(v)}for(var B={p:0},C=a.animation.animate(B,{loop:h.loop}),y=0;u.length>y;y++)C.when(u[y]*h.period,{p:y});C.during(function(){var b,c,d=Math.floor(B.p);if(d==w.length-1)b=w[d][0],c=w[d][1];else{var f=B.p-d,g=w[d],h=w[d+1];if(x){var j=x[2*d],k=x[2*d+1];b=i.cubicAt(g[0],j[0],k[0],h[0],f),c=i.cubicAt(g[1],j[1],k[1],h[1],f)}else b=(h[0]-g[0])*f+g[0],c=(h[1]-g[1])*f+g[1]}r.style.x=b,r.style.y=c,e||a.modShape(r)}).done(t).start(),C.duration=v*h.period,r.effectAnimator=C}else{var D=j.xStart-s,E=j.yStart-s,F=j.xEnd-s,G=j.yEnd-s;r.style.x=D,r.style.y=E;var H=(F-D)*(F-D)+(G-E)*(G-E),I=Math.round(Math.sqrt(Math.round(H*h.period*h.period)));if(c.style.curveness>0){var J=j.cpX1-s,K=j.cpY1-s;r.effectAnimator=a.animation.animate(r,{loop:h.loop}).when(I,{p:1}).during(function(b,c){r.style.x=i.quadraticAt(D,J,F,c),r.style.y=i.quadraticAt(E,K,G,c),e||a.modShape(r)}).done(t).start()}else r.effectAnimator=a.animation.animate(r.style,{loop:h.loop}).when(I,{x:F,y:G}).during(function(){e||a.modShape(r)}).done(t).start();r.effectAnimator.duration=I}return r}function e(a,b,c,e){var f=new l({style:{shapeList:[]},zlevel:e,hoverable:!1}),g=c.style.shapeList,h=c.effect;f.position=c.position;for(var i=0,j=[],k=0;g.length>k;k++){g[k].effect=h;var m=d(a,null,g[k],e,!0),n=m.effectAnimator;f.style.shapeList.push(m),n.duration>i&&(i=n.duration),0===k&&(f.style.color=m.style.color,f.style.shadowBlur=m.style.shadowBlur,f.style.shadowColor=m.style.shadowColor),j.push(n)}b.push(f),a.addShape(f);var o=function(){for(var a=0;j.length>a;a++)j[a].stop()};if(i){f.__dummy=0;var p=a.animate(f.id,"",h.loop).when(i,{__dummy:1}).during(function(){a.modShape(f)}).done(function(){c.effect.show=!1,a.delShape(f.id)}).start(),q=p.stop;p.stop=function(){o(),q.call(this)}}}var f=a("../util/ecData"),g=a("zrender/shape/Circle"),h=a("zrender/shape/Image"),i=a("zrender/tool/curve"),j=a("../util/shape/Icon"),k=a("../util/shape/Symbol"),l=a("zrender/shape/ShapeBundle"),m=a("zrender/shape/Polyline"),n=a("zrender/tool/vector"),o=a("zrender/tool/env").canvasSupported;return{point:b,largePoint:c,line:d,largeLine:e}}),define("echarts/component/base",["require","../config","../util/ecData","../util/ecQuery","../util/number","zrender/tool/util","zrender/tool/env"],function(a){function b(a,b,e,f,g){this.ecTheme=a,this.messageCenter=b,this.zr=e,this.option=f,this.series=f.series,this.myChart=g,this.component=g.component,this.shapeList=[],this.effectList=[];var h=this;h._onlegendhoverlink=function(a){if(h.legendHoverLink)for(var b,e=a.target,f=h.shapeList.length-1;f>=0;f--)b=h.type==c.CHART_TYPE_PIE||h.type==c.CHART_TYPE_FUNNEL?d.get(h.shapeList[f],"name"):(d.get(h.shapeList[f],"series")||{}).name,b!=e||h.shapeList[f].invisible||h.shapeList[f].__animating||h.zr.addHoverShape(h.shapeList[f])},b&&b.bind(c.EVENT.LEGEND_HOVERLINK,this._onlegendhoverlink)}var c=a("../config"),d=a("../util/ecData"),e=a("../util/ecQuery"),f=a("../util/number"),g=a("zrender/tool/util");return b.prototype={canvasSupported:a("zrender/tool/env").canvasSupported,_getZ:function(a){var b=this.ecTheme[this.type];return b&&null!=b[a]?b[a]:(b=c[this.type],b&&null!=b[a]?b[a]:0)},getZlevelBase:function(){return this._getZ("zlevel")},getZBase:function(){return this._getZ("z")},reformOption:function(a){return g.merge(g.merge(a||{},g.clone(this.ecTheme[this.type]||{})),g.clone(c[this.type]||{}))},reformCssArray:function(a){if(!(a instanceof Array))return[a,a,a,a];switch(a.length+""){case"4":return a;case"3":return[a[0],a[1],a[2],a[1]];case"2":return[a[0],a[1],a[0],a[1]];case"1":return[a[0],a[0],a[0],a[0]];case"0":return[0,0,0,0]}},getShapeById:function(a){for(var b=0,c=this.shapeList.length;c>b;b++)if(this.shapeList[b].id===a)return this.shapeList[b];return null},getFont:function(a){var b=this.getTextStyle(g.clone(a));return b.fontStyle+" "+b.fontWeight+" "+b.fontSize+"px "+b.fontFamily},getTextStyle:function(a){return g.merge(g.merge(a||{},this.ecTheme.textStyle),c.textStyle)},getItemStyleColor:function(a,b,c,d){return"function"==typeof a?a.call(this.myChart,{seriesIndex:b,series:this.series[b],dataIndex:c,data:d}):a},getDataFromOption:function(a,b){return null!=a?null!=a.value?a.value:a:b},subPixelOptimize:function(a,b){return a=1===b%2?Math.floor(a)+.5:Math.round(a)},resize:function(){this.refresh&&this.refresh(),this.clearEffectShape&&this.clearEffectShape(!0);var a=this;setTimeout(function(){a.animationEffect&&a.animationEffect()},200)},clear:function(){this.clearEffectShape&&this.clearEffectShape(),this.zr&&this.zr.delShape(this.shapeList),this.shapeList=[]},dispose:function(){this.onbeforDispose&&this.onbeforDispose(),this.clear(),this.shapeList=null,this.effectList=null,this.messageCenter&&this.messageCenter.unbind(c.EVENT.LEGEND_HOVERLINK,this._onlegendhoverlink),this.onafterDispose&&this.onafterDispose()},query:e.query,deepQuery:e.deepQuery,deepMerge:e.deepMerge,parsePercent:f.parsePercent,parseCenter:f.parseCenter,parseRadius:f.parseRadius,numAddCommas:f.addCommas},b}),define("echarts/layout/EdgeBundling",["require","../data/KDTree","zrender/tool/vector"],function(a){function b(a,b){a=a.array,b=b.array;var c=b[0]-a[0],d=b[1]-a[1],e=b[2]-a[2],f=b[3]-a[3];return c*c+d*d+e*e+f*f}function c(a){this.points=[a.mp0,a.mp1],this.group=a}function d(a){var b=a.points;b[0][1]<b[1][1]||a instanceof c?(this.array=[b[0][0],b[0][1],b[1][0],b[1][1]],this._startPoint=b[0],this._endPoint=b[1]):(this.array=[b[1][0],b[1][1],b[0][0],b[0][1]],this._startPoint=b[1],this._endPoint=b[0]),this.ink=k(b[0],b[1]),this.edge=a,this.group=null}function e(){this.edgeList=[],this.mp0=i(),this.mp1=i(),this.ink=0}function f(){this.maxNearestEdge=6,this.maxTurningAngle=Math.PI/4,this.maxIteration=20}var g=a("../data/KDTree"),h=a("zrender/tool/vector"),i=h.create,j=h.distSquare,k=h.dist,l=h.copy,m=h.clone;return d.prototype.getStartPoint=function(){return this._startPoint},d.prototype.getEndPoint=function(){return this._endPoint},e.prototype.addEdge=function(a){a.group=this,this.edgeList.push(a)},e.prototype.removeEdge=function(a){a.group=null,this.edgeList.splice(this.edgeList.indexOf(a),1)},f.prototype={constructor:f,run:function(a){function b(a,b){return 1e-10>j(a,b)}function d(a,c){for(var d=[],e=0,f=0;a.length>f;f++)e>0&&b(a[f],d[e-1])||(d[e++]=m(a[f]));return c[0]&&!b(d[0],c[0])&&(d=d.reverse()),d}for(var e=this._iterate(a),f=0;f++<this.maxIteration;){for(var g=[],h=0;e.groups.length>h;h++)g.push(new c(e.groups[h]));var i=this._iterate(g);if(0>=i.savedInk)break;e=i}var k=[],l=function(a,b){for(var e,f=0;a.length>f;f++){var g=a[f];if(g.edgeList[0]&&g.edgeList[0].edge instanceof c){for(var h=[],i=0;g.edgeList.length>i;i++)h.push(g.edgeList[i].edge.group);e=b?b.slice():[],e.unshift(g.mp0),e.push(g.mp1),l(h,e)}else for(var i=0;g.edgeList.length>i;i++){var j=g.edgeList[i];e=b?b.slice():[],e.unshift(g.mp0),e.push(g.mp1),e.unshift(j.getStartPoint()),e.push(j.getEndPoint()),k.push({points:d(e,j.edge.points),rawEdge:j.edge})}}};return l(e.groups),k},_iterate:function(a){for(var c=[],f=[],h=0,j=0;a.length>j;j++){var k=new d(a[j]);c.push(k)}for(var m=new g(c,4),n=[],o=i(),p=i(),q=0,r=i(),s=i(),t=0,j=0;c.length>j;j++){var k=c[j];if(!k.group){m.nearestN(k,this.maxNearestEdge,b,n);for(var u=0,v=null,w=null,x=0;n.length>x;x++){var y=n[x],z=0;y.group?y.group!==w&&(w=y.group,q=this._calculateGroupEdgeInk(y.group,k,o,p),z=y.group.ink+k.ink-q):(q=this._calculateEdgeEdgeInk(k,y,o,p),z=y.ink+k.ink-q),z>u&&(u=z,v=y,l(s,p),l(r,o),t=q)}if(v){h+=u;var A;v.group||(A=new e,f.push(A),A.addEdge(v)),A=v.group,l(A.mp0,r),l(A.mp1,s),A.ink=t,v.group.addEdge(k)}else{var A=new e;f.push(A),l(A.mp0,k.getStartPoint()),l(A.mp1,k.getEndPoint()),A.ink=k.ink,A.addEdge(k)}}}return{groups:f,edges:c,savedInk:h}},_calculateEdgeEdgeInk:function(){var a=[],b=[];return function(c,d,e,f){a[0]=c.getStartPoint(),a[1]=d.getStartPoint(),
b[0]=c.getEndPoint(),b[1]=d.getEndPoint(),this._calculateMeetPoints(a,b,e,f);var g=k(a[0],e)+k(e,f)+k(f,b[0])+k(a[1],e)+k(f,b[1]);return g}}(),_calculateGroupEdgeInk:function(a,b,c,d){for(var e=[],f=[],g=0;a.edgeList.length>g;g++){var h=a.edgeList[g];e.push(h.getStartPoint()),f.push(h.getEndPoint())}e.push(b.getStartPoint()),f.push(b.getEndPoint()),this._calculateMeetPoints(e,f,c,d);for(var i=k(c,d),g=0;e.length>g;g++)i+=k(e[g],c)+k(f[g],d);return i},_calculateMeetPoints:function(){var a=i(),b=i();return function(c,d,e,f){h.set(a,0,0),h.set(b,0,0);for(var g=c.length,i=0;g>i;i++)h.add(a,a,c[i]);h.scale(a,a,1/g),g=d.length;for(var i=0;g>i;i++)h.add(b,b,d[i]);h.scale(b,b,1/g),this._limitTurningAngle(c,a,b,e),this._limitTurningAngle(d,b,a,f)}}(),_limitTurningAngle:function(){var a=i(),b=i(),c=i(),d=i();return function(e,f,g,i){var l=Math.cos(this.maxTurningAngle),m=Math.tan(this.maxTurningAngle);h.sub(a,f,g),h.normalize(a,a),h.copy(i,f);for(var n=0,o=0;e.length>o;o++){var p=e[o];h.sub(b,p,f);var q=h.len(b);h.scale(b,b,1/q);var r=h.dot(b,a);if(l>r){h.scaleAndAdd(c,f,a,q*r);var s=k(c,p),t=s/m;h.scaleAndAdd(d,c,a,-t);var u=j(d,f);u>n&&(n=u,h.copy(i,d))}}}}()},f}),define("zrender/shape/Star",["require","../tool/math","./Base","../tool/util"],function(a){var b=a("../tool/math"),c=b.sin,d=b.cos,e=Math.PI,f=a("./Base"),g=function(a){f.call(this,a)};return g.prototype={type:"star",buildPath:function(a,b){var f=b.n;if(f&&!(2>f)){var g=b.x,h=b.y,i=b.r,j=b.r0;null==j&&(j=f>4?i*d(2*e/f)/d(e/f):i/3);var k=e/f,l=-e/2,m=g+i*d(l),n=h+i*c(l);l+=k;var o=b.pointList=[];o.push([m,n]);for(var p,q=0,r=2*f-1;r>q;q++)p=0===q%2?j:i,o.push([g+p*d(l),h+p*c(l)]),l+=k;o.push([m,n]),a.moveTo(o[0][0],o[0][1]);for(var q=0;o.length>q;q++)a.lineTo(o[q][0],o[q][1]);a.closePath()}},getRect:function(a){if(a.__rect)return a.__rect;var b;return b="stroke"==a.brushType||"fill"==a.brushType?a.lineWidth||1:0,a.__rect={x:Math.round(a.x-a.r-b/2),y:Math.round(a.y-a.r-b/2),width:2*a.r+b,height:2*a.r+b},a.__rect}},a("../tool/util").inherits(g,f),g}),define("zrender/shape/Heart",["require","./Base","./util/PathProxy","../tool/area","../tool/util"],function(a){"use strict";var b=a("./Base"),c=a("./util/PathProxy"),d=a("../tool/area"),e=function(a){b.call(this,a),this._pathProxy=new c};return e.prototype={type:"heart",buildPath:function(a,b){var d=this._pathProxy||new c;d.begin(a),d.moveTo(b.x,b.y),d.bezierCurveTo(b.x+b.a/2,b.y-2*b.b/3,b.x+2*b.a,b.y+b.b/3,b.x,b.y+b.b),d.bezierCurveTo(b.x-2*b.a,b.y+b.b/3,b.x-b.a/2,b.y-2*b.b/3,b.x,b.y),d.closePath()},getRect:function(a){return a.__rect?a.__rect:(this._pathProxy.isEmpty()||this.buildPath(null,a),this._pathProxy.fastBoundingRect())},isCover:function(a,b){var c=this.transformCoordToLocal(a,b);return a=c[0],b=c[1],this.isCoverRect(a,b)?d.isInsidePath(this._pathProxy.pathCommands,this.style.lineWidth,this.style.brushType,a,b):void 0}},a("../tool/util").inherits(e,b),e}),define("zrender/shape/Droplet",["require","./Base","./util/PathProxy","../tool/area","../tool/util"],function(a){"use strict";var b=a("./Base"),c=a("./util/PathProxy"),d=a("../tool/area"),e=function(a){b.call(this,a),this._pathProxy=new c};return e.prototype={type:"droplet",buildPath:function(a,b){var d=this._pathProxy||new c;d.begin(a),d.moveTo(b.x,b.y+b.a),d.bezierCurveTo(b.x+b.a,b.y+b.a,b.x+3*b.a/2,b.y-b.a/3,b.x,b.y-b.b),d.bezierCurveTo(b.x-3*b.a/2,b.y-b.a/3,b.x-b.a,b.y+b.a,b.x,b.y+b.a),d.closePath()},getRect:function(a){return a.__rect?a.__rect:(this._pathProxy.isEmpty()||this.buildPath(null,a),this._pathProxy.fastBoundingRect())},isCover:function(a,b){var c=this.transformCoordToLocal(a,b);return a=c[0],b=c[1],this.isCoverRect(a,b)?d.isInsidePath(this._pathProxy.pathCommands,this.style.lineWidth,this.style.brushType,a,b):void 0}},a("../tool/util").inherits(e,b),e}),define("zrender/tool/math",[],function(){function a(a,b){return Math.sin(b?a*e:a)}function b(a,b){return Math.cos(b?a*e:a)}function c(a){return a*e}function d(a){return a/e}var e=Math.PI/180;return{sin:a,cos:b,degreeToRadian:c,radianToDegree:d}}),define("zrender/shape/util/PathProxy",["require","../../tool/vector"],function(a){var b=a("../../tool/vector"),c=function(a,b){this.command=a,this.points=b||null},d=function(){this.pathCommands=[],this._ctx=null,this._min=[],this._max=[]};return d.prototype.fastBoundingRect=function(){var a=this._min,c=this._max;a[0]=a[1]=1/0,c[0]=c[1]=-1/0;for(var d=0;this.pathCommands.length>d;d++){var e=this.pathCommands[d],f=e.points;switch(e.command){case"M":b.min(a,a,f),b.max(c,c,f);break;case"L":b.min(a,a,f),b.max(c,c,f);break;case"C":for(var g=0;6>g;g+=2)a[0]=Math.min(a[0],a[0],f[g]),a[1]=Math.min(a[1],a[1],f[g+1]),c[0]=Math.max(c[0],c[0],f[g]),c[1]=Math.max(c[1],c[1],f[g+1]);break;case"Q":for(var g=0;4>g;g+=2)a[0]=Math.min(a[0],a[0],f[g]),a[1]=Math.min(a[1],a[1],f[g+1]),c[0]=Math.max(c[0],c[0],f[g]),c[1]=Math.max(c[1],c[1],f[g+1]);break;case"A":var h=f[0],i=f[1],j=f[2],k=f[3];a[0]=Math.min(a[0],a[0],h-j),a[1]=Math.min(a[1],a[1],i-k),c[0]=Math.max(c[0],c[0],h+j),c[1]=Math.max(c[1],c[1],i+k)}}return{x:a[0],y:a[1],width:c[0]-a[0],height:c[1]-a[1]}},d.prototype.begin=function(a){return this._ctx=a||null,this.pathCommands.length=0,this},d.prototype.moveTo=function(a,b){return this.pathCommands.push(new c("M",[a,b])),this._ctx&&this._ctx.moveTo(a,b),this},d.prototype.lineTo=function(a,b){return this.pathCommands.push(new c("L",[a,b])),this._ctx&&this._ctx.lineTo(a,b),this},d.prototype.bezierCurveTo=function(a,b,d,e,f,g){return this.pathCommands.push(new c("C",[a,b,d,e,f,g])),this._ctx&&this._ctx.bezierCurveTo(a,b,d,e,f,g),this},d.prototype.quadraticCurveTo=function(a,b,d,e){return this.pathCommands.push(new c("Q",[a,b,d,e])),this._ctx&&this._ctx.quadraticCurveTo(a,b,d,e),this},d.prototype.arc=function(a,b,d,e,f,g){return this.pathCommands.push(new c("A",[a,b,d,d,e,f-e,0,g?0:1])),this._ctx&&this._ctx.arc(a,b,d,e,f,g),this},d.prototype.arcTo=function(a,b,c,d,e){return this._ctx&&this._ctx.arcTo(a,b,c,d,e),this},d.prototype.rect=function(a,b,c,d){return this._ctx&&this._ctx.rect(a,b,c,d),this},d.prototype.closePath=function(){return this.pathCommands.push(new c("z")),this._ctx&&this._ctx.closePath(),this},d.prototype.isEmpty=function(){return 0===this.pathCommands.length},d.PathSegment=c,d}),define("zrender/shape/Line",["require","./Base","./util/dashedLineTo","../tool/util"],function(a){var b=a("./Base"),c=a("./util/dashedLineTo"),d=function(a){this.brushTypeOnly="stroke",this.textPosition="end",b.call(this,a)};return d.prototype={type:"line",buildPath:function(a,b){if(b.lineType&&"solid"!=b.lineType){if("dashed"==b.lineType||"dotted"==b.lineType){var d=(b.lineWidth||1)*("dashed"==b.lineType?5:1);c(a,b.xStart,b.yStart,b.xEnd,b.yEnd,d)}}else a.moveTo(b.xStart,b.yStart),a.lineTo(b.xEnd,b.yEnd)},getRect:function(a){if(a.__rect)return a.__rect;var b=a.lineWidth||1;return a.__rect={x:Math.min(a.xStart,a.xEnd)-b,y:Math.min(a.yStart,a.yEnd)-b,width:Math.abs(a.xStart-a.xEnd)+b,height:Math.abs(a.yStart-a.yEnd)+b},a.__rect}},a("../tool/util").inherits(d,b),d}),define("zrender/shape/BezierCurve",["require","./Base","../tool/util"],function(a){"use strict";var b=a("./Base"),c=function(a){this.brushTypeOnly="stroke",this.textPosition="end",b.call(this,a)};return c.prototype={type:"bezier-curve",buildPath:function(a,b){a.moveTo(b.xStart,b.yStart),void 0!==b.cpX2&&void 0!==b.cpY2?a.bezierCurveTo(b.cpX1,b.cpY1,b.cpX2,b.cpY2,b.xEnd,b.yEnd):a.quadraticCurveTo(b.cpX1,b.cpY1,b.xEnd,b.yEnd)},getRect:function(a){if(a.__rect)return a.__rect;var b=Math.min(a.xStart,a.xEnd,a.cpX1),c=Math.min(a.yStart,a.yEnd,a.cpY1),d=Math.max(a.xStart,a.xEnd,a.cpX1),e=Math.max(a.yStart,a.yEnd,a.cpY1),f=a.cpX2,g=a.cpY2;void 0!==f&&void 0!==g&&(b=Math.min(b,f),c=Math.min(c,g),d=Math.max(d,f),e=Math.max(e,g));var h=a.lineWidth||1;return a.__rect={x:b-h,y:c-h,width:d-b+h,height:e-c+h},a.__rect}},a("../tool/util").inherits(c,b),c}),define("zrender/shape/util/dashedLineTo",[],function(){var a=[5,5];return function(b,c,d,e,f,g){if(b.setLineDash)return a[0]=a[1]=g,b.setLineDash(a),b.moveTo(c,d),void b.lineTo(e,f);g="number"!=typeof g?5:g;var h=e-c,i=f-d,j=Math.floor(Math.sqrt(h*h+i*i)/g);h/=j,i/=j;for(var k=!0,l=0;j>l;++l)k?b.moveTo(c,d):b.lineTo(c,d),k=!k,c+=h,d+=i;b.lineTo(e,f)}}),define("zrender/shape/Polygon",["require","./Base","./util/smoothSpline","./util/smoothBezier","./util/dashedLineTo","../tool/util"],function(a){var b=a("./Base"),c=a("./util/smoothSpline"),d=a("./util/smoothBezier"),e=a("./util/dashedLineTo"),f=function(a){b.call(this,a)};return f.prototype={type:"polygon",buildPath:function(a,b){var f=b.pointList;if(!(2>f.length)){if(b.smooth&&"spline"!==b.smooth){var g=d(f,b.smooth,!0,b.smoothConstraint);a.moveTo(f[0][0],f[0][1]);for(var h,i,j,k=f.length,l=0;k>l;l++)h=g[2*l],i=g[2*l+1],j=f[(l+1)%k],a.bezierCurveTo(h[0],h[1],i[0],i[1],j[0],j[1])}else if("spline"===b.smooth&&(f=c(f,!0)),b.lineType&&"solid"!=b.lineType){if("dashed"==b.lineType||"dotted"==b.lineType){var m=b._dashLength||(b.lineWidth||1)*("dashed"==b.lineType?5:1);b._dashLength=m,a.moveTo(f[0][0],f[0][1]);for(var l=1,n=f.length;n>l;l++)e(a,f[l-1][0],f[l-1][1],f[l][0],f[l][1],m);e(a,f[f.length-1][0],f[f.length-1][1],f[0][0],f[0][1],m)}}else{a.moveTo(f[0][0],f[0][1]);for(var l=1,n=f.length;n>l;l++)a.lineTo(f[l][0],f[l][1]);a.lineTo(f[0][0],f[0][1])}a.closePath()}},getRect:function(a){if(a.__rect)return a.__rect;for(var b=Number.MAX_VALUE,c=Number.MIN_VALUE,d=Number.MAX_VALUE,e=Number.MIN_VALUE,f=a.pointList,g=0,h=f.length;h>g;g++)b>f[g][0]&&(b=f[g][0]),f[g][0]>c&&(c=f[g][0]),d>f[g][1]&&(d=f[g][1]),f[g][1]>e&&(e=f[g][1]);var i;return i="stroke"==a.brushType||"fill"==a.brushType?a.lineWidth||1:0,a.__rect={x:Math.round(b-i/2),y:Math.round(d-i/2),width:c-b+i,height:e-d+i},a.__rect}},a("../tool/util").inherits(f,b),f}),define("echarts/util/shape/normalIsCover",[],function(){return function(a,b){var c=this.transformCoordToLocal(a,b);return a=c[0],b=c[1],this.isCoverRect(a,b)}}),define("zrender/shape/util/smoothSpline",["require","../../tool/vector"],function(a){function b(a,b,c,d,e,f,g){var h=.5*(c-a),i=.5*(d-b);return(2*(b-c)+h+i)*g+(-3*(b-c)-2*h-i)*f+h*e+b}var c=a("../../tool/vector");return function(a,d){for(var e=a.length,f=[],g=0,h=1;e>h;h++)g+=c.distance(a[h-1],a[h]);var i=g/5;i=e>i?e:i;for(var h=0;i>h;h++){var j,k,l,m=h/(i-1)*(d?e:e-1),n=Math.floor(m),o=m-n,p=a[n%e];d?(j=a[(n-1+e)%e],k=a[(n+1)%e],l=a[(n+2)%e]):(j=a[0===n?n:n-1],k=a[n>e-2?e-1:n+1],l=a[n>e-3?e-1:n+2]);var q=o*o,r=o*q;f.push([b(j[0],p[0],k[0],l[0],o,q,r),b(j[1],p[1],k[1],l[1],o,q,r)])}return f}}),define("zrender/shape/util/smoothBezier",["require","../../tool/vector"],function(a){var b=a("../../tool/vector");return function(a,c,d,e){var f,g,h,i,j=[],k=[],l=[],m=[],n=!!e;if(n){h=[1/0,1/0],i=[-1/0,-1/0];for(var o=0,p=a.length;p>o;o++)b.min(h,h,a[o]),b.max(i,i,a[o]);b.min(h,h,e[0]),b.max(i,i,e[1])}for(var o=0,p=a.length;p>o;o++){var f,g,q=a[o];if(d)f=a[o?o-1:p-1],g=a[(o+1)%p];else{if(0===o||o===p-1){j.push(b.clone(a[o]));continue}f=a[o-1],g=a[o+1]}b.sub(k,g,f),b.scale(k,k,c);var r=b.distance(q,f),s=b.distance(q,g),t=r+s;0!==t&&(r/=t,s/=t),b.scale(l,k,-r),b.scale(m,k,s);var u=b.add([],q,l),v=b.add([],q,m);n&&(b.max(u,u,h),b.min(u,u,i),b.max(v,v,h),b.min(v,v,i)),j.push(u),j.push(v)}return d&&j.push(b.clone(j.shift())),j}}),define("echarts/util/ecQuery",["require","zrender/tool/util"],function(a){function b(a,b){if(void 0!==a){if(!b)return a;b=b.split(".");for(var c=b.length,d=0;c>d;){if(a=a[b[d]],void 0===a)return;d++}return a}}function c(a,c){for(var d,e=0,f=a.length;f>e;e++)if(d=b(a[e],c),void 0!==d)return d}function d(a,c){for(var d,f=a.length;f--;){var g=b(a[f],c);void 0!==g&&(void 0===d?d=e.clone(g):e.merge(d,g,!0))}return d}var e=a("zrender/tool/util");return{query:b,deepQuery:c,deepMerge:d}}),define("echarts/util/number",[],function(){function a(a){return a.replace(/^\s+/,"").replace(/\s+$/,"")}function b(b,c){return"string"==typeof b?a(b).match(/%$/)?parseFloat(b)/100*c:parseFloat(b):b}function c(a,c){return[b(c[0],a.getWidth()),b(c[1],a.getHeight())]}function d(a,c){c instanceof Array||(c=[0,c]);var d=Math.min(a.getWidth(),a.getHeight())/2;return[b(c[0],d),b(c[1],d)]}function e(a){return isNaN(a)?"-":(a=(a+"").split("."),a[0].replace(/(\d{1,3})(?=(?:\d{3})+(?!\d))/g,"$1,")+(a.length>1?"."+a[1]:""))}return{parsePercent:b,parseCenter:c,parseRadius:d,addCommas:e}}),define("echarts/data/KDTree",["require","./quickSelect"],function(a){function b(a,b){this.left=null,this.right=null,this.axis=a,this.data=b}var c=a("./quickSelect"),d=function(a,b){a.length&&(b||(b=a[0].array.length),this.dimension=b,this.root=this._buildTree(a,0,a.length-1,0),this._stack=[],this._nearstNList=[])};return d.prototype._buildTree=function(a,d,e,f){if(d>e)return null;var g=Math.floor((d+e)/2);g=c(a,d,e,g,function(a,b){return a.array[f]-b.array[f]});var h=a[g],i=new b(f,h);return f=(f+1)%this.dimension,e>d&&(i.left=this._buildTree(a,d,g-1,f),i.right=this._buildTree(a,g+1,e,f)),i},d.prototype.nearest=function(a,b){var c=this.root,d=this._stack,e=0,f=1/0,g=null;for(c.data!==a&&(f=b(c.data,a),g=c),a.array[c.axis]<c.data.array[c.axis]?(c.right&&(d[e++]=c.right),c.left&&(d[e++]=c.left)):(c.left&&(d[e++]=c.left),c.right&&(d[e++]=c.right));e--;){c=d[e];var h=a.array[c.axis]-c.data.array[c.axis],i=0>h,j=!1;h*=h,f>h&&(h=b(c.data,a),f>h&&c.data!==a&&(f=h,g=c),j=!0),i?(j&&c.right&&(d[e++]=c.right),c.left&&(d[e++]=c.left)):(j&&c.left&&(d[e++]=c.left),c.right&&(d[e++]=c.right))}return g.data},d.prototype._addNearest=function(a,b,c){for(var d=this._nearstNList,e=a-1;e>0&&!(b>=d[e-1].dist);e--)d[e].dist=d[e-1].dist,d[e].node=d[e-1].node;d[e].dist=b,d[e].node=c},d.prototype.nearestN=function(a,b,c,d){if(0>=b)return d.length=0,d;for(var e=this.root,f=this._stack,g=0,h=this._nearstNList,i=0;b>i;i++)h[i]||(h[i]={}),h[i].dist=0,h[i].node=null;var j=c(e.data,a),k=0;for(e.data!==a&&(k++,this._addNearest(k,j,e)),a.array[e.axis]<e.data.array[e.axis]?(e.right&&(f[g++]=e.right),e.left&&(f[g++]=e.left)):(e.left&&(f[g++]=e.left),e.right&&(f[g++]=e.right));g--;){e=f[g];var j=a.array[e.axis]-e.data.array[e.axis],l=0>j,m=!1;j*=j,(b>k||h[k-1].dist>j)&&(j=c(e.data,a),(b>k||h[k-1].dist>j)&&e.data!==a&&(b>k&&k++,this._addNearest(k,j,e)),m=!0),l?(m&&e.right&&(f[g++]=e.right),e.left&&(f[g++]=e.left)):(m&&e.left&&(f[g++]=e.left),e.right&&(f[g++]=e.right))}for(var i=0;k>i;i++)d[i]=h[i].node.data;return d.length=k,d},d}),define("echarts/data/quickSelect",["require"],function(){function a(a,b){return a-b}function b(a,b,c){var d=a[b];a[b]=a[c],a[c]=d}function c(a,c,d,e,f){for(var g=c;d>c;){var g=Math.round((d+c)/2),h=a[g];b(a,g,d),g=c;for(var i=c;d-1>=i;i++)f(h,a[i])>=0&&(b(a,i,g),g++);if(b(a,d,g),g===e)return g;e>g?c=g+1:d=g-1}return c}function d(b,d,e,f,g){return 3>=arguments.length&&(f=d,g=2==arguments.length?a:e,d=0,e=b.length-1),c(b,d,e,f,g)}return d}),define("echarts/component/dataView",["require","./base","../config","zrender/tool/util","../component"],function(a){function b(a,b,d,e,f){c.call(this,a,b,d,e,f),this.dom=f.dom,this._tDom=document.createElement("div"),this._textArea=document.createElement("textArea"),this._buttonRefresh=document.createElement("button"),this._buttonClose=document.createElement("button"),this._hasShow=!1,this._zrHeight=d.getHeight(),this._zrWidth=d.getWidth(),this._tDom.className="echarts-dataview",this.hide(),this.dom.firstChild.appendChild(this._tDom),window.addEventListener?(this._tDom.addEventListener("click",this._stop),this._tDom.addEventListener("mousewheel",this._stop),this._tDom.addEventListener("mousemove",this._stop),this._tDom.addEventListener("mousedown",this._stop),this._tDom.addEventListener("mouseup",this._stop),this._tDom.addEventListener("touchstart",this._stop),this._tDom.addEventListener("touchmove",this._stop),this._tDom.addEventListener("touchend",this._stop)):(this._tDom.attachEvent("onclick",this._stop),this._tDom.attachEvent("onmousewheel",this._stop),this._tDom.attachEvent("onmousemove",this._stop),this._tDom.attachEvent("onmousedown",this._stop),this._tDom.attachEvent("onmouseup",this._stop))}var c=a("./base"),d=a("../config"),e=a("zrender/tool/util");return b.prototype={type:d.COMPONENT_TYPE_DATAVIEW,_lang:["Data View","close","refresh"],_gCssText:"position:absolute;display:block;overflow:hidden;transition:height 0.8s,background-color 1s;-moz-transition:height 0.8s,background-color 1s;-webkit-transition:height 0.8s,background-color 1s;-o-transition:height 0.8s,background-color 1s;z-index:1;left:0;top:0;",hide:function(){this._sizeCssText="width:"+this._zrWidth+"px;height:0px;background-color:#f0ffff;",this._tDom.style.cssText=this._gCssText+this._sizeCssText},show:function(a){this._hasShow=!0;var b=this.query(this.option,"toolbox.feature.dataView.lang")||this._lang;this.option=a,this._tDom.innerHTML='<p style="padding:8px 0;margin:0 0 10px 0;border-bottom:1px solid #eee">'+(b[0]||this._lang[0])+"</p>";var c=this.query(this.option,"toolbox.feature.dataView.optionToContent");"function"!=typeof c?this._textArea.value=this._optionToContent():(this._textArea=document.createElement("div"),this._textArea.innerHTML=c(this.option)),this._textArea.style.cssText="display:block;margin:0 0 8px 0;padding:4px 6px;overflow:auto;width:100%;height:"+(this._zrHeight-100)+"px;",this._tDom.appendChild(this._textArea),this._buttonClose.style.cssText="float:right;padding:1px 6px;",this._buttonClose.innerHTML=b[1]||this._lang[1];var d=this;this._buttonClose.onclick=function(){d.hide()},this._tDom.appendChild(this._buttonClose),this.query(this.option,"toolbox.feature.dataView.readOnly")===!1?(this._buttonRefresh.style.cssText="float:right;margin-right:10px;padding:1px 6px;",this._buttonRefresh.innerHTML=b[2]||this._lang[2],this._buttonRefresh.onclick=function(){d._save()},this._textArea.readOnly=!1,this._textArea.style.cursor="default"):(this._buttonRefresh.style.cssText="display:none",this._textArea.readOnly=!0,this._textArea.style.cursor="text"),this._tDom.appendChild(this._buttonRefresh),this._sizeCssText="width:"+this._zrWidth+"px;height:"+this._zrHeight+"px;background-color:#fff;",this._tDom.style.cssText=this._gCssText+this._sizeCssText},_optionToContent:function(){var a,b,c,e,f,g,h=[],i="";if(this.option.xAxis)for(h=this.option.xAxis instanceof Array?this.option.xAxis:[this.option.xAxis],a=0,e=h.length;e>a;a++)if("category"==(h[a].type||"category")){for(g=[],b=0,c=h[a].data.length;c>b;b++)g.push(this.getDataFromOption(h[a].data[b]));i+=g.join(", ")+"\n\n"}if(this.option.yAxis)for(h=this.option.yAxis instanceof Array?this.option.yAxis:[this.option.yAxis],a=0,e=h.length;e>a;a++)if("category"==h[a].type){for(g=[],b=0,c=h[a].data.length;c>b;b++)g.push(this.getDataFromOption(h[a].data[b]));i+=g.join(", ")+"\n\n"}var j,k=this.option.series;for(a=0,e=k.length;e>a;a++){for(g=[],b=0,c=k[a].data.length;c>b;b++)f=k[a].data[b],j=k[a].type==d.CHART_TYPE_PIE||k[a].type==d.CHART_TYPE_MAP?(f.name||"-")+":":"",k[a].type==d.CHART_TYPE_SCATTER&&(f=this.getDataFromOption(f).join(", ")),g.push(j+this.getDataFromOption(f));i+=(k[a].name||"-")+" : \n",i+=g.join(k[a].type==d.CHART_TYPE_SCATTER?"\n":", "),i+="\n\n"}return i},_save:function(){var a=this.query(this.option,"toolbox.feature.dataView.contentToOption");if("function"!=typeof a){for(var b=this._textArea.value.split("\n"),c=[],e=0,f=b.length;f>e;e++)b[e]=this._trim(b[e]),""!==b[e]&&c.push(b[e]);this._contentToOption(c)}else a(this._textArea,this.option);this.hide();var g=this;setTimeout(function(){g.messageCenter&&g.messageCenter.dispatch(d.EVENT.DATA_VIEW_CHANGED,null,{option:g.option},g.myChart)},g.canvasSupported?800:100)},_contentToOption:function(a){var b,c,e,f,g,h,i,j=[],k=0;if(this.option.xAxis)for(j=this.option.xAxis instanceof Array?this.option.xAxis:[this.option.xAxis],b=0,f=j.length;f>b;b++)if("category"==(j[b].type||"category")){for(h=a[k].split(","),c=0,e=j[b].data.length;e>c;c++)i=this._trim(h[c]||""),g=j[b].data[c],void 0!==j[b].data[c].value?j[b].data[c].value=i:j[b].data[c]=i;k++}if(this.option.yAxis)for(j=this.option.yAxis instanceof Array?this.option.yAxis:[this.option.yAxis],b=0,f=j.length;f>b;b++)if("category"==j[b].type){for(h=a[k].split(","),c=0,e=j[b].data.length;e>c;c++)i=this._trim(h[c]||""),g=j[b].data[c],void 0!==j[b].data[c].value?j[b].data[c].value=i:j[b].data[c]=i;k++}var l=this.option.series;for(b=0,f=l.length;f>b;b++)if(k++,l[b].type==d.CHART_TYPE_SCATTER)for(var c=0,e=l[b].data.length;e>c;c++)h=a[k],i=h.replace(" ","").split(","),void 0!==l[b].data[c].value?l[b].data[c].value=i:l[b].data[c]=i,k++;else{h=a[k].split(",");for(var c=0,e=l[b].data.length;e>c;c++)i=(h[c]||"").replace(/.*:/,""),i=this._trim(i),i="-"!=i&&""!==i?i-0:"-",void 0!==l[b].data[c].value?l[b].data[c].value=i:l[b].data[c]=i;k++}},_trim:function(a){var b=RegExp("(^[\\s\\t\\xa0\\u3000]+)|([\\u3000\\xa0\\s\\t]+$)","g");return a.replace(b,"")},_stop:function(a){a=a||window.event,a.stopPropagation?a.stopPropagation():a.cancelBubble=!0},resize:function(){this._zrHeight=this.zr.getHeight(),this._zrWidth=this.zr.getWidth(),this._tDom.offsetHeight>10&&(this._sizeCssText="width:"+this._zrWidth+"px;height:"+this._zrHeight+"px;background-color:#fff;",this._tDom.style.cssText=this._gCssText+this._sizeCssText,this._textArea.style.cssText="display:block;margin:0 0 8px 0;padding:4px 6px;overflow:auto;width:100%;height:"+(this._zrHeight-100)+"px;")},dispose:function(){window.removeEventListener?(this._tDom.removeEventListener("click",this._stop),this._tDom.removeEventListener("mousewheel",this._stop),this._tDom.removeEventListener("mousemove",this._stop),this._tDom.removeEventListener("mousedown",this._stop),this._tDom.removeEventListener("mouseup",this._stop),this._tDom.removeEventListener("touchstart",this._stop),this._tDom.removeEventListener("touchmove",this._stop),this._tDom.removeEventListener("touchend",this._stop)):(this._tDom.detachEvent("onclick",this._stop),this._tDom.detachEvent("onmousewheel",this._stop),this._tDom.detachEvent("onmousemove",this._stop),this._tDom.detachEvent("onmousedown",this._stop),this._tDom.detachEvent("onmouseup",this._stop)),this._buttonRefresh.onclick=null,this._buttonClose.onclick=null,this._hasShow&&(this._tDom.removeChild(this._textArea),this._tDom.removeChild(this._buttonRefresh),this._tDom.removeChild(this._buttonClose)),this._textArea=null,this._buttonRefresh=null,this._buttonClose=null,this.dom.firstChild.removeChild(this._tDom),this._tDom=null}},e.inherits(b,c),a("../component").define("dataView",b),b}),define("echarts/util/shape/Cross",["require","zrender/shape/Base","zrender/shape/Line","zrender/tool/util","./normalIsCover"],function(a){function b(a){c.call(this,a)}var c=a("zrender/shape/Base"),d=a("zrender/shape/Line"),e=a("zrender/tool/util");return b.prototype={type:"cross",buildPath:function(a,b){var c=b.rect;b.xStart=c.x,b.xEnd=c.x+c.width,b.yStart=b.yEnd=b.y,d.prototype.buildPath(a,b),b.xStart=b.xEnd=b.x,b.yStart=c.y,b.yEnd=c.y+c.height,d.prototype.buildPath(a,b)},getRect:function(a){return a.rect},isCover:a("./normalIsCover")},e.inherits(b,c),b}),define("zrender/shape/Sector",["require","../tool/math","../tool/computeBoundingBox","../tool/vector","./Base","../tool/util"],function(a){var b=a("../tool/math"),c=a("../tool/computeBoundingBox"),d=a("../tool/vector"),e=a("./Base"),f=d.create(),g=d.create(),h=d.create(),i=d.create(),j=function(a){e.call(this,a)};return j.prototype={type:"sector",buildPath:function(a,c){var d=c.x,e=c.y,f=c.r0||0,g=c.r,h=c.startAngle,i=c.endAngle,j=c.clockWise||!1;h=b.degreeToRadian(h),i=b.degreeToRadian(i),j||(h=-h,i=-i);var k=b.cos(h),l=b.sin(h);a.moveTo(k*f+d,l*f+e),a.lineTo(k*g+d,l*g+e),a.arc(d,e,g,h,i,!j),a.lineTo(b.cos(i)*f+d,b.sin(i)*f+e),0!==f&&a.arc(d,e,f,i,h,j),a.closePath()},getRect:function(a){if(a.__rect)return a.__rect;var e=a.x,j=a.y,k=a.r0||0,l=a.r,m=b.degreeToRadian(a.startAngle),n=b.degreeToRadian(a.endAngle),o=a.clockWise;return o||(m=-m,n=-n),k>1?c.arc(e,j,k,m,n,!o,f,h):(f[0]=h[0]=e,f[1]=h[1]=j),c.arc(e,j,l,m,n,!o,g,i),d.min(f,f,g),d.max(h,h,i),a.__rect={x:f[0],y:f[1],width:h[0]-f[0],height:h[1]-f[1]},a.__rect}},a("../tool/util").inherits(j,e),j}),define("echarts/util/shape/Candle",["require","zrender/shape/Base","zrender/tool/util","./normalIsCover"],function(a){function b(a){c.call(this,a)}var c=a("zrender/shape/Base"),d=a("zrender/tool/util");return b.prototype={type:"candle",_numberOrder:function(a,b){return b-a},buildPath:function(a,b){var c=d.clone(b.y).sort(this._numberOrder);a.moveTo(b.x,c[3]),a.lineTo(b.x,c[2]),a.moveTo(b.x-b.width/2,c[2]),a.rect(b.x-b.width/2,c[2],b.width,c[1]-c[2]),a.moveTo(b.x,c[1]),a.lineTo(b.x,c[0])},getRect:function(a){if(!a.__rect){var b=0;("stroke"==a.brushType||"fill"==a.brushType)&&(b=a.lineWidth||1);var c=d.clone(a.y).sort(this._numberOrder);a.__rect={x:Math.round(a.x-a.width/2-b/2),y:Math.round(c[3]-b/2),width:a.width+b,height:c[0]-c[3]+b}}return a.__rect},isCover:a("./normalIsCover")},d.inherits(b,c),b}),define("zrender/tool/computeBoundingBox",["require","./vector","./curve"],function(a){function b(a,b,c){if(0!==a.length){for(var d=a[0][0],e=a[0][0],f=a[0][1],g=a[0][1],h=1;a.length>h;h++){var i=a[h];d>i[0]&&(d=i[0]),i[0]>e&&(e=i[0]),f>i[1]&&(f=i[1]),i[1]>g&&(g=i[1])}b[0]=d,b[1]=f,c[0]=e,c[1]=g}}function c(a,b,c,d,e,g){var h=[];f.cubicExtrema(a[0],b[0],c[0],d[0],h);for(var i=0;h.length>i;i++)h[i]=f.cubicAt(a[0],b[0],c[0],d[0],h[i]);var j=[];f.cubicExtrema(a[1],b[1],c[1],d[1],j);for(var i=0;j.length>i;i++)j[i]=f.cubicAt(a[1],b[1],c[1],d[1],j[i]);h.push(a[0],d[0]),j.push(a[1],d[1]);var k=Math.min.apply(null,h),l=Math.max.apply(null,h),m=Math.min.apply(null,j),n=Math.max.apply(null,j);e[0]=k,e[1]=m,g[0]=l,g[1]=n}function d(a,b,c,d,e){var g=f.quadraticExtremum(a[0],b[0],c[0]),h=f.quadraticExtremum(a[1],b[1],c[1]);g=Math.max(Math.min(g,1),0),h=Math.max(Math.min(h,1),0);var i=1-g,j=1-h,k=i*i*a[0]+2*i*g*b[0]+g*g*c[0],l=i*i*a[1]+2*i*g*b[1]+g*g*c[1],m=j*j*a[0]+2*j*h*b[0]+h*h*c[0],n=j*j*a[1]+2*j*h*b[1]+h*h*c[1];d[0]=Math.min(a[0],c[0],k,m),d[1]=Math.min(a[1],c[1],l,n),e[0]=Math.max(a[0],c[0],k,m),e[1]=Math.max(a[1],c[1],l,n)}var e=a("./vector"),f=a("./curve"),g=e.create(),h=e.create(),i=e.create(),j=function(a,b,c,d,f,j,k,l){if(Math.abs(d-f)>=2*Math.PI)return k[0]=a-c,k[1]=b-c,l[0]=a+c,void(l[1]=b+c);if(g[0]=Math.cos(d)*c+a,g[1]=Math.sin(d)*c+b,h[0]=Math.cos(f)*c+a,h[1]=Math.sin(f)*c+b,e.min(k,g,h),e.max(l,g,h),d%=2*Math.PI,0>d&&(d+=2*Math.PI),f%=2*Math.PI,0>f&&(f+=2*Math.PI),d>f&&!j?f+=2*Math.PI:f>d&&j&&(d+=2*Math.PI),j){var m=f;f=d,d=m}for(var n=0;f>n;n+=Math.PI/2)n>d&&(i[0]=Math.cos(n)*c+a,i[1]=Math.sin(n)*c+b,e.min(k,i,k),e.max(l,i,l))};return b.cubeBezier=c,b.quadraticBezier=d,b.arc=j,b}),define("echarts/util/shape/Chain",["require","zrender/shape/Base","./Icon","zrender/shape/util/dashedLineTo","zrender/tool/util","zrender/tool/matrix"],function(a){function b(a){c.call(this,a)}var c=a("zrender/shape/Base"),d=a("./Icon"),e=a("zrender/shape/util/dashedLineTo"),f=a("zrender/tool/util"),g=a("zrender/tool/matrix");return b.prototype={type:"chain",brush:function(a,b){var c=this.style;b&&(c=this.getHighlightStyle(c,this.highlightStyle||{})),a.save(),this.setContext(a,c),this.setTransform(a),a.save(),a.beginPath(),this.buildLinePath(a,c),a.stroke(),a.restore(),this.brushSymbol(a,c),a.restore()},buildLinePath:function(a,b){var c=b.x,d=b.y+5,f=b.width,g=b.height/2-10;if(a.moveTo(c,d),a.lineTo(c,d+g),a.moveTo(c+f,d),a.lineTo(c+f,d+g),a.moveTo(c,d+g/2),b.lineType&&"solid"!=b.lineType){if("dashed"==b.lineType||"dotted"==b.lineType){var h=(b.lineWidth||1)*("dashed"==b.lineType?5:1);e(a,c,d+g/2,c+f,d+g/2,h)}}else a.lineTo(c+f,d+g/2)},brushSymbol:function(a,b){var c=b.y+b.height/4;a.save();for(var e,f=b.chainPoint,g=0,h=f.length;h>g;g++){if(e=f[g],"none"!=e.symbol){a.beginPath();var i=e.symbolSize;d.prototype.buildPath(a,{iconType:e.symbol,x:e.x-i,y:c-i,width:2*i,height:2*i,n:e.n}),a.fillStyle=e.isEmpty?"#fff":b.strokeColor,a.closePath(),a.fill(),a.stroke()}e.showLabel&&(a.font=e.textFont,a.fillStyle=e.textColor,a.textAlign=e.textAlign,a.textBaseline=e.textBaseline,e.rotation?(a.save(),this._updateTextTransform(a,e.rotation),a.fillText(e.name,e.textX,e.textY),a.restore()):a.fillText(e.name,e.textX,e.textY))}a.restore()},_updateTextTransform:function(a,b){var c=g.create();if(g.identity(c),0!==b[0]){var d=b[1]||0,e=b[2]||0;(d||e)&&g.translate(c,c,[-d,-e]),g.rotate(c,c,b[0]),(d||e)&&g.translate(c,c,[d,e])}a.transform.apply(a,c)},isCover:function(a,b){var c=this.style;return a>=c.x&&c.x+c.width>=a&&b>=c.y&&c.y+c.height>=b?!0:!1}},f.inherits(b,c),b}),define("zrender/shape/Ring",["require","./Base","../tool/util"],function(a){var b=a("./Base"),c=function(a){b.call(this,a)};return c.prototype={type:"ring",buildPath:function(a,b){a.arc(b.x,b.y,b.r,0,2*Math.PI,!1),a.moveTo(b.x+b.r0,b.y),a.arc(b.x,b.y,b.r0,0,2*Math.PI,!0)},getRect:function(a){if(a.__rect)return a.__rect;var b;return b="stroke"==a.brushType||"fill"==a.brushType?a.lineWidth||1:0,a.__rect={x:Math.round(a.x-a.r-b/2),y:Math.round(a.y-a.r-b/2),width:2*a.r+b,height:2*a.r+b},a.__rect}},a("../tool/util").inherits(c,b),c}),define("echarts/component/axis",["require","./base","zrender/shape/Line","../config","../util/ecData","zrender/tool/util","zrender/tool/color","./categoryAxis","./valueAxis","../component"],function(a){function b(a,b,d,e,f,g){c.call(this,a,b,d,e,f),this.axisType=g,this._axisList=[],this.refresh(e)}var c=a("./base"),d=a("zrender/shape/Line"),e=a("../config"),f=a("../util/ecData"),g=a("zrender/tool/util"),h=a("zrender/tool/color");return b.prototype={type:e.COMPONENT_TYPE_AXIS,axisBase:{_buildAxisLine:function(){var a=this.option.axisLine.lineStyle.width,b=a/2,c={_axisShape:"axisLine",zlevel:this.getZlevelBase(),z:this.getZBase()+3,hoverable:!1},e=this.grid;switch(this.option.position){case"left":c.style={xStart:e.getX()-b,yStart:e.getYend(),xEnd:e.getX()-b,yEnd:e.getY(),lineCap:"round"};break;case"right":c.style={xStart:e.getXend()+b,yStart:e.getYend(),xEnd:e.getXend()+b,yEnd:e.getY(),lineCap:"round"};break;case"bottom":c.style={xStart:e.getX(),yStart:e.getYend()+b,xEnd:e.getXend(),yEnd:e.getYend()+b,lineCap:"round"};break;case"top":c.style={xStart:e.getX(),yStart:e.getY()-b,xEnd:e.getXend(),yEnd:e.getY()-b,lineCap:"round"}}var f=c.style;""!==this.option.name&&(f.text=this.option.name,f.textPosition=this.option.nameLocation,f.textFont=this.getFont(this.option.nameTextStyle),this.option.nameTextStyle.align&&(f.textAlign=this.option.nameTextStyle.align),this.option.nameTextStyle.baseline&&(f.textBaseline=this.option.nameTextStyle.baseline),this.option.nameTextStyle.color&&(f.textColor=this.option.nameTextStyle.color)),f.strokeColor=this.option.axisLine.lineStyle.color,f.lineWidth=a,this.isHorizontal()?f.yStart=f.yEnd=this.subPixelOptimize(f.yEnd,a):f.xStart=f.xEnd=this.subPixelOptimize(f.xEnd,a),f.lineType=this.option.axisLine.lineStyle.type,c=new d(c),this.shapeList.push(c)},_axisLabelClickable:function(a,b){return a?(f.pack(b,void 0,-1,void 0,-1,b.style.text),b.hoverable=!0,b.clickable=!0,b.highlightStyle={color:h.lift(b.style.color,1),brushType:"fill"},b):b},refixAxisShape:function(a,b){if(this.option.axisLine.onZero){var c;if(this.isHorizontal()&&null!=b)for(var d=0,e=this.shapeList.length;e>d;d++)"axisLine"===this.shapeList[d]._axisShape?(this.shapeList[d].style.yStart=this.shapeList[d].style.yEnd=this.subPixelOptimize(b,this.shapeList[d].stylelineWidth),this.zr.modShape(this.shapeList[d].id)):"axisTick"===this.shapeList[d]._axisShape&&(c=this.shapeList[d].style.yEnd-this.shapeList[d].style.yStart,this.shapeList[d].style.yStart=b-c,this.shapeList[d].style.yEnd=b,this.zr.modShape(this.shapeList[d].id));if(!this.isHorizontal()&&null!=a)for(var d=0,e=this.shapeList.length;e>d;d++)"axisLine"===this.shapeList[d]._axisShape?(this.shapeList[d].style.xStart=this.shapeList[d].style.xEnd=this.subPixelOptimize(a,this.shapeList[d].stylelineWidth),this.zr.modShape(this.shapeList[d].id)):"axisTick"===this.shapeList[d]._axisShape&&(c=this.shapeList[d].style.xEnd-this.shapeList[d].style.xStart,this.shapeList[d].style.xStart=a,this.shapeList[d].style.xEnd=a+c,this.zr.modShape(this.shapeList[d].id));
}},getPosition:function(){return this.option.position},isHorizontal:function(){return"bottom"===this.option.position||"top"===this.option.position}},reformOption:function(a){if(!a||a instanceof Array&&0===a.length?a=[{type:e.COMPONENT_TYPE_AXIS_VALUE}]:a instanceof Array||(a=[a]),a.length>2&&(a=[a[0],a[1]]),"xAxis"===this.axisType){(!a[0].position||"bottom"!=a[0].position&&"top"!=a[0].position)&&(a[0].position="bottom"),a.length>1&&(a[1].position="bottom"===a[0].position?"top":"bottom");for(var b=0,c=a.length;c>b;b++)a[b].type=a[b].type||"category",a[b].xAxisIndex=b,a[b].yAxisIndex=-1}else{(!a[0].position||"left"!=a[0].position&&"right"!=a[0].position)&&(a[0].position="left"),a.length>1&&(a[1].position="left"===a[0].position?"right":"left");for(var b=0,c=a.length;c>b;b++)a[b].type=a[b].type||"value",a[b].xAxisIndex=-1,a[b].yAxisIndex=b}return a},refresh:function(b){var c;b&&(this.option=b,"xAxis"===this.axisType?(this.option.xAxis=this.reformOption(b.xAxis),c=this.option.xAxis):(this.option.yAxis=this.reformOption(b.yAxis),c=this.option.yAxis),this.series=b.series);for(var d=a("./categoryAxis"),e=a("./valueAxis"),f=Math.max(c&&c.length||0,this._axisList.length),g=0;f>g;g++)!this._axisList[g]||!b||c[g]&&this._axisList[g].type==c[g].type||(this._axisList[g].dispose&&this._axisList[g].dispose(),this._axisList[g]=!1),this._axisList[g]?this._axisList[g].refresh&&this._axisList[g].refresh(c?c[g]:!1,this.series):c&&c[g]&&(this._axisList[g]="category"===c[g].type?new d(this.ecTheme,this.messageCenter,this.zr,c[g],this.myChart,this.axisBase):new e(this.ecTheme,this.messageCenter,this.zr,c[g],this.myChart,this.axisBase,this.series))},getAxis:function(a){return this._axisList[a]},clear:function(){for(var a=0,b=this._axisList.length;b>a;a++)this._axisList[a].dispose&&this._axisList[a].dispose();this._axisList=[]}},g.inherits(b,c),a("../component").define("axis",b),b}),define("echarts/component/grid",["require","./base","zrender/shape/Rectangle","../config","zrender/tool/util","../component"],function(a){function b(a,b,d,e,f){c.call(this,a,b,d,e,f),this.refresh(e)}var c=a("./base"),d=a("zrender/shape/Rectangle"),e=a("../config");e.grid={zlevel:0,z:0,x:80,y:60,x2:80,y2:60,backgroundColor:"rgba(0,0,0,0)",borderWidth:1,borderColor:"#ccc"};var f=a("zrender/tool/util");return b.prototype={type:e.COMPONENT_TYPE_GRID,getX:function(){return this._x},getY:function(){return this._y},getWidth:function(){return this._width},getHeight:function(){return this._height},getXend:function(){return this._x+this._width},getYend:function(){return this._y+this._height},getArea:function(){return{x:this._x,y:this._y,width:this._width,height:this._height}},getBbox:function(){return[[this._x,this._y],[this.getXend(),this.getYend()]]},refixAxisShape:function(a){for(var b,c,d,f=a.xAxis._axisList.concat(a.yAxis?a.yAxis._axisList:[]),g=f.length;g--;)d=f[g],d.type==e.COMPONENT_TYPE_AXIS_VALUE&&0>d._min&&d._max>=0&&(d.isHorizontal()?b=d.getCoord(0):c=d.getCoord(0));if(void 0!==b||void 0!==c)for(g=f.length;g--;)f[g].refixAxisShape(b,c)},refresh:function(a){if(a||this._zrWidth!=this.zr.getWidth()||this._zrHeight!=this.zr.getHeight()){this.clear(),this.option=a||this.option,this.option.grid=this.reformOption(this.option.grid);var b=this.option.grid;this._zrWidth=this.zr.getWidth(),this._zrHeight=this.zr.getHeight(),this._x=this.parsePercent(b.x,this._zrWidth),this._y=this.parsePercent(b.y,this._zrHeight);var c=this.parsePercent(b.x2,this._zrWidth),e=this.parsePercent(b.y2,this._zrHeight);this._width=void 0===b.width?this._zrWidth-this._x-c:this.parsePercent(b.width,this._zrWidth),this._width=0>=this._width?10:this._width,this._height=void 0===b.height?this._zrHeight-this._y-e:this.parsePercent(b.height,this._zrHeight),this._height=0>=this._height?10:this._height,this._x=this.subPixelOptimize(this._x,b.borderWidth),this._y=this.subPixelOptimize(this._y,b.borderWidth),this.shapeList.push(new d({zlevel:this.getZlevelBase(),z:this.getZBase(),hoverable:!1,style:{x:this._x,y:this._y,width:this._width,height:this._height,brushType:b.borderWidth>0?"both":"fill",color:b.backgroundColor,strokeColor:b.borderColor,lineWidth:b.borderWidth}})),this.zr.addShape(this.shapeList[0])}}},f.inherits(b,c),a("../component").define("grid",b),b}),define("echarts/component/dataZoom",["require","./base","zrender/shape/Rectangle","zrender/shape/Polygon","../util/shape/Icon","../config","../util/date","zrender/tool/util","../component"],function(a){function b(a,b,d,e,f){c.call(this,a,b,d,e,f);var g=this;g._ondrift=function(a,b){return g.__ondrift(this,a,b)},g._ondragend=function(){return g.__ondragend()},this._fillerSize=30,this._isSilence=!1,this._zoom={},this.option.dataZoom=this.reformOption(this.option.dataZoom),this.zoomOption=this.option.dataZoom,this._handleSize=this.zoomOption.handleSize,this.myChart.canvasSupported||(this.zoomOption.realtime=!1),this._location=this._getLocation(),this._zoom=this._getZoom(),this._backupData(),this.option.dataZoom.show&&this._buildShape(),this._syncData()}var c=a("./base"),d=a("zrender/shape/Rectangle"),e=a("zrender/shape/Polygon"),f=a("../util/shape/Icon"),g=a("../config");g.dataZoom={zlevel:0,z:4,show:!1,orient:"horizontal",backgroundColor:"rgba(0,0,0,0)",dataBackgroundColor:"#eee",fillerColor:"rgba(144,197,237,0.2)",handleColor:"rgba(70,130,180,0.8)",handleSize:8,showDetail:!0,realtime:!0};var h=a("../util/date"),i=a("zrender/tool/util");return b.prototype={type:g.COMPONENT_TYPE_DATAZOOM,_buildShape:function(){this._buildBackground(),this._buildFiller(),this._buildHandle(),this._buildFrame();for(var a=0,b=this.shapeList.length;b>a;a++)this.zr.addShape(this.shapeList[a]);this._syncFrameShape()},_getLocation:function(){var a,b,c,d,e=this.component.grid;return"horizontal"==this.zoomOption.orient?(c=this.zoomOption.width||e.getWidth(),d=this.zoomOption.height||this._fillerSize,a=null!=this.zoomOption.x?this.zoomOption.x:e.getX(),b=null!=this.zoomOption.y?this.zoomOption.y:this.zr.getHeight()-d-2):(c=this.zoomOption.width||this._fillerSize,d=this.zoomOption.height||e.getHeight(),a=null!=this.zoomOption.x?this.zoomOption.x:2,b=null!=this.zoomOption.y?this.zoomOption.y:e.getY()),{x:a,y:b,width:c,height:d}},_getZoom:function(){var a=this.option.series,b=this.option.xAxis;!b||b instanceof Array||(b=[b],this.option.xAxis=b);var c=this.option.yAxis;!c||c instanceof Array||(c=[c],this.option.yAxis=c);var d,e,f=[],h=this.zoomOption.xAxisIndex;if(b&&null==h){d=[];for(var i=0,j=b.length;j>i;i++)("category"==b[i].type||null==b[i].type)&&d.push(i)}else d=h instanceof Array?h:null!=h?[h]:[];if(h=this.zoomOption.yAxisIndex,c&&null==h){e=[];for(var i=0,j=c.length;j>i;i++)"category"==c[i].type&&e.push(i)}else e=h instanceof Array?h:null!=h?[h]:[];for(var k,i=0,j=a.length;j>i;i++)if(k=a[i],k.type==g.CHART_TYPE_LINE||k.type==g.CHART_TYPE_BAR||k.type==g.CHART_TYPE_SCATTER||k.type==g.CHART_TYPE_K){for(var l=0,m=d.length;m>l;l++)if(d[l]==(k.xAxisIndex||0)){f.push(i);break}for(var l=0,m=e.length;m>l;l++)if(e[l]==(k.yAxisIndex||0)){f.push(i);break}null==this.zoomOption.xAxisIndex&&null==this.zoomOption.yAxisIndex&&k.data&&this.getDataFromOption(k.data[0])instanceof Array&&(k.type==g.CHART_TYPE_SCATTER||k.type==g.CHART_TYPE_LINE||k.type==g.CHART_TYPE_BAR)&&f.push(i)}var n=null!=this._zoom.start?this._zoom.start:null!=this.zoomOption.start?this.zoomOption.start:0,o=null!=this._zoom.end?this._zoom.end:null!=this.zoomOption.end?this.zoomOption.end:100;n>o&&(n+=o,o=n-o,n-=o);var p=Math.round((o-n)/100*("horizontal"==this.zoomOption.orient?this._location.width:this._location.height));return{start:n,end:o,start2:0,end2:100,size:p,xAxisIndex:d,yAxisIndex:e,seriesIndex:f,scatterMap:this._zoom.scatterMap||{}}},_backupData:function(){this._originalData={xAxis:{},yAxis:{},series:{}};for(var a=this.option.xAxis,b=this._zoom.xAxisIndex,c=0,d=b.length;d>c;c++)this._originalData.xAxis[b[c]]=a[b[c]].data;for(var e=this.option.yAxis,f=this._zoom.yAxisIndex,c=0,d=f.length;d>c;c++)this._originalData.yAxis[f[c]]=e[f[c]].data;for(var h,i=this.option.series,j=this._zoom.seriesIndex,c=0,d=j.length;d>c;c++)h=i[j[c]],this._originalData.series[j[c]]=h.data,h.data&&this.getDataFromOption(h.data[0])instanceof Array&&(h.type==g.CHART_TYPE_SCATTER||h.type==g.CHART_TYPE_LINE||h.type==g.CHART_TYPE_BAR)&&(this._backupScale(),this._calculScatterMap(j[c]))},_calculScatterMap:function(b){this._zoom.scatterMap=this._zoom.scatterMap||{},this._zoom.scatterMap[b]=this._zoom.scatterMap[b]||{};var c=a("../component"),d=c.get("axis"),e=i.clone(this.option.xAxis);"category"==e[0].type&&(e[0].type="value"),e[1]&&"category"==e[1].type&&(e[1].type="value");var f=new d(this.ecTheme,null,!1,{xAxis:e,series:this.option.series},this,"xAxis"),g=this.option.series[b].xAxisIndex||0;this._zoom.scatterMap[b].x=f.getAxis(g).getExtremum(),f.dispose(),e=i.clone(this.option.yAxis),"category"==e[0].type&&(e[0].type="value"),e[1]&&"category"==e[1].type&&(e[1].type="value"),f=new d(this.ecTheme,null,!1,{yAxis:e,series:this.option.series},this,"yAxis"),g=this.option.series[b].yAxisIndex||0,this._zoom.scatterMap[b].y=f.getAxis(g).getExtremum(),f.dispose()},_buildBackground:function(){var a=this._location.width,b=this._location.height;this.shapeList.push(new d({zlevel:this.getZlevelBase(),z:this.getZBase(),hoverable:!1,style:{x:this._location.x,y:this._location.y,width:a,height:b,color:this.zoomOption.backgroundColor}}));for(var c=0,f=this._originalData.xAxis,h=this._zoom.xAxisIndex,i=0,j=h.length;j>i;i++)c=Math.max(c,f[h[i]].length);for(var k=this._originalData.yAxis,l=this._zoom.yAxisIndex,i=0,j=l.length;j>i;i++)c=Math.max(c,k[l[i]].length);for(var m,n=this._zoom.seriesIndex[0],o=this._originalData.series[n],p=Number.MIN_VALUE,q=Number.MAX_VALUE,i=0,j=o.length;j>i;i++)m=this.getDataFromOption(o[i],0),this.option.series[n].type==g.CHART_TYPE_K&&(m=m[1]),isNaN(m)&&(m=0),p=Math.max(p,m),q=Math.min(q,m);var r=p-q,s=[],t=a/(c-(c>1?1:0)),u=b/(c-(c>1?1:0)),v=1;"horizontal"==this.zoomOption.orient&&1>t?v=Math.floor(3*c/a):"vertical"==this.zoomOption.orient&&1>u&&(v=Math.floor(3*c/b));for(var i=0,j=c;j>i;i+=v)m=this.getDataFromOption(o[i],0),this.option.series[n].type==g.CHART_TYPE_K&&(m=m[1]),isNaN(m)&&(m=0),"horizontal"==this.zoomOption.orient?s.push([this._location.x+t*i,this._location.y+b-1-Math.round((m-q)/r*(b-10))]):s.push([this._location.x+1+Math.round((m-q)/r*(a-10)),this._location.y+u*(j-i-1)]);"horizontal"==this.zoomOption.orient?(s.push([this._location.x+a,this._location.y+b]),s.push([this._location.x,this._location.y+b])):(s.push([this._location.x,this._location.y]),s.push([this._location.x,this._location.y+b])),this.shapeList.push(new e({zlevel:this.getZlevelBase(),z:this.getZBase(),style:{pointList:s,color:this.zoomOption.dataBackgroundColor},hoverable:!1}))},_buildFiller:function(){this._fillerShae={zlevel:this.getZlevelBase(),z:this.getZBase(),draggable:!0,ondrift:this._ondrift,ondragend:this._ondragend,_type:"filler"},this._fillerShae.style="horizontal"==this.zoomOption.orient?{x:this._location.x+Math.round(this._zoom.start/100*this._location.width)+this._handleSize,y:this._location.y,width:this._zoom.size-2*this._handleSize,height:this._location.height,color:this.zoomOption.fillerColor,text:":::",textPosition:"inside"}:{x:this._location.x,y:this._location.y+Math.round(this._zoom.start/100*this._location.height)+this._handleSize,width:this._location.width,height:this._zoom.size-2*this._handleSize,color:this.zoomOption.fillerColor,text:"::",textPosition:"inside"},this._fillerShae.highlightStyle={brushType:"fill",color:"rgba(0,0,0,0)"},this._fillerShae=new d(this._fillerShae),this.shapeList.push(this._fillerShae)},_buildHandle:function(){var a=this.zoomOption.showDetail?this._getDetail():{start:"",end:""};this._startShape={zlevel:this.getZlevelBase(),z:this.getZBase(),draggable:!0,style:{iconType:"rectangle",x:this._location.x,y:this._location.y,width:this._handleSize,height:this._handleSize,color:this.zoomOption.handleColor,text:"=",textPosition:"inside"},highlightStyle:{text:a.start,brushType:"fill",textPosition:"left"},ondrift:this._ondrift,ondragend:this._ondragend},"horizontal"==this.zoomOption.orient?(this._startShape.style.height=this._location.height,this._endShape=i.clone(this._startShape),this._startShape.style.x=this._fillerShae.style.x-this._handleSize,this._endShape.style.x=this._fillerShae.style.x+this._fillerShae.style.width,this._endShape.highlightStyle.text=a.end,this._endShape.highlightStyle.textPosition="right"):(this._startShape.style.width=this._location.width,this._endShape=i.clone(this._startShape),this._startShape.style.y=this._fillerShae.style.y+this._fillerShae.style.height,this._startShape.highlightStyle.textPosition="bottom",this._endShape.style.y=this._fillerShae.style.y-this._handleSize,this._endShape.highlightStyle.text=a.end,this._endShape.highlightStyle.textPosition="top"),this._startShape=new f(this._startShape),this._endShape=new f(this._endShape),this.shapeList.push(this._startShape),this.shapeList.push(this._endShape)},_buildFrame:function(){var a=this.subPixelOptimize(this._location.x,1),b=this.subPixelOptimize(this._location.y,1);this._startFrameShape={zlevel:this.getZlevelBase(),z:this.getZBase(),hoverable:!1,style:{x:a,y:b,width:this._location.width-(a>this._location.x?1:0),height:this._location.height-(b>this._location.y?1:0),lineWidth:1,brushType:"stroke",strokeColor:this.zoomOption.handleColor}},this._endFrameShape=i.clone(this._startFrameShape),this._startFrameShape=new d(this._startFrameShape),this._endFrameShape=new d(this._endFrameShape),this.shapeList.push(this._startFrameShape),this.shapeList.push(this._endFrameShape)},_syncHandleShape:function(){"horizontal"==this.zoomOption.orient?(this._startShape.style.x=this._fillerShae.style.x-this._handleSize,this._endShape.style.x=this._fillerShae.style.x+this._fillerShae.style.width,this._zoom.start=100*((this._startShape.style.x-this._location.x)/this._location.width),this._zoom.end=100*((this._endShape.style.x+this._handleSize-this._location.x)/this._location.width)):(this._startShape.style.y=this._fillerShae.style.y+this._fillerShae.style.height,this._endShape.style.y=this._fillerShae.style.y-this._handleSize,this._zoom.start=100*((this._location.y+this._location.height-this._startShape.style.y)/this._location.height),this._zoom.end=100*((this._location.y+this._location.height-this._endShape.style.y-this._handleSize)/this._location.height)),this.zr.modShape(this._startShape.id),this.zr.modShape(this._endShape.id),this._syncFrameShape(),this.zr.refreshNextFrame()},_syncFillerShape:function(){var a,b;"horizontal"==this.zoomOption.orient?(a=this._startShape.style.x,b=this._endShape.style.x,this._fillerShae.style.x=Math.min(a,b)+this._handleSize,this._fillerShae.style.width=Math.abs(a-b)-this._handleSize,this._zoom.start=100*((Math.min(a,b)-this._location.x)/this._location.width),this._zoom.end=100*((Math.max(a,b)+this._handleSize-this._location.x)/this._location.width)):(a=this._startShape.style.y,b=this._endShape.style.y,this._fillerShae.style.y=Math.min(a,b)+this._handleSize,this._fillerShae.style.height=Math.abs(a-b)-this._handleSize,this._zoom.start=100*((this._location.y+this._location.height-Math.max(a,b))/this._location.height),this._zoom.end=100*((this._location.y+this._location.height-Math.min(a,b)-this._handleSize)/this._location.height)),this.zr.modShape(this._fillerShae.id),this._syncFrameShape(),this.zr.refreshNextFrame()},_syncFrameShape:function(){"horizontal"==this.zoomOption.orient?(this._startFrameShape.style.width=this._fillerShae.style.x-this._location.x,this._endFrameShape.style.x=this._fillerShae.style.x+this._fillerShae.style.width,this._endFrameShape.style.width=this._location.x+this._location.width-this._endFrameShape.style.x):(this._startFrameShape.style.y=this._fillerShae.style.y+this._fillerShae.style.height,this._startFrameShape.style.height=this._location.y+this._location.height-this._startFrameShape.style.y,this._endFrameShape.style.height=this._fillerShae.style.y-this._location.y),this.zr.modShape(this._startFrameShape.id),this.zr.modShape(this._endFrameShape.id)},_syncShape:function(){this.zoomOption.show&&("horizontal"==this.zoomOption.orient?(this._startShape.style.x=this._location.x+this._zoom.start/100*this._location.width,this._endShape.style.x=this._location.x+this._zoom.end/100*this._location.width-this._handleSize,this._fillerShae.style.x=this._startShape.style.x+this._handleSize,this._fillerShae.style.width=this._endShape.style.x-this._startShape.style.x-this._handleSize):(this._startShape.style.y=this._location.y+this._location.height-this._zoom.start/100*this._location.height,this._endShape.style.y=this._location.y+this._location.height-this._zoom.end/100*this._location.height-this._handleSize,this._fillerShae.style.y=this._endShape.style.y+this._handleSize,this._fillerShae.style.height=this._startShape.style.y-this._endShape.style.y-this._handleSize),this.zr.modShape(this._startShape.id),this.zr.modShape(this._endShape.id),this.zr.modShape(this._fillerShae.id),this._syncFrameShape(),this.zr.refresh())},_syncData:function(a){var b,c,d,e,f;for(var h in this._originalData){b=this._originalData[h];for(var i in b)f=b[i],null!=f&&(e=f.length,c=Math.floor(this._zoom.start/100*e),d=Math.ceil(this._zoom.end/100*e),this.getDataFromOption(f[0])instanceof Array&&this.option[h][i].type!=g.CHART_TYPE_K?(this._setScale(),this.option[h][i].data=this._synScatterData(i,f)):this.option[h][i].data=f.slice(c,d))}this._isSilence||!this.zoomOption.realtime&&!a||this.messageCenter.dispatch(g.EVENT.DATA_ZOOM,null,{zoom:this._zoom},this.myChart)},_synScatterData:function(a,b){if(0===this._zoom.start&&100==this._zoom.end&&0===this._zoom.start2&&100==this._zoom.end2)return b;var c,d,e,f,g,h=[],i=this._zoom.scatterMap[a];"horizontal"==this.zoomOption.orient?(c=i.x.max-i.x.min,d=this._zoom.start/100*c+i.x.min,e=this._zoom.end/100*c+i.x.min,c=i.y.max-i.y.min,f=this._zoom.start2/100*c+i.y.min,g=this._zoom.end2/100*c+i.y.min):(c=i.x.max-i.x.min,d=this._zoom.start2/100*c+i.x.min,e=this._zoom.end2/100*c+i.x.min,c=i.y.max-i.y.min,f=this._zoom.start/100*c+i.y.min,g=this._zoom.end/100*c+i.y.min);for(var j,k=0,l=b.length;l>k;k++)j=b[k].value||b[k],j[0]>=d&&e>=j[0]&&j[1]>=f&&g>=j[1]&&h.push(b[k]);return h},_setScale:function(){var a=0!==this._zoom.start||100!==this._zoom.end||0!==this._zoom.start2||100!==this._zoom.end2,b={xAxis:this.option.xAxis,yAxis:this.option.yAxis};for(var c in b)for(var d=0,e=b[c].length;e>d;d++)b[c][d].scale=a||b[c][d]._scale},_backupScale:function(){var a={xAxis:this.option.xAxis,yAxis:this.option.yAxis};for(var b in a)for(var c=0,d=a[b].length;d>c;c++)a[b][c]._scale=a[b][c].scale},_getDetail:function(){for(var a=["xAxis","yAxis"],b=0,c=a.length;c>b;b++){var d=this._originalData[a[b]];for(var e in d){var f=d[e];if(null!=f){var g=f.length,i=Math.floor(this._zoom.start/100*g),j=Math.ceil(this._zoom.end/100*g);return j-=j>0?1:0,{start:this.getDataFromOption(f[i]),end:this.getDataFromOption(f[j])}}}}a="horizontal"==this.zoomOption.orient?"xAxis":"yAxis";var k=this._zoom.seriesIndex[0],l=this.option.series[k][a+"Index"]||0,m=this.option[a][l].type,n=this._zoom.scatterMap[k][a.charAt(0)].min,o=this._zoom.scatterMap[k][a.charAt(0)].max,p=o-n;if("value"==m)return{start:n+p*this._zoom.start/100,end:n+p*this._zoom.end/100};if("time"==m){o=n+p*this._zoom.end/100,n+=p*this._zoom.start/100;var q=h.getAutoFormatter(n,o).formatter;return{start:h.format(q,n),end:h.format(q,o)}}return{start:"",end:""}},__ondrift:function(a,b,c){this.zoomOption.zoomLock&&(a=this._fillerShae);var d="filler"==a._type?this._handleSize:0;if("horizontal"==this.zoomOption.orient?a.style.x+b-d<=this._location.x?a.style.x=this._location.x+d:a.style.x+b+a.style.width+d>=this._location.x+this._location.width?a.style.x=this._location.x+this._location.width-a.style.width-d:a.style.x+=b:a.style.y+c-d<=this._location.y?a.style.y=this._location.y+d:a.style.y+c+a.style.height+d>=this._location.y+this._location.height?a.style.y=this._location.y+this._location.height-a.style.height-d:a.style.y+=c,"filler"==a._type?this._syncHandleShape():this._syncFillerShape(),this.zoomOption.realtime&&this._syncData(),this.zoomOption.showDetail){var e=this._getDetail();this._startShape.style.text=this._startShape.highlightStyle.text=e.start,this._endShape.style.text=this._endShape.highlightStyle.text=e.end,this._startShape.style.textPosition=this._startShape.highlightStyle.textPosition,this._endShape.style.textPosition=this._endShape.highlightStyle.textPosition}return!0},__ondragend:function(){this.zoomOption.showDetail&&(this._startShape.style.text=this._endShape.style.text="=",this._startShape.style.textPosition=this._endShape.style.textPosition="inside",this.zr.modShape(this._startShape.id),this.zr.modShape(this._endShape.id),this.zr.refreshNextFrame()),this.isDragend=!0},ondragend:function(a,b){this.isDragend&&a.target&&(!this.zoomOption.realtime&&this._syncData(),b.dragOut=!0,b.dragIn=!0,this._isSilence||this.zoomOption.realtime||this.messageCenter.dispatch(g.EVENT.DATA_ZOOM,null,{zoom:this._zoom},this.myChart),b.needRefresh=!1,this.isDragend=!1)},ondataZoom:function(a,b){b.needRefresh=!0},absoluteZoom:function(a){this._zoom.start=a.start,this._zoom.end=a.end,this._zoom.start2=a.start2,this._zoom.end2=a.end2,this._syncShape(),this._syncData(!0)},rectZoom:function(a){if(!a)return this._zoom.start=this._zoom.start2=0,this._zoom.end=this._zoom.end2=100,this._syncShape(),this._syncData(!0),this._zoom;var b=this.component.grid.getArea(),c={x:a.x,y:a.y,width:a.width,height:a.height};if(0>c.width&&(c.x+=c.width,c.width=-c.width),0>c.height&&(c.y+=c.height,c.height=-c.height),c.x>b.x+b.width||c.y>b.y+b.height)return!1;c.x<b.x&&(c.x=b.x),c.x+c.width>b.x+b.width&&(c.width=b.x+b.width-c.x),c.y+c.height>b.y+b.height&&(c.height=b.y+b.height-c.y);var d,e=(c.x-b.x)/b.width,f=1-(c.x+c.width-b.x)/b.width,g=1-(c.y+c.height-b.y)/b.height,h=(c.y-b.y)/b.height;return"horizontal"==this.zoomOption.orient?(d=this._zoom.end-this._zoom.start,this._zoom.start+=d*e,this._zoom.end-=d*f,d=this._zoom.end2-this._zoom.start2,this._zoom.start2+=d*g,this._zoom.end2-=d*h):(d=this._zoom.end-this._zoom.start,this._zoom.start+=d*g,this._zoom.end-=d*h,d=this._zoom.end2-this._zoom.start2,this._zoom.start2+=d*e,this._zoom.end2-=d*f),this._syncShape(),this._syncData(!0),this._zoom},syncBackupData:function(a){for(var b,c,d=this._originalData.series,e=a.series,f=0,g=e.length;g>f;f++){c=e[f].data||e[f].eventList,b=d[f]?Math.floor(this._zoom.start/100*d[f].length):0;for(var h=0,i=c.length;i>h;h++)d[f]&&(d[f][h+b]=c[h])}},syncOption:function(a){this.silence(!0),this.option=a,this.option.dataZoom=this.reformOption(this.option.dataZoom),this.zoomOption=this.option.dataZoom,this.myChart.canvasSupported||(this.zoomOption.realtime=!1),this.clear(),this._location=this._getLocation(),this._zoom=this._getZoom(),this._backupData(),this.option.dataZoom&&this.option.dataZoom.show&&this._buildShape(),this._syncData(),this.silence(!1)},silence:function(a){this._isSilence=a},getRealDataIndex:function(a,b){if(!this._originalData||0===this._zoom.start&&100==this._zoom.end)return b;var c=this._originalData.series;return c[a]?Math.floor(this._zoom.start/100*c[a].length)+b:-1},resize:function(){this.clear(),this._location=this._getLocation(),this._zoom=this._getZoom(),this.option.dataZoom.show&&this._buildShape()}},i.inherits(b,c),a("../component").define("dataZoom",b),b}),define("echarts/component/categoryAxis",["require","./base","zrender/shape/Text","zrender/shape/Line","zrender/shape/Rectangle","../config","zrender/tool/util","zrender/tool/area","../component"],function(a){function b(a,b,d,e,f,g){if(1>e.data.length)return void console.error("option.data.length < 1.");c.call(this,a,b,d,e,f),this.grid=this.component.grid;for(var h in g)this[h]=g[h];this.refresh(e)}var c=a("./base"),d=a("zrender/shape/Text"),e=a("zrender/shape/Line"),f=a("zrender/shape/Rectangle"),g=a("../config");g.categoryAxis={zlevel:0,z:0,show:!0,position:"bottom",name:"",nameLocation:"end",nameTextStyle:{},boundaryGap:!0,axisLine:{show:!0,onZero:!0,lineStyle:{color:"#48b",width:2,type:"solid"}},axisTick:{show:!0,interval:"auto",inside:!1,length:5,lineStyle:{color:"#333",width:1}},axisLabel:{show:!0,interval:"auto",rotate:0,margin:8,textStyle:{color:"#333"}},splitLine:{show:!0,lineStyle:{color:["#ccc"],width:1,type:"solid"}},splitArea:{show:!1,areaStyle:{color:["rgba(250,250,250,0.3)","rgba(200,200,200,0.3)"]}}};var h=a("zrender/tool/util"),i=a("zrender/tool/area");return b.prototype={type:g.COMPONENT_TYPE_AXIS_CATEGORY,_getReformedLabel:function(a){var b=this.getDataFromOption(this.option.data[a]),c=this.option.data[a].formatter||this.option.axisLabel.formatter;return c&&("function"==typeof c?b=c.call(this.myChart,b):"string"==typeof c&&(b=c.replace("{value}",b))),b},_getInterval:function(){var a=this.option.axisLabel.interval;if("auto"==a){var b=this.option.axisLabel.textStyle.fontSize,c=this.option.data,d=this.option.data.length;if(this.isHorizontal())if(d>3){var e,f,g=this.getGap(),j=!1,k=Math.floor(.5/g);for(k=1>k?1:k,a=Math.floor(15/g);!j&&d>a;){a+=k,j=!0,e=Math.floor(g*a);for(var l=Math.floor((d-1)/a)*a;l>=0;l-=a){if(0!==this.option.axisLabel.rotate)f=b;else if(c[l].textStyle)f=i.getTextWidth(this._getReformedLabel(l),this.getFont(h.merge(c[l].textStyle,this.option.axisLabel.textStyle)));else{var m=this._getReformedLabel(l)+"",n=(m.match(/\w/g)||"").length,o=m.length-n;f=2*n*b/3+o*b}if(f>e){j=!1;break}}}}else a=1;else if(d>3){var g=this.getGap();for(a=Math.floor(11/g);b>g*a-6&&d>a;)a++}else a=1}else a="function"==typeof a?1:a-0+1;return a},_buildShape:function(){if(this._interval=this._getInterval(),this.option.show){this.option.splitArea.show&&this._buildSplitArea(),this.option.splitLine.show&&this._buildSplitLine(),this.option.axisLine.show&&this._buildAxisLine(),this.option.axisTick.show&&this._buildAxisTick(),this.option.axisLabel.show&&this._buildAxisLabel();for(var a=0,b=this.shapeList.length;b>a;a++)this.zr.addShape(this.shapeList[a])}},_buildAxisTick:function(){var a,b=this.option.data,c=this.option.data.length,d=this.option.axisTick,f=d.length,g=d.lineStyle.color,h=d.lineStyle.width,i="function"==typeof d.interval?d.interval:"auto"==d.interval&&"function"==typeof this.option.axisLabel.interval?this.option.axisLabel.interval:!1,j=i?1:"auto"==d.interval?this._interval:d.interval-0+1,k=d.onGap,l=k?this.getGap()/2:void 0===k&&this.option.boundaryGap?this.getGap()/2:0,m=l>0?-j:0;if(this.isHorizontal())for(var n,o="bottom"==this.option.position?d.inside?this.grid.getYend()-f-1:this.grid.getYend()+1:d.inside?this.grid.getY()+1:this.grid.getY()-f-1,p=m;c>p;p+=j)(!i||i(p,b[p]))&&(n=this.subPixelOptimize(this.getCoordByIndex(p)+(p>=0?l:0),h),a={_axisShape:"axisTick",zlevel:this.getZlevelBase(),z:this.getZBase(),hoverable:!1,style:{xStart:n,yStart:o,xEnd:n,yEnd:o+f,strokeColor:g,lineWidth:h}},this.shapeList.push(new e(a)));else for(var q,r="left"==this.option.position?d.inside?this.grid.getX()+1:this.grid.getX()-f-1:d.inside?this.grid.getXend()-f-1:this.grid.getXend()+1,p=m;c>p;p+=j)(!i||i(p,b[p]))&&(q=this.subPixelOptimize(this.getCoordByIndex(p)-(p>=0?l:0),h),a={_axisShape:"axisTick",zlevel:this.getZlevelBase(),z:this.getZBase(),hoverable:!1,style:{xStart:r,yStart:q,xEnd:r+f,yEnd:q,strokeColor:g,lineWidth:h}},this.shapeList.push(new e(a)))},_buildAxisLabel:function(){var a,b,c=this.option.data,e=this.option.data.length,f=this.option.axisLabel,g=f.rotate,i=f.margin,j=f.clickable,k=f.textStyle,l="function"==typeof f.interval?f.interval:!1;if(this.isHorizontal()){var m,n;"bottom"==this.option.position?(m=this.grid.getYend()+i,n="top"):(m=this.grid.getY()-i,n="bottom");for(var o=0;e>o;o+=this._interval)l&&!l(o,c[o])||""===this._getReformedLabel(o)||(b=h.merge(c[o].textStyle||{},k),a={zlevel:this.getZlevelBase(),z:this.getZBase()+3,hoverable:!1,style:{x:this.getCoordByIndex(o),y:m,color:b.color,text:this._getReformedLabel(o),textFont:this.getFont(b),textAlign:b.align||"center",textBaseline:b.baseline||n}},g&&(a.style.textAlign=g>0?"bottom"==this.option.position?"right":"left":"bottom"==this.option.position?"left":"right",a.rotation=[g*Math.PI/180,a.style.x,a.style.y]),this.shapeList.push(new d(this._axisLabelClickable(j,a))))}else{var p,q;"left"==this.option.position?(p=this.grid.getX()-i,q="right"):(p=this.grid.getXend()+i,q="left");for(var o=0;e>o;o+=this._interval)l&&!l(o,c[o])||""===this._getReformedLabel(o)||(b=h.merge(c[o].textStyle||{},k),a={zlevel:this.getZlevelBase(),z:this.getZBase()+3,hoverable:!1,style:{x:p,y:this.getCoordByIndex(o),color:b.color,text:this._getReformedLabel(o),textFont:this.getFont(b),textAlign:b.align||q,textBaseline:b.baseline||0===o&&""!==this.option.name?"bottom":o==e-1&&""!==this.option.name?"top":"middle"}},g&&(a.rotation=[g*Math.PI/180,a.style.x,a.style.y]),this.shapeList.push(new d(this._axisLabelClickable(j,a))))}},_buildSplitLine:function(){var a,b=this.option.data,c=this.option.data.length,d=this.option.splitLine,f=d.lineStyle.type,g=d.lineStyle.width,h=d.lineStyle.color;h=h instanceof Array?h:[h];var i=h.length,j="function"==typeof this.option.axisLabel.interval?this.option.axisLabel.interval:!1,k=d.onGap,l=k?this.getGap()/2:void 0===k&&this.option.boundaryGap?this.getGap()/2:0;if(c-=k||void 0===k&&this.option.boundaryGap?1:0,this.isHorizontal())for(var m,n=this.grid.getY(),o=this.grid.getYend(),p=0;c>p;p+=this._interval)(!j||j(p,b[p]))&&(m=this.subPixelOptimize(this.getCoordByIndex(p)+l,g),a={zlevel:this.getZlevelBase(),z:this.getZBase(),hoverable:!1,style:{xStart:m,yStart:n,xEnd:m,yEnd:o,strokeColor:h[p/this._interval%i],lineType:f,lineWidth:g}},this.shapeList.push(new e(a)));else for(var q,r=this.grid.getX(),s=this.grid.getXend(),p=0;c>p;p+=this._interval)(!j||j(p,b[p]))&&(q=this.subPixelOptimize(this.getCoordByIndex(p)-l,g),a={zlevel:this.getZlevelBase(),z:this.getZBase(),hoverable:!1,style:{xStart:r,yStart:q,xEnd:s,yEnd:q,strokeColor:h[p/this._interval%i],lineType:f,lineWidth:g}},this.shapeList.push(new e(a)))},_buildSplitArea:function(){var a,b=this.option.data,c=this.option.splitArea,d=c.areaStyle.color;if(d instanceof Array){var e=d.length,g=this.option.data.length,h="function"==typeof this.option.axisLabel.interval?this.option.axisLabel.interval:!1,i=c.onGap,j=i?this.getGap()/2:void 0===i&&this.option.boundaryGap?this.getGap()/2:0;if(this.isHorizontal())for(var k,l=this.grid.getY(),m=this.grid.getHeight(),n=this.grid.getX(),o=0;g>=o;o+=this._interval)h&&!h(o,b[o])&&g>o||(k=g>o?this.getCoordByIndex(o)+j:this.grid.getXend(),a={zlevel:this.getZlevelBase(),z:this.getZBase(),hoverable:!1,style:{x:n,y:l,width:k-n,height:m,color:d[o/this._interval%e]}},this.shapeList.push(new f(a)),n=k);else for(var p,q=this.grid.getX(),r=this.grid.getWidth(),s=this.grid.getYend(),o=0;g>=o;o+=this._interval)h&&!h(o,b[o])&&g>o||(p=g>o?this.getCoordByIndex(o)-j:this.grid.getY(),a={zlevel:this.getZlevelBase(),z:this.getZBase(),hoverable:!1,style:{x:q,y:p,width:r,height:s-p,color:d[o/this._interval%e]}},this.shapeList.push(new f(a)),s=p)}else a={zlevel:this.getZlevelBase(),z:this.getZBase(),hoverable:!1,style:{x:this.grid.getX(),y:this.grid.getY(),width:this.grid.getWidth(),height:this.grid.getHeight(),color:d}},this.shapeList.push(new f(a))},refresh:function(a){a&&(this.option=this.reformOption(a),this.option.axisLabel.textStyle=this.getTextStyle(this.option.axisLabel.textStyle)),this.clear(),this._buildShape()},getGap:function(){var a=this.option.data.length,b=this.isHorizontal()?this.grid.getWidth():this.grid.getHeight();return this.option.boundaryGap?b/a:b/(a>1?a-1:1)},getCoord:function(a){for(var b=this.option.data,c=b.length,d=this.getGap(),e=this.option.boundaryGap?d/2:0,f=0;c>f;f++){if(this.getDataFromOption(b[f])==a)return e=this.isHorizontal()?this.grid.getX()+e:this.grid.getYend()-e;e+=d}},getCoordByIndex:function(a){if(0>a)return this.isHorizontal()?this.grid.getX():this.grid.getYend();if(a>this.option.data.length-1)return this.isHorizontal()?this.grid.getXend():this.grid.getY();var b=this.getGap(),c=this.option.boundaryGap?b/2:0;
return c+=a*b,c=this.isHorizontal()?this.grid.getX()+c:this.grid.getYend()-c},getNameByIndex:function(a){return this.getDataFromOption(this.option.data[a])},getIndexByName:function(a){for(var b=this.option.data,c=b.length,d=0;c>d;d++)if(this.getDataFromOption(b[d])==a)return d;return-1},getValueFromCoord:function(){return""},isMainAxis:function(a){return 0===a%this._interval}},h.inherits(b,c),a("../component").define("categoryAxis",b),b}),define("echarts/component/valueAxis",["require","./base","zrender/shape/Text","zrender/shape/Line","zrender/shape/Rectangle","../config","../util/date","zrender/tool/util","../util/smartSteps","../util/accMath","../component"],function(a){function b(a,b,d,e,f,g,h){if(!h||0===h.length)return void console.err("option.series.length == 0.");c.call(this,a,b,d,e,f),this.series=h,this.grid=this.component.grid;for(var i in g)this[i]=g[i];this.refresh(e,h)}var c=a("./base"),d=a("zrender/shape/Text"),e=a("zrender/shape/Line"),f=a("zrender/shape/Rectangle"),g=a("../config");g.valueAxis={zlevel:0,z:0,show:!0,position:"left",name:"",nameLocation:"end",nameTextStyle:{},boundaryGap:[0,0],axisLine:{show:!0,onZero:!0,lineStyle:{color:"#48b",width:2,type:"solid"}},axisTick:{show:!1,inside:!1,length:5,lineStyle:{color:"#333",width:1}},axisLabel:{show:!0,rotate:0,margin:8,textStyle:{color:"#333"}},splitLine:{show:!0,lineStyle:{color:["#ccc"],width:1,type:"solid"}},splitArea:{show:!1,areaStyle:{color:["rgba(250,250,250,0.3)","rgba(200,200,200,0.3)"]}}};var h=a("../util/date"),i=a("zrender/tool/util");return b.prototype={type:g.COMPONENT_TYPE_AXIS_VALUE,_buildShape:function(){if(this._hasData=!1,this._calculateValue(),this._hasData&&this.option.show){this.option.splitArea.show&&this._buildSplitArea(),this.option.splitLine.show&&this._buildSplitLine(),this.option.axisLine.show&&this._buildAxisLine(),this.option.axisTick.show&&this._buildAxisTick(),this.option.axisLabel.show&&this._buildAxisLabel();for(var a=0,b=this.shapeList.length;b>a;a++)this.zr.addShape(this.shapeList[a])}},_buildAxisTick:function(){var a,b=this._valueList,c=this._valueList.length,d=this.option.axisTick,f=d.length,g=d.lineStyle.color,h=d.lineStyle.width;if(this.isHorizontal())for(var i,j="bottom"===this.option.position?d.inside?this.grid.getYend()-f-1:this.grid.getYend()+1:d.inside?this.grid.getY()+1:this.grid.getY()-f-1,k=0;c>k;k++)i=this.subPixelOptimize(this.getCoord(b[k]),h),a={_axisShape:"axisTick",zlevel:this.getZlevelBase(),z:this.getZBase(),hoverable:!1,style:{xStart:i,yStart:j,xEnd:i,yEnd:j+f,strokeColor:g,lineWidth:h}},this.shapeList.push(new e(a));else for(var l,m="left"===this.option.position?d.inside?this.grid.getX()+1:this.grid.getX()-f-1:d.inside?this.grid.getXend()-f-1:this.grid.getXend()+1,k=0;c>k;k++)l=this.subPixelOptimize(this.getCoord(b[k]),h),a={_axisShape:"axisTick",zlevel:this.getZlevelBase(),z:this.getZBase(),hoverable:!1,style:{xStart:m,yStart:l,xEnd:m+f,yEnd:l,strokeColor:g,lineWidth:h}},this.shapeList.push(new e(a))},_buildAxisLabel:function(){var a,b=this._valueList,c=this._valueList.length,e=this.option.axisLabel.rotate,f=this.option.axisLabel.margin,g=this.option.axisLabel.clickable,h=this.option.axisLabel.textStyle;if(this.isHorizontal()){var i,j;"bottom"===this.option.position?(i=this.grid.getYend()+f,j="top"):(i=this.grid.getY()-f,j="bottom");for(var k=0;c>k;k++)a={zlevel:this.getZlevelBase(),z:this.getZBase()+3,hoverable:!1,style:{x:this.getCoord(b[k]),y:i,color:"function"==typeof h.color?h.color(b[k]):h.color,text:this._valueLabel[k],textFont:this.getFont(h),textAlign:h.align||"center",textBaseline:h.baseline||j}},e&&(a.style.textAlign=e>0?"bottom"===this.option.position?"right":"left":"bottom"===this.option.position?"left":"right",a.rotation=[e*Math.PI/180,a.style.x,a.style.y]),this.shapeList.push(new d(this._axisLabelClickable(g,a)))}else{var l,m;"left"===this.option.position?(l=this.grid.getX()-f,m="right"):(l=this.grid.getXend()+f,m="left");for(var k=0;c>k;k++)a={zlevel:this.getZlevelBase(),z:this.getZBase()+3,hoverable:!1,style:{x:l,y:this.getCoord(b[k]),color:"function"==typeof h.color?h.color(b[k]):h.color,text:this._valueLabel[k],textFont:this.getFont(h),textAlign:h.align||m,textBaseline:h.baseline||(0===k&&""!==this.option.name?"bottom":k===c-1&&""!==this.option.name?"top":"middle")}},e&&(a.rotation=[e*Math.PI/180,a.style.x,a.style.y]),this.shapeList.push(new d(this._axisLabelClickable(g,a)))}},_buildSplitLine:function(){var a,b=this._valueList,c=this._valueList.length,d=this.option.splitLine,f=d.lineStyle.type,g=d.lineStyle.width,h=d.lineStyle.color;h=h instanceof Array?h:[h];var i=h.length;if(this.isHorizontal())for(var j,k=this.grid.getY(),l=this.grid.getYend(),m=0;c>m;m++)j=this.subPixelOptimize(this.getCoord(b[m]),g),a={zlevel:this.getZlevelBase(),z:this.getZBase(),hoverable:!1,style:{xStart:j,yStart:k,xEnd:j,yEnd:l,strokeColor:h[m%i],lineType:f,lineWidth:g}},this.shapeList.push(new e(a));else for(var n,o=this.grid.getX(),p=this.grid.getXend(),m=0;c>m;m++)n=this.subPixelOptimize(this.getCoord(b[m]),g),a={zlevel:this.getZlevelBase(),z:this.getZBase(),hoverable:!1,style:{xStart:o,yStart:n,xEnd:p,yEnd:n,strokeColor:h[m%i],lineType:f,lineWidth:g}},this.shapeList.push(new e(a))},_buildSplitArea:function(){var a,b=this.option.splitArea.areaStyle.color;if(b instanceof Array){var c=b.length,d=this._valueList,e=this._valueList.length;if(this.isHorizontal())for(var g,h=this.grid.getY(),i=this.grid.getHeight(),j=this.grid.getX(),k=0;e>=k;k++)g=e>k?this.getCoord(d[k]):this.grid.getXend(),a={zlevel:this.getZlevelBase(),z:this.getZBase(),hoverable:!1,style:{x:j,y:h,width:g-j,height:i,color:b[k%c]}},this.shapeList.push(new f(a)),j=g;else for(var l,m=this.grid.getX(),n=this.grid.getWidth(),o=this.grid.getYend(),k=0;e>=k;k++)l=e>k?this.getCoord(d[k]):this.grid.getY(),a={zlevel:this.getZlevelBase(),z:this.getZBase(),hoverable:!1,style:{x:m,y:l,width:n,height:o-l,color:b[k%c]}},this.shapeList.push(new f(a)),o=l}else a={zlevel:this.getZlevelBase(),z:this.getZBase(),hoverable:!1,style:{x:this.grid.getX(),y:this.grid.getY(),width:this.grid.getWidth(),height:this.grid.getHeight(),color:b}},this.shapeList.push(new f(a))},_calculateValue:function(){if(isNaN(this.option.min-0)||isNaN(this.option.max-0)){for(var a,b,c={},d=this.component.legend,e=0,f=this.series.length;f>e;e++)!(this.series[e].type!=g.CHART_TYPE_LINE&&this.series[e].type!=g.CHART_TYPE_BAR&&this.series[e].type!=g.CHART_TYPE_SCATTER&&this.series[e].type!=g.CHART_TYPE_K&&this.series[e].type!=g.CHART_TYPE_EVENTRIVER||d&&!d.isSelected(this.series[e].name)||(a=this.series[e].xAxisIndex||0,b=this.series[e].yAxisIndex||0,this.option.xAxisIndex!=a&&this.option.yAxisIndex!=b||!this._calculSum(c,e)));var h;for(var e in c){h=c[e];for(var i=0,j=h.length;j>i;i++)if(!isNaN(h[i])){this._hasData=!0,this._min=h[i],this._max=h[i];break}if(this._hasData)break}for(var e in c){h=c[e];for(var i=0,j=h.length;j>i;i++)isNaN(h[i])||(this._min=Math.min(this._min,h[i]),this._max=Math.max(this._max,h[i]))}var k=Math.abs(this._max-this._min);this._min=isNaN(this.option.min-0)?this._min-Math.abs(k*this.option.boundaryGap[0]):this.option.min-0,this._max=isNaN(this.option.max-0)?this._max+Math.abs(k*this.option.boundaryGap[1]):this.option.max-0,this._min===this._max&&(0===this._max?this._max=1:this._max>0?this._min=null!=this._max/this.option.splitNumber?this.option.splitNumber:5:this._max=null!=this._max/this.option.splitNumber?this.option.splitNumber:5),"time"!=this.option.type?this._reformValue(this.option.scale):this._reformTimeValue()}else this._hasData=!0,this._min=this.option.min-0,this._max=this.option.max-0,"time"!=this.option.type?this._customerValue():this._reformTimeValue()},_calculSum:function(a,b){var c,d,e=this.series[b].name||"kener";if(this.series[b].stack){var f="__Magic_Key_Positive__"+this.series[b].stack,i="__Magic_Key_Negative__"+this.series[b].stack;a[f]=a[f]||[],a[i]=a[i]||[],a[e]=a[e]||[],d=this.series[b].data;for(var j=0,k=d.length;k>j;j++)c=this.getDataFromOption(d[j]),"-"!==c&&(c-=0,c>=0?null!=a[f][j]?a[f][j]+=c:a[f][j]=c:null!=a[i][j]?a[i][j]+=c:a[i][j]=c,this.option.scale&&a[e].push(c))}else if(a[e]=a[e]||[],this.series[b].type!=g.CHART_TYPE_EVENTRIVER){d=this.series[b].data;for(var j=0,k=d.length;k>j;j++)c=this.getDataFromOption(d[j]),this.series[b].type===g.CHART_TYPE_K?(a[e].push(c[0]),a[e].push(c[1]),a[e].push(c[2]),a[e].push(c[3])):c instanceof Array?(-1!=this.option.xAxisIndex&&a[e].push("time"!=this.option.type?c[0]:h.getNewDate(c[0])),-1!=this.option.yAxisIndex&&a[e].push("time"!=this.option.type?c[1]:h.getNewDate(c[1]))):a[e].push(c)}else{d=this.series[b].data;for(var j=0,k=d.length;k>j;j++)for(var l=d[j].evolution,m=0,n=l.length;n>m;m++)a[e].push(h.getNewDate(l[m].time))}},_reformValue:function(b){var c=a("../util/smartSteps"),d=this.option.splitNumber;!b&&this._min>=0&&this._max>=0&&(this._min=0),!b&&0>=this._min&&0>=this._max&&(this._max=0);var e=c(this._min,this._max,d);d=null!=d?d:e.secs,this._min=e.min,this._max=e.max,this._valueList=e.pnts,this._reformLabelData()},_reformTimeValue:function(){var a=null!=this.option.splitNumber?this.option.splitNumber:5,b=h.getAutoFormatter(this._min,this._max,a),c=b.formatter,d=b.gapValue;this._valueList=[h.getNewDate(this._min)];var e;switch(c){case"week":e=h.nextMonday(this._min);break;case"month":e=h.nextNthOnMonth(this._min,1);break;case"quarter":e=h.nextNthOnQuarterYear(this._min,1);break;case"half-year":e=h.nextNthOnHalfYear(this._min,1);break;case"year":e=h.nextNthOnYear(this._min,1);break;default:72e5>=d?e=(Math.floor(this._min/d)+1)*d:(e=h.getNewDate(this._min- -d),e.setHours(6*Math.round(e.getHours()/6)),e.setMinutes(0),e.setSeconds(0))}for(d/2>e-this._min&&(e-=-d),b=h.getNewDate(e),a*=1.5;a-- >=0&&(("month"==c||"quarter"==c||"half-year"==c||"year"==c)&&b.setDate(1),!(d/2>this._max-b));)this._valueList.push(b),b=h.getNewDate(b- -d);this._valueList.push(h.getNewDate(this._max)),this._reformLabelData(c)},_customerValue:function(){var b=a("../util/accMath"),c=null!=this.option.splitNumber?this.option.splitNumber:5,d=(this._max-this._min)/c;this._valueList=[];for(var e=0;c>=e;e++)this._valueList.push(b.accAdd(this._min,b.accMul(d,e)));this._reformLabelData()},_reformLabelData:function(a){this._valueLabel=[];var b=this.option.axisLabel.formatter;if(b)for(var c=0,d=this._valueList.length;d>c;c++)"function"==typeof b?this._valueLabel.push(a?b.call(this.myChart,this._valueList[c],a):b.call(this.myChart,this._valueList[c])):"string"==typeof b&&this._valueLabel.push(a?h.format(b,this._valueList[c]):b.replace("{value}",this._valueList[c]));else if(a)for(var c=0,d=this._valueList.length;d>c;c++)this._valueLabel.push(h.format(a,this._valueList[c]));else for(var c=0,d=this._valueList.length;d>c;c++)this._valueLabel.push(this.numAddCommas(this._valueList[c]))},getExtremum:function(){return this._calculateValue(),{min:this._min,max:this._max}},refresh:function(a,b){a&&(this.option=this.reformOption(a),this.option.axisLabel.textStyle=i.merge(this.option.axisLabel.textStyle||{},this.ecTheme.textStyle),this.series=b),this.zr&&(this.clear(),this._buildShape())},getCoord:function(a){a=this._min>a?this._min:a,a=a>this._max?this._max:a;var b;return b=this.isHorizontal()?this.grid.getX()+(a-this._min)/(this._max-this._min)*this.grid.getWidth():this.grid.getYend()-(a-this._min)/(this._max-this._min)*this.grid.getHeight()},getCoordSize:function(a){return this.isHorizontal()?Math.abs(a/(this._max-this._min)*this.grid.getWidth()):Math.abs(a/(this._max-this._min)*this.grid.getHeight())},getValueFromCoord:function(a){var b;return this.isHorizontal()?(a=this.grid.getX()>a?this.grid.getX():a,a=a>this.grid.getXend()?this.grid.getXend():a,b=this._min+(a-this.grid.getX())/this.grid.getWidth()*(this._max-this._min)):(a=this.grid.getY()>a?this.grid.getY():a,a=a>this.grid.getYend()?this.grid.getYend():a,b=this._max-(a-this.grid.getY())/this.grid.getHeight()*(this._max-this._min)),b.toFixed(2)-0},isMaindAxis:function(a){for(var b=0,c=this._valueList.length;c>b;b++)if(this._valueList[b]===a)return!0;return!1}},i.inherits(b,c),a("../component").define("valueAxis",b),b}),define("echarts/util/date",[],function(){function a(a,b,c){c=c>1?c:2;for(var d,e,f,g,h=0,i=k.length;i>h;h++)if(d=k[h].value,e=Math.ceil(b/d)*d-Math.floor(a/d)*d,1.2*c>=Math.round(e/d)){f=k[h].formatter,g=k[h].value;break}return null==f&&(f="year",d=317088e5,e=Math.ceil(b/d)*d-Math.floor(a/d)*d,g=Math.round(e/(c-1)/d)*d),{formatter:f,gapValue:g}}function b(a){return 10>a?"0"+a:a}function c(a,c){("week"==a||"month"==a||"quarter"==a||"half-year"==a||"year"==a)&&(a="MM - dd\nyyyy");var d=j(c),e=d.getFullYear(),f=d.getMonth()+1,g=d.getDate(),h=d.getHours(),i=d.getMinutes(),k=d.getSeconds();return a=a.replace("MM",b(f)),a=a.toLowerCase(),a=a.replace("yyyy",e),a=a.replace("yy",e%100),a=a.replace("dd",b(g)),a=a.replace("d",g),a=a.replace("hh",b(h)),a=a.replace("h",h),a=a.replace("mm",b(i)),a=a.replace("m",i),a=a.replace("ss",b(k)),a=a.replace("s",k)}function d(a){return a=j(a),a.setDate(a.getDate()+8-a.getDay()),a}function e(a,b,c){return a=j(a),a.setMonth(Math.ceil((a.getMonth()+1)/c)*c),a.setDate(b),a}function f(a,b){return e(a,b,1)}function g(a,b){return e(a,b,3)}function h(a,b){return e(a,b,6)}function i(a,b){return e(a,b,12)}function j(a){return a instanceof Date?a:new Date("string"==typeof a?a.replace(/-/g,"/"):a)}var k=[{formatter:"hh : mm : ss",value:1e3},{formatter:"hh : mm : ss",value:5e3},{formatter:"hh : mm : ss",value:1e4},{formatter:"hh : mm : ss",value:15e3},{formatter:"hh : mm : ss",value:3e4},{formatter:"hh : mm\nMM - dd",value:6e4},{formatter:"hh : mm\nMM - dd",value:3e5},{formatter:"hh : mm\nMM - dd",value:6e5},{formatter:"hh : mm\nMM - dd",value:9e5},{formatter:"hh : mm\nMM - dd",value:18e5},{formatter:"hh : mm\nMM - dd",value:36e5},{formatter:"hh : mm\nMM - dd",value:72e5},{formatter:"hh : mm\nMM - dd",value:216e5},{formatter:"hh : mm\nMM - dd",value:432e5},{formatter:"MM - dd\nyyyy",value:864e5},{formatter:"week",value:6048e5},{formatter:"month",value:26784e5},{formatter:"quarter",value:8208e6},{formatter:"half-year",value:16416e6},{formatter:"year",value:32832e6}];return{getAutoFormatter:a,getNewDate:j,format:c,nextMonday:d,nextNthPerNmonth:e,nextNthOnMonth:f,nextNthOnQuarterYear:g,nextNthOnHalfYear:h,nextNthOnYear:i}}),define("echarts/util/smartSteps",[],function(){function a(a){return A.log(E(a))/A.LN10}function b(a){return A.pow(10,a)}function c(a){return a===C(a)}function d(a,b,d,e){t=e||{},u=t.steps||y,v=t.secs||z,d=B(+d||0)%99,a=+a||0,b=+b||0,w=x=0,"min"in t&&(a=+t.min||0,w=1),"max"in t&&(b=+t.max||0,x=1),a>b&&(b=[a,a=b][0]);var f=b-a;if(w&&x)return s(a,b,d);if((d||5)>f){if(c(a)&&c(b))return n(a,b,d);if(0===f)return o(a,b,d)}return j(a,b,d)}function e(a,c,d,e){e=e||0;var h=f((c-a)/d,-1),i=f(a,-1,1),j=f(c,-1),k=A.min(h.e,i.e,j.e);0===i.c?k=A.min(h.e,j.e):0===j.c&&(k=A.min(h.e,i.e)),g(h,{c:0,e:k}),g(i,h,1),g(j,h),e+=k,a=i.c,c=j.c;for(var l=(c-a)/d,m=b(e),n=0,o=[],p=d+1;p--;)o[p]=(a+l*p)*m;if(0>e){n=q(m),l=+(l*m).toFixed(n),a=+(a*m).toFixed(n),c=+(c*m).toFixed(n);for(var p=o.length;p--;)o[p]=o[p].toFixed(n),0===+o[p]&&(o[p]="0")}else a*=m,c*=m,l*=m;return v=0,u=0,t=0,{min:a,max:c,secs:d,step:l,fix:n,exp:e,pnts:o}}function f(d,e,f){e=B(e%10)||2,0>e&&(c(d)?e=(""+E(d)).replace(/0+$/,"").length||1:(d=d.toFixed(15).replace(/0+$/,""),e=d.replace(".","").replace(/^[-0]+/,"").length,d=+d));var g=C(a(d))-e+1,h=+(d*b(-g)).toFixed(15)||0;return h=f?C(h):D(h),!h&&(g=0),(""+E(h)).length>e&&(g+=1,h/=10),{c:h,e:g}}function g(a,c,d){var e=c.e-a.e;e&&(a.e+=e,a.c*=b(-e),a.c=d?C(a.c):D(a.c))}function h(a,b,c){a.e<b.e?g(b,a,c):g(a,b,c)}function i(a,b){b=b||y,a=f(a);for(var c=a.c,d=0;c>b[d];)d++;if(!b[d])for(c/=10,a.e+=1,d=0;c>b[d];)d++;return a.c=b[d],a}function j(a,b,d){var h,j=d||+v.slice(-1),o=i((b-a)/j,u),q=f(b-a),s=f(a,-1,1),t=f(b,-1);if(g(q,o),g(s,o,1),g(t,o),d?h=l(s,t,j):j=k(s,t),c(a)&&c(b)&&a*b>=0){if(j>b-a)return n(a,b,j);j=m(a,b,d,s,t,j)}var y=p(a,b,s.c,t.c);return s.c=y[0],t.c=y[1],(w||x)&&r(a,b,s,t),e(s.c,t.c,j,t.e)}function k(a,c){for(var d,e,f,g,h=[],j=v.length;j--;)d=v[j],e=i((c.c-a.c)/d,u),e=e.c*b(e.e),f=C(a.c/e)*e,g=D(c.c/e)*e,h[j]={min:f,max:g,step:e,span:g-f};return h.sort(function(a,b){var c=a.span-b.span;return 0===c&&(c=a.step-b.step),c}),h=h[0],d=h.span/h.step,a.c=h.min,c.c=h.max,3>d?2*d:d}function l(a,c,d){for(var e,f,g=c.c,h=(c.c-a.c)/d-1;g>a.c;)h=i(h+1,u),h=h.c*b(h.e),e=h*d,f=D(c.c/h)*h,g=f-e;var j=a.c-g,k=f-c.c,l=j-k;return l>1.1*h&&(l=B(l/h/2)*h,g+=l,f+=l),a.c=g,c.c=f,h}function m(a,d,e,f,g,h){var i=g.c-f.c,j=i/h*b(g.e);if(!c(j)&&(j=C(j),i=j*h,d-a>i&&(j+=1,i=j*h,!e&&j*(h-1)>=d-a&&(h-=1,i=j*h)),i>=d-a)){var k=i-(d-a);f.c=B(a-k/2),g.c=B(d+k/2),f.e=0,g.e=0}return h}function n(a,b,c){if(c=c||5,w)b=a+c;else if(x)a=b-c;else{var d=c-(b-a),f=B(a-d/2),g=B(b+d/2),h=p(a,b,f,g);a=h[0],b=h[1]}return e(a,b,c)}function o(a,b,c){c=c||5;var d=A.min(E(b/c),c)/2.1;return w?b=a+d:x?a=b-d:(a-=d,b+=d),j(a,b,c)}function p(a,b,c,d){return a>=0&&0>c?(d-=c,c=0):0>=b&&d>0&&(c-=d,d=0),[c,d]}function q(a){return a=(+a).toFixed(15).split("."),a.pop().replace(/0+$/,"").length}function r(a,b,c,d){if(w){var e=f(a,4,1);c.e-e.e>6&&(e={c:0,e:c.e}),h(c,e),h(d,e),d.c+=e.c-c.c,c.c=e.c}else if(x){var g=f(b,4);d.e-g.e>6&&(g={c:0,e:d.e}),h(c,g),h(d,g),c.c+=g.c-d.c,d.c=g.c}}function s(a,b,c){var d=c?[c]:v,h=b-a;if(0===h)return b=f(b,3),c=d[0],b.c=B(b.c+c/2),e(b.c-c,b.c,c,b.e);1e-6>E(b/h)&&(b=0),1e-6>E(a/h)&&(a=0);var i,j,k,l=[[5,10],[10,2],[50,10],[100,2]],m=[],n=[],o=f(b-a,3),p=f(a,-1,1),q=f(b,-1);g(p,o,1),g(q,o),h=q.c-p.c,o.c=h;for(var r=d.length;r--;){c=d[r],i=D(h/c),j=i*c-h,k=3*(j+3),k+=2*(c-d[0]+2),0===c%5&&(k-=10);for(var s=l.length;s--;)0===i%l[s][0]&&(k/=l[s][1]);n[r]=[c,i,j,k].join(),m[r]={secs:c,step:i,delta:j,score:k}}return m.sort(function(a,b){return a.score-b.score}),m=m[0],p.c=B(p.c-m.delta/2),q.c=B(q.c+m.delta/2),e(p.c,q.c,m.secs,o.e)}var t,u,v,w,x,y=[10,20,25,50],z=[4,5,6],A=Math,B=A.round,C=A.floor,D=A.ceil,E=A.abs;return d}),function(a,b){"use strict";var c=function(a){if("object"!=typeof a.document)throw new Error("Cookies.js requires a `window` with a `document` object");var c=function(a,b,d){return 1===arguments.length?c.get(a):c.set(a,b,d)};return c._document=a.document,c._cacheKeyPrefix="cookey.",c._maxExpireDate=new Date("Fri, 31 Dec 9999 23:59:59 UTC"),c.defaults={path:"/",secure:!1},c.get=function(a){return c._cachedDocumentCookie!==c._document.cookie&&c._renewCache(),c._cache[c._cacheKeyPrefix+a]},c.set=function(a,d,e){return e=c._getExtendedOptions(e),e.expires=c._getExpiresDate(d===b?-1:e.expires),c._document.cookie=c._generateCookieString(a,d,e),c},c.expire=function(a,d){return c.set(a,b,d)},c._getExtendedOptions=function(a){return{path:a&&a.path||c.defaults.path,domain:a&&a.domain||c.defaults.domain,expires:a&&a.expires||c.defaults.expires,secure:a&&a.secure!==b?a.secure:c.defaults.secure}},c._isValidDate=function(a){return"[object Date]"===Object.prototype.toString.call(a)&&!isNaN(a.getTime())},c._getExpiresDate=function(a,b){if(b=b||new Date,"number"==typeof a?a=a===1/0?c._maxExpireDate:new Date(b.getTime()+1e3*a):"string"==typeof a&&(a=new Date(a)),a&&!c._isValidDate(a))throw new Error("`expires` parameter cannot be converted to a valid Date instance");return a},c._generateCookieString=function(a,b,c){a=a.replace(/[^#$&+\^`|]/g,encodeURIComponent),a=a.replace(/\(/g,"%28").replace(/\)/g,"%29"),b=(b+"").replace(/[^!#$&-+\--:<-\[\]-~]/g,encodeURIComponent),c=c||{};var d=a+"="+b;return d+=c.path?";path="+c.path:"",d+=c.domain?";domain="+c.domain:"",d+=c.expires?";expires="+c.expires.toUTCString():"",d+=c.secure?";secure":""},c._getCacheFromString=function(a){for(var d={},e=a?a.split("; "):[],f=0;f<e.length;f++){var g=c._getKeyValuePairFromCookieString(e[f]);d[c._cacheKeyPrefix+g.key]===b&&(d[c._cacheKeyPrefix+g.key]=g.value)}return d},c._getKeyValuePairFromCookieString=function(a){var b=a.indexOf("=");return b=0>b?a.length:b,{key:decodeURIComponent(a.substr(0,b)),value:decodeURIComponent(a.substr(b+1))}},c._renewCache=function(){c._cache=c._getCacheFromString(c._document.cookie),c._cachedDocumentCookie=c._document.cookie},c._areEnabled=function(){var a="cookies.js",b="1"===c.set(a,1).get(a);return c.expire(a),b},c.enabled=c._areEnabled(),c},d="object"==typeof a.document?c(a):c;a.Cookies=d}("undefined"==typeof window?this:window),function(){Date.prototype.format=function(a){var b={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};/(y+)/.test(a)&&(a=a.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length)));for(var c in b)new RegExp("("+c+")").test(a)&&(a=a.replace(RegExp.$1,1==RegExp.$1.length?b[c]:("00"+b[c]).substr((""+b[c]).length)));return a},Date.prototype.toArray=function(){var a=this,b=Array();return b[0]=a.getFullYear(),b[1]=a.getMonth(),b[2]=a.getDate(),b[3]=a.getHours(),b[4]=a.getMinutes(),b[5]=a.getSeconds(),b},Date.prototype.DatePart=function(a){var b=this,c="",d=["日","一","二","三","四","五","六"];switch(a){case"y":c=b.getFullYear();break;case"m":c=b.getMonth()+1;break;case"d":c=b.getDate();break;case"w":c=d[b.getDay()];break;case"ww":c=b.WeekNumOfYear();break;case"h":c=b.getHours();break;case"n":c=b.getMinutes();break;case"s":c=b.getSeconds()}return c},Date.prototype.MaxDayOfDate=function(){var a=this,b=a.toArray(),c=new Date(b[0],b[1]+1,1),d=c.dateAdd(1,"m",1),e=dateDiff(c.Format("yyyy-MM-dd"),d.Format("yyyy-MM-dd"));return e},Date.prototype.WeekNumOfYear=function(){var a=this,b=a.toArray(),c=b[0],d=b[1]+1,e=b[2];return document.write("< script language=VBScript> \n"),document.write("myDate = Datue("+d+"-"+e+"-"+c+") \n"),document.write('result = DatePart("ww", myDate) \n'),document.write(" \n"),result},Date.prototype.isLeapYear=function(){return 0==this.getYear()%4&&(this.getYear()%100!=0||this.getYear()%400==0)},Date.prototype.Format=function(a){var b=a,c=["日","一","二","三","四","五","六"];return b=b.replace(/yyyy|YYYY/,this.getFullYear()),b=b.replace(/yy|YY/,this.getYear()%100>9?(this.getYear()%100).toString():"0"+this.getYear()%100),b=b.replace(/MM/,this.getMonth()>=9?(this.getMonth()+1).toString():"0"+(this.getMonth()+1)),b=b.replace(/M/g,this.getMonth()),b=b.replace(/w|W/g,c[this.getDay()]),b=b.replace(/dd|DD/,this.getDate()>9?this.getDate().toString():"0"+this.getDate()),b=b.replace(/d|D/g,this.getDate()),b=b.replace(/hh|HH/,this.getHours()>9?this.getHours().toString():"0"+this.getHours()),b=b.replace(/h|H/g,this.getHours()),b=b.replace(/mm/,this.getMinutes()>9?this.getMinutes().toString():"0"+this.getMinutes()),b=b.replace(/m/g,this.getMinutes()),b=b.replace(/ss|SS/,this.getSeconds()>9?this.getSeconds().toString():"0"+this.getSeconds()),b=b.replace(/s|S/g,this.getSeconds())},Date.prototype.DateAdd=function(a,b){var c=this;switch(a){case"s":return new Date(Date.parse(c)+1e3*b);case"n":return new Date(Date.parse(c)+6e4*b);case"h":return new Date(Date.parse(c)+36e5*b);case"d":return new Date(Date.parse(c)+864e5*b);case"w":return new Date(Date.parse(c)+6048e5*b);case"q":return new Date(c.getFullYear(),c.getMonth()+3*b,c.getDate(),c.getHours(),c.getMinutes(),c.getSeconds());case"m":return new Date(c.getFullYear(),c.getMonth()+b,c.getDate(),c.getHours(),c.getMinutes(),c.getSeconds());case"y":return new Date(c.getFullYear()+b,c.getMonth(),c.getDate(),c.getHours(),c.getMinutes(),c.getSeconds())}},Date.prototype.DateDiff=function(a,b){var c=this;switch("string"==typeof b&&(b=StringToDate(b)),a){case"s":return parseInt((b-c)/1e3);case"n":return parseInt((b-c)/6e4);case"h":return parseInt((b-c)/36e5);case"d":return parseInt((b-c)/864e5);case"w":return parseInt((b-c)/6048e5);case"m":return b.getMonth()+1+12*(b.getFullYear()-c.getFullYear())-(c.getMonth()+1);case"y":return b.getFullYear()-c.getFullYear()}},Date.prototype.toString=function(a){var b=this,c=b.toLocaleDateString();if(a){var d=["日","一","二","三","四","五","六"];c+=" 星期"+d[b.getDay()]}return c},Array.prototype.insert=function(a,b){this.splice(a,0,b)},Array.prototype.baoremove=function(a){return isNaN(a)||a>this.length?!1:void this.splice(a,1)}}();var DateUtils={YYYY_MM_DD_HH_MM_SS:"yyyy-MM-dd hh:mm:ss",YYYY_MM_DD:"yyyy-MM-dd",YYYY:"yyyy",MM_DD:"MM-dd",HH_MM:"hh:mm",MM_DD_HH_MM_SS:"MM-dd hh:mm:ss",addByTransDate:function(a,b){var c="",d="",e="",f="";c=a.replace("-","/").replace("-","/");var g=new Date(c);return g=g.valueOf(),g+=24*b*60*60*1e3,g=new Date(g),e=1==(g.getMonth()+1).toString().length?"0"+(g.getMonth()+1).toString():(g.getMonth()+1).toString(),f=1==g.getDate().toString().length?"0"+g.getDate().toString():g.getDate().toString(),d=g.getFullYear()+"-"+e+"-"+f},getWeekNum:function(a){var b="";b=a.replace("-","/").replace("-","/");var c=new Date(b);return 0===c.getDay()?"周日":1===c.getDay()?"周一":2===c.getDay()?"周二":3===c.getDay()?" 周三":4===c.getDay()?"周四":5===c.getDay()?"周五":6===c.getDay()?"周六":"周日"},formatDate4TimeVal:function(a,b){var c=null;return c="object"==typeof a?new Date(a.time||a.getTime()):new Date(a),c.Format(b)},formatDateString:function(a,b){var c="";c=a.replace("-","/").replace("-","/");var d=new Date(c);return d.format(b)},getTime4HM:function(a){var b=[];if(a&&a.indexOf(":")<=0){var c=a.split("");_.map(c,function(a,c){4>c&&(c>1&&c%2===0&&b.push(":"),b.push(a))})}return b.join("")},getYearList:function(){for(var a=new Date(0),b=a.getFullYear(),c=new Date,d=c.getFullYear(),e=[],f=d-b;f>=0;f--)e.push(b+f);return e},getTimeList:function(){for(var a=[],b=23;b>=0;b--)a.push((b=10>b?"0"+b:b)+":00");return a}},Tip={message:function(a,b){var c="messenger-fixed messenger-on-bottom messenger-on-right";Messenger.options={extraClasses:c,theme:"flat"},Messenger().post({message:a,type:b||"success",showCloseButton:!0,hideAfter:4})}},Print={getPrintI2dimCodeUrl:function(a,b){var c=contentPath+"/i2dimcodes/userI2DimCode?content="+encodeURIComponent(a);return b&&(c=c+"&tag="+b),c},goToPrintPage:function(a,b,c,d){a&&b?window.printList=[{content:a,tag:b}]:a||b?a&&!b&&(window.printList=[{content:a}]):window.printList=d,window.hotelName=c,window.open(contentPath+"/print/print.jsp","new")}};window.require&&require.config({paths:{echarts:contentPath+"/main/plug-in/echarts"}});var roomNum=0,dateInfo="",maxPrice={},curData={},hisDatas=[],checkerBill=[],JdjyyjType="week",otaddsType="week",otajyeType="month",thisWeekOrderNum=0,lastWeekOrderNum=0;window.homePortalBillWeek2=function(a){function b(a){var b=0,c=0;b=a.orderNum,c=5*b,jQuery("#i_lxsl").text(b),jQuery("#i_zhlxsr").text(c)}function c(a){var b=a.orderNum,c=a.yfbtdds,d=a.dfbtdds,e=a.yfbtje,f=a.dfbtje;a.kjzye;jQuery("#i_cgdds").text(b),jQuery("#i_kjzye").text(0),jQuery("#i_yfbtdds").text(c),jQuery("#i_dfbtdds").text(d),jQuery("#i_yfbtje").text(e),jQuery("#i_dfbtje").text(f)}var d={ruleCode:ruleCode},e=(new Date).getDay();e=0==e?7:e;var f=new Date;a?(d.beginDateStr=f.DateAdd("d",-e).format("yyyy-MM-dd")+" 24:00:00",d.endDateStr=f.format("yyyy-MM-dd")+" 24:00:00"):(d.beginDateStr=f.DateAdd("d",-e-7).format("yyyy-MM-dd")+" 24:00:00",d.endDateStr=f.DateAdd("d",-e).format("yyyy-MM-dd")+" 24:00:00"),jQuery(".lx_loading").show(),jQuery.ajax({type:"get",cache:!1,timeout:3e3,dataType:"json",data:d,async:!0,url:contentPath+"/home/checkInfo",success:function(d){var e=d.attribute||{};"1001"==ruleCode||1001==ruleCode?b(e):c(e),a?(jQuery("#a_bz").css({color:"orangered"}),jQuery("#a_sz").css({color:"#ffffff"})):(jQuery("#a_bz").css({color:"#ffffff"}),jQuery("#a_sz").css({color:"orangered"})),jQuery(".lx_loading").hide()},error:function(){jQuery(".lx_loading").hide()}})},window.hotelHomeShowMy2DBarCode=function(){jQuery.ajax({url:contentPath+"/user/qrcodeByUserId",type:"get",dataType:"json",success:function(a){var b=jQuery("#hmsHomePortalContain").find("img"),c=contentPath+"/images/erwei-img2.png";a&&a.content&&(b.data("qrCodeData",a),c=contentPath+"/i2dimcodes/userI2DimCode?content="+encodeURIComponent(a.content)+"&tag="+a.tag),b.attr("src",c),jQuery("#hmsHomePortalI2DimCodesModal").modal("show")},error:function(a){Tip.message("获取用户二维码数据异常","error")}})},window.hotelHomePrintMyI2DimCode=function(){var a=jQuery("#hmsHomePortalContain").find("img"),b=a.data("qrCodeData");b&&b.content?Print.goToPrintPage(b.content,b.tag,thisHotel.hotelName):Tip.message("暂无二维码打印数据","error")};var HmsDom={initSelectpicker:function(a){return jQuery(a||"select").selectpicker({style:"btn-success hms-select select"})},setSelectpickerVal:function(a,b){return jQuery(a||"select").selectpicker("val",b)}};angular.module("hmsApp",["ngAnimate","ui.router","ui.bootstrap.pagination","ui.bootstrap.buttons","template/pagination/pagination.html","hmsInitApp","homeApp","orderApp","borderApp","ratesApp","accountApp","messageApp","userApp","hmsAngularLib","commentApp","hmsService"]).run(["$rootScope","$state","$stateParams","$timeout",function(a,b,c,d){function e(a){window.WebSocket&&(g.readyState==WebSocket.OPEN?g.send(a):console.log("-------socket--sendmsgerror----"+(new Date).format(DateUtils.YYYY_MM_DD_HH_MM_SS)),d(function(){e(JSON.stringify({directive:"ping"})),console.log("-------socket------"+(new Date).format(DateUtils.YYYY_MM_DD_HH_MM_SS))},5e3))}function f(a){window.WebSocket&&(g.readyState==WebSocket.OPEN?g.send(a):Tip.message("socket未开启","error"))}a.contentPath=contentPath,a.thisHotel=thisHotel,a.RULE_CODE="1001"==ruleCode?"A":"B",a.$state=b,a.$stateParams=c,a.hmsLoading={isShow:!1,show:function(){this.isShow=!0,this.timer.run()},hide:function(){this.isShow=!1,this.timer.cancel()},timer:{run:function(){this.cancel(),this.timeOut=d(function(){a.hmsLoading.hide()},5e3)},cancel:function(){this.timeOut&&0==this.timeOut.$$state.status&&d.cancel(this.timeOut)}}};var g,h={"-1":"",0:"",1:"",2:"",3:"",4:"",5:"CHANGE_ORDER_PRICE",6:"",7:"",9:"RECEIVE_ORDER"};window.WebSocket||(window.WebSocket=window.MozWebSocket),window.WebSocket?(g=new WebSocket("ws://"+hostAddress+contentPath+"/websocket"),g.onmessage=function(b){var c=JSON.parse(b.data);if(c.userId==user.id){var d=c.directiveCode;d&&h[d]&&a.$broadcast(h[d],c)}else console.log("-------wrong message--userId:"+c.userId+"-----"+(new Date).format(DateUtils.YYYY_MM_DD_HH_MM_SS))},g.onopen=function(a){f(JSON.stringify({directive:"connect",userId:user.id})),console.log("-------socket open-------"+(new Date).format(DateUtils.YYYY_MM_DD_HH_MM_SS)),e(JSON.stringify({directive:"ping"})),console.log("-------socket------"+(new Date).format(DateUtils.YYYY_MM_DD_HH_MM_SS))},g.onclose=function(a){console.log("-------socket closed-------"+(new Date).format(DateUtils.YYYY_MM_DD_HH_MM_SS))}):Tip.message("当前浏览器不支持socket","error")}]).config(["$stateProvider","$urlRouterProvider","$httpProvider",function(a,b,c){b.otherwise("/home"),a.state("home",{url:"/home",templateUrl:contentPath+"/main/home/template/home.html"}).state("orders",{url:"/orders",templateUrl:contentPath+"/main/order/template/order.html"}).state(" borders",{url:"/borders",templateUrl:contentPath+"/main/order/template/b-order.html"}).state("shopping",{url:"/goods",templateUrl:contentPath+"/main/shopping/template/goods.html",label:"商城 > 首页"}).state("shopping.detail",{url:"/detail/:id",templateUrl:contentPath+"/main/shopping/template/detail.html",label:"商城 > 商品详情"}).state("shopping.addSuccess",{url:"/addSuccess",templateUrl:contentPath+"/main/shopping/template/addSuccess.html",label:"商城 > 商品详情"}).state("shopping.carts",{url:"/carts",templateUrl:contentPath+"/main/shopping/template/carts.html",label:"商城 > 我的购物车"}).state("shopping.orders",{url:"/orders",templateUrl:contentPath+"/main/shopping/template/orders.html",label:"商城 > 我的订单"}).state("shopping.mygoods",{url:"/mygoods/:orderId",templateUrl:contentPath+"/main/shopping/template/mygoods.html",label:"商城 > 我的商品"}).state("rates",{url:"/rates",views:{"":{templateUrl:contentPath+"/main/rates/template/rates.html"},"modify@rates":{templateUrl:contentPath+"/main/rates/template/rates-modify.html"}}}).state("account",{url:"/account",templateUrl:contentPath+"/main/account/template/finance.html"}).state("message",{url:"/message",templateUrl:contentPath+"/main/message/template/message.html"}).state("message.hotelFac",{
url:"/hotelFac",templateUrl:contentPath+"/main/message/template/hotel-fac.html"}).state("message.hotelInfo",{url:"/hotelInfo",templateUrl:contentPath+"/main/message/template/hotel-info.html"}).state("message.hotelTraffic",{url:"/hotelTraffic",templateUrl:contentPath+"/main/message/template/hotel-traffic.html"}).state("message.hotelPic",{url:"/hotelPic",templateUrl:contentPath+"/main/message/template/hotel-pic.html"}).state("message.hotelPeripheral",{url:"/hotelPeripheral",templateUrl:contentPath+"/main/message/template/hotel-peripheral.html"}).state("message.hotelRegPhoto",{url:"/hotelRegPhoto",templateUrl:contentPath+"/main/message/template/hotel-regphoto.html"}).state("message.roomInfo",{url:"/roomInfo/:id",templateUrl:contentPath+"/main/message/template/room-info.html"}).state("message.roomPrice",{url:"/roomPrice/:id",templateUrl:contentPath+"/main/message/template/room-price.html"}).state("message.accountSetting",{url:"/accountSetting",templateUrl:contentPath+"/main/message/template/account-setting.html"}).state("message.roomSetting",{url:"/roomSetting",views:{"":{templateUrl:contentPath+"/main/message/template/room-setting.html"},"select@message.roomSetting":{templateUrl:contentPath+"/main/message/template/room-setting-list.html"},"setting@message.roomSetting":{templateUrl:contentPath+"/main/message/template/room-setting-detail.html"}}}).state("users",{url:"/users",views:{"":{templateUrl:contentPath+"/main/users/template/users.html"},"list@users":{templateUrl:contentPath+"/main/users/template/list.html"},"add@users":{templateUrl:contentPath+"/main/users/template/add.html"}}}).state("comment",{url:"/comment",templateUrl:contentPath+"/main/comment/template/comment.html"}),c.defaults.headers.put["Content-Type"]="application/x-www-form-urlencoded",c.defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded",c.defaults.transformRequest=[function(a){var b=function(a){var c,d,e,f,g,h,i,j="";for(c in a)if(d=a[c],d instanceof Array)for(i=0;i<d.length;++i)g=d[i],e=c+"["+i+"]",h={},h[e]=g,j+=b(h)+"&";else if(d instanceof Object)for(f in d)g=d[f],e=c+"["+f+"]",h={},h[e]=g,j+=b(h)+"&";else void 0!==d&&null!==d&&(j+=encodeURIComponent(c)+"="+encodeURIComponent(d)+"&");return j.length?j.substr(0,j.length-1):j};return angular.isObject(a)&&"[object File]"!==String(a)?b(a):a}]}]),angular.module("hmsAngularLib",["angularFileUpload","mgcrea.ngStrap"]).run(["$templateCache",function(a){a.put("modal-outer.tmpl.html",'<div class="modal animated" tabindex="-1" role="dialog" aria-hidden="true"><div class="modal-dialog {{_cls}}"><div class="modal-content" ng-include="_contentTmpl"></div></div></div>'),a.put("modal-content.tmpl.html",'<div class="modal-header" ng-show="title"><button type="button" class="close" aria-label="Close" ng-click="closeModal()"><span aria-hidden="true">&times;</span></button><h4 class="modal-title" ng-bind="title"></h4></div><div class="modal-body" ng-include="_bodyTmpl"></div><div class="modal-footer"><button type="button" class="btn btn-default" ng-click="closeModal()">关闭</button></div>'),a.put("modal-confirm-notice.tmpl.html",'<div class="modal-header"><button type="button" class="close" aria-label="Close" ng-click="close()"><span aria-hidden="true">&times;</span></button><h4 class="modal-title">确认提示</h4></div><div class="modal-body" ng-bind="cusContent"></div><div class="modal-footer"><button type="buFtton" class="btn btn-primary" ng-click="modalConfirm()">确定</button><button type="button" class="btn btn-default" ng-click="modalConfirmClose()">取消</button></div><i class="confirm_loading fa fa-spinner fa-pulse fa-3x" style="position: absolute;top: 50%;left: 50%;margin-top: -20px;margin-left: -20px;display:none;"></i>'),a.put("base-confirm-notice.tmpl.html",'<div class="modal-header"><button type="button" class="close" aria-label="Close" ng-click="close()"><span aria-hidden="true">&times;</span></button><h4 class="modal-title">确认提示</h4></div><div class="modal-body" ng-bind="cusContent"></div><div class="modal-footer"><button type="buFtton" class="btn btn-primary" ng-click="baseConfirm()">确定</button><button type="button" class="btn btn-default" ng-click="baseConfirmClose()">取消</button></div><i class="confirm_loading fa fa-spinner fa-pulse fa-3x" style="position: absolute;top: 50%;left: 50%;margin-top: -20px;margin-left: -20px;display:none;"></i>'),a.put("modal-save-notice.tmpl.html",'<div class="modal-header"><button type="button" class="close" aria-label="Close" ng-click="close()"><span aria-hidden="true">&times;</span></button><h4 class="modal-title">保存提示</h4></div><div class="modal-body">是否需要保存？</div><div class="modal-footer"><button type="button" class="btn btn-default" ng-click="btn.action()" ng-repeat="btn in modalBtns" ng-bind="btn.name"></button></div>'),a.put("aside-sendCheck.tpl.html",'<div class="aside" tabindex="-1" role="dialog" style="width:600px;"><div class="aside-dialog"><div class="aside-content"><div><div class="aside-header" ng-show="title"><button type="button" class="close" ng-click="$hide()">&times;</button><h4 class="aside-title" ng-bind="title"></h4></div><div class="aside-body" ng-show="bill.checkstatus == 1"><textarea ng-if="!isMgr" class="form-control" ng-model="bill.currMemo" rows="10" maxlength="2000" placeholder="如果您对该账期信息有异议，请填写发起异议原因..."></textarea><textarea ng-if="isMgr" class="form-control" ng-model="bill.currMemo" rows="10" maxlength="2000" placeholder="请填写回复结果..."></textarea><p>最多输入2000字</p><div class="form-inline"><label>调整账单金额：</label><input type="number" class="form-control" ng-model="bill.currAmount" style="width:160px;" placeholder="必填"/>&nbsp;元</div><h6 style="color:#f00;font-style:italic;" class="pull-right">调整后金额——负数，为眯客支付酒店金额；正数，为眯客收取酒店金额</h6></div><div style="padding:15px;"><i class="fa fa-spinner fa-pulse fa-3x" ng-show="bill.loading" style="position: absolute;top: 50%;left: 50%;margin-top: -20px;margin-left: -20px;"></i><h5>审核明细</h5><p>账单金额 {{bill.billcost | currency }}元</p><p ng-show="bill.changecost">调整金额 {{bill.changecost | currency }}元</p><p>调整金额后 {{(bill.changecost ? bill.changecost + bill.billcost : 0) | currency}}元</p><div ng-show="bill.checkDetails.length" class="panel-group" data-allow-multiple="true" role="tablist" aria-multiselectable="true"><div class="panel panel-default" ng-repeat="detail in bill.checkDetails"><div class="panel-heading" role="tab"><span class="panel-title">发起时间 {{detail.checktime}}</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="panel-title">状态 {{detail.checkstatustext}}</span></div><div ng-if="detail.checkstatus==2" class="panel-collapse" role="tabpanel"><div class="panel-body"><p>审核原因 {{detail.checkmemo}}</p></div></div></div></div><span ng-show="!bill.checkDetails.length">暂无数据</span></div><div class="aside-footer" ng-show="bill.checkstatus == 1"><button type="button" class="btn btn-primary" ng-click="asideConfirm()">确定</button><button type="button" class="btn btn-default" ng-click="asideConfirmCancel()">取消</button><button ng-if="isMgr" type="button" class="btn btn-danger" ng-click="asideConfirmReject()">退回</button></div></div></div></div></div>'),a.put("aside-sendCheck-special.tpl.html",'<div class="aside" tabindex="-1" role="dialog" style="width:600px;"><div class="aside-dialog"><div class="aside-content"><div><div class="aside-header" ng-show="title"><button type="button" class="close" ng-click="$hide()">&times;</button><h4 class="aside-title" ng-bind="title"></h4></div><div class="aside-body" ><textarea class="form-control" ng-model="bill.currMemo" rows="10" maxlength="2000" placeholder="请填申诉原因..."></textarea><p>最多输入2000字</p><div class="form-inline"><label>调整账单金额：</label><input type="number" class="form-control" ng-model="bill.hotelchangecost" style="width:160px;" placeholder="必填"/>&nbsp;元</div><h6 style="color:#f00;font-style:italic;" class="pull-right">调整金额填写该笔账单需要补贴支付的金额</h6></div><div class="aside-footer" ><button type="button" class="btn btn-primary" ng-click="asideConfirm()">确定</button><button type="button" class="btn btn-default" ng-click="asideConfirmCancel()">取消</button><button ng-if="isMgr" type="button" class="btn btn-danger" ng-click="asideConfirmReject()">退回</button></div></div></div></div></div>'),a.put("aside-sendCheck-base.tpl.html",'<div class="aside" tabindex="-1" role="dialog" style="width:600px;"><div class="aside-dialog"><div class="aside-content"><div><div class="aside-header" ng-show="title"><button type="button" class="close" ng-click="$hide()">&times;</button><h4 class="aside-title" ng-bind="title"></h4></div><div class="aside-body" ><textarea class="form-control" ng-model="bill.hotelReason" rows="10" maxlength="2000" placeholder="请填申诉原因..."></textarea><p>最多输入2000字</p><div class="form-inline"><label>调整账单金额：</label><input type="number" class="form-control" ng-model="bill.hotelChange" style="width:160px;" placeholder="必填"/>&nbsp;元</div><h6 style="color:#f00;font-style:italic;" class="text-right">调整金额填写该笔账单需要补贴支付的金额</h6></div><div class="aside-footer" ><button type="button" class="btn btn-primary" ng-click="asideConfirm()">确定</button><button type="button" class="btn btn-default" ng-click="asideConfirmCancel()">取消</button><button ng-if="isMgr" type="button" class="btn btn-danger" ng-click="asideConfirmReject()">退回</button></div></div></div></div></div>'),a.put("confirm-bill.tmpl.html",'<div><div class="modal-header"><button type="button" class="close" aria-label="Close" ng-click="modalConfirmClose()"><span aria-hidden="true">&times;</span></button><h4 class="modal-title">账单信息</h4></div><div class="modal-body"><div class="form-horizontal"><div class="form-group"><span class="col-sm-2">账单金额:</span><span class="col-sm-10 text-left">{{bill.readjustcost|currency}} 元</span></div><div class="form-group"><span class="col-sm-2">备注:</span><ul class="col-sm-10 text-success" style="max-height:200px;overflow:auto;"><li style="list-style:none;" ng-repeat="checkDetail in checkDetailList">{{checkDetail.checkmemo}} -- {{checkDetail.checkstatustext}}</li></ul></div><div class="form-group"><span class="col-sm-12 text-danger">确认金额后将不能够再更改，是否继续？</span></div></div></div><div class="modal-footer"><button type="button" class="btn btn-primary" ng-click="modalConfirm()">确定</button><button type="button" class="btn btn-default" ng-click="modalConfirmClose()">取消</button></div></div>'),a.put("confirm-bill-special.tmpl.html",'<div><div class="modal-header"><button type="button" class="close" aria-label="Close" ng-click="modalConfirmClose()"><span aria-hidden="true">&times;</span></button><h4 class="modal-title">账单信息</h4></div><div class="modal-body"><div class="form-horizontal"><div class="form-group"><span class="col-sm-2">账单金额:</span><span class="col-sm-10 text-left">{{bill.billcost|currency}} 元</span></div><div class="form-group"><span class="col-sm-12 text-danger">确认金额后将不能够再更改，是否继续？</span></div></div></div><div class="modal-footer"><button type="button" class="btn btn-primary" ng-click="modalConfirm()">确定</button><button type="button" class="btn btn-default" ng-click="modalConfirmClose()">取消</button></div></div>'),a.put("account-list-ctrl.tmpl.html",'<div class="hms-account_view clearfix"><div bs-active-pane="tabs.activeTab" bs-tabs ng-controller="financeDetailListOuterController"><div title="订单明细" bs-pane><div ng-include="\'account-list.tmpl.html\'" ng-controller="financeDetailValidListController"></div></div><div ng-if="RULE_CODE==\'A\'" title="非有效切客订单" bs-pane><div ng-include="\'account-list.tmpl.html\'" ng-controller="financeDetailInvalidListController"></div></div><div title="订单收款明细" bs-pane><div ng-include="\'account-list.tmpl.html\'" ng-controller="financeDetailCollectListController"></div></div></div></div>'),a.put("account-list-ctrl-special.tmpl.html",'<div class="hms-account_view clearfix"><div bs-active-pane="tabs.activeTab" bs-tabs ng-controller="financeDetailListOuterController"><div title="订单明细" bs-pane><div ng-include="\'account-list.tmpl.html\'" ng-controller="financeDetailValidListSpecialController"></div></div></div></div>'),a.put("account-list-ctrl-base.tmpl.html",'<div class="hms-account_view clearfix"><div bs-active-pane="tabs.activeTab" bs-tabs ng-controller="financeDetailListOuterController"><div title="订单明细" bs-pane><div ng-include="\'account-list.tmpl.html\'" ng-controller="baseFinanceDetailListController"></div></div></div></div>'),a.put("account-list.tmpl.html",'<div class="table-responsive"><table class="table hms-table border-top"><thead><tr><th class="text-center" ng-repeat="item in columns" width="{{item.width}}">{{item.displayName}}</th></tr></thead><tbody><tr ng-repeat="row in rowsData"><td class="text-center" ng-repeat="item in columns" width="{{item.width}}">{{row[item.field]}}</td></tr><tr ng-if="!rowsData.length"><td class="text-center" colspan="{{columns.length}}">无数据</td></tr></tbody></table></div><pagination class="pull-right" previous-text="前一页" next-text="后一页" first-text="首页" last-text="尾页" total-items="totalItems" ng-model="$parent.currentPage" items-per-page="pageCount" max-size="maxSize" class="pagination-md" boundary-links="true" rotate="false" num-pages="numPages" ng-change="pageChanged()"></pagination>'),a.put("bank-info.tmpl.html",'<div ng-controller="BankInfoController"><div class="modal-header"><button type="button" class="close" aria-label="Close" ng-click="modalConfirmClose()"><span aria-hidden="true">&times;</span></button><h4 class="modal-title">收款账号信息</h4></div><div class="modal-body"><form class="form-horizontal"><div class="form-group"><label for="user" class="col-sm-2 control-label">户名:</label><div class="col-sm-10"><input type="text" class="form-control" id="user" placeholder="户名" ng-model="bankInfo.user" ></div></div><div class="form-group"><label for="number" class="col-sm-2 control-label">账号:</label><div class="col-sm-10"><input type="text" class="form-control" id="number" maxlength="19" placeholder="账号" ng-model="bankInfo.number"></div></div><div class="form-group"><label for="address" class="col-sm-2 control-label">开户行:</label><div class="col-sm-10"><input type="text" class="form-control" id="address" placeholder="开户行" ng-model="bankInfo.address"></div></div><div class="form-group"><label for="number" class="col-sm-2 control-label">&nbsp;</label><div class="col-sm-10"><table class="table table-condensed hms-table-bankinfo"><tr><td>标准	</td><td>开户银行信息</td><td>=</td><td>银行</td><td>+</td><td>支行</td></tr><tr><td>例：</td><td>中国工商银行上海宝山支行</td><td>=</td><td>中国工商银行</td><td>+</td><td>上海宝山支行</td></tr></table></div></div></form></div><div class="modal-footer"><button type="button" class="btn btn-primary" ng-click="modalConfirm()">确定</button><button type="button" class="btn btn-default" ng-click="modalConfirmClose()">取消</button></div></div>'),a.put("unbind-phone.tmpl.html",'<div ng-controller="UnbindPhoneController"><div class="modal-header"><button type="button" class="close" aria-label="Close" ng-click="modalConfirmClose()"><span aria-hidden="true">&times;</span></button><h4 class="modal-title">删除用户:{{unbind.loginname}}</h4></div><div class="modal-body"><div class="form-horizontal"><div class="form-group"><label for="password" class="col-sm-2 control-label">登录密码:</label><div class="col-sm-10"><input type="password" class="form-control" id="password" placeholder="密码" ng-model="unbind.password" ></div></div></div></div><div class="modal-footer"><button type="button" class="btn btn-primary" ng-click="modalConfirm()">确定</button><button type="button" class="btn btn-default" ng-click="modalConfirmClose()">取消</button></div></div>'),a.put("tooltip-content.tmpl.html",'<div class="real-status" style="min-height:100px;"><ul class="list-group"><li class="list-group-item">在线状态：{{hotelStatus.onlineStr}}</li><ul></div>'),a.put("tool-bar.tpl.html",'<div class="aside tool-bar"><div style="height:100px;"></div><div style="position:absolute;bottom:20px;width:100%;"><div ng-repeat="btn in toolBar.buttons" class="pull-down tool-bar-btn-con" ng-click="btn.callBack()"><div class="tool-bar-btn {{btn.icon}}"></div><div class="redpot" ng-class="{redpotShow:btn.redPot && btn.redPot.length}"></div><div class="tool-bar-btn-title" ng-bind="btn.name"></div></div></div><div class="tool-bar-top-btn fa fa-arrow-up" title="返回顶部" ng-show="toolBar.showTopBtn" ng-click="toolBar.backToTop()"></div></div>'),a.put("preview-tool-bar.tpl.html",'<div class="preview-tool-bar-con"><div class="preview-tool-bar-content"><p>新功能上线啦！在右侧边栏，你会发现一些常用的小工具，快来体验哦！</p><div class="pull-right"><input type="checkbox" ng-model="preview.shouldHide">不再提示&nbsp;&nbsp;<button type="submit" class="btn btn-success radius-3" ng-click="preview.ok()">知道了</button></div></div><div class="preview-tool-bar-arrow faa-parent"><i class="fa fa-hand-o-right faa-passing animated"></i></div></div>'),a.put("aside-message-center.tpl.html",'<div class="aside" tabindex="-1" role="dialog" style="width:400px;"><i class="aside-loading fa fa-spinner fa-pulse fa-3x" ng-show="msg.loading"></i><div class="aside-dialog message-dialog"><div class="aside-content message-con"><div class="aside-header message-head" ng-show="title"><button type="button" class="close" ng-click="closeMessageCenter()">&times;</button><button type="button" class="btn btn-default pull-right" ng-click="refreshMessageList()">刷新</button><h4 class="aside-title" ng-bind="title"></h4></div><div class="message-body"><div ng-show="msg.list.length"><div class="message-msg-con" ng-repeat="detail in msg.list" ng-click="msg.msgClick(detail)"><div class="message-msg-icon {{msg[detail.directive].icon}}" ng-class={"message-msg-newtag":detail.isNew==1}></div><div class="message-msg-content" ng-bind="detail.title"></div><div class="message-msg-date" ng-bind="detail.createTimeStr"></div></div></div><div class="message-page" ng-hide="msg.list.length >= msg.totalItems"><button type="button" class="btn btn-default" ng-click="getMoreMessageList()">加载更多</button></div></div></div></div></div>')}]).directive("ngThumb",["$window",function(a){var b={support:!(!a.FileReader||!a.CanvasRenderingContext2D),isFile:function(b){return angular.isObject(b)&&b instanceof a.File},isImage:function(a){var b="|"+a.type.slice(a.type.lastIndexOf("/")+1)+"|";return-1!=="|jpg|png|jpeg|bmp|gif|".indexOf(b)}};return{restrict:"A",template:"<canvas/>",link:function(a,c,d){function e(a){var b=new Image;b.onload=f,b.src=a.target.result}function f(){var a=g.width||this.width/this.height*g.height,b=g.height||this.height/this.width*g.width;h.attr({width:a,height:b}),h[0].getContext("2d").drawImage(this,0,0,a,b)}if(b.support){var g=a.$eval(d.ngThumb),h=c.find("canvas");if(b.isFile(g.file)){if(!b.isImage(g.file))return void h.hide();var i=new FileReader;i.onload=e,i.readAsDataURL(g.file)}}}}}]).directive("hmsImgload",["$window",function(a){return{restrict:"A",link:function(a,b,c){function d(){e.remove(),b.parent().removeClass("loading-img-con")}var e=jQuery("<div class='loading-img fa fa-gear faa-spin animated'></div>");b[0].src;a.$watch(function(){return b[0].src},function(a,c){if(a!=c&&a){b.after(e);var d=b.parent().css("position");("static"==d||"auto"==d)&&b.parent().css("position","relative"),b.parent().addClass("loading-img-con")}}),b[0].onload=d}}}]).service("HmsModalService",["$modal",function(a){this.modal=null,this.settings={title:"提示",content:"",show:!1,keyboard:!1,animation:"am-fade-and-scale",backdrop:"static"},this.show=function(b){var c=angular.copy(this.settings);b.scope||console.error("hms:parameter opt.scope is missed"),b.scope._contentTmpl=null,b.scope._bodyTmpl=null,b.scope._cls=null,b.content||(b.template="modal-outer.tmpl.html",b.contentTmpl?b.scope._contentTmpl=b.contentTmpl:b.scope._contentTmpl="modal-content.tmpl.html",b.bodyTmpl&&(b.scope._bodyTmpl=b.bodyTmpl),b.cls&&(b.scope._cls=b.cls)),this.modal=a(angular.extend(c,b)),this.modal.$promise.then(this.modal.show)},this.hide=function(){this.modal.hide(),this.modal=null}}]).service("HmsDownloadService",["HmsHttp","$q",function(a,b){this.getImgUrl=function(c,d,e,f){var g=b.defer();if(!c)return g.reject(),g.promise;var h=contentPath+"/qiniu/getDownloadUrl&key=";return h+=c,d&&(h=h+"&mode="+d),e&&(h=h+"&w="+e),f&&(h=h+"&h="+f),a.get(h)}}]).service("HmsUploadService",["FileUploader","HmsHttp","$timeout","$q","HmsModalService","HmsDownloadService",function(a,b,c,d,e,f){var g=this;this.simpleUploadToken={token:""},this.lastTokenTime="",this.retryCount=0,this.RetryCountMax=5,this.loadingToken=!1,this.deferredList=[],this.publicDownloadUrl=qiniuDownloadAddress||"https://dn-imke-pro.qbox.me",this.getSimpleUploadToken=function(a){var e=g;if(!a)return a=d.defer(),e.getSimpleUploadToken(a),a.promise;if(e.verifyToken())return void a.resolve();if(e.retryCount>e.RetryCountMax){a.resolve();for(var f=0;f<g.deferredList.length;f++)g.deferredList[f].resolve();return void console.error("get token failed")}if(e.loadingToken)return void g.deferredList.push(a);e.retryCount++,e.loadingToken=!0;var h=contentPath+"/qiniu/getSimpleUploadToken";b.get(h).then(function(b){e.loadingToken=!1;var d=b.data;if(d.errorMsg)c(function(){e.getSimpleUploadToken(a)},1e3*e.retryCount*e.retryCount);else{e.simpleUploadToken.token=d.attribute,e.lastTokenTime=(new Date).valueOf(),e.retryCount=0,a.resolve();for(var f=0;f<g.deferredList.length;f++)g.deferredList[f].resolve()}},function(){e.loadingToken=!1,c(function(){e.getSimpleUploadToken(a)},1e3*e.retryCount*e.retryCount)})},this.uploadSettings={url:"http://up.qiniu.com",maxItemSize:10485760,MaxUploadNum:10,headers:{},formData:[this.simpleUploadToken],isImage:function(a){var b="|"+a.type.slice(a.type.lastIndexOf("/")+1)+"|";return-1!==this.fileTypes.indexOf(b)},isOverSize:function(a){var b=a.size;return b>this.maxItemSize},onErrorItem:function(a,b,c,d){Tip.message("文件："+a.file.name+" 上传失败","error")},onCompleteAll:function(){c(function(){Tip.message("文件上传完毕")})},onBeforeUploadItem:function(a){},onWhenAddingFileFailed:function(a,b,c){},onAfterAddingAll:function(a){event.target.value="",this.queue.length>this.MaxUploadNum&&Tip.message("最多支持批量上传"+this.MaxUploadNum+"个文件","error")},onAfterAddingFile:function(a){var b=this.scope;e.modal||g.showUploadModal(b)},onSuccessItem:function(a,b,c,d){if(b&&b.key){var e=a.opt;if(e)if(g.publicDownloadUrl){if(e.callBack&&"function"==typeof e.callBack)return void e.callBack(e,b.key,g.publicDownloadUrl+"/"+b.key);e.keys.push(b.key),e.previews.push(g.publicDownloadUrl+"/"+b.key)}else f.getImgUrl(b.key,e.mode,e.w,e.h).then(function(a){if(a&&a.data){if(e.callBack&&"function"==typeof e.callBack)return void e.callBack(e,b.key,a.data.attribute);e.keys.push(b.key),e.previews.push(a.data.attribute)}},function(a){})}},formatAndSizeFilter:{name:"formatAndSizeFilter",fn:function(a,b){return this.fileTypes&&!this.isImage(a)?(Tip.message("不支持该文件格式","error"),!1):this.isOverSize(a)?(Tip.message("不支持大于"+this.maxItemSize/1048576+"M文件","error"),!1):this.queue.length+(b.opt.keys?b.opt.keys.length:0)>=this.MaxUploadNum?(Tip.message("最多支持批量上传"+this.MaxUploadNum+"个文件","error"),!1):!0}}},this.getUploader=function(b){var c=this,e=d.defer();return c.getSimpleUploadToken().then(function(){var d=new a;angular.extend(d,c.uploadSettings),d.MaxUploadNum=b.MaxUploadNum||d.MaxUploadNum,d.maxItemSize=b.maxItemSize||d.maxItemSize,d.fileTypes=b.fileTypes,d.filters.push(d.formatAndSizeFilter),e.resolve(d)}),e.promise},this.verifyToken=function(){return!this.simpleUploadToken.token||((new Date).valueOf()-this.lastTokenTime)/1e3>1800?!1:!0},this.showUploadModal=function(a){e.show({scope:a,title:"上传",bodyTmpl:contentPath+"/main/reg/template/tmpl-upload.html"})},this.closeUploadModal=function(a){a.clearQueue(),e.hide()}}]).directive("hmsUpload",["$rootScope","HmsUploadService","$timeout",function(a,b,c){var d='<div class="fileUpload btn btn-success" ng-show="!(!img.ready || (img.MaxUploadNum <= img.keys.length))"><span ng-bind="btnName"></span><input ng-if="img.ready" type="file" class="upload" nv-file-select="" uploader="uploader" options="{\'opt\':img}" multiple/></div>';return{restrict:"E",template:d,scope:{img:"=image"},link:function(a,d,e){a.uploader={},a.btnName=a.img.btnName||"上传",b.getUploader(a.img).then(function(e){b.verifyToken()&&(e.scope=a,a.uploader=e,a.img.ready=!0,1==a.img.MaxUploadNum&&c(function(){d.children().find("input").removeAttr("multiple")}))}),a.closeModal=function(){b.closeUploadModal(a.uploader)}}}}]).directive("hmsHtml",function(){return function(a,b,c){c.hmsHtml&&a.$watch(c.hmsHtml,function(a){b.html(a||"")})}}).directive("hmsInclude",function(){return{restrict:"AE",templateUrl:function(a,b){return b.templatePath}}}).service("PreviewService",["$timeout",function(a){return{showMask:function(a){}}}]).service("InterfaceService",["HmsHttp","HmsModalService","$timeout",function(a,b,c){return{refreshRoomOnlineState:function(d,e){return d.cusContent="更新房态处理过程将会持续几分钟，是否开始？",d.sendRefreshRoomOnlineFlag=!1,d.sendRefreshRoomOnlineFlag?void Tip.message("正在更新房态，请耐心等待。。。"):(d.modalConfirm=function(){return e?(jQuery(".confirm_loading").show(),d.sendRefreshRoomOnlineFlag=!0,void a.post(contentPath+"/hotelmessage/refreshRoomOnlineState",{hotelId:e}).success(function(a){return a.success?(Tip.message("正在更新房态，请耐心等待。。。"),void c(function(){jQuery(".confirm_loading").hide(),Tip.message("更新房态请求发送成功，反查进行中，请一分钟之后再执行反查操作"),d.sendRefreshRoomOnlineFlag=!1,d.modalConfirmClose()},2e3)):(Tip.message(a.errorMsg,"error"),jQuery(".confirm_loading").hide(),void(d.sendRefreshRoomOnlineFlag=!1))}).error(function(a){jQuery(".confirm_loading").hide(),d.sendRefreshRoomOnlineFlag=!1,Tip.message("更新房态请求发送异常","error")})):void Tip.message("无法获取酒店ID","error")},d.close=d.modalConfirmClose=function(){return d.sendRefreshRoomOnlineFlag?void Tip.message("正在更新房态，请耐心等待。。。"):void(b&&b.hide())},void b.show({contentTmpl:"modal-confirm-notice.tmpl.html",scope:d}))}}}]).directive("hmsFormCounter",["$animate",function(a){return{restrict:"E",template:'<div class="counter_con"><a ng-class="{disableCounterDecre:disableDecre}" class="counter_decre" ng-click="slider.decre()">-</a><input ng-show="showInput" autocomplete="off" type="text" class="counter_input" ng-model="currVal" ng-blur="change()"><div class="counter_slider_con"><div class="counter_slider_item {{item.pos}}" ng-repeat="item in slider.roller" ng-bind="item.num"></div></div><a class="counter_incre" ng-click="slider.incre()">+</a></div>',scope:{data:"=data",key:"@key",callback:"=callback"},link:function(b,c,d){b.showInput=!0,b.disableDecre=!1,b.change=function(){var a=new RegExp("^[0-9]*$");a.test(b.currVal)||(b.currVal=1),(""==b.currVal||b.currVal<=1)&&(b.currVal=1),b.slider.roller[0].num=parseInt(b.currVal)-1,b.slider.roller[1].num=parseInt(b.currVal),b.slider.roller[2].num=parseInt(b.currVal)+1},c.find(".counter_input")[0].addEventListener("blur",function(){b.$apply(function(){b.showInput=!0,b.currVal<=1?b.disableDecre=!0:b.disableDecre=!1,b.data[b.key]=b.currVal,b.callback&&b.callback(b.data)})}),b.slider={ele:c.find(".counter_slider_con"),active:!1,len:3,step:1,roller:[],doneList:[],type:"",addData:null,ignore:null,stop:function(){b.slider.doneList.splice(0),b.slider.active=!1},decre:function(){var c=b.slider;if(c.before(!1)){if(c.active)return"decre"!=c.type?void c.doneList.splice(0):(c.doneList.push("decre"),void(c.type="decre"));c.type="decre",c.doneList.push(c.type),c.active=!0,a.addClass(c.ele,c.type).then(c.after),b.showInput=!1}},incre:function(){var c=b.slider;if(c.before(!0)){if(c.active)return"incre"!=c.type?void c.doneList.splice(0):(c.doneList.push("incre"),void(c.type="incre"));c.type="incre",c.doneList.push(c.type),c.active=!0,a.addClass(c.ele,c.type).then(c.after),b.showInput=!1}},before:function(a){if(a)b.currVal++;else{if(b.currVal<=1)return!1;b.currVal--}return!0},after:function(){var c=b.slider,d=c.doneList[0];if("decre"==d){var e=c.roller.splice(0,c.roller.length-c.step);c.roller=c.roller.concat(e);for(var f=angular.copy(c.roller),g=0;g<c.len;g++){var h=(g+c.step)%c.len;c.roller[g].pos=f[h].pos,g<c.step&&c.addData&&c.addData(c.roller[g])}}else if("incre"==d){var e=c.roller.splice(0,c.step);c.roller=c.roller.concat(e);for(var f=angular.copy(c.roller),g=c.len-1;g>=0;g--){var h=(g+c.len-c.step)%c.len;c.roller[g].pos=f[h].pos,g>=c.len-c.step&&c.addData&&c.addData(c.roller[g])}}c.ele.removeClass(c.type),c.doneList.shift(),b.$apply(function(){return!c.doneList.length||c.ignore&&c.ignore()?(c.doneList.splice(0),c.active=!1,c.callBack&&c.callBack(),b.showInput=!0,b.data[b.key]=b.currVal,"decre"==d&&b.currVal<=1?b.disableDecre=!0:b.disableDecre=!1,void(b.callback&&b.callback(b.data))):void a.addClass(c.ele,c.doneList[0]).then(c.after)})}},function(){b.currVal=b.data[b.key],b.currVal<=1&&(b.disableDecre=!0),b.slider.roller.push({num:parseInt(b.currVal)-1,pos:"last"}),b.slider.roller.push({num:parseInt(b.currVal),pos:"curr"}),b.slider.roller.push({num:parseInt(b.currVal)+1,pos:"next"}),b.slider.addData=function(a){"decre"==b.slider.type?a.num=a.num-b.slider.len:"incre"==b.slider.type&&(a.num=a.num+b.slider.len)}}()}}}]).directive("ngEnter",function(){return function(a,b,c){b.bind("keydown keypress",function(b){13===b.which&&(a.$apply(function(){a.$eval(c.ngEnter)}),b.preventDefault())})}}).directive("hmsPosition",["HmsHttp","LocaltionService",function(a,b){return{restrict:"EA",templateUrl:contentPath+"/main/plug-in/gaode/hms-position.tmpl.html",scope:{position:"=data"},link:function(a,c,d){a.gaodeApiHtml=contentPath+"/main/plug-in/gaode/gaodeMap.html"+hmsVersionPath,a.proList=[],a.cityList=[],a.distList=[],a.areaList=[],b.getPros().then(function(b){b.data&&(a.proList=b.data)},function(a){}),a.position._proObj.code&&b.getCitiesByCode(a.position._proObj.code).then(function(b){b.data&&(a.cityList=b.data)},function(a){}),a.position._cityObj.code&&b.getDistrictsByCode(a.position._cityObj.code).then(function(b){b.data&&(a.distList=b.data)},function(a){}),a.gaodeApiFrame=jQuery("iframe",c),a.gaodeApiFrame.load(function(){var b=a.gaodeApiFrame;b[0].contentWindow.parentH=a,b[0].contentWindow.initializeMap(function(){a.position._disObj.code&&b[0].contentWindow.getAreas(a.position._disObj.code),a.position.longitude&&a.position.latitude&&a.setMarker(a.position.longitude,a.position.latitude),setTimeout(function(){jQuery("#map_loading_loading").hide(),jQuery("#map_loading_back").hide()},1e3)})}),a.proChange=function(){a.position._cityObj.code="",a.position._disObj.code="",a.position._disObj.id="",a.position._areaObj.areacode="",a.position._areaObj.name="",a.cityList=[],a.distList=[],a.areaList=[],a.position.longitude||a.position.latitude||a.position.detailAddr||a.setMarker(a.position._proObj.longitude,a.position._proObj.latitude),b.getCitiesByCode(a.position._proObj.code).then(function(b){b.data&&(a.cityList=b.data)},function(a){})},a.cityChange=function(){a.position._disObj.code="",a.position._disObj.id="",a.position._areaObj.areacode="",a.position._areaObj.name="",a.distList=[],a.areaList=[],a.position.longitude||a.position.latitude||a.position.detailAddr||a.setMarker(a.position._cityObj.longitude,a.position._cityObj.latitude),b.getDistrictsByCode(a.position._cityObj.code).then(function(b){b.data&&(a.distList=b.data)},function(a){})},a.disChange=function(){a.position._areaObj.areacode="",a.position._areaObj.name="",a.areaList=[],a.position.longitude||a.position.latitude||a.position.detailAddr||a.setMarker(a.position._disObj.longitude,a.position._disObj.latitude),a.gaodeApiFrame[0].contentWindow.getAreas(a.position._disObj.code)},a.areaChange=function(){a.position.longitude||a.position.latitude||a.position.detailAddr||a.setMarker(a.position._areaObj.location[0],a.position._areaObj.location[1])},a.setMarker=function(b,c){a.gaodeApiFrame[0].contentWindow.receive(b,c)}}}}]).service("LocaltionService",["HmsHttp",function(a){return{getPros:function(){return a.get(contentPath+"/hotel/provinces")},getCities:function(b){return a.get(contentPath+"/hotel/cities?proId="+b)},getCitiesByCode:function(b){return a.get(contentPath+"/hotel/citiesbycode?provcode="+b)},getDistricts:function(b){return a.post(contentPath+"/hotel/districts?cityId="+b)},getDistrictsByCode:function(b){return a.post(contentPath+"/hotel/districtsbycode?citycode="+b);
}}}]),angular.module("hmsInitApp",["mgcrea.ngStrap"]).controller("socketController",["$rootScope","$scope","HmsHttp","$timeout","HmsModalService",function(a,b,c,d,e){function f(){a.changePriceQueue.length>0?(h(a.changePriceQueue[0]),d(function(){a.changePriceQueue.baoremove(0)},2e3)):a.isProcessingSocketModal=!1}function g(a){return c.post(contentPath+"/otsorder/findOtsOrderById",{otaorderid:a})}function h(c){a.isProcessingSocketModal=!0,g(c).success(function(a){a.success?(b.dataObj=a.attribute,b.dataObj.changeprice=b.dataObj.totalPrice,b.dataObj.isOk=!1,e.show({scope:b,title:"您有新订单需要确认",contentTmpl:contentPath+"/main/home/template/socket-modal.html"})):Tip.message(a.errorMsg,"error")}).error(function(a){Tip.message("获取订单信息失败","error")})}a.changePriceQueue=[],a.isProcessingSocketModal=!1,a.waitingProcessQueue=[],b.closeSocketModal=function(){e.hide(),f()},b.changeOrderBargainByWaiter=function(){return b.dataObj.changeprice>b.dataObj.totalPrice?void Tip.message("房价不能大于平台价","error"):b.dataObj.changeprice<10?void Tip.message("房价不能小于10元","error"):b.dataObj.changeprice==b.dataObj.totalPrice?void b.close():void c.post(contentPath+"/otsorder/bargainOrder",{otaorderid:b.dataObj.otaOrderId,changeprice:b.dataObj.changeprice}).success(function(a){a.success?Tip.message("议价成功"):Tip.message(a.errorMsg,"error")}).error(function(a){Tip.message("议价异常，请联系系统管理员","error")})},b.$on("CHANGE_ORDER_PRICE",function(b,c){var d;if("string"==typeof c||"number"==typeof c)d=c;else{if("object"!=typeof c)return void Tip.message("lack of parameters","error");d=c.orderId}a.isProcessingSocketModal?a.changePriceQueue.push(d):h(d)}),b.$on("RECEIVE_ORDER",function(b,c){Tip.message("您有一条新消息"),a.waitingProcessQueue.push(c)}),a.isShowShoppingTab=!1;var i={menuName:"物品采购",hotelId:thisHotel.id};c.post(contentPath+"/shopping/getShoppingCartMenu",i).success(function(b){a.isShowShoppingTab=b.success}).error(function(a){Tip.message("获取物品采购菜单信息失败","error")})}]).controller("hmsController",["$rootScope","$scope","HmsHttp","$timeout","$location","$popover","$aside","InterfaceService","HmsModalService",function(a,b,c,d,e,f,g,h,i){b.isActive=e.path()?e.path().split("/")[1]:"home",b.homeNavDropDownBtn=(thisHotel.hotelName||"暂无酒店信息")+'<span class="caret"></span>',a.hotels=hotelList,c.get(contentPath+"/hotel/thisHotel").success(function(c){c.openTime=c.fmtOpenTime,c.repairTime=c.fmtRepairTime,a.thisHotel=c,b.hotelStatus={},b.hotelStatus.init=!0,b.hotelTooltip=f(jQuery("#hotel-tooltip-label"),{title:"酒店当前状态信息",contentTemplate:"tooltip-content.tmpl.html",placement:"bottom",prefixEvent:"hotelTooltip",autoClose:!0,scope:b})}),a.group=group,a.user=user,b.loginOutAction=contentPath+"/resources/j_spring_security_logout",b.changeHotel=function(b){a.thisHotel=a.hotels[b],location.href=contentPath+"/login/main/"+a.thisHotel.id},b.addNewHotel=function(){location.href=contentPath+"/main/reg/reglogin.jsp#/hotelMsg"},b.getThisHotelRealStatus=function(){c.get(contentPath+"/hotelmessage/getThisHotelRealStatus").success(function(a){return a.success?void angular.extend(b.hotelStatus,a.attribute):void console.error("获取酒店 信息失败")}).error(function(a){Tip.message("获取酒店信息失败","error")})},b.showToolBar=function(){var a=(g({title:"反馈信息",template:"tool-bar.tpl.html",animation:"am-slide-right",placement:"right",show:!0,scope:b,backdrop:!1}),function(a){});document.addEventListener("click",a)};var j=!1;jQuery(".tool-bar-start").hover(function(a){j||(j=!1,jQuery(this).hide())}),b.msg={loading:!1,list:[],currentgPage:1,pageCount:10,totalItems:0,reset:function(){this.loading=!1,this.list=[],this.currentgPage=1,this.pageCount=10,this.totalItems=0},msgClick:function(a){var b=a.directive;this[b]&&this[b].clickCallBack&&this[b].clickCallBack(a)},9:{clickCallBack:function(d){try{var e=angular.fromJson(d.data||{});if(e.orderId){if(b.msg.loading)return;b.msg.loading=!0;var f=contentPath+"/otsorder/findOtsOrderById",g={otaorderid:e.orderId};c.post(f,g).then(function(e){if(b.msg.loading=!1,e.data){var f=e.data.attribute;if(i.show({scope:b,title:"您有新的眯客预付订单",content:" 订单ID："+f.otaOrderId+" 订单ID："+f.otaOrderId+" 房型："+f.roomTypeName+" 房间号："+f.roomNo+" 预计入住天数："+f.daynumber+" 总价："+f.totalPrice+" 客人姓名："+f.memberName}),2==d.isNew)return;var g=contentPath+"/message/changeFlag",h={id:d.id};c.post(g,h).then(function(b){b.data&&(d.isNew=2,a.waitingProcessQueue.shift())})}},function(a){Tip.message("获取消息失败","error"),b.msg.loading=!1})}}catch(h){console.log(h)}},icon:"fa fa-hotel"}},b.toolBar={locked:"true"==Cookies.get("hms-toolbar-fixed")?!0:!1,lock:function(a){this.locked=!this.locked,this.locked?Cookies.set("hms-toolbar-fixed","true",{expires:1/0}):Cookies.set("hms-toolbar-fixed","false",{expires:1/0}),a.stopPropagation()},config:function(){d(function(){Tip.message("正在开发中。。。")})},buttons:[{name:"房态校准",icon:"building",callBack:function(){d(function(){Tip.message("正在开发中。。。")})}},{name:"乐住币校准",icon:"rmb",callBack:function(){d(function(){Tip.message("正在开发中。。。")})}},{name:"我的消息",icon:"envelope",redPot:a.waitingProcessQueue,callBack:function(){d(function(){Tip.message("正在开发中。。。")})}},{name:"用户设置",icon:"gear",callBack:function(){d(function(){Tip.message("正在开发中。。。")})}}],showTopBtn:!1,backToTop:function(){if(b.toolBar.backing)return!1;var a=document.body.scrollTop,c="up",d=function(){var a=30,e=document.body.scrollTop;return"up"!=c?void(b.toolBar.backing=!1):(e-=a,0>=e&&(e=0,c="stop"),document.body.scrollTop=e,void requestAnimationFrame(d))};a&&(b.toolBar.backing=!0,b.toolBar.showTopBtn=!1,d())}},document.addEventListener("scroll",function(){var a=document.body.scrollTop;console.log(a),a&&a>40?b.toolBar.showTopBtn=!0:b.toolBar.showTopBtn=!1,b.$digest()},!0),j=!1,jQuery(".tool-bar-start").hide(),b.preview={show:!1,contentTmpl:""},b.thisNavIsShow=function(b){var c=!0,d="B"==a.RULE_CODE&&a.thisHotel.state>=4,e="A"==a.RULE_CODE;switch(b){case"home":c=d||e;break;case"orders":c=d||e;break;case"borders":c=d||e;break;case"rates":c=d||e;break;case"account":c=d||e;break;case"message":c=!0;break;case"users":c=d||e;break;case"comment":c=d||e}return c}}]).config(["$httpProvider",function(a){a.defaults.headers.put["Content-Type"]="application/x-www-form-urlencoded",a.defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded",a.defaults.transformRequest=[function(a){var b=function(a){var c,d,e,f,g,h,i,j="";for(c in a)if(d=a[c],d instanceof Array)for(i=0;i<d.length;++i)g=d[i],e=c+"["+i+"]",h={},h[e]=g,j+=b(h)+"&";else if(d instanceof Object)for(f in d)g=d[f],e=c+"["+f+"]",h={},h[e]=g,j+=b(h)+"&";else void 0!==d&&null!==d&&(j+=encodeURIComponent(c)+"="+encodeURIComponent(d)+"&");return j.length?j.substr(0,j.length-1):j};return angular.isObject(a)&&"[object File]"!==String(a)?b(a):a}]}]),angular.module("hmsService",[]).service("HmsHttp",["$http","$q","$location",function(a,b,c){var d=function(a){a.system&&layer.alert(a.errorMsg,{title:"系统提示",closeBtn:!1},function(){a.attribute&&"true"==a.attribute.isToken&&top.close(),top.location.href=contentPath+"/resources/j_spring_security_logout"})};return{post:function(c,e){var f=b.defer();return a.post(c,e).success(function(a){d(a),f.resolve(a)}).error(function(a){f.reject(a)})},get:function(c){var e=b.defer();return a.get(c).success(function(a){d(a),e.resolve(a)}).error(function(a){e.reject(a)})}}}]),angular.module("homeApp",[]).controller("homeController",["$rootScope","$scope","HmsHttp","QrCodeService","$location",function(a,b,c,d,e){"B"==a.RULE_CODE&&a.thisHotel.state<4&&e.path("/message"),jQuery("#hotel_home_last_row_right").height(jQuery("#hotel_home_last_row_hei").height()-13),bindInputs(),loadHomeDatas(function(){a.hmsLoading.hide(),a.$digest()}),a.hmsLoading.show(),b.showQrCode=function(){c.post(contentPath+"/home/getID2code").success(function(a){a?d.show(a,"",b):d.show("weixin.imike.com","",b)}).error(function(){d.show("weixin.imike.com","",b)})},1002==ruleCode&&c.post(contentPath+"/home/getID2code").success(function(a){a?b.qrCodeSrc=d.getSrc(a):b.qrCodeSrc=d.getSrc("wechat.imike.com")}).error(function(){b.qrCodeSrc=d.getSrc("wechat.imike.com")})}]).controller("menuController",["$scope","$templateCache",function(a,b){var c='<ul class="nav nav-tabs hms-top-nav pull-right" role="tablist">	 <li ng-if="thisNavIsShow(\'home\')" role="presentation" ng-class="{\'active\':isActive==\'home\'}"><a href="#home" aria-controls="home" role="tab" data-toggle="tab"><i class="fa fa-home"></i>&nbsp;首页</a></li>    <li ng-if="isShowShoppingTab" role="presentation" ng-class="{\'active\':isActive==\'shopping\'}"><a href="#goods" aria-controls="shopping" role="tab" data-toggle="tab" ><i class="fa fa-truck"></i>&nbsp;物品采购</a></li>	  <li  ng-if="thisNavIsShow(\'orders\')" role="presentation" ng-class="{\'active\':isActive==\'orders\'}"><a href="#orders" aria-controls="orders" role="tab" data-toggle="tab" ng-if="RULE_CODE==\'A\'"><i class="fa fa-book"></i>&nbsp;订单查询</a></li>	  <li ng-if="thisNavIsShow(\'borders\')" role="presentation" ng-class="{\'active\':isActive==\'borders\'}"><a href="#borders" aria-controls="borders" role="tab" data-toggle="tab" ng-if="RULE_CODE==\'B\'"><i class="fa fa-book"></i>&nbsp;订单查询</a></li>	  <li ng-if="thisNavIsShow(\'rates\')" role="presentation" ng-class="{\'active\':isActive==\'rates\'}"><a href="#rates" aria-controls="rates" role="tab" data-toggle="tab"><i class="fa fa-calendar"></i>&nbsp;房价维护</a></li>	  <li ng-if="thisNavIsShow(\'account\')" role="presentation" ng-class="{\'active\':isActive==\'account\'}"><a href="#account" aria-controls="account" role="tab" data-toggle="tab"><i class="fa fa-cny"></i>&nbsp;财务结算</a></li>	  <li ng-if="thisNavIsShow(\'message\')" role="presentation" ng-class="{\'active\':isActive==\'message\'}"><a href="#message" aria-controls="message" role="tab" data-toggle="tab"><i class="fa fa-info"></i>&nbsp;酒店讯息</a></li>	  <li ng-if="thisNavIsShow(\'users\')" role="presentation" ng-class="{\'active\':isActive==\'	\'}"><a href="#users" aria-controls="users" role="tab" data-toggle="tab"><i class="fa fa-user"></i>&nbsp;用户管理</a></li>	  <li ng-if="thisNavIsShow(\'comment\')" role="presentation" ng-class="{\'active\':isActive==\'comment\'}"><a href="#comment" aria-controls="comment" role="tab" data-toggle="tab"><i class="fa fa-comments"></i>&nbsp;评论管理</a></li> </ul>';b.put("menu.html",c)}]).directive("hmsSelect",function(){return{restrict:"A",link:function(a,b,c){if("year"===c.type){var d=DateUtils.getYearList(),e=[];e.push("<option>---请选择---</option>");for(var f=0;f<d.length;f++)e.push("<option value='",d[f],"'>",d[f],"年</option>");b.append(e.join(""))}else if("time"===c.type){var g=DateUtils.getTimeList(),h=[];h.push("<option>---请选择---</option>");for(var f=0;f<g.length;f++)h.push("<option value='",g[f],"'>",g[f],"</option>");b.append(h.join(""))}b.selectpicker({style:c["class"]||"btn-success"})}}}).service("QrCodeService",["HmsModalService","$rootScope",function(a,b){return{show:function(c,d,e){e.printI2dimCodes=[{content:c,tag:d}],e.getPrintI2dimCodeUrl=function(a,b){return Print.getPrintI2dimCodeUrl(a,b)},e.goToPrintPage=function(a,c){Print.goToPrintPage(a,c,b.thisHotel.hotelName,e.printI2dimCodes)},e.cancle=function(){a.hide()},a.show({contentTmpl:contentPath+"/main/message/template/qr-code.html",scope:e})},getSrc:function(a,b){return Print.getPrintI2dimCodeUrl(a,b)}}}]),angular.module("orderApp",["ui.grid","ui.grid.selection"]).controller("orderController",["$rootScope","$scope","OrderService","$filter","HmsModalService",function(a,b,c,d,e){function f(){a.hmsLoading.show();var d=b.navOrders[b.active].action;c[d](b.currentPage,b.pageCount).success(function(c){a.hmsLoading.hide(),g(c),b.rowsData=c.rows,b.totalItems=parseInt(c.total)}).error(function(c){a.hmsLoading.hide(),b.rowsData=[],b.totalItems=0,Tip.message("数据加载异常","error")})}function g(a){var b=a.rows;a.orderIds=[],_.map(b,function(b){a.orderIds.push(b.otaOrderId);var c=DateUtils.formatDate4TimeVal(b.begintime,DateUtils.MM_DD),d=DateUtils.formatDate4TimeVal(b.endtime,DateUtils.MM_DD);b.liveTime=c+"/"+d,b.mName=b.contacts||"无",b.contactsPhone&&(b.mName+="/"+b.contactsPhone),b.creattime=DateUtils.formatDate4TimeVal(b.creattime,DateUtils.YYYY_MM_DD_HH_MM_SS)})}function h(a){if(a){switch(a.exception=a.businessException?a.businessDesc+":"+a.businessException:"--",a.allCost=a.allCost?d("currency")(a.allCost):"--",a.yhje=a.yhje?d("currency")(a.yhje):"--",a.cjje=a.cjje?d("currency")(a.cjje):"--",a.yfje=a.yfje?d("currency")(a.yfje):"--",a.dfje=a.dfje?d("currency")(a.dfje):"--",a.orderMethod){case 1:a.orderMethod="CRS";break;case 2:a.orderMethod="网页";break;case 3:a.orderMethod="微信";break;case 4:a.orderMethod="APP(IOS)";break;case 5:a.orderMethod="APP(ANDROID)";break;default:a.orderMethod="--"}switch(a.orderType){case 1:a.orderType="预付";break;case 2:a.orderType="到付";break;case 3:a.orderType="担保";break;default:a.orderType="--"}}}var i=[{field:"otaOrderId",displayName:"订单号"},{field:"roomTypeName",displayName:"房型"},{field:"mName",displayName:"联系人/电话"},{field:"liveTime",displayName:"入住/离店"},{field:"roomNo",displayName:"房间号"},{field:"creattime",displayName:"预定时间"},{field:"orderStatusName",displayName:"状态"}];b.columns=i,b.active=0,b.navOrders=[{id:"all",displayName:"全部订单",action:"findOtsRoomOrders"},{id:"today",displayName:"今日订单",action:"findTodayOtsRoomOrders"},{id:"checkinToday",displayName:"今日已入住",action:"findCheckinTodayOtsRoomOrders"},{id:"checkinMonth",displayName:"当月已入住",action:"findCheckinMonthOtsRoomOrders"},{id:"book",displayName:"预付完成订单",action:"findBookOtsRoomOrderList"}],b.totalItems=0,b.currentPage=1,b.pageCount=10,b.numPages=1,b.maxSize=5,b.pageChanged=function(){f()},b.setActive=function(a){b.active=a},b.doModify=function(b){a.$broadcast("CHANGE_ORDER_PRICE",{orderId:b.otaOrderId})},b.showMoreInfo=function(d){a.hmsLoading.show(),c.findOrderMoreInfo(d).success(function(c){a.hmsLoading.hide(),h(c),b.orderId=d,b.moreInfo=c,e.show({contentTmpl:contentPath+"/main/order/template/order-moreInfo.html",scope:b})}).error(function(b){a.hmsLoading.hide(),Tip.message("数据加载异常","error")})},b.$watch("active",function(a){f()})}]).controller("OrderMoreInfoController",["$scope","HmsModalService",function(a,b){a.moreInfo_columns=[{field:"orderMethod",displayName:"订单来源"},{field:"allCost",displayName:"原价"},{field:"yhje",displayName:"眯客优惠券金额"},{field:"cjje",displayName:"成交价格"},{field:"yfje",displayName:"现付金额"},{field:"dfje",displayName:"预付金额"},{field:"orderType",displayName:"支付方式"}],a.cancel=function(){b.hide()}}]).service("OrderService",["HmsHttp",function(a){var b=contentPath+"/otsroomorder/";return{findOtsRoomOrders:function(c,d){var e="findOtsRoomOrders",f={pageNum:c,pageSize:d};return a.post(b+e,f)},findTodayOtsRoomOrders:function(c,d){var e="findTodayOtsRoomOrders",f={pageNum:c,pageSize:d};return a.post(b+e,f)},findCheckinTodayOtsRoomOrders:function(c,d){var e="findCheckinTodayOtsRoomOrders",f={pageNum:c,pageSize:d};return a.post(b+e,f)},findCheckinMonthOtsRoomOrders:function(c,d){var e="findCheckinMonthOtsRoomOrders",f={pageNum:c,pageSize:d};return a.post(b+e,f)},findBookOtsRoomOrderList:function(c,d){var e="findBookOtsRoomOrderList",f={pageNum:c,pageSize:d};return a.post(b+e,f)},findOrderMoreInfo:function(c){var d="findOrderMoreInfo",e={orderId:c};return a.post(b+d,e)}}}]),angular.module("borderApp",["ui.grid","ui.grid.selection"]).controller("BOrderController",["$rootScope","$scope","BOrderService","$filter","HmsModalService","$location","$anchorScroll",function(a,b,c,d,e,f,g){function h(d,e){a.hmsLoading.show();var f=b.navOrders[b.active.top].action,g=1==d?b.currentPage:b.currentPageQiantai,h=1==d?b.pageCount:b.pageCountQiantai;c[f](d,g,h,e).success(function(c){a.hmsLoading.hide(),i(c),1==d?(b.rowsData=c.rows,b.totalItems=parseInt(c.total)):(b.rowsDataQiantai=c.rows,b.totalItemsQiantai=parseInt(c.total))}).error(function(c){a.hmsLoading.hide(),1==d?(b.rowsData=[],b.totalItems=0,Tip.message("在线支付数据加载异常","error")):(b.rowsDataQiantai=[],b.totalItemsQiantai=0,Tip.message("前台到付数据加载异常","error"))})}function i(a){var c=a.rows;b.navItems[b.active.left].value;a.orderIds=[],_.map(c,function(b){a.orderIds.push(b.otaOrderId);var c="";if(b.begintime){var e=DateUtils.formatDate4TimeVal(b.begintime,DateUtils.MM_DD);c=e+"/"}var e="";if(b.endtime){var f=DateUtils.formatDate4TimeVal(b.endtime,DateUtils.MM_DD);c+=f}b.liveTime=c,b.mName=b.contacts||"无",b.contactsPhone&&(b.mName+="/"+b.contactsPhone),b.lzbje="--",b.yfbtje="--",b.dfbtje="--",(180==b.orderStatus||190==b.orderStatus||200==b.orderStatus)&&(1==b.ordertype?b.yfbtje=b.qiekeIncome?d("currency")(b.qiekeIncome):"--":2==b.ordertype&&(b.dfbtje=b.qiekeIncome?d("currency")(b.qiekeIncome):"--")),513==b.orderStatus?b.lzbje="--":(1==b.ordertype?b.lzbje=b.allcost:b.lzbje=b.realotagive,b.lzbje=b.lzbje?d("currency")(b.lzbje):"--"),b.creattime?b.creattime=DateUtils.formatDate4TimeVal(b.creattime,DateUtils.MM_DD_HH_MM_SS):b.creattime=""})}function j(a){if(a){switch(a.exception=a.businessException?a.businessDesc+":"+a.businessException:"--",a.allCost=a.allCost?d("currency")(a.allCost):"--",a.yhje=a.yhje?d("currency")(a.yhje):"--",a.cjje=a.cjje?d("currency")(a.cjje):"--",a.yfje=a.yfje?d("currency")(a.yfje):"--",a.dfje=a.dfje?d("currency")(a.dfje):"--",a.orderMethod){case 1:a.orderMethod="CRS";break;case 2:a.orderMethod="网页";break;case 3:a.orderMethod="微信";break;case 4:a.orderMethod="APP(IOS)";break;case 5:a.orderMethod="APP(ANDROID)";break;default:a.orderMethod="--"}switch(a.orderType){case 1:a.orderType="预付";break;case 2:a.orderType="到付";break;case 3:a.orderType="担保";break;default:a.orderType="--"}switch(a.invalidreason){case 1:a.invalidreason="入住人为常旅客";break;case 2:a.invalidreason="入住时间未满4小时";break;case 3:a.invalidreason="此用户本月超过4次切单";break;case 4:a.invalidreason="此用户今日不是第一次切单";break;case 5:a.invalidreason="此用户全网每月超过4单";break;case 6:a.invalidreason="该订单用户的手机设备号对应手机号超过三个";break;case 9:a.invalidreason="该订单用户不是通过App下单";break;case 10:a.invalidreason="该订单用户的电话号码不是第一次使用";break;case 20:a.invalidreason="该订单用户的手机设备号为空";break;case 30:a.invalidreason="该订单用户的手机设备号不是第一次使用";break;case 40:a.invalidreason="该订单的身份证号码为空";break;case 41:a.invalidreason="该订单不是通过PMS扫描二代身份证办理 ";break;case 50:a.invalidreason="该订单用户的身份证号不是第一次使用";break;case 60:a.invalidreason="该订单用户使用过优惠券";break;case 70:a.invalidreason="该订单用户的支付账号不是第一次使用";break;case 90:a.invalidreason="该订单用户下单时位置不在酒店周边1公里内";break;case 100:a.invalidreason="该订单的入住时间不满30分钟";break;case 110:a.invalidreason="本店日拉新限额已满";break;case 120:a.invalidreason="该订单未入住";break;default:a.invalidreason="--"}}}var k=[{field:"otaOrderId",displayName:"订单号"},{field:"roomTypeName",displayName:"房型"},{field:"mName",displayName:"联系人/电话"},{field:"liveTime",displayName:"入住/离店"},{field:"roomNo",displayName:"房间号"},{field:"creattime",displayName:"预定时间"},{field:"lzbje",displayName:"乐住币金额"},{field:"dfbtje",displayName:"到付补贴金额"},{field:"yfbtje",displayName:"预付补贴金额"},{field:"orderStatusName",displayName:"状态"}];b.columns=k,b.active={left:0,top:0},b.navItems=[{id:"orderType1",displayName:"在线支付",value:1},{id:"orderType2",displayName:"前台支付",value:2}],b.navOrders=[{id:"today",displayName:"今日订单",action:"findTodayOtsRoomOrders"},{id:"checkinToday",displayName:"今日已入住",action:"findCheckinTodayOtsRoomOrders"},{id:"checkinMonth",displayName:"当月已入住",action:"findCheckinMonthOtsRoomOrders"},{id:"all",displayName:"全部订单",action:"findOtsRoomOrders"}],b.search={key:"",runned:!1,active:{top:3},backData:{active:{},navOrders:[],currentPage:1,currentPageQiantai:1},enter:function(a){},focus:function(){b.navOrders.length>1&&(this.backData.active.top=b.active.top,this.backData.navOrders=b.navOrders.concat([]),this.backData.currentPage=b.currentPage,this.backData.currentPageQiantai=b.currentPageQiantai,b.navOrders=[{id:"all",displayName:"搜索订单",action:"findOtsRoomOrders"}],b.active.top=0)},blur:function(){this.key||1!=b.navOrders.length||(this.runned=!1,b.navOrders=this.backData.navOrders,b.active.top=this.backData.active.top)},del:function(){this.key="",1==b.navOrders.length&&(b.navOrders=this.backData.navOrders,this.runned?(b.currentPage=this.backData.currentPage,b.currentPageQiantai=this.backData.currentPageQiantai,b.setActive(this.backData.active.top,"top",!0)):b.active.top=this.backData.active.top,this.runned=!1)},doAct:function(){var a=this.key;return a?(b.currentPage=1,b.currentPageQiantai=1,h(1,a),h(2,a),void(this.runned=!0)):void Tip.message("请输入订单号","error")}},b.totalItems=0,b.currentPage=1,b.pageCount=5,b.numPages=1,b.maxSize=5,b.totalItemsQiantai=0,b.currentPageQiantai=1,b.pageCountQiantai=5,b.numPagesQiantai=1,b.maxSizeQiantai=5,b.pageChanged=function(){h(1)},b.currentGoPage="",b.pageGo=function(){var a=/^[0-9]*[1-9][0-9]*$/,c=new RegExp(a);return null==b.currentGoPage.match(c)||b.currentGoPage>Math.ceil(b.totalItems/b.pageCount)?void(b.currentGoPage=""):void(b.currentGoPage&&(b.currentPage=b.currentGoPage,b.currentGoPage="",b.pageChanged()))},b.pageChangedQiantai=function(){h(2)},b.currentGoPageQiantai="",b.pageGoQiantai=function(){var a=/^[0-9]*[1-9][0-9]*$/,c=new RegExp(a);return null==b.currentGoPageQiantai.match(c)||b.currentGoPageQiantai>Math.ceil(b.totalItemsQiantai/b.pageCountQiantai)?void(b.currentGoPageQiantai=""):void(b.currentGoPageQiantai&&(b.currentPageQiantai=b.currentGoPageQiantai,b.currentGoPageQiantai="",b.pageChangedQiantai()))},b.setActive=function(a,c,d){1!=b.navOrders.length&&(d||b.active[c]==a||(b.currentPage=1,b.currentPageQiantai=1),b.active[c]=a,h(1),h(2))},b.doModify=function(b){a.$broadcast("CHANGE_ORDER_PRICE",{orderId:b.otaOrderId})},b.showMoreInfo=function(d){a.hmsLoading.show(),c.findOrderMoreInfo(d).success(function(c){a.hmsLoading.hide(),j(c),b.orderId=d,b.moreInfo=c,e.show({contentTmpl:contentPath+"/main/order/template/b-order-moreInfo.html",scope:b})}).error(function(b){a.hmsLoading.hide(),Tip.message("数据加载异常","error")})},b.goToAnchor=function(a){0==a?(f.hash("zaixianzhifu"),g()):1==a&&(f.hash("qiantaizhifu"),g())},b.setActive(0,"top")}]).controller("BOrderMoreInfoController",["$scope","HmsModalService",function(a,b){a.moreInfo_columns=[{field:"orderMethod",displayName:"订单来源"},{field:"allCost",displayName:"原价"},{field:"yhje",displayName:"眯客优惠券金额"},{field:"cjje",displayName:"成交价格"},{field:"yfje",displayName:"现付金额"},{field:"orderType",displayName:"支付方式"},{field:"invalidreason",displayName:"切客失效原因"}],a.cancel=function(){b.hide()}}]).service("BOrderService",["HmsHttp",function(a){var b=contentPath+"/brule/";return{findOtsRoomOrders:function(c,d,e,f){var g="findOtsRoomOrders",h={orderType:c,pageNum:d,pageSize:e};return f&&(h.search=f),a.post(b+g,h)},findTodayOtsRoomOrders:function(c,d,e){var f="findTodayOtsRoomOrders",g={orderType:c,pageNum:d,pageSize:e};return a.post(b+f,g)},findCheckinTodayOtsRoomOrders:function(c,d,e){var f="findCheckinTodayOtsRoomOrders",g={orderType:c,pageNum:d,pageSize:e};return a.post(b+f,g)},findCheckinMonthOtsRoomOrders:function(c,d,e){var f="findCheckinMonthOtsRoomOrders",g={orderType:c,pageNum:d,pageSize:e};return a.post(b+f,g)},findOrderMoreInfo:function(c){var d="findOrderMoreInfo",e={orderId:c};return a.post(b+d,e)}}}]),angular.module("ratesApp",[]).controller("ratesController",["$scope","$rootScope","HmsHttp",function(a,b,c){function d(){a.endTime=DateUtils.addByTransDate(a.beginTime,i-1),a.columns=[];for(var b=0;i>b;b++){var c=DateUtils.addByTransDate(a.beginTime,b);a.columns.push({date:c,showDate:c.substr(5,5),week:DateUtils.getWeekNum(c)})}a.roomTypes||e(),f()}function e(){c.post(contentPath+"/roomtype/findsByHotelId",{hotelId:b.thisHotel.id}).success(function(b){a.roomTypes=b}).error(function(a){Tip.message("获取房型数据失败","error")})}function f(){b.hmsLoading.show(),c.post(contentPath+"/price/loadPrice",{hotelId:b.thisHotel.id,beginTime:a.beginTime,endTime:a.endTime}).success(function(c){b.hmsLoading.hide(),a.priceData=g(c)}).error(function(a){b.hmsLoading.hide(),Tip.message("获取房价数据失败","error")})}function g(a){return _.each(a,function(b,c){var d={};_.each(b,function(a,b){var c=new Date;c.setTime(a.time);var e=c.format("yyyy-MM-dd");d[e]=a.price}),a[c]=d}),a}function h(d){b.hmsLoading.show(),c.post(contentPath+"/price/basePrice",{roomTypeId:d.id}).success(function(c){d.basePrice=c,b.hmsLoading.hide(),a.showModify=!0}).error(function(c){b.hmsLoading.hide(),a.showModify=!0})}var i=10;a.beginTime=(new Date).format("yyyy-MM-dd"),a.next=function(){a.beginTime=DateUtils.addByTransDate(a.beginTime,i)},a.prev=function(){a.beginTime=DateUtils.addByTransDate(a.beginTime,-i)},a.$watch("beginTime",function(a){a&&d()}),a.doModify=function(b){a.roomType=b,b.basePrice?a.showModify=!0:h(b)},a.closeModifyPage=function(){a.showModify=!1,a.roomType=[]},a.reloadPriceData=function(){a.closeModifyPage(),f()}}]).controller("ratesModifyController",["$rootScope","$scope","HmsHttp",function(a,b,c){function d(a){var c=!1;return angular.forEach(b.weeks,function(b){b.checked&&(c=!0),a[b.id]=b.checked}),c}function e(a){a=_.isNumber(a)?Math.ceil(a):0,b.subperPrice=Math.ceil((100-a)*b.basePrice/100)}function f(a){a=_.isNumber(a)?Math.ceil(a):0,b.subperPrice=Math.ceil(b.basePrice-a)}b.basePrice=Math.ceil(b.$parent.roomType.basePrice?b.$parent.roomType.basePrice:b.$parent.roomType.cost),b.selectWeekType="all",b.priceType="price",b.price={price:b.basePrice,subper:0,subprice:0},b.weeks=[{id:"Mon",name:"星期一",checked:!1},{id:"Tues",name:"星期二",checked:!1},{id:"Wed",name:"星期三",checked:!1},{id:"Thur",name:"星期四",checked:!1},{id:"Fri",name:"星期五",checked:!1},{id:"Sat",name:"星期六",checked:!1},{id:"Sun",name:"星期日",checked:!1}],b.weekType={all:["Mon","Tues","Wed","Thur","Fri","Sat","Sun"],workday:["Mon","Tues","Wed","Thur","Fri"],weekend:["Sat","Sun"]},b.save=function(){if(!_.isNumber(b.price[b.priceType]))return b.price[b.priceType]=0,void Tip.message("请输入数字","error");var e={roomTypeId:b.$parent.roomType.id,beginTime:b.beginTime,endTime:b.endTime,value:b.price[b.priceType],type:b.priceType};return d(e)?e.value<=0?(b.price[b.priceType]=0,void Tip.message("请输入大于0的数字","error")):"subper"==e.type&&e.value>=100?(b.price.subper=0,void Tip.message("下浮比例不能大于100","error")):"subprice"==e.type&&e.value>b.basePrice?(b.price.subprice=0,void Tip.message("下浮金额不能大于房价","error")):"price"==e.type&&e.value>b.basePrice?(b.price.price=0,void Tip.message("固定金额不能大于"+b.basePrice,"error")):(e.value=Math.ceil(e.value),b.price[e.type]=e.value,"subper"==e.type&&(e.value/=100),a.hmsLoading.show(),void c.post(contentPath+"/price/addPrice",e).success(function(c){a.hmsLoading.hide(),c.success?(Tip.message("修改成功"),b.$parent.reloadPriceData()):Tip.message(c.errorMsg,"error")}).error(function(b){a.hmsLoading.hide(),Tip.message("修改失败","error")})):void Tip.message("请选择星期","error")},b.cancel=function(){b.$parent.closeModifyPage()},b.$watch("selectWeekType",function(a){a&&_.forEach(b.weeks,function(c){c.checked=_.contains(b.weekType[a],c.id)})}),b.$watch("price.subper",function(a){e(a)}),b.$watch("price.subprice",function(a){f(a)}),b.$watch("priceType",function(a){"subper"==a?e(b.price[a]):"subprice"==a&&f(b.price[a])})}]),angular.module("hmsApp").controller("goodsMainController",["$rootScope","$scope","$http","$timeout","$state",function(a,b,c,d,e){b.goodsImgs={slider:contentPath+"/images/goods_slider.png",recommend:contentPath+"/images/goods_recommend.png"},b.myCartCount=0,b.myCartCountStr="",b.goBackMainPage=function(){e.go("shopping")},b.goMyOrdersPage=function(){e.go("shopping.orders")},b.goMyCartPage=function(){e.go("shopping.carts")},b.refreshMyCart=function(){var a=contentPath+"/shopping/findShoppingCartWareCount";c.post(a).then(function(a){a.data>=0&&(b.myCartCount=a.data,b.myCartCount>99?b.myCartCountStr="99+":b.myCartCountStr=""+b.myCartCount)},function(a){})},b.refreshMyCart()}]).controller("goodsController",["$rootScope","$scope","$http","$timeout","$state",function(a,b,c,d,e){b.initFlag=!1,b.totalItems=0,b.currentPage=1,b.pageCount=12,b.numPages=1,b.maxSize=2,b.pageChanged=function(){b.goods.refreshList()},b.goods={category:[],list:[],init:function(){var a=this;a.refreshCategory()},refreshCategory:function(){var a=this,d=contentPath+"/shopping/category";return c.get(d).then(function(c){c.data&&(b.active=0,a.category=c.data,a.category=[{categoryname:"全部商品",id:-1}].concat(a.category))},function(a){})},refreshList:function(){a.hmsLoading.show();var d=contentPath+"/shopping/wares",e={pageNum:b.currentPage,pageSize:b.pageCount,categoryId:0};return b.active>=0&&(e.categoryId=b.goods.category[b.active].id),b.totalItems&&(e.total=b.totalItems),c.post(d,e).then(function(c){a.hmsLoading.hide(),c.data&&(b.goods.list=c.data.rows,b.formatData(b.goods.list),b.totalItems=c.data.total),b.initFlag||(b.initFlag=!0)},function(b){a.hmsLoading.hide()})},enterDetail:function(a){e.go("shopping.detail",{id:a.id})}},b.active=-1,b.setActive=function(a){b.active=a,b.currentPage=1},b.formatData=function(a){for(var b=0;b<a.length;b++){var c=a[b];c.priceStr="￥"+c.price}},b.$watch("active",function(a){a>=0&&b.goods.refreshList()}),b.goods.init()}]).controller("goodsDetailController",["$rootScope","$scope","$http","$state","$animate",function(a,b,c,d,e){b.detail={},b.amount=1,b.slider={ele:jQuery(".slider_con"),active:!1,len:5,step:1,roller:[],doneList:[],type:"",addData:null,ignore:null,stop:function(){b.slider.doneList.splice(0),b.slider.active=!1},decre:function(){var a=b.slider;if(a.before(!1)){if(a.active)return"decre"!=a.type?void a.doneList.splice(0):(a.doneList.push("decre"),void(a.type="decre"));a.type="decre",a.doneList.push(a.type),a.active=!0,e.addClass(a.ele,a.type).then(a.after)}},incre:function(){var a=b.slider;if(a.before(!0)){if(a.active)return"incre"!=a.type?void a.doneList.splice(0):(a.doneList.push("incre"),void(a.type="incre"));a.type="incre",a.doneList.push(a.type),a.active=!0,e.addClass(a.ele,a.type).then(a.after)}},before:function(a){if(a){if(b.statrIndex>=b.statrIndex+5)return!1;b.statrIndex<b.statrIndex+5&&b.statrIndex++}else if(!a){if(b.statrIndex<=0)return!1;b.statrIndex>0&&b.statrIndex--}return!0},after:function(){var a=b.slider,c=a.doneList[0];if("decre"==c){var d=a.roller.splice(0,a.roller.length-a.step);a.roller=a.roller.concat(d);for(var f=angular.copy(a.roller),g=0;g<a.len;g++){var h=(g+a.step)%a.len;a.roller[g].pos=f[h].pos,g<a.step&&a.addData&&a.addData(a.roller[g])}}else if("incre"==c){var d=a.roller.splice(0,a.step);a.roller=a.roller.concat(d);for(var f=angular.copy(a.roller),g=a.len-1;g>=0;g--){var h=(g+a.len-a.step)%a.len;a.roller[g].pos=f[h].pos,g>=a.len-a.step&&a.addData&&a.addData(a.roller[g])}}a.ele.removeClass(a.type),a.doneList.shift(),b.$apply(function(){return!a.doneList.length||a.ignore&&a.ignore()?(a.doneList.splice(0),a.active=!1,void(a.callBack&&a.callBack())):void e.addClass(a.ele,a.doneList[0]).then(a.after)})}},b.statrIndex=0,function(){var a;b.wareId=a=d.params.id;var e=contentPath+"/shopping/findWareDetail?wareId="+a;c.get(e).then(function(a){a.data&&(b.detail=a.data,b.detail.price>=0&&(b.detail.priceStr="￥"+b.detail.srouceprice,b.detail.currPriceStr="￥"+b.detail.price,b.detail.feeStr="￥"+b.detail.fee+"元",b.detail.adlanguage=b.detail.adlanguage,b.detail.isYH=1==b.detail.issg&&b.detail.stocknum>0?" 有货":" 无货",b.detail.isDisabled=1==b.detail.issg&&b.detail.stocknum>0?"N":"Y"),jQuery(".detail-image-big img").load(function(){var a=jQuery(".detail-image-big");a[0].addEventListener("mousemove",function(a){jQuery(".detail-image-zoomer").show(),jQuery(".detail-image-zoom").show();var b=0,c=0,d=a.offsetX,e=a.offsetY;b=80>d?0:80>340-d?182:d-80,c=80>e?0:80>340-e?182:e-80;var f="translate("+b+"px,"+c+"px)",g="translate("+2.5*-b+"px,"+2.5*-c+"px) scale(2.5)";jQuery(".detail-image-zoomer").css("transform",f),jQuery(".detail-image-zoom-img").css("transform",g)},!1),a[0].addEventListener("mouseout",function(a){jQuery(".detail-image-zoomer").hide(),jQuery(".detail-image-zoom").hide()},!1);var a=jQuery(".detail-image-big"),b=jQuery(".detail-image-slider");b[0].addEventListener("mouseover",function(c){var d=c.target;if("IMG"==d.nodeName){var e=jQuery(d).attr("lsrc");jQuery(a.children()).attr("src",e),jQuery(".detail-image-zoom-img").attr("src",e),b.find(".active-img").removeClass("active-img"),jQuery(d).addClass("active-img")}},!1)}))},function(a){});var f=contentPath+"/shopping/findWarePromotion?wareId="+a;
c.get(f).then(function(a){if(a.data&&(b.promotion=a.data,b.promotion.attribute))for(var c=0;c<b.promotion.attribute.length;c++){var d=b.promotion.attribute[c];d.promotiondescList=d.promotiondesc.split("||")}},function(a){}),b.wareMoreImages=[];var g=contentPath+"/shopping/findWareImages?wareId="+a;c.get(g).then(function(a){if(a.data){for(var c=0,d=0;d<a.data.length;d++){var e=a.data[d];("0"==e.imagetype||"2"==e.imagetype)&&b.wareMoreImages.push(e),("0"==e.imagetype||"1"==e.imagetype)&&b.slider.roller.push({data:e,pos:"pos"+c++})}b.slider.len=b.slider.roller.length}},function(a){}),b.slider.addData=function(a){"decre"==b.slider.type||"incre"==b.slider.type}}(),b.addAmount=function(){b.amount++},b.reduceAmount=function(){1!=b.amount&&b.amount--},b.amountIsNull=function(){return""==b.amount||"0"==b.amount?void(b.amount=1):void 0},b.ckeckAmount=function(a){b.amount=b.amount.replace(/\D|^0/g,"")},b.addToCart=function(){if(!b.adding){b.adding=!0,a.hmsLoading.show();var e=contentPath+"/shopping/saveShoppingCart";c.post(e,{wareId:b.wareId,num:b.amount}).then(function(c){c.data&&c.data.success?d.go("shopping.addSuccess"):Tip.message("加入购物车失败","error"),a.hmsLoading.hide(),b.adding=!1,b.refreshMyCart()},function(c){Tip.message("加入购物车失败，请稍后重试","error"),a.hmsLoading.hide(),b.adding=!1})}};var f=d.params.id,g=contentPath+"/shopping/findWareAttr?wareId="+f;c.get(g).then(function(a){a.data&&a.data.attribute&&(b.wareAttrList=a.data.attribute)},function(a){Tip.message("获取商品属性失败，请稍后重试","error")})}]).controller("cartsController",["$rootScope","$scope","$http","$timeout","$state",function(a,b,c,d,e){b.initFlag=!1,b.columns=[{field:"ware",displayName:"商品信息","class":"text-center",width:"30%"},{field:"discount",displayName:"单价(元)","class":"text-center",width:"10%"},{field:"num",displayName:"数量","class":"text-center",width:"15%"},{field:"amount",displayName:"金额(元)","class":"text-center",width:"15%"},{field:"discount",displayName:"优惠金额(元)","class":"text-center",width:"10%"},{field:"fee",displayName:"运费","class":"text-center",width:"15%"}],b.cart={},b.carts={submitLock:!1,init:function(){var a=this;a.refreshList()},refreshList:function(){var d=this;a.hmsLoading.show();var e=contentPath+"/shopping/findShoppingCart";return c.post(e).then(function(c){if(c.data&&c.data.success){b.cart=c.data.attribute,b.cart.cartlist=b.cart.cartDetails;for(var e=0;e<b.cart.cartlist.length;e++){var f=b.cart.cartlist[e];f.wareShopping.promotionDesc=null,f.wareShopping.promotionPrice=null}b.cart.allTick=!0,b.formatData(b.cart),d.promotion()}a.hmsLoading.hide(),b.initFlag||(b.initFlag=!0)},function(b){a.hmsLoading.hide()})},promotion:function(){for(var a=contentPath+"/shopping/getWarePromotionData",d=new Array,e=0;e<b.cart.cartlist.length;e++){var f=b.cart.cartlist[e];if(f.tick){var g={wareId:f.wareid,sourceData:f.num*f.wareShopping.price};d.push(g)}}c.post(a,{wareList:JSON.stringify(d)}).then(function(a){if(a.data&&a.data.success){b.promotions=a.data.attribute;for(var c=0;c<b.cart.cartlist.length;c++)for(var d=b.cart.cartlist[c],e=0;e<b.promotions.length;e++){var f=b.promotions[e];f.wareId==d.wareid&&(d.wareShopping.promotionDesc=f.promotionDesc,d.wareShopping.discount=f.promotionData,f.actualData==f.sourceData?(d.wareShopping.promotionPrice=null,d.wareShopping.isPromotionActive=!1):(d.wareShopping.promotionPrice=f.actualData,d.wareShopping.isPromotionActive=!0))}}},function(a){})},submitOrder:function(){var d=this;if(!d.submitLock){d.submitLock=!0;for(var f=((new Date).format(DateUtils.YYYY_MM_DD).toString(),(new Date).format(DateUtils.YYYY_MM_DD_HH_MM_SS).toString()),g=new Array,h=0;h<b.cart.cartlist.length;h++){var i=b.cart.cartlist[h];if(i.tick){var j={wareid:i.wareid,warename:i.wareShopping.name,price:Number(i.wareShopping.price),num:i.num,discount:Number(i.wareShopping.discount),fee:Number(i.wareShopping.fee),imageurlsmall:i.wareShopping.imageurlsmall,cretedate:f,updatedate:f};g.push(j)}}if(0==g.length)return d.submitLock=!1,void Tip.message("请选择需要结算的商品","error");var k={userid:b.cart.userid,loginuser:b.cart.loginuser,hotelid:b.cart.hotelid,orderamount:Number(b.orderamount),orderdate:f,cretedate:f,updatedate:f,paydate:f,payType:"10",istype:"10",OrderDetails:g};a.hmsLoading.show();var l=contentPath+"/shopping/saveOrder";c.post(l,{jsonOrder:JSON.stringify(k)}).then(function(c){console.log("保存订单成功"),b.refreshMyCart(),d.submitLock=!1,e.go("shopping.orders"),a.hmsLoading.hide()},function(b){console.log("保存订单失败"),a.hmsLoading.hide(),d.submitLock=!1})}},updateCountCallback:function(b){var d=this;if(0!=parseInt(b.num)){var e={wareId:b.wareid,num:b.num},f=contentPath+"/shopping/updateShoppingCartWareIdNum";c.post(f,e).then(function(b){console.log(d),a.carts.promotion(),console.log("修改数量成功")},function(a){console.log("修改数量失败")})}},deleteShoppingCart:function(d,e){if(confirm("确认要删除？")){a.hmsLoading.show();var f={wareId:d.wareid},g=contentPath+"/shopping/deleteShoppingCartForWareId";c.post(g,f).then(function(c){if(a.hmsLoading.hide(),console.log("删除购物车成功"),c.data&&c.data.success){for(var f=0;f<e.length;f++)if(e[f].wareid==d.wareid){e.splice(f,1),b.refreshMyCart();break}b.refreshMyCart()}},function(b){console.log("删除购物车失败"),a.hmsLoading.hide()})}},enterDetail:function(a){e.go("shopping.carts")}},a.carts=b.carts,b.cart.allTick=!0,b.afterAllTick=function(){for(var a=0;a<b.cart.cartlist.length;a++){var c=b.cart.cartlist[a];b.cart.allTick?c.tick=!0:c.tick=!1}},b.afterTick=function(){for(var a=0;a<b.cart.cartlist.length;a++){var c=b.cart.cartlist[a];if(!c.tick)return void(b.cart.allTick=!1)}b.cart.allTick=!0},b.formatData=function(a){for(var b=0;b<a.cartlist.length;b++){var c=a.cartlist[b];c.wareid&&(c.tick=!0)}},b.carts.init(),b.getTotalAmount=function(){for(var a=0,c=0;c<b.cart.cartlist.length;c++){var d=b.cart.cartlist[c];d.wareid&&d.wareShopping&&d.tick&&(a+=parseFloat(d.num*d.wareShopping.price)-parseFloat(d.wareShopping.discount))}return b.orderamount=a.toFixed(2),"￥"+a.toFixed(2)}}]).controller("ordersController",["$rootScope","$scope","$http","$timeout","$state",function(a,b,c,d,e){b.columns=[{field:"orderInfo",displayName:"订单信息","class":"text-center",width:"35%"},{field:"orderAmount",displayName:"订单金额","class":"text-center",width:"20%"},{field:"payDate",displayName:"购买日期","class":"text-center",width:"15%"},{field:"status",displayName:"订单状态","class":"text-center",width:"15%"}],b.totalItems=0,b.currentPage=1,b.pageCount=10,b.numPages=1,b.maxSize=2,b.pageChanged=function(){b.orders.init()},b.orders={init:function(){var a=this;a.refreshList()},refreshList:function(){a.hmsLoading.show();var d={pageNum:b.currentPage,pageSize:b.pageCount},e=contentPath+"/shopping/findOrder";return c.post(e,d).then(function(c){c.data&&(b.orderslist=c.data.rows,b.totalItems=c.data.total),a.hmsLoading.hide()},function(b){a.hmsLoading.hide()})},showEnterDetail:function(a){e.go("shopping.mygoods",{orderId:a.orderid+"-"+a.istype})},deleteEnterDetail:function(a){if(confirm("确认要取消？")){var b=contentPath+"/shopping/deleteOrderByOrderId",d={orderId:a.orderid};c.post(b,d).then(function(b){console.log("取消订单成功"),a.istype="30"},function(a){console.log("取消订单失败")})}},mouseenter:function(){$("a[name='alertStatus']").popover()}},b.getWarnStr=function(a){return"我们将尽快为您进行配送，当状态进入“已开始配送”时，我们预计24小时内到货"},b.orders.init()}]).controller("mygoodsController",["$rootScope","$scope","$http","$timeout","$state",function(a,b,c,d,e){b.columns=[{field:"ware",displayName:"商品","class":"text-center",width:"30%"},{field:"price",displayName:"单价(元)","class":"text-center",width:"15%"},{field:"num",displayName:"数量","class":"text-center",width:"10%"},{field:"totalprice",displayName:"商品总价(元)","class":"text-center",width:"15%"},{field:"discount",displayName:"优惠金额","class":"text-center",width:"15%"},{field:"fee",displayName:"运费(元)","class":"text-center",width:"10%"}],b.currentCartArea=thisHotel.detailAddr,b.totalItems=0,b.currentPage=1,b.pageCount=10,b.numPages=1,b.maxSize=2,b.mygoods={init:function(){var a=this;a.refreshList()},refreshList:function(){a.hmsLoading.show();var d=e.params.orderId.split("-"),f=d[0],g=d[1];b.orderId=f,"10"==g?b.orderStatus="已确认":"20"==g?b.orderStatus="已开始配送":"30"==g?b.orderStatus="已收到":"40"==g?b.orderStatus="款项已结清":b.orderStatus="未知";var h={orderId:f},i=contentPath+"/shopping/findOrderDetailByOrderId";return c.post(i,h).then(function(c){a.hmsLoading.hide(),c.data&&(b.mygoodslist=c.data,b.formatData(b.mygoodslist))},function(b){a.hmsLoading.hide()})},enterDetail:function(a){e.go("shopping.mygoods")}},b.formatData=function(a){for(var c=0,d=0;d<a.length;d++){var e=a[d];c+=parseFloat(e.num*e.price-e.discount)}b.payAmount=c.toFixed(2)},b.mygoods.init()}]).controller("detailMoreController",["$rootScope","$scope","$http","$timeout","$state",function(a,b,c,d,e){b.detailMoreUrl=contentPath+"/main/shopping/template/sample/detail_more.html",b.isActive=!0,b.setActive2=function(a){b.isActive=a}}]),angular.module("accountApp",[]).controller("financeController",["$rootScope","$scope","$animate","$aside","HmsModalService","HmsHttp","$timeout","BankInfoService","BillService",function(a,b,c,d,e,f,g,h,i){function j(){i.isFreeze().success(function(a){b.tqjsBtn=a}).error(function(a){console.log(a)})}function k(a,b){h.find().success(a).error(b)}function l(){b.cusContent="该账单为冻结状态，不可操作，请联系结算员。",b.modalConfirm=function(){e.hide()},b.modalConfirmClose=function(){e.hide()},e.show({contentTmpl:"modal-confirm-notice.tmpl.html",scope:b})}b.Nav={id:"Nav",selected:0,items:[{id:"month",displayName:"月度阈值结算",action:"byHotelid",loaded:!1,page:contentPath+"/main/account/template/finance-month.html"},{id:"week",displayName:"周结算",action:"getWeekOrders",loaded:!1,page:contentPath+"/main/account/template/finance-week.html"},{id:"special",displayName:"特价结算",action:"getSpecialBills",loaded:!1,page:contentPath+"/main/account/template/finance-special.html"},{id:"baseBills",displayName:"综合账单",action:"getNewBills",loaded:!1,page:contentPath+"/main/account/template/finance-new.html"},{id:"appeal",displayName:"我的申诉",action:"getMyAppeal",loaded:!1,page:contentPath+"/main/account/template/finance-appeal.html"}]},b.isMgr=!1,b.clone=function(a){return _.clone(a)},b.confirmBill=function(c){return"Y"==c.isFreeze?void l():(a.hmsLoading.hide(),void k(function(d){if(a.hmsLoading.hide(),!d)return b.cusContent="收款人账号信息为空，请填写收款人账号信息后，再做确认金额！",b.modalConfirm=function(){e.hide(),b.showBankCount()},b.modalConfirmClose=function(){e.hide()},void e.show({contentTmpl:"modal-confirm-notice.tmpl.html",scope:b});var g=c;b.bill=g;var h=contentPath+"/bill/simpleCheckInfo",i={billId:g.id,pageNum:1,pageSize:1e3,total:1e3};f.post(h,i).then(function(a){a.data&&(b.checkDetailList=a.data.rows)},function(a){Tip.message("获取审核明细信息失败","error")}),b.modalConfirm=function(){return g.id?(a.hmsLoading.show(),void f.post(contentPath+"/bill/simpleConfirmAmount",{billId:g.id}).success(function(a){return a.success?(Tip.message("确认成功"),b.modalConfirmClose(),void b.$broadcast("loadSubData")):void Tip.message(a.errorMsg,"error")}).error(function(b){a.hmsLoading.hide(),Tip.message("确认金额异常","error")})):void Tip.message("无法找到账单信息","error")},b.modalConfirmClose=function(){e.hide()},e.show({contentTmpl:"confirm-bill.tmpl.html",scope:b})},function(b){a.hmsLoading.hide(),console.log(b)}))},b.confirmSpecialBill=function(c){a.hmsLoading.hide(),k(function(d){if(a.hmsLoading.hide(),!d)return b.cusContent="收款人账号信息为空，请填写收款人账号信息后，再做确认金额！",b.modalConfirm=function(){e.hide(),b.showBankCount()},b.modalConfirmClose=function(){e.hide()},void e.show({contentTmpl:"modal-confirm-notice.tmpl.html",scope:b});var g=c;b.bill=g,b.modalConfirm=function(){return g.id?(a.hmsLoading.show(),void f.post(contentPath+"/bill/specialConfirmAmount",{billId:g.id}).success(function(a){return a.success?(Tip.message("确认成功"),b.modalConfirmClose(),void b.$broadcast("loadSubData")):void Tip.message(a.errorMsg,"error")}).error(function(b){a.hmsLoading.hide(),Tip.message("确认金额异常","error")})):void Tip.message("无法找到账单信息","error")},b.modalConfirmClose=function(){e.hide()},e.show({contentTmpl:"confirm-bill-special.tmpl.html",scope:b})},function(b){a.hmsLoading.hide(),console.log(b)})},b.showReadCheck=function(a){b.sendCheck(a)},b.verifyBill=function(a){return"Y"==a.isFreeze?void l():void b.sendCheck(a)},b.verifySpecialBill=function(a){var c=a;b.bill=c;var f=d({title:"反馈信息",template:"aside-sendCheck-special.tpl.html",animation:"am-slide-left",placement:"left",show:!0,scope:b});b.asideConfirm=function(){return b.cusContent="是否确定要送出审核信息？",b.modalConfirm=function(){b.sendSpecial(c).then(function(){e.hide(),f.hide()})},c.id?c.hotelchangecost?c.currMemo?(b.modalConfirmClose=function(){e.hide()},void e.show({contentTmpl:"modal-confirm-notice.tmpl.html",scope:b})):void Tip.message("该账单发起审核原因不可为空","error"):void Tip.message("请填写调整后账单金额","error"):void Tip.message("无法找到账单信息","error")},b.asideConfirmCancel=function(){c.currMemo="",f.hide()}},b.baseVerifyBill=function(a){var c=a;b.bill=c;var f=d({title:"账单申诉",template:"aside-sendCheck-base.tpl.html",animation:"am-slide-left",placement:"left",show:!0,scope:b});b.asideConfirm=function(){return b.cusContent="是否确定提交申诉信息？",b.baseConfirm=function(){b.sendFeedback(c).then(function(){e.hide(),f.hide()})},c.id?c.hotelChange?c.hotelReason?(b.modalConfirmClose=function(){e.hide()},void e.show({contentTmpl:"base-confirm-notice.tmpl.html",scope:b})):void Tip.message("申诉原因不可为空","error"):void Tip.message("请填写调整账单金额","error"):void Tip.message("无法找到账单信息","error")},b.asideConfirmCancel=function(){c.currMemo="",f.hide()}},b.sendCheck=function(a){var c=a;c.checkDetails=[],b.bill=c;var h=d({title:"反馈信息",template:"aside-sendCheck.tpl.html",animation:"am-slide-left",placement:"left",show:!0,scope:b});b.getCheckDetails=function(){if(!c.id)return void Tip.message("无法找到账单信息","error");c.loading=!0;var a=contentPath+"/bill/simpleCheckInfo",b={billId:c.id,pageNum:1,pageSize:1e3,total:1e3};f.post(a,b).then(function(a){if(a.data){for(var b={2:null,3:null,6:null,7:null},d=[],e=a.data.rows.length-1;e>=0;e--){var f=a.data.rows[e],g=f.checkstatus;g&&!b[g]&&"undefined"!=typeof b[g]&&(b[g]=f,d.push(f),f.checktime=new Date(f.checktime).format("yyyy年MM月dd日 hh时mm分"))}c.checkDetails=d}c.loading=!1},function(a){Tip.message("获取审核明细信息失败","error"),c.loading=!1})},g(function(){b.getCheckDetails()},500),b.asideConfirm=function(){return b.cusContent="是否确定要送出审核信息？",b.modalConfirm=function(){b.send(c).then(function(){e.hide(),h.hide(),c.checkDetails=[]})},c.id?c.currAmount?(c.changecost=Math.round(10*(c.currAmount+c.billcost))/10,c.currMemo?(b.modalConfirmClose=function(){e.hide()},void e.show({contentTmpl:"modal-confirm-notice.tmpl.html",scope:b})):void Tip.message("该账单发起审核原因不可为空","error")):void Tip.message("请填写调整后账单金额","error"):void Tip.message("无法找到账单信息","error")},b.asideConfirmCancel=function(){c.currMemo="",h.hide()}},b.send=function(c){return a.hmsLoading.show(),f.post(contentPath+"/bill/simpleCheckAmount",{billId:c.id,checkText:c.currMemo,changeCost:c.changecost}).success(function(a){return a.success?(b.$broadcast("loadSubData"),void Tip.message("发起审核成功")):(b.$broadcast("loadSubData"),void Tip.message(a.errorMsg,"error"))}).error(function(b){a.hmsLoading.hide(),Tip.message("发送异常","error")})},b.sendSpecial=function(c){return a.hmsLoading.show(),f.post(contentPath+"/feedback/create",{type:1,fromBill:c.id,hotelReason:c.currMemo,hotelChange:c.hotelchangecost}).success(function(a){return a.success?(b.$broadcast("loadSubData"),void Tip.message("发起审核成功")):(b.$broadcast("loadSubData"),void Tip.message(a.errorMsg,"error"))}).error(function(b){a.hmsLoading.hide(),Tip.message("发送异常","error")})},b.sendFeedback=function(c){return a.hmsLoading.show(),f.post(contentPath+"/feedback/create",{type:2,fromBill:c.id,hotelChange:c.hotelChange,hotelReason:c.hotelReason}).success(function(a){return a.success?(b.$broadcast("loadSubData"),void Tip.message("发起审核成功")):(b.$broadcast("loadSubData"),void Tip.message(a.errorMsg,"error"))}).error(function(b){a.hmsLoading.hide(),Tip.message("发送异常","error")})},b.showOrderDetail=function(a){var c=a;b.billIdForList=c.id,e.show({title:"账期明细列表",bodyTmpl:"account-list-ctrl.tmpl.html",scope:b,cls:"order-detail",backdrop:!0}),b.closeModal=function(){e.hide()}},b.showSpecialBillDetail=function(a){var c=a;b.billIdForList=c.id,e.show({title:"账期明细列表",bodyTmpl:"account-list-ctrl-special.tmpl.html",scope:b,cls:"order-detail",backdrop:!0}),b.closeModal=function(){e.hide()}},b.showBaseBillDetail=function(a){var c=a;b.billIdForList=c.id,e.show({title:"账单明细列表",bodyTmpl:"account-list-ctrl-base.tmpl.html",scope:b,cls:"order-detail",backdrop:!0}),b.closeModal=function(){e.hide()}},b.showBankCount=function(){a.hmsLoading.show(),k(function(c){a.hmsLoading.hide(),b.bankInfo=c,e.show({contentTmpl:contentPath+"/main/account/template/bank-info.html",scope:b})},function(b){a.hmsLoading.hide(),console.log(b)})},b.preCalAccount=function(){a.hmsLoading.show(),i.preCalAccount().success(function(b){a.hmsLoading.hide(),b.success?layer.alert("账单后台处理中，工作日次日可查看"):1==b.errorCode?layer.alert("凌晨0点至凌晨6点为账单金额生成时间，请凌晨6点以后再点击提前结算！"):Tip.message("提前结算操作失败："+b.errorMsg,"error")}).error(function(b){a.hmsLoading.hide(),console.log(b)})},b.$watch("Nav.selected",function(a){b.Nav.items[a].loaded=!0}),j()}]).controller("FinanceMonthController",["$scope","HmsHttp","$rootScope",function(a,b,c){var d={0:"初始化",1:"待确认",2:"有异议",3:"待审核",4:"审核退回",5:"已审核",6:"已确认",7:"已结算",8:"已拆分或调整",9:"拆分或调整审核退回",10:"已拆分或调整",12:"已提交"},e={1:"未支付",2:"已支付"},f={Y:"阈值",N:"月度"},g=function(){c.hmsLoading.show();var d=a.MonthFniance.nav,e=d.items[d.selected],f=a.MonthFniance.pagination,g=(a.MonthFniance.data,a.MonthFniance.action),i=(a.MonthFniance.formatFunc,contentPath+"/bill/"+g),j={pageNum:f.currentPage,pageSize:f.pageCount,checkStatus:e.action};f.totalItems&&(j.total=f.totalItems),b.post(i,j).success(function(b){h(b.rows),a.MonthFniance.data=b.rows,a.MonthFniance.pagination.totalItems=parseInt(b.total),a.MonthFniance.loaded=!0,c.hmsLoading.hide()}).error(function(a){c.hmsLoading.hide()})},h=function(a){_.map(a,function(a){a.checkstatus;a.checkstatusTxt=d[a.checkstatus],a.financeStatusTxt=e[a.financeStatus],a.isThreshold||(a.isThreshold="N"),a.type=f[a.isThreshold],a.financeStatusTxt||(a.financeStatusTxt="--"),a.begintime=DateUtils.formatDate4TimeVal(a.begintime,"yyyy-MM-dd"),a.endtime=DateUtils.formatDate4TimeVal(a.endtime,"yyyy-MM-dd")})},i=function(){var b=a.MonthFniance.pagination;b.totalItems=0,b.currentPage=1,b.numPages=1,a.MonthFniance.data=[]};a.MonthFniance={action:"byHotelid",pagination:{totalItems:0,currentPage:1,pageCount:5,numPages:1,maxSize:5,pageChanged:function(){g()}},nav:{selected:0,items:[{id:"all",displayName:"全部",action:""},{id:"confirming",displayName:"待确认",action:"1"},{id:"disagreed",displayName:"有异议",action:"2"},{id:"checking",displayName:"待审核",action:"3"},{id:"confirmed",displayName:"已确认",action:"6"},{id:"commited",displayName:"已提交",action:"12"}]},columns:[{field:"type",displayName:"分类","class":"text-center",width:"5%"},{field:"begintime",displayName:"账单开始日期","class":"text-center",width:"5%"},{field:"endtime",displayName:"账单结束日期","class":"text-center",width:"5%"},{field:"prepaymentcost",displayName:"预付金额","class":"text-right",width:"5%"},{field:"cutoffcost",displayName:"切客补贴金额","class":"text-right",width:"5%"},{field:"otherdiscountcost",displayName:"眯客优惠券金额","class":"text-right",width:"5%"},{field:"availablemoney",displayName:"红包金额","class":"text-center",width:"5%"},{field:"servicecost",displayName:"服务费金额","class":"text-right",width:"5%"},{field:"billcost",displayName:"账单金额","class":"text-right",width:"5%"},{field:"changecost",displayName:"调整金额","class":"text-center",width:"5%"},{field:"readjustcost",displayName:"调整后金额","class":"text-center",width:"5%"},{field:"finalcost",displayName:"商家收款金额","class":"text-right",width:"5%"},{field:"splitcost",displayName:"销售收款金额","class":"text-right",width:"5%"},{field:"checkstatusTxt",displayName:"账单状态","class":"text-center",width:"10%"},{field:"financeStatusTxt",displayName:"结算状态","class":"text-center",width:"10%"}]},a.$watch("MonthFniance.nav.selected",function(a,b){a!=b&&(i(),g())}),a.$on("loadSubData",function(){g()}),g()}]).controller("FinanceWeekController",["$scope","HmsHttp","$rootScope",function(a,b,c){var d=function(){c.hmsLoading.show();var d=a.WeekFinance.nav,f=(d.items[d.selected],a.WeekFinance.pagination),g=(a.WeekFinance.data,a.WeekFinance.action),h=contentPath+"/bill/"+g,i={pageNum:f.currentPage,pageSize:f.pageCount,checkStatus:6};f.totalItems&&(i.total=f.totalItems),b.post(h,i).success(function(b){e(b.rows),a.WeekFinance.data=b.rows,a.WeekFinance.pagination.totalItems=parseInt(b.total),a.WeekFinance.loaded=!0,c.hmsLoading.hide()}).error(function(a){c.hmsLoading.hide()})},e=function(a){_.map(a,function(a){a.starttime=DateUtils.formatDate4TimeVal(a.starttime,"yyyy-MM-dd"),a.endtime=DateUtils.formatDate4TimeVal(a.endtime,"yyyy-MM-dd")})};a.WeekFinance={action:"getWeekOrders",pagination:{totalItems:0,currentPage:1,pageCount:5,numPages:1,maxSize:5,pageChanged:function(){d()}},nav:{selected:0,items:[]},columns:[{field:"billcost",displayName:"总金额","class":"text-center",width:"5%"},{field:"starttime",displayName:"账单开始日期","class":"text-center",width:"5%"},{field:"endtime",displayName:"账单结束日期","class":"text-center",width:"5%"},{field:"cutoffcost",displayName:"切客补贴金额","class":"text-center",width:"5%"},{field:"topaydiscount",displayName:"到付补贴金额","class":"text-center",width:"5%"},{field:"prepaymentdiscount",displayName:"预付补贴金额","class":"text-center",width:"5%"},{field:"deductingmoney",displayName:"核单扣款","class":"text-center",width:"5%"},{field:"deductingservicemoney",displayName:"冲抵月账单应收金额","class":"text-center",width:"5%"},{field:"deductingshoppingmoney",displayName:"扣货款","class":"text-center",width:"5%"},{field:"deductingothermoney",displayName:"扣其他","class":"text-center",width:"5%"},{field:"note",displayName:"备注","class":"text-center",width:"5%"}]},d(),a.$on("loadSubData",function(){d()})}]).controller("FinanceNewController",["$scope","HmsHttp","$rootScope","HmsModalService","$location",function(a,b,c,d,e){var f=function(){c.hmsLoading.show();var d=a.BaseFinance.nav,e=d.items[d.selected],f=a.BaseFinance.pagination,h=(a.BaseFinance.data,a.BaseFinance.action),i=contentPath+"/billOrderWeek/"+h,j={pageNum:f.currentPage,pageSize:f.pageCount,status:e.action};f.totalItems&&(j.total=f.totalItems),b.post(i,j).success(function(b){g(b.rows),a.BaseFinance.data=b.rows,a.BaseFinance.pagination.totalItems=parseInt(b.total),a.BaseFinance.loaded=!0,c.hmsLoading.hide()}).error(function(a){c.hmsLoading.hide()}),a.BaseFinance.pagination.totalItems=3,a.BaseFinance.loaded=!0},g=function(a){_.map(a,function(a){a.beginTime&&(a.beginTime=DateUtils.formatDate4TimeVal(a.beginTime,"yyyy-MM-dd")),a.endTime&&(a.endTime=DateUtils.formatDate4TimeVal(a.endTime,"yyyy-MM-dd"))})},h=function(){var b=a.BaseFinance.pagination;b.totalItems=0,b.currentPage=1,b.numPages=1,a.BaseFinance.data=[]};a.BaseFinance={action:"query",pagination:{totalItems:0,currentPage:1,pageCount:5,numPages:1,maxSize:5,pageChanged:function(){f()}},nav:{selected:0,items:[{id:"all",displayName:"全部",action:""},{id:"checking",displayName:"付款中",action:"5"},{id:"commited",displayName:"已付款",action:"6"}]},columns:[{field:"beginTime",displayName:"账单开始日期","class":"text-center"},{field:"endTime",displayName:"账单结束日期","class":"text-center"},{field:"billCost",displayName:"账单金额（元）","class":"text-center"},{field:"changeCost",displayName:"历史补差","class":"text-center"},{field:"qieKeMoney",displayName:"切客补贴（元）","class":"text-center"},{field:"serviceCost",displayName:"服务费（元）","class":"text-center"},{field:"hotelCost",displayName:"结算金额（元）","class":"text-center"},{field:"settleStatusName",displayName:"结算状态","class":"text-center"}]},f(),a.$watch("BaseFinance.nav.selected",function(a,b){a!=b&&(h(),f())}),a.$on("loadSubData",function(){f()})}]).controller("FinanceAppealController",["$scope","HmsHttp","$rootScope",function(a,b,c){var d=function(){c.hmsLoading.show();var d=a.FinanceAppeal.nav,f=d.items[d.selected],g=a.FinanceAppeal.pagination,h=(a.FinanceAppeal.data,a.FinanceAppeal.action),i=contentPath+"/feedback/"+h,j={pageNum:g.currentPage,pageSize:g.pageCount,status:f.action};g.totalItems&&(j.total=g.totalItems),b.post(i,j).success(function(b){e(b.rows),a.FinanceAppeal.data=b.rows,a.FinanceAppeal.pagination.totalItems=parseInt(b.total),a.FinanceAppeal.loaded=!0,c.hmsLoading.hide()}).error(function(a){c.hmsLoading.hide()}),a.FinanceAppeal.pagination.totalItems=3,a.FinanceAppeal.loaded=!0},e=function(a){_.map(a,function(a){a.createTime&&(a.beginTime=DateUtils.formatDate4TimeVal(a.beginTime,"yyyy-MM-dd")),a.endTime&&(a.endTime=DateUtils.formatDate4TimeVal(a.endTime,"yyyy-MM-dd"))})},f=function(){var b=a.FinanceAppeal.pagination;b.totalItems=0,b.currentPage=1,b.numPages=1,a.FinanceAppeal.data=[]};a.FinanceAppeal={action:"query",pagination:{totalItems:0,currentPage:1,pageCount:10,numPages:1,maxSize:10,pageChanged:function(){d()}},nav:{selected:0,items:[{id:"all",displayName:"全部",action:""},{id:"checking",displayName:"未处理",action:"1"},{id:"commited",displayName:"已处理",action:"2"}]},columns:[{field:"typeName",displayName:"账单类型","class":"text-center"},{field:"beginTime",displayName:"账单开始日期","class":"text-center"},{field:"endTime",displayName:"账单结束日期","class":"text-center"},{field:"billCost",displayName:"账单金额（元）","class":"text-center"},{field:"hotelChange",displayName:"申请补贴（元）","class":"text-center"},{field:"hotelReason",displayName:"申请理由","class":"text-center",width:"200"},{field:"mkReason",displayName:"处理结果","class":"text-center",width:"200"},{field:"mkChange",displayName:"实际补贴（元）","class":"text-center"},{field:"statusName",displayName:"处理状态","class":"text-center"}]},d(),a.$watch("FinanceAppeal.nav.selected",function(a,b){a!=b&&(f(),d())}),a.$on("loadSubData",function(){d()})}]).controller("FinanceSpecialController",["$scope","HmsHttp","$rootScope",function(a,b,c){var d=function(){c.hmsLoading.show();var d=a.SpecialFinance.nav,f=d.items[d.selected],g=a.SpecialFinance.pagination,h=(a.SpecialFinance.data,a.SpecialFinance.action),i=contentPath+"/bill/"+h,j={pageNum:g.currentPage,pageSize:g.pageCount,checkStatus:f.action};g.totalItems&&(j.total=g.totalItems),b.post(i,j).success(function(b){e(b.rows),a.SpecialFinance.data=b.rows,a.SpecialFinance.pagination.totalItems=parseInt(b.total),a.SpecialFinance.loaded=!0,c.hmsLoading.hide()}).error(function(a){c.hmsLoading.hide()}),a.SpecialFinance.pagination.totalItems=3,a.SpecialFinance.loaded=!0},e=function(a){_.map(a,function(a){a.begintime=DateUtils.formatDate4TimeVal(a.begintime,"yyyy-MM-dd"),a.endtime=DateUtils.formatDate4TimeVal(a.endtime,"yyyy-MM-dd")})},f=function(){var b=a.SpecialFinance.pagination;b.totalItems=0,b.currentPage=1,b.numPages=1,a.SpecialFinance.data=[]};a.SpecialFinance={action:"getSpecialBills",pagination:{totalItems:0,currentPage:1,pageCount:5,numPages:1,maxSize:5,pageChanged:function(){d()}},nav:{selected:0,items:[{id:"all",displayName:"全部",action:""},{id:"confirming",displayName:"付款中",action:"1"},{id:"disagreed",displayName:"已付款",action:"2"}]},columns:[{field:"begintime",displayName:"账单开始日期","class":"text-center"},{field:"endtime",displayName:"账单结束日期","class":"text-center"},{field:"billcost",displayName:"总金额","class":"text-center"},{field:"ordernum",displayName:"订单数","class":"text-center"},{field:"changecost",displayName:"调整金额","class":"text-center"},{field:"finalcost",displayName:"结算金额","class":"text-center"}]},d(),a.$watch("SpecialFinance.nav.selected",function(a,b){a!=b&&(f(),d())}),a.$on("loadSubData",function(){d()})}]).controller("financeDetailListOuterController",["$rootScope","$scope",function(a,b){b.tabs={},b.tabs.activeTab=0}]).controller("financeDetailValidListController",["$rootScope","$scope","HmsHttp","$timeout","HmsModalService","$location","$log","$aside",function(a,b,c,d,e,f,g,h){function i(){var c=[];"A"==a.RULE_CODE?c=[]:"B"==a.RULE_CODE&&(c=["cutCost"]),angular.forEach(c,function(a){b.columns.splice(_.findLastIndex(b.columns,{field:a}),1)})}function j(){a.hmsLoading.show();var d=contentPath+"/bill/simpleBillInfo",e={billId:b.$parent.billIdForList,pageNum:b.currentPage,pageSize:b.pageCount,method:"valid"};b.totalItems&&(e.total=b.totalItems),c.post(d,e).success(function(c){a.hmsLoading.hide(),k(c),b.rowsData=c.rows,b.totalItems=parseInt(c.total)}).error(function(b){a.hmsLoading.hide(),Tip.message("数据加载异常","error")})}function k(a){var b=a.rows;_.map(b,function(a){var b=a.orderType,c=a.beginTime,d=a.endTime,e=a.orderCreateTime;a.dfbtje=0,a.yfbtje=0,180!=a.orderStatus&&190!=a.orderStatus&&200!=a.orderStatus||!a.spreaduser||a.invalidreanson?(a.dfbtje=0,a.yfbtje=0):1==a.orderType?(a.yfbtje=a.yfbtje,a.dfbtje=0):(a.yfbtje=0,a.dfbtje=a.dfbtje),b&&(a.orderType=1==b?"预付":"到付"),c&&(a.beginTime=new Date(c).format("M月d日 h时m分")),d&&(a.endTime=new Date(d).format("M月d日 h时m分")),e&&(a.orderCreateTime=new Date(e).format("M月d日 h时m分"))})}b.rowsData=[],b.columns=[{field:"orderId",displayName:"订单号","class":"text-center",width:"10%"},{field:"orderType",displayName:"支付类型","class":"text-center",width:"10%"},{field:"roomTypeName",displayName:"房型","class":"text-center",width:"10%"},{field:"roomNo",displayName:"房间","class":"text-center",width:"10%"},{field:"orderCreateTime",displayName:"下单时间","class":"text-center",width:"15%"},{field:"beginTime",displayName:"入住时间","class":"text-center",width:"15%"},{field:"endTime",displayName:"离店时间","class":"text-center",width:"15%"},{field:"dayNumber",displayName:"间夜数","class":"text-center",width:"5%"},{field:"allCost",displayName:"订单金额(元)","class":"text-right",width:"5%"},{field:"cutCost",displayName:"切客优惠金额(元)","class":"text-right",width:"5%"},{field:"otherGive",displayName:"其他优惠金额(元)","class":"text-right",width:"5%"},{field:"serviceCost",displayName:"产生服务费(元)","class":"text-right",width:"5%"}],b.totalItems=0,b.currentPage=1,b.pageCount=20,b.numPages=1,b.maxSize=5,b.pageChanged=function(){j()},b.$watch("active",function(a){i(),j()})}]).controller("financeDetailValidListSpecialController",["$rootScope","$scope","HmsHttp","$timeout","HmsModalService","$location","$log","$aside",function(a,b,c,d,e,f,g,h){function i(){a.hmsLoading.show();var d=contentPath+"/bill/specialBillInfo",e={billId:b.$parent.billIdForList,pageNum:b.currentPage,pageSize:b.pageCount};b.totalItems&&(e.total=b.totalItems),c.post(d,e).success(function(c){a.hmsLoading.hide(),j(c),b.rowsData=c.rows,b.totalItems=parseInt(c.total)}).error(function(b){a.hmsLoading.hide(),Tip.message("数据加载异常","error")})}function j(a){var b=a.rows;_.map(b,function(a){var b=a.checkintime,c=a.checkouttime,d=a.ordertime;b&&(a.checkintime=new Date(b).format("M月d日 h时m分")),c&&(a.checkouttime=new Date(c).format("M月d日 h时m分")),d&&(a.ordertime=new Date(d).format("M月d日 h时m分"))})}b.rowsData=[],b.columns=[{field:"orderid",displayName:"订单号","class":"text-center",width:"10%"},{field:"roomtypename",displayName:"房型","class":"text-center",width:"10%"},{field:"roomno",displayName:"房间","class":"text-center",width:"10%"},{field:"ordertime",displayName:"下单时间","class":"text-center",width:"10%"},{field:"checkintime",displayName:"入住时间","class":"text-center",width:"10%"},{field:"checkouttime",displayName:"离店时间","class":"text-center",width:"10%"},{field:"daynumber",displayName:"间夜数","class":"text-center",width:"5%"},{field:"mikeprice",displayName:"眯客价","class":"text-right",width:"5%"},{field:"discount",displayName:"折扣","class":"text-right",width:"5%"},{field:"lezhucoins",displayName:"结算价","class":"text-right",width:"5%"}],b.totalItems=0,b.currentPage=1,b.pageCount=20,b.numPages=1,b.maxSize=5,b.pageChanged=function(){i()},b.$watch("active",function(a){i()})}]).controller("baseFinanceDetailListController",["$rootScope","$scope","HmsHttp","$timeout","HmsModalService","$location","$log","$aside",function(a,b,c,d,e,f,g,h){function i(){a.hmsLoading.show();var d=contentPath+"/billOrderWeek/queryDetail",e={billOrderWeekId:b.$parent.billIdForList,pageNum:b.currentPage,pageSize:b.pageCount};b.totalItems&&(e.total=b.totalItems),c.post(d,e).success(function(c){a.hmsLoading.hide(),j(c),b.rowsData=c.rows,b.totalItems=parseInt(c.total);
}).error(function(b){a.hmsLoading.hide(),Tip.message("数据加载异常","error")})}function j(a){var b=a.rows;_.map(b,function(a){var b=a.checkinTime,c=a.checkoutTime,d=a.orderCreateTime;b&&(a.checkinTime=new Date(b).format("M月d日 h时m分")),c&&(a.checkoutTime=new Date(c).format("M月d日 h时m分")),d&&(a.orderCreateTime=new Date(d).format("M月d日 h时m分"))})}b.rowsData=[],b.columns=[{field:"orderId",displayName:"订单号","class":"text-center",width:"10%"},{field:"roomTypeName",displayName:"房型","class":"text-center",width:"10%"},{field:"roomNo",displayName:"房间","class":"text-center",width:"10%"},{field:"orderCreateTime",displayName:"下单时间","class":"text-center",width:"10%"},{field:"checkinTime",displayName:"入住时间","class":"text-center",width:"10%"},{field:"checkoutTime",displayName:"离店时间","class":"text-center",width:"10%"},{field:"dayNumber",displayName:"间夜数","class":"text-center",width:"5%"},{field:"billCost",displayName:"结算金额（元）","class":"text-right",width:"10%"}],b.totalItems=0,b.currentPage=1,b.pageCount=20,b.numPages=1,b.maxSize=5,b.pageChanged=function(){i()},b.$watch("active",function(a){i()})}]).controller("financeDetailInvalidListController",["$rootScope","$scope","HmsHttp","$timeout","HmsModalService","$location","$log","$aside",function(a,b,c,d,e,f,g,h){function i(){a.hmsLoading.show();var d=contentPath+"/bill/simpleBillInfo",e={billId:b.$parent.billIdForList,pageNum:b.currentPage,pageSize:b.pageCount,method:"invalid"};b.totalItems&&(e.total=b.totalItems),c.post(d,e).success(function(c){a.hmsLoading.hide(),j(c),b.rowsData=c.rows,b.totalItems=parseInt(c.total)}).error(function(b){a.hmsLoading.hide(),Tip.message("数据加载异常","error")})}function j(a){var b=a.rows;_.map(b,function(a){var b=a.orderType,c=a.beginTime,d=a.endTime,e=a.invalidreason;b&&(a.orderType=1==b?"预付":"到付"),c&&(a.beginTime=new Date(c).format("M月d日 h时m分")),d&&(a.endTime=new Date(d).format("M月d日 h时m分")),1==e&&(a.InvalidreasonStr="入住人为常旅客"),2==e&&(a.InvalidreasonStr="入住时间未满4小时"),3==e&&(a.InvalidreasonStr="此用户本月超过4次切单"),4==e&&(a.InvalidreasonStr="此用户今日不是第一次切单")})}b.rowsData=[],b.columns=[{field:"orderId",displayName:"订单号","class":"text-center",width:"10%"},{field:"orderType",displayName:"支付类型","class":"text-center",width:"10%"},{field:"roomTypeName",displayName:"房型","class":"text-center",width:"10%"},{field:"roomNo",displayName:"房间","class":"text-center",width:"10%"},{field:"beginTime",displayName:"入住时间","class":"text-center",width:"15%"},{field:"endTime",displayName:"离店时间","class":"text-center",width:"15%"},{field:"InvalidreasonStr",displayName:"切客订单无效理由","class":"text-center",width:"15%"},{field:"dayNumber",displayName:"间夜数","class":"text-center",width:"5%"},{field:"allCost",displayName:"订单金额(元)","class":"text-right",width:"5%"},{field:"cutCost",displayName:"切客优惠金额(元)","class":"text-right",width:"5%"},{field:"hotelGive",displayName:"商户优惠金额(元)","class":"text-right",width:"5%"},{field:"otherGive",displayName:"其他优惠金额(元)","class":"text-right",width:"5%"},{field:"serviceCost",displayName:"产生服务费(元)","class":"text-right",width:"5%"}],b.totalItems=0,b.currentPage=1,b.pageCount=20,b.numPages=1,b.maxSize=5,b.pageChanged=function(){i()},b.$watch("active",function(a){i()})}]).controller("financeDetailCollectListController",["$rootScope","$scope","HmsHttp","$timeout","HmsModalService","$location","$log","$aside",function(a,b,c,d,e,f,g,h){function i(){a.hmsLoading.show();var d=contentPath+"/bill/simpleBillInfo",e={billId:b.$parent.billIdForList,pageNum:b.currentPage,pageSize:b.pageCount,method:"collect"};b.totalItems&&(e.total=b.totalItems),c.post(d,e).success(function(c){a.hmsLoading.hide(),j(c),b.rowsData=c.rows,b.totalItems=parseInt(c.total)}).error(function(b){a.hmsLoading.hide(),Tip.message("数据加载异常","error")})}function j(a){var b=a.rows;_.map(b,function(a){var b=a.orderType,c=a.beginTime,d=a.endTime;b&&(a.orderType=1==b?"预付":"到付"),c&&(a.beginTime=new Date(c).format("M月d日 h时m分")),d&&(a.endTime=new Date(d).format("M月d日 h时m分")),"1"==a.payObject&&(a.payObjectStr="酒店业主"),"2"==a.payObject&&(a.payObjectStr="公司销售"),"1"==a.transferType&&(a.transferTypeStr="同城"),"2"==a.transferType&&(a.transferTypeStr="异地")})}b.rowsData=[],b.columns=[{field:"payObjectStr",displayName:"付款对象","class":"text-center",width:"10%"},{field:"name",displayName:"收款人","class":"text-center",width:"10%"},{field:"moneyAmount",displayName:"金额(元)","class":"text-right",width:"10%"},{field:"bank",displayName:"开户行","class":"text-left",width:"20%"},{field:"bankBranch",displayName:"开户支行","class":"text-left",width:"20%"},{field:"account",displayName:"账号","class":"text-left",width:"20%"},{field:"transferTypeStr",displayName:"转账类型","class":"text-center",width:"10%"}],b.totalItems=0,b.currentPage=1,b.pageCount=20,b.numPages=1,b.maxSize=5,b.pageChanged=function(){i()},b.$watch("active",function(a){i()})}]).controller("BankInfoController",["$rootScope","$scope","HmsModalService","$timeout","BankInfoService",function(a,b,c,d,e){function f(){if(b.bankInfo){var a=_.findWhere(b.defaultBanks,{name:b.bankInfo.bank});b.bankInfo.selectBank=a?a.id:"other",h={name:b.bankInfo.name,account:b.bankInfo.account,bank:b.bankInfo.bank,bankBranch:b.bankInfo.bank,transferType:b.bankInfo.bank}}else b.bankInfo={}}function g(){var d=b.bankInfo.name,g=b.bankInfo.account,i=b.bankInfo.selectBank,j=b.bankInfo.bank,k=b.bankInfo.bankBranch,l=b.bankInfo.transferType,m=b.bankInfo.verifyCode;return!d||d.length<=0?void Tip.message("请输入户名","error"):!g||g.length<=0?void Tip.message("请输入账号","error"):isNaN(Number(g))||Number(g)<0?void Tip.message("请输入正确的账号","error"):!j||j.length<=0?void Tip.message("other"==i?"请输入开户行":"请选择开户行","error"):!k||k.length<=0?void Tip.message("请输入支行","error"):!l||l.length<=0?void Tip.message("请选择转帐类型","error"):!m||m.length<=0?void Tip.message("请输入验证码","error"):h.name==d&&h.account==g&&h.bank==j&&h.bankBranch==k&&h.transferType==l?void Tip.message("数据没有变化不需要保存","error"):(a.hmsLoading.show(),void e.save(d,g,j,k,l,m).success(function(b){a.hmsLoading.hide(),b.success?(f(),Tip.message("您的银行账户信息修改已经完成。<br>户　名："+d+"<br>账　号："+g+"<br>开户行："+j+"<br>支　行："+k),c.hide()):Tip.message(b.errorMsg,"error")}).error(function(b){a.hmsLoading.hide(),Tip.message("保存失败！")}))}var h={};b.defaultBanks=[{id:"icbc",name:"中国工商银行"},{id:"abc",name:"中国农业银行"},{id:"boc",name:"中国银行"},{id:"ccb",name:"中国建设银行股份有限公司"}],b.selectBankChange=function(){var a=b.bankInfo.selectBank,c=_.findWhere(b.defaultBanks,{id:a}).name;switch(a){case"other":b.bankInfo.bank="";break;default:b.bankInfo.bank=c}},b.modalConfirm=function(){g()},b.modalConfirmClose=function(){c.hide()},b.verifyCode={time:120,maxTime:120,send:function(){var a=this;a.time-=1,e.sendVerifyCode().success(function(b){b.success?(Tip.message("验证码发送成功"),a.timer.run()):(a.time=a.maxTime,Tip.message(b.errorMsg,"error"))}).error(function(b){Tip.message("获取验证码异常","error"),a.time=a.maxTime})},timer:{run:function(){var a=b.verifyCode;a.time-=1,a.time<=0?a.time=a.maxTime:d(a.timer.run,1e3)}}},f()}]).service("BankInfoService",["HmsHttp",function(a){var b=contentPath+"/bank/";return{find:function(){var c="find";return a.post(b+c)},save:function(c,d,e,f,g,h){var i="save",j={name:c,account:d,bank:e,bankBranch:f,transferType:g,verifyCode:h};return a.post(b+i,j)},sendVerifyCode:function(){var c="verifyCode";return a.post(b+c)}}}]).service("BillService",["HmsHttp",function(a){var b=contentPath+"/bill/";return{isFreeze:function(){var c="isFreeze";return a.post(b+c)},preCalAccount:function(){var c=$("#threshold");c.attr("disabled","disabled");var d="preCalAccount";return a.post(b+d)}}}]),angular.module("messageApp",["mgcrea.ngStrap.select","hmsAngularLib"]).controller("messageController",["$rootScope","$scope","HmsHttp","$timeout","$location","HmsModalService","HotelService",function(a,b,c,d,e,f,g){function h(){c.post(contentPath+"/hotelmessage/getThisHotelGroup",{hotelId:a.thisHotel.id}).success(function(a){b.group=a}).error(function(a){Tip.message("获取当前酒店分组信息异常","error")})}function i(){c.post(contentPath+"/roomtype/findsByHotelId",{hotelId:a.thisHotel.id}).success(function(a){o=a,b.hotelNav.roomType.item=j(a),b.hotelNav.roomPrice.item=k(a)}).error(function(a){Tip.message("获取房型数据失败","error")})}function j(a){var b=[];return _.each(a,function(a){b.push({displayName:a.name,view:"/message/roomInfo/"+a.id})}),b}function k(a){var b=[];return _.each(a,function(a){b.push({displayName:a.name,view:"/message/roomPrice/"+a.id})}),b}function l(a){e.path(a.view)}b.ctrlMode=a.ctrlMode?a.ctrlMode:"default",b.readOnly="edit"==b.ctrlMode||"check"==b.ctrlMode?!1:a.readOnly?a.readOnly:!0,b.editDisabled=!1;var m=a.group,n=a.user;m&&m.regphone!=n.loginname&&(b.editDisabled=!0),b.pmsUserEdit=!1,"undefined"!=typeof isCheckUser&&isCheckUser&&(b.pmsUserEdit=!0),b.hotelNav={hotelInfo:{displayName:"酒店资料",item:[{displayName:"酒店描述",view:"/message/hotelInfo"},{displayName:"酒店设施",view:"/message/hotelFac"},{displayName:"交通",view:"/message/hotelTraffic"},{displayName:"照片",view:"/message/hotelPic"},{displayName:"周边(选填)",view:"/message/hotelPeripheral"},{displayName:"营业执照及身份证",view:"/message/hotelRegPhoto"}]},roomType:{displayName:"房型管理",item:[]},roomPrice:{displayName:"房价管理",item:[]},accountSetting:{displayName:"账期设置",item:[{displayName:"账期设置",view:"/message/accountSetting"}]},roomSetting:{displayName:"房间管理",item:[{displayName:"房间管理",view:"/message/roomSetting"}]}};var o=[];b.getRoomType=function(a){return _.findWhere(o,{id:parseInt(a)})},b.showItem=function(a){l(a)},b.selected=function(a){return e.path()==a.view},b.showfinish=function(){b.readOnly=!1,b.ctrlMode="edit"},b.ruleCodeDicts=[],b.showI2DimCode="B"==a.RULE_CODE,b.shwoBRuleI2DimCode=function(){return contentPath+"/images/showqrcode.png"},b.showRuleCode=!("undefined"!=typeof m&&"undefined"!=typeof n&&m.id&&m.id==n.groupid),b.showSetHotelRule=function(){function c(){f.show({contentTmpl:contentPath+"/main/message/template/hotel-rule.html",scope:b})}b.ruleCodeDicts.length>0?c():(a.hmsLoading.show(),g.findAreaRules().success(function(d){a.hmsLoading.hide(),d&&d.length>0?(b.ruleCodeDicts=d,c()):Tip.message("获取酒店规则失败","error")}).error(function(b){a.hmsLoading.hide(),console.log(b)}))},b.checkEHotel=function(){a.hmsLoading.show(),c.post(contentPath+"/hotelmessage/checkEHotel",{hotelId:a.thisHotel.id}).success(function(b){a.hmsLoading.hide(),b.success?(Tip.message("审核酒店信息成功"),e.path("/"),a.$broadcast("PMS_RELOAD",!0)):Tip.message(b.errorMsg,"error")}).error(function(b){Tip.message("审核酒店信息异常","error"),a.hmsLoading.hide()})},b.finish=function(){a.hmsLoading.show(),c.get(contentPath+"/hotelmessage/submitHotlInfo").success(function(b){a.hmsLoading.hide(),b.success?(Tip.message("提交酒店信息成功"),"edit"==a.ctrlMode&&(e.path("/"),a.$broadcast("PMS_RELOAD",!0))):Tip.message(b.errorMsg,"error")}).error(function(b){Tip.message("提交酒店信息异常","error"),a.hmsLoading.hide()})},b.isReloadHotelInfo=function(){c.get(contentPath+"/hotel/thisHotel").success(function(b){b.openTime=b.fmtOpenTime,b.repairTime=b.fmtRepairTime,a.thisHotel=b}).error(function(a){console.log("重新获取酒店信息异常")})},h(),i(),l(b.hotelNav.hotelInfo.item[0]),b.printI2DimCodes=function(){c.post(contentPath+"/i2dimcodes/printI2DimCodes").success(function(b){a.printI2dimCodes=b||[],jQuery("#hmsI2DimCodesModal").modal("show")}).error(function(a){Tip.message("获取酒店二维码数据失败","error")})},b.getPrintI2dimCodeUrl=function(a,b){return Print.getPrintI2dimCodeUrl(a,b)},b.goToPrintPage=function(c,d){Print.goToPrintPage(c,d,a.thisHotel.hotelName,b.printI2dimCodes)}}]).controller("hotelFacController",["$rootScope","$scope","HmsHttp","$location","HmsModalService",function(a,b,c,d,e){function f(){c.get(contentPath+"/hotel/facilies").success(function(a){b.tFacilityList=a.tFacilities||[],b.myTFacilityList=a.myTFacilities||[],b.oldTFacilityList=a.oldTFacilities||[],b.tFacilityListType1=[],b.tFacilityListType2=[],_.map(b.tFacilityList,function(a){_.map(b.myTFacilityList,function(b){a.id===b.facId&&(a.checked=!0)})}),_.map(b.tFacilityList,function(a){1===a.facType?b.tFacilityListType1.push(a):2===a.facType&&b.tFacilityListType2.push(a)})}).error(function(a){Tip.message("获取酒店设施数据失败","error")})}function g(a){var b=[];return angular.forEach(a,function(a,c){a.checked&&b.push(a.id)}),b}b.save=function(a){var d=a?"自动":"",e=g(b.tFacilityListType1),f=g(b.tFacilityListType2),h=e.concat(f);return c.post(contentPath+"/hotel/saveTFacilies",{tFaciliesString:h.join(",")}).success(function(a){a.success?(Tip.message(d+"保存完成！"),b.hotelFacForm&&b.hotelFacForm.$setPristine()):Tip.message(d+"保存数据失败","error")}).error(function(a){Tip.message(d+"保存酒店设施数据失败","error")})},f(),b.$on("$stateChangeStart",function(a){b.hotelFacForm.$dirty&&b.save(!0)}),b.printI2DimCodes=function(){c.post(contentPath+"/i2dimcodes/printI2DimCodes").success(function(b){a.printI2dimCodes=b||[],jQuery("#hmsI2DimCodesModal").modal("show")}).error(function(a){Tip.message("获取酒店二维码数据失败","error")})},b.getPrintI2dimCodeUrl=function(a,b){return Print.getPrintI2dimCodeUrl(a,b)},b.goToPrintPage=function(c,d){Print.goToPrintPage(c,d,a.thisHotel.hotelName,b.printI2dimCodes)}}]).controller("hotelInfoController",["$rootScope","$scope","HmsHttp","LocaltionService","InterfaceService",function(a,b,c,d,e){function f(){c.get(contentPath+"/hotel/bussinesszones").success(function(a){b.circleList=a.circleList||[],b.myCircleList=a.myCircleList||[],g(),b.subwayList=a.subwayList||[],b.subwayLineList=[],b.mySubwayList=a.mySubwayList||[],h(),b.universityList=a.universityList||[],b.myUniversityList=a.myUniversityList||[],i()}).error(function(a){Tip.message("获取酒店描述数据失败","error")})}function g(){_.map(b.circleList,function(a){_.map(b.myCircleList,function(b){a.id===b.id&&(a.isExit=!0)})})}function h(){_.map(b.subwayList,function(a){a.fatherid?_.map(b.mySubwayList,function(b){a.id===b.id&&(a.isExit=!0)}):b.subwayLineList.push(a)}),_.map(b.subwayLineList,function(a){_.map(b.mySubwayList,function(c){a.id===c.fatherid&&b.saveBussinesszonesData.subwayLineArray.push(a.id)})})}function i(){_.map(b.universityList,function(a){_.map(b.myUniversityList,function(b){a.id===b.id&&(a.isExit=!0)})})}function j(){_.map(b.subwayLineList,function(a){var c=!1;_.map(b.saveBussinesszonesData.subwayLineArray,function(b){b==a.id&&(a.isShow=!0,c=!0)}),c||(a.isShow=!1)})}function k(){f()}var l=a.thisHotel;b.yearList=DateUtils.getYearList(),b.timeList=DateUtils.getTimeList(),b.saveBussinesszonesData={openTime:l.openTime,repairTime:l.repairTime,begintime:DateUtils.getTime4HM(l.retentionTime||"000000"),endtime:DateUtils.getTime4HM(l.defaultLeaveTime||"000000"),introduction:l.introduction,subwayLineArray:[],hotelphone:a.thisHotel.hotelphone,hotelName:a.thisHotel.hotelName,hoteltype:a.thisHotel.hoteltype,qtphone:a.thisHotel.qtphone,pmsUser:a.thisHotel.pmsUser,detailAddr:a.thisHotel.detailAddr,longitude:a.thisHotel.longitude,latitude:a.thisHotel.latitude,_proObj:{code:a.thisHotel.provcode+""},_cityObj:{code:a.thisHotel.citycode+""},_disObj:{code:a.thisHotel.discode+"",id:a.thisHotel.disId},_areaObj:{areacode:(a.thisHotel.areacode||0)+"",name:a.thisHotel.areaname||""},form:"hotelInfoForm"},b.hotelTypeDicts=[{id:1,name:"旅馆"},{id:2,name:"主题酒店"},{id:3,name:"精品酒店"},{id:4,name:"公寓"},{id:5,name:"招待所"},{id:6,name:"客栈"}],b.clickCircleItem=function(a){_.map(b.circleList,function(b){b.id===a&&(b.isExit=b.isExit?!1:!0)})},b.clickSubwayItem=function(a,c){_.map(b.subwayList,function(b){b.fatherid===c&&(b.id===a?b.isExit=b.isExit?!1:!0:b.isExit=!1)})},b.clickUniversityItem=function(a){_.map(b.universityList,function(b){a===b.id&&(b.isExit=b.isExit?!1:!0)})},b.saveBussinesszones=function(d){var e=d?"自动":"";if(!b.saveBussinesszonesData.hotelName)return void Tip.message("请输入酒店名称","error");if(!b.saveBussinesszonesData.qtphone)return void Tip.message("请输入前台联系电话","error");if(!b.saveBussinesszonesData.hotelphone)return void Tip.message("请输入联系电话","error");if(!b.saveBussinesszonesData._proObj.code)return void Tip.message("请选择所在省","error");if(!b.saveBussinesszonesData._cityObj.code)return void Tip.message("请选择所在市","error");if(!b.saveBussinesszonesData._disObj.code)return void Tip.message("请选择所在区县","error");if(!b.saveBussinesszonesData._areaObj.areacode||"0"==b.saveBussinesszonesData._areaObj.areacode)return void Tip.message("请选择所在商圈","error");if(!b.saveBussinesszonesData.detailAddr)return void Tip.message("请输入酒店地址","error");if(b.saveBussinesszonesData.detailAddr.length>100)return void Tip.message("酒店地址至多只能输入100个字","error");if(!b.saveBussinesszonesData.longitude||!b.saveBussinesszonesData.latitude)return void Tip.message("请输入正确的酒店地址","error");if(b.saveBussinesszonesData.repairTime<b.saveBussinesszonesData.openTime)return void Tip.message("最近装修时间不能早用开业时间","error");if(b.saveBussinesszonesData.introduction&&b.saveBussinesszonesData.introduction.length>500)return void Tip.message("酒店描述至多只能输入500个字","error");if(!b.saveBussinesszonesData.openTime)return void Tip.message("请选择开业时间","error");if(!b.saveBussinesszonesData.repairTime)return void Tip.message("请选择装修时间","error");if(!b.saveBussinesszonesData.hoteltype)return void Tip.message("请选择酒店类型","error");b.saveBussinesszonesData.disId=b.saveBussinesszonesData._disObj.id,b.saveBussinesszonesData.provcode=b.saveBussinesszonesData._proObj.code,b.saveBussinesszonesData.citycode=b.saveBussinesszonesData._cityObj.code,b.saveBussinesszonesData.discode=b.saveBussinesszonesData._disObj.code,b.saveBussinesszonesData.areacode=b.saveBussinesszonesData._areaObj.areacode,b.saveBussinesszonesData.areaname=b.saveBussinesszonesData._areaObj.name;var f=[];_.map(b.circleList,function(a){a.isExit&&f.push(a)}),b.saveBussinesszonesData.circleList=angular.toJson(f);var g=[];_.map(b.subwayList,function(a){a.isExit&&g.push(a)}),b.saveBussinesszonesData.subwayList=angular.toJson(g);var h=[];_.map(b.universityList,function(a){a.isExit&&h.push(a)}),b.saveBussinesszonesData.universityList=angular.toJson(h),b.saveBussinesszonesData.subwayLineArray=null,c.post(contentPath+"/hotel/saveBussinesszones",b.saveBussinesszonesData).success(function(c){c.success?(Tip.message(e+"保存成功"),b.hotelInfoForm&&b.hotelInfoForm.$setPristine(),b.$parent.isReloadHotelInfo(),a.thisHotel.detailAddr=b.saveBussinesszonesData.detailAddr,a.thisHotel.longitude=b.saveBussinesszonesData.longitude,a.thisHotel.latitude=b.saveBussinesszonesData.latitude,a.thisHotel.disId=b.saveBussinesszonesData.disId,a.thisHotel.hoteltype=b.saveBussinesszonesData.hoteltype,a.thisHotel.qtphone=b.saveBussinesszonesData.qtphone,a.thisHotel.provcode=b.saveBussinesszonesData.provcode,a.thisHotel.citycode=b.saveBussinesszonesData.citycode,a.thisHotel.discode=b.saveBussinesszonesData.discode,a.thisHotel.areacode=b.saveBussinesszonesData.areacode,a.thisHotel.areaname=b.saveBussinesszonesData.areaname,a.thisHotel.openTime=b.saveBussinesszonesData.openTime,a.thisHotel.repairTime=b.saveBussinesszonesData.repairTime,a.thisHotel.pmsUser=b.saveBussinesszonesData.pmsUser):Tip.message(c.errorMsg,"error")}).error(function(a){Tip.message(e+"保存酒店描述数据失败","error")})},k(),b.$watch("saveBussinesszonesData.subwayLineArray",function(a){a&&j()},!0),b.$on("$stateChangeStart",function(a){b.hotelInfoForm.$dirty&&b.saveBussinesszones(!0)}),b.refreshRoomOnlineState=function(){e.refreshRoomOnlineState(b,a.thisHotel.id)}}]).controller("hotelTrafficController",["$rootScope","$scope","HmsHttp",function(a,b,c){b.trafficObj=JSON.parse(a.thisHotel.traffic||"{}"),b.oldtrafficObj=JSON.parse(a.thisHotel.traffic||"{}"),b.trafficMapUrl=contentPath+"/main/plug-in/gaode/gaodeMapTools.html"+hmsVersionPath,jQuery("#traffic-map").load(function(){this.contentWindow&&this.contentWindow.parentH&&(this.contentWindow.parentH=b),b.setTrafficInfos(this)}),b.setTrafficInfos=function(c){c.contentWindow.placeSearch([a.thisHotel.longitude,a.thisHotel.latitude],2e3,"地铁站",b.metroCallback),c.contentWindow.placeSearch([a.thisHotel.longitude,a.thisHotel.latitude],2e3,"公交站",b.busCallback)},b.metroCallback=function(a){if(a&&a.length&&!b.trafficObj.metro){for(var c="",d=Math.min(a.length,5),e=0;d>e;e++){var f=a[e];c+=f.address+"-"+f.name+"\r\n"}b.trafficObj.metro=c,b.$digest()}},b.busCallback=function(a){if(a&&a.length&&!b.trafficObj.bus){for(var c="",d=Math.min(a.length,5),e=0;d>e;e++){var f=a[e];c+=f.address+"-"+f.name+"\r\n"}b.trafficObj.bus=c,b.$digest()}},b.saveTraffic=function(d){var e=d?"自动":"",f=_.values(b.oldtrafficObj),g=_.values(b.trafficObj),h=!1;return(h=_.difference(f,g).length>0?!0:_.difference(g,f).length>0?!0:!1)?void c.post(contentPath+"/hotel/saveTraffic",{metro:b.trafficObj.metro,airport:b.trafficObj.airport,bus:b.trafficObj.bus,taxi:b.trafficObj.taxi}).success(function(c){c.success&&(Tip.message(e+"保存成功"),b.hotelTrafficForm&&b.hotelTrafficForm.$setPristine(),b.oldtrafficObj=_.clone(b.trafficObj),a.thisHotel.traffic=angular.toJson(b.trafficObj))}).error(function(a){Tip.message(e+"保存数据失败","error")}):void Tip.message("数据没有改变，无需保存","error")},b.$on("$stateChangeStart",function(a){b.hotelTrafficForm.$dirty&&b.saveTraffic(!0)})}]).controller("hotelPicController",["$rootScope","$scope","HmsHttp","HmsUploadService",function(a,b,c,d){function e(){var c=JSON.parse(a.thisHotel.hotelpic||"[]");if(c.length)for(var d=0;d<c.length;d++){var e=c[d];switch(e.name){case"def":f(e,b.defImg);break;case"lobby":f(e,b.lobbyImg);break;case"mainHousing":f(e,b.mainHousingImg)}}b.recordImgDataForCompare()}function f(a,b){for(var c=a.pic||[],e=0;e<c.length;e++){var f=c[e].url;b.previews.push(f),b.keys.push(f.replace(d.publicDownloadUrl+"/",""))}}function g(){for(var a=[],c=0;c<b.defImg.previews.length;c++)a.push({url:b.defImg.previews[c]});for(var d=[],c=0;c<b.lobbyImg.previews.length;c++)d.push({url:b.lobbyImg.previews[c]});for(var e=[],c=0;c<b.mainHousingImg.previews.length;c++)e.push({url:b.mainHousingImg.previews[c]});return[{name:"def",pic:a},{name:"lobby",pic:d},{name:"mainHousing",pic:e}]}b.delHotelInfoPic=function(a,b,c){if(confirm("确认删除照片？"))for(var d=0;d<a.keys.length;d++)b==a.keys[d]&&(a.keys.baoremove(d),a.previews.baoremove(d))},b.save=function(b){var d=g();if(d[0].pic.length<=0)return void(b&&Tip.message("请上传门头及招牌","error"));var e={pics:angular.toJson(d)};c.post(contentPath+"/hotelmessage/saveHotelInfoPic",e).success(function(c){a.thisHotel.hotelpic=e.pics,b&&Tip.message("保存成功")}).error(function(a){b&&Tip.message("上传失败","error")})},b.defImg={btnName:"选择照片",keys:[],previews:[],MaxUploadNum:1,maxItemSize:10485760,fileTypes:"|jpg|jpeg|png|",customV1:"def"},b.lobbyImg={btnName:"选择照片",keys:[],previews:[],MaxUploadNum:3,maxItemSize:10485760,fileTypes:"|jpg|jpeg|png|",customV1:"lobby"},b.mainHousingImg={btnName:"选择照片",keys:[],previews:[],MaxUploadNum:3,maxItemSize:10485760,fileTypes:"|jpg|jpeg|png|",customV1:"mainHousing"},b.$on("$stateChangeStart",function(a){b.compareImgData()||b.save(!1)}),b.recordImgDataForCompare=function(){b.srcDefPreviews=b.defImg.previews.concat([]),b.srcLobbyPreviews=b.lobbyImg.previews.concat([]),b.srcMainHousingPreviews=b.mainHousingImg.previews.concat([])},b.compareImgData=function(){return _.difference(b.srcDefPreviews,b.defImg.previews).length||_.difference(b.defImg.previews,b.srcDefPreviews).length?!1:_.difference(b.srcLobbyPreviews,b.lobbyImg.previews).length||_.difference(b.lobbyImg.previews,b.srcLobbyPreviews).length?!1:_.difference(b.srcMainHousingPreviews,b.mainHousingImg.previews).length||_.difference(b.mainHousingImg.previews,b.srcMainHousingPreviews).length?!1:!0},e()}]).controller("hotelPeripheralController",["$rootScope","$scope","HmsHttp",function(a,b,c){b.peripheralObj=JSON.parse(a.thisHotel.peripheral||"{}"),b.oldPeripheralObj=JSON.parse(a.thisHotel.peripheral||"{}"),b.peripheralMapUrl=contentPath+"/main/plug-in/gaode/gaodeMapTools.html"+hmsVersionPath,jQuery("#peripheral-map").load(function(){this.contentWindow&&this.contentWindow.parentH&&(this.contentWindow.parentH=b),b.setTrafficInfos(this)}),b.setTrafficInfos=function(c){c.contentWindow.placeSearch([a.thisHotel.longitude,a.thisHotel.latitude],2e3,"餐饮",b.restaurantCallback),c.contentWindow.placeSearch([a.thisHotel.longitude,a.thisHotel.latitude],2e3,"景点",b.scenicSpotCallback)},b.restaurantCallback=function(a){if(a&&a.length&&!b.peripheralObj.restaurant){for(var c="",d=Math.min(a.length,5),e=0;d>e;e++){var f=a[e];c+=f.name+"-"+f.address+"\r\n"}b.peripheralObj.restaurant=c,b.$digest()}},b.scenicSpotCallback=function(a){if(a&&a.length&&!b.peripheralObj.scenicSpot){for(var c="",d=Math.min(a.length,5),e=0;d>e;e++){var f=a[e];c+=f.name+"-"+f.address+"\r\n"}b.peripheralObj.scenicSpot=c,b.$digest()}},b.savePeriphera=function(d){var e=d?"自动":"",f=_.values(b.oldPeripheralObj),g=_.values(b.peripheralObj),h=!1;h=_.difference(f,g).length>0?!0:_.difference(g,f).length>0?!0:!1,h&&c.post(contentPath+"/hotel/savePeripheral",{restaurant:b.peripheralObj.restaurant,scenicSpot:b.peripheralObj.scenicSpot,others:b.peripheralObj.others}).success(function(c){c.success&&(Tip.message(e+"保存成功"),b.hotelPeripheraForm&&b.hotelPeripheraForm.$setPristine(),b.oldPeripheralObj=_.clone(b.peripheralObj),a.thisHotel.peripheral=angular.toJson(b.peripheralObj))}).error(function(a){Tip.message(e+"保存数据失败","error")})},b.$on("$stateChangeStart",function(a){b.hotelPeripheraForm.$dirty&&b.savePeriphera(!0)})}]).controller("roomInfoController",["$rootScope","$scope","HmsHttp","$timeout","HmsUploadService",function(a,b,c,d,e){function f(){c.post(contentPath+"/roomtype/findFacilities",{}).success(function(a){b.roomTypeNormalFacilities=a.normal,b.roomTypeOtherFacilities=a.other,b.roomTypeBathroomFacilities=a.bathroom,s&&(i(b.roomTypeNormalFacilities),i(b.roomTypeOtherFacilities),i(b.roomTypeBathroomFacilities,!0)),r=!0}).error(function(a){Tip.message("获取房型信息失败","error")})}function g(){for(var a=[],c=0;c<b.defImg.previews.length;c++)a.push({url:b.defImg.previews[c]});for(var d=[],c=0;c<b.bedImg.previews.length;c++)d.push({url:b.bedImg.previews[c]});for(var e=[],c=0;c<b.toiletImg.previews.length;c++)e.push({url:b.toiletImg.previews[c]});return[{name:"def",pic:a},{name:"bed",pic:d},{name:"toilet",pic:e}]}function h(a){var b=[];return angular.forEach(a,function(a,c){a.isExit&&b.push(a.id)}),b}function i(a,b){if(angular.forEach(a,function(a,b){a.isExit=m(a.id)}),b){var c=!1;_.map(a,function(a){a.isExit&&(c=!0)}),!c&&a.length>0&&(a[0].isExit=!0)}}function j(a){for(var c=JSON.parse(b.roomTypeInfo.pics?b.roomTypeInfo.pics:"[]"),d=0;d<c.length;d++){var e=c[d];switch(e.name){case"def":k(e,b.defImg);break;case"bed":k(e,b.bedImg);break;case"toilet":k(e,b.toiletImg)}}}function k(a,b){for(var c=a.pic||[],d=0;d<c.length;d++){var f=c[d].url;b.previews.push(f),b.keys.push(f.replace(e.publicDownloadUrl+"/",""))}}function l(a){var c=[];return angular.forEach(b.roomTypeInfo.facilities,function(a,b){c.push(a.facId)}),c}function m(a){var c=!1;return angular.forEach(b.roomTypeInfo.facilities,function(b,d){return b.facId==a?void(c=!0):void 0}),c}function n(a){var c=a?a.split(","):[];b.bedSize=[],_.forEach(c,function(a,c){var d=_.find(b.sizeTypes,function(b){return b.id==a});d&&b.bedSize.push({id:a})}),t=!0}function o(){a.hmsLoading.show(),c.post(contentPath+"/roomtype/findByRoomtypeId",{roomTypeId:q}).success(function(c){b.roomTypeInfo=c,n(b.roomTypeInfo.bedSize),j(),b.recordImgDataForCompare(),r&&(i(b.roomTypeNormalFacilities),i(b.roomTypeOtherFacilities),i(b.roomTypeBathroomFacilities,!0)),s=!0,a.hmsLoading.hide()}).error(function(b){a.hmsLoading.hide(),Tip.message("获取房型信息失败","error")})}function p(){o(),f()}var q=a.$stateParams.id;b.roomType=b.getRoomType(q);var r=!1,s=!1,t=!1;b.bedTypes=[{id:1,name:"单床房",bedCount:1},{id:2,name:"双床房",bedCount:2},{id:3,name:"其它",bedCount:3}],b.sizeTypes=[{id:"",name:"----"},{id:"2.20",name:"2.20m"},{id:"2.00",name:"2.00m"},{id:"1.80",name:"1.80m"},{id:"1.50",name:"1.50m"},{id:"1.35",name:"1.35m"},{id:"1.20",name:"1.20m"},{id:"1.00",name:"1.00m"}],b.bedSize=[{id:""}],b.defImg={btnName:"选择照片",keys:[],previews:[],MaxUploadNum:1,maxItemSize:10485760,fileTypes:"|jpg|jpeg|png|",customV1:"def"},b.bedImg={btnName:"选择照片",keys:[],previews:[],MaxUploadNum:3,maxItemSize:10485760,fileTypes:"|jpg|jpeg|png|",customV1:"def"},b.toiletImg={btnName:"选择照片",keys:[],previews:[],MaxUploadNum:3,maxItemSize:10485760,fileTypes:"|jpg|jpeg|png|",customV1:"def"},b.delHotelInfoPic=function(a,b){if(confirm("确认删除照片？"))for(var c=0;c<a.keys.length;c++)b==a.keys[c]&&(a.keys.baoremove(c),a.previews.baoremove(c))},b.selectedBathroomFacilities=function(a){var c=!1;_.map(b.roomTypeBathroomFacilities,function(b){b.id==a&&b.isExit?c=!0:b.isExit=!1}),c||_.map(b.roomTypeBathroomFacilities,function(b){b.id==a&&(b.isExit=!0)})},b.save=function(a){var d=a?"自动":"";if(b.roomTypeInfo.bedType){var e=[];if(_.forEach(b.bedSize,function(a){a.id&&e.push(a.id)}),e.length<=0)return void Tip.message("未设置床的尺寸","error");if(!b.defImg.previews||0==b.defImg.previews.length)return void Tip.message("未上传主展图","error");if(!b.roomTypeInfo.maxArea)return void Tip.message("房间面积不可为空","error");var f=parseFloat(b.roomTypeInfo.maxArea);if(_.isNaN(f)||0>f)return b.roomTypeInfo.maxArea="",void Tip.message("房间面积只能输入有效数字","error");b.roomTypeInfo.maxArea=f,b.roomTypeInfo.bedSize=e.join(",");var i=h(b.roomTypeNormalFacilities),j=h(b.roomTypeOtherFacilities),k=h(b.roomTypeBathroomFacilities),m=i.concat(j,k),n=l(),p=_.difference(m,n),r=_.difference(n,m),s={roomTypeId:q,maxArea:b.roomTypeInfo.maxArea,bedType:b.roomTypeInfo.bedType,bedSize:b.roomTypeInfo.bedSize,pics:angular.toJson(g()),addFacs:p.join(","),minusFacs:r.join(",")};return b.roomTypeInfo.id&&(s.id=b.roomTypeInfo.id),void c.post(contentPath+"/roomtype/save",s).success(function(a){Tip.message(d+"保存成功"),b.roomInfoForm&&b.roomInfoForm.$setPristine(),b.defImg.previews=[],b.defImg.keys=[],b.bedImg.previews=[],b.bedImg.keys=[],b.toiletImg.previews=[],b.toiletImg.keys=[],o()}).error(function(a){Tip.message(d+"保存失败","error")})}return void Tip.message("请选择床型","error")},b.$watch("roomTypeInfo.bedType",function(a){if(a){var c=_.findWhere(b.bedTypes,{id:a}),d=c?c.bedCount:1;if(b.bedSize.length==d)return;t?t=!1:b.bedSize=[];for(var e=[],f=0;d>f;f++){var g=b.bedSize[f]?b.bedSize[f].id:"";e.push({id:g})}b.bedSize=e}}),p(),b.$on("$stateChangeStart",function(a){(b.roomInfoForm.$dirty||!b.compareImgData())&&b.save(!0)}),b.recordImgDataForCompare=function(){b.srcDefPreviews=b.defImg.previews.concat([]),b.srcBedPreviews=b.bedImg.previews.concat([]),b.srcToiletPreviews=b.toiletImg.previews.concat([])},b.compareImgData=function(){return _.difference(b.srcDefPreviews,b.defImg.previews).length||_.difference(b.defImg.previews,b.srcDefPreviews).length?!1:_.difference(b.srcBedPreviews,b.bedImg.previews).length||_.difference(b.bedImg.previews,b.srcBedPreviews).length?!1:_.difference(b.srcToiletPreviews,b.toiletImg.previews).length||_.difference(b.toiletImg.previews,b.srcToiletPreviews).length?!1:!0}}]).controller("roomPriceController",["$rootScope","$scope","HmsHttp",function(a,b,c){function d(){i=0,b.subperPrice=b.roomType.cost,b.priceType="price",b.price={price:0,subper:0,subprice:0}}function e(a){i=a.id,b.subperPrice=b.roomType.cost,_.each(["price","subper","subprice"],function(c){var d=a[c];d>0&&(b.priceType=c,"subper"==c&&(d*=100)),b.price[c]=d})}function f(){a.hmsLoading.show(),c.post(contentPath+"/roomtype/findBasePrice",{roomTypeId:j}).success(function(b){_.isEmpty(b)?d():e(b),a.hmsLoading.hide()}).error(function(b){a.hmsLoading.hide(),Tip.message("获取房型信息失败","error")})}function g(a){a=_.isNumber(a)?Math.ceil(a):0,b.subperPrice=Math.ceil((100-a)*b.roomType.cost/100)}function h(a){a=_.isNumber(a)?Math.ceil(a):0,b.subperPrice=Math.ceil(b.roomType.cost-a)}var i,j=a.$stateParams.id;b.roomType=b.getRoomType(j),b.subperPrice=0,b.priceType="price",b.price={price:0,subper:0,subprice:0},b.save=function(a){var d=a?"自动":"";if(!_.isNumber(b.price[b.priceType]))return b.price[b.priceType]=0,void Tip.message("请输入数字","error");var e={roomTypeId:b.roomType.id,type:b.priceType,value:b.price[b.priceType]};return e.value<=0?(b.price[b.priceType]=0,void Tip.message("请输入大于0的数字","error")):"subper"==e.type&&e.value>=100?(b.price.subper=0,void Tip.message("下浮比例不能大于100","error")):"subprice"==e.type&&e.value>=b.roomType.cost?(b.price.subprice=0,void Tip.message("下浮金额不能大于门市价","error")):"price"==e.type&&e.value>b.roomType.cost?(b.price.price=b.roomType.cost,
void Tip.message("固定金额不能大于门市价","error")):(e.value=Math.ceil(e.value),b.price[e.type]=e.value,"subper"==e.type&&(e.value/=100),void c.post(contentPath+"/roomtype/saveBasePrice",e).success(function(a){Tip.message(d+"保存成功"),b.roomPriceForm&&b.roomPriceForm.$setPristine()}).error(function(a){Tip.message(d+"保存失败","error")}))},b.$watch("price.subper",function(a){g(a)}),b.$watch("price.subprice",function(a){h(a)}),b.$watch("priceType",function(a){"subper"==a?g(b.price[a]):"subprice"==a&&h(b.price[a])}),f(),b.$on("$stateChangeStart",function(a){b.roomPriceForm.$dirty&&b.save(!0)})}]).controller("HotelRuleController",["$rootScope","$scope","HmsModalService","HotelService",function(a,b,c,d){function e(){a.thisHotel.rulecode=b.ruleCode}function f(){var f=b.ruleCode;return!f||f.length<=0?void Tip.message("请选择酒店规则","error"):f===a.thisHotel.rulecode?void Tip.message("酒店规则没有修改,不需要保存","error"):(a.hmsLoading.show(),void d.saveHotelRule(f).success(function(b){a.hmsLoading.hide(),b.success?(c.hide(),e(),Tip.message("设置成功")):Tip.message(b.errorMsg,"error")}).error(function(b){a.hmsLoading.hide(),Tip.message("设置失败！")}))}a.thisHotel.rulecode?b.ruleCode=a.thisHotel.rulecode:b.ruleCode=1002,b.modalConfirm=function(){f()},b.modalConfirmClose=function(){c.hide()}}]).controller("AccountSettingController",["$rootScope","$scope","HotelService",function(a,b,c){function d(){b.isThreshold="Y"==b.isThreshold?"N":"Y"}function e(a){a&&(b.isThreshold=a.isThreshold,b.isHold=a.ishold)}function f(){a.hmsLoading.show(),c.getIsholdAndStatus().success(function(b){a.hmsLoading.hide(),e(b)}).error(function(b){e(),a.hmsLoading.hide()})}function g(){a.hmsLoading.show(),c.setHotelThreshold(b.isThreshold).success(function(b){a.hmsLoading.hide(),b.success?(setHotel(),Tip.message("设置成功")):(d(),Tip.message(b.errorMsg,"error"))}).error(function(b){d(),a.hmsLoading.hide(),Tip.message("设置失败！")})}b.isThreshold="N",b.isHold=!1,b.setThreshold=function(){b.isThreshold="Y"==b.isThreshold?"N":"Y",g()},f()}]).directive("hmsAffix",function(){return function(a,b,c){b.css({width:b.width(),top:"0px",marginTop:"0px",paddingTop:"10px",zIndex:999,background:"#fff",opacity:.9}),$(b).affix({offset:{top:b.offset().top?b.offset().top:200}}).on("affix.bs.affix",function(a){$(this).css({borderBottom:"1px solid #f0f0f0"}),$(this).parent().css({paddingTop:$(this).outerHeight()})}).on("affix-top.bs.affix",function(a){$(this).css({borderBottom:"none"}),$(this).parent().css({paddingTop:0})})}}).directive("hmsLoading",function(){return{restrict:"AE",replace:!0,template:'<div style="width:100%;height:100%;position:absolute;top:0;left:0;z-index:9999;"><div class="text-center" style="width:100%;height:50px;position:fixed;margin:auto;top:50%;margin-top:-25px;" class="text-center"><i class="fa fa-spinner fa-pulse fa-3x fa-fw text-primary"></i></div></div>',link:function(a,b,c,d){}}}).service("HotelService",["HmsHttp",function(a){var b=contentPath+"/hotelmessage/";return{findAreaRules:function(){var c="findAreaRule";return a.post(b+c)},saveHotelRule:function(c){var d="saveHotelRule",e={ruleCode:c};return a.post(b+d,e)},getIsholdAndStatus:function(){var c="getIsholdAndStatus";return a.get(b+c)},setHotelThreshold:function(c){var d="setHotelThreshold",e={isThreshold:c};return a.post(b+d,e)}}}]).controller("roomSetingController",["$rootScope","$scope","$http",function(a,b,c){function d(){a.hmsLoading.show();var d=b.getSelectCondition();return d?void c.post(contentPath+"/roomsetting/finds",d).success(function(c){c&&c.data&&(b.roomTypeList=c.data,b.page.totalItems=c.total,b.checkBoxAll.allTick=!1),a.hmsLoading.hide()}).error(function(b){a.hmsLoading.hide(),Tip.message("获取房型列表失败","error")}):void Tip.message("获取房间信息失败","error")}b.page={totalItems:0,currentPage:1,pageCount:10,numPages:1,maxSize:5,currentGoPage:""},b.isActive=1,b.isDisabled=!0,b.isSelect=!1,b.isSettingMoreRoomtype=!1,b.readOnly=!0,b.roomTypes=[{id:"",name:"全部"}],b.roomSetting={roomtypeid:"",roomtypename:"",roomno:"",bedtypename:"",roomdirection:"",roomfloor:"",iswindow:"",isstair:"",iselevator:"",isstreet:"",valid:"1"};var e=[{field:"roomTypeName",displayName:"房型",width:"20%"},{field:"roomNo",displayName:"房间号",width:"15%"},{field:"bedTypeName",displayName:"床型",width:"20%"},{field:"roomNo",displayName:"是否设置房间信息",width:"20%"}];b.roomSettingSelectObj={roomtypeid:"",bedtypename:"",pageNum:b.page.currentPage,pageSize:b.page.pageCount},b.roomTypeList=[],b.columns=e,b.init=function(){b.selectRoomTypeOption(),b.setSelectCondition(),d()},b.pageChanged=function(){b.setSelectCondition(),d()},b.pageGoQiantai=function(){var a=/^[0-9]*[1-9][0-9]*$/,c=new RegExp(a);return null==b.page.currentGoPage.match(c)||b.page.currentGoPage>Math.ceil(b.page.totalItems/b.page.pageCount)?void(b.page.currentGoPage=""):void(b.page.currentGoPage&&(b.page.currentPage=b.page.currentGoPage,b.page.currentGoPage="",b.pageChanged()))},b.selectRoomTypeOption=function(){var d="";d="undefined"==typeof thisHotel?a.thisHotel.id:thisHotel.id;var e={hotelId:d};c.post(contentPath+"/roomtype/findsByHotelId",e).success(function(a){a&&(b.roomTypes=_.union(b.roomTypes,a))}).error(function(b){a.hmsLoading.hide(),Tip.message("获取房型信息失败","error")})},b.selectOrSettingRoomSetting=function(d){b.roomSetting={roomtypeid:"",roomtypename:"",roomno:"",bedtypename:"",roomdirection:"",roomfloor:"",iswindow:"",isstair:"",iselevator:"",isstreet:"",valid:"1"},a.hmsLoading.show();var e=[];if(d)e.push(d);else for(var f=b.roomTypeList,g=0;g<f.length;g++){var h=f[g];h.tick&&e.push(h)}e.length>1?b.isSettingMoreRoomtype=!0:b.isSettingMoreRoomtype=!1;var i={roomTypeList:JSON.stringify(e)};c.post(contentPath+"/roomsetting/sets",i).success(function(c){c&&c.success&&(b.roomSetting=c.attribute),a.hmsLoading.hide()}).error(function(b){a.hmsLoading.hide(),Tip.message("查看房间信息失败","error")})},b.selectRoomTypeListBefore=function(){b.setSelectCondition(),d()},b.saveRoomSettingList=function(){if(!this.checkRoomType())return void Tip.message("【是否有窗】选项必须填写！","error");if(!this.checkRoomRoomfloor())return void Tip.message("楼层不能超过20位字符！","error");a.hmsLoading.show();var d={setting:JSON.stringify(b.roomSetting)};c.post(contentPath+"/roomsetting/saveRoomSetting",d).success(function(b){b&&b.success?Tip.message(b.context):b&&!b.success&&Tip.message(b.errorMsg),a.hmsLoading.hide()}).error(function(b){a.hmsLoading.hide();var c="保存失败";b.errorMsg&&(c=b.errorMsg),Tip.message(c,"error")})},b.checkRoomType=function(){return b.roomSetting.iswindow&&""!=b.roomSetting.iswindow?!0:!1},b.checkRoomRoomfloor=function(){return b.roomSetting.roomfloor&&b.roomSetting.roomfloor.length>20?!1:!0},b.checkBoxAll={allTick:!1},b.afterAllTick=function(){for(var a=0;a<b.roomTypeList.length;a++){var c=b.roomTypeList[a];b.checkBoxAll.allTick?c.tick=!0:c.tick=!1}},b.afterTick=function(){for(var a=0;a<b.roomTypeList.length;a++){var c=b.roomTypeList[a];if(!c.tick)return void(b.checkBoxAll.allTick=!1)}b.checkBoxAll.allTick=!0},b.settingBack=function(){b.isActive=1,b.readOnly=!0},b.setSettingBack=function(){b.isActive=1,b.readOnly=!0,d()},b.settingRoom=function(){function a(){for(var a=!1,d="",e=b.roomTypeList,f=0,g=0;g<e.length;g++){var h=e[g];h.tick&&0==f&&(f++,d=h.roomtypeid),h.tick&&(d!=h.roomtypeid&&(c=!1),a=!0)}return a?!0:!1}var c=!0;return a()?void((c||confirm("确认设置多个房型数据?"))&&(b.isActive=2,b.isSelect=!1,b.readOnly=!1,b.selectOrSettingRoomSetting())):void Tip.message("请选中需要设置房型数据","error")},b.setSelectCondition=function(){b.roomSettingSelectObjContext={roomtypeid:b.roomSettingSelectObj.roomtypeid,bedtypename:b.roomSettingSelectObj.bedtypename,pageNum:b.page.currentPage,pageSize:b.page.pageCount}},b.getSelectCondition=function(){return b.roomSettingSelectObjContext},b.selectRoom=function(a){b.isActive=2,b.readOnly=!0,b.isSelect=!0,b.selectOrSettingRoomSetting(a)},b.init()}]).controller("hotelRegPhotoController",["$rootScope","$scope","HmsHttp","HmsUploadService",function(a,b,c,d){function e(){f.businessLicenseFront&&(b.licenseImg.keys.push(f.businessLicenseFront.replace(d.publicDownloadUrl+"/","")),b.licenseImg.previews.push(f.businessLicenseFront)),f.idCardFront&&(b.idCardFrontImg.keys.push(f.idCardFront.replace(d.publicDownloadUrl+"/","")),b.idCardFrontImg.previews.push(f.idCardFront)),f.idCardBack&&(b.idCardBackImg.keys.push(f.idCardBack.replace(d.publicDownloadUrl+"/","")),b.idCardBackImg.previews.push(f.idCardBack)),b.recordImgDataForCompare()}var f=a.thisHotel;b.licenseImg={btnName:"选择照片",keys:[],previews:[],MaxUploadNum:1,maxItemSize:10485760,fileTypes:"|jpg|jpeg|png|"},b.idCardFrontImg={btnName:"选择照片",keys:[],previews:[],MaxUploadNum:1,maxItemSize:10485760,fileTypes:"|jpg|jpeg|png|"},b.idCardBackImg={btnName:"选择照片",keys:[],previews:[],MaxUploadNum:1,maxItemSize:10485760,fileTypes:"|jpg|jpeg|png|"},b.delHotelRegPic=function(a,b,c){if(confirm("确认删除照片？"))for(var d=0;d<a.keys.length;d++)b==a.keys[d]&&(a.keys.baoremove(d),a.previews.baoremove(d))},b.save=function(d){b.licenseImg.previews[0]||b.idCardFrontImg.previews[0]&&b.idCardBackImg.previews[0]?c.post(contentPath+"/qiniu/updateHotelCredentialsPic",{businessLicenseFront:b.licenseImg.previews[0]||"",idCardFront:b.idCardFrontImg.previews[0]||"",idCardBack:b.idCardBackImg.previews[0]||""}).then(function(c){var e=c.data;e.success?(d&&Tip.message("酒店证照添加成功"),a.thisHotel.businessLicenseFront=b.licenseImg.previews[0],a.thisHotel.idCardFront=b.idCardFrontImg.previews[0],a.thisHotel.idCardBack=b.idCardBackImg.previews[0]):d&&Tip.message(e.errorMsg,"error")},function(a){d&&Tip.message("酒店证照添加异常","error")}):d&&Tip.message("请上传营业执照或身份证照片","error")},b.$on("$stateChangeStart",function(a){b.compareImgData()||b.save(!1)}),b.recordImgDataForCompare=function(){b.srcLicensePreviews=b.licenseImg.previews.concat([]),b.srcIdCardFrontPreviews=b.idCardFrontImg.previews.concat([]),b.srcIdCardBackPreviews=b.idCardBackImg.previews.concat([])},b.compareImgData=function(){return _.difference(b.srcLicensePreviews,b.licenseImg.previews).length||_.difference(b.licenseImg.previews,b.srcLicensePreviews).length?!1:_.difference(b.srcIdCardFrontPreviews,b.idCardFrontImg.previews).length||_.difference(b.idCardFrontImg.previews,b.srcIdCardFrontPreviews).length?!1:_.difference(b.srcIdCardBackPreviews,b.idCardBackImg.previews).length||_.difference(b.idCardBackImg.previews,b.srcIdCardBackPreviews).length?!1:!0},e()}]),angular.module("userApp",[]).controller("userController",["$rootScope","$scope","HmsHttp","$timeout","HmsModalService",function(a,b,c,d,e){b.isActive=1,b.getAvailableQrcodes=function(){c.get(contentPath+"/user/qrcodesByUser?userLoginName="+a.user.loginname).success(function(a){b.availableQrcodeList=a,b.availableQrcodeList.insert(0,{tag:"---请选择---"})}).error(function(a){Tip.message("获取可用二维码失败","error")})},b.addUser=function(){b.isActive=2},b.isHotelManager=function(){var c=a.group,d=a.user,e=!1;return c&&c.regphone===d.loginname&&(e=!0),e&&1===b.isActive?!0:!1},b.addBack=function(){b.isActive=1},b.saveUserObj={phoneNo:"",verifyCode:"",password:"",name:"",qrcodeTag:""},b.sendVerifyCode=function(){b.sendVerifyCodeTimer(),c.post(contentPath+"/user/verifyCode",{phoneNo:b.saveUserObj.phoneNo}).success(function(a){a.success?Tip.message("验证码发送成功"):Tip.message(a.errorMsg,"error")}).error(function(a){Tip.message("获取验证码异常","error")})},b.sendVerifyCodeTime=120,b.sendVerifyCodeFlag=!1,b.sendVerifyCodeTimer=function(){b.sendVerifyCodeFlag=!0,b.sendVerifyCodeTime-=1,d(function(){b.sendVerifyCodeTime>0&&b.sendVerifyCodeFlag?b.sendVerifyCodeTimer():(b.sendVerifyCodeFlag=!1,b.sendVerifyCodeTime=120)},1e3)},b.saveUserData=function(){"A"==a.RULE_CODE?b.saveUserObj.qrcodeTag.replace("---请选择---",""):(delete b.saveUserObj.qrcodeTag,delete b.saveUserObj.name);var d=_.intersection(_.values(b.saveUserObj),[""]);return d.length>0?void Tip.message("请完善信息","error"):(a.hmsLoading.show(),void c.post(contentPath+"/user/addHotelUser",b.saveUserObj).success(function(c){c.success?(Tip.message("添加成功！"),b.isActive=1,b.sendVerifyCodeFlag=!1,b.sendVerifyCodeTime=120,b.finsHotelQrcodeUsers()):Tip.message(c.errorMsg,"error"),a.hmsLoading.hide()}).error(function(b){a.hmsLoading.hide(),Tip.message("添加用户异常","error")}))},b.finsHotelQrcodeUsers=function(){c.get(contentPath+"/user/qrcodeUsers").success(function(a){b.userList=a}).error(function(a){Tip.message("获取二维码用户信息失败","error")}),b.getAvailableQrcodes()},b.goToPrintPage=function(b,c){return c||"A"!=a.RULE_CODE?void Print.goToPrintPage(b,c,a.thisHotel.hotelName):void Tip.message("没有二维码打印信息","error")},b.unbindPhone=function(a){return a?(b.unbind={userid:a.userid,tag:a.tag,loginname:a.loginname},void e.show({contentTmpl:"unbind-phone.tmpl.html",scope:b})):void Tip.message("传入的user为空，不能进行删除操作","error")},b.modifyPwdObj={isModifyFlag:!1,oldPwd:"",newPwd:"",isModifyHotelManager:!1,userLoginName:"",changeModifyFlag:function(b){var c=a.group;this.userLoginName=b,c&&c.regphone===b||a.user.loginname===b?this.isModifyHotelManager=!0:this.isModifyHotelManager=!1,this.isModifyFlag=this.isModifyFlag?!1:!0},cancel:function(){this.isModifyFlag=!1},modifyPwd:function(){if(this.isModifyHotelManager){if(!b.modifyPwdObj.newPwd||!b.modifyPwdObj.oldPwd)return void Tip.message("请完整填写密码！","error")}else if(!b.modifyPwdObj.newPwd)return void Tip.message("请填写密码！","error");c.post(contentPath+"/user/modifyPwd",{oldPwd:b.modifyPwdObj.oldPwd,newPwd:b.modifyPwdObj.newPwd,modifyUserLoginName:b.modifyPwdObj.userLoginName}).success(function(a){a.success?(b.modifyPwdObj.isModifyFlag=!1,Tip.message("密码修改成功，再次登录起效！")):Tip.message(a.errorMsg,"error"),b.modifyPwdObj.oldPwd="",b.modifyPwdObj.newPwd=""}).error(function(a){Tip.message("修改失败！","error")})}},b.modifyHotelUser={availableQrcodeList:null,showModifyHotelUserPanelFlag:!1,getAvailableQrcodes:function(a,b){var d=this;c.post(contentPath+"/user/qrcodes",{userLoginName:a}).success(function(a){d.availableQrcodeList=a,d.availableQrcodeList.insert(0,{tag:"---请选择---"}),d.availableQrcodeList.insert(1,{tag:b})}).error(function(a){Tip.message("获取可用二维码列表失败","error")})},modifyObj:{name:"",qrcode:"",loginName:"",isUnbindFlag:!1},oldModifyObj:{},showModifyHotelUserPanel:function(a,c,d){this.getAvailableQrcodes(c,d),b.modifyPwdObj.isModifyFlag=!0,this.showModifyHotelUserPanelFlag=!0,this.modifyObj.name=a,this.modifyObj.qrcode=d,this.modifyObj.loginName=c,this.oldModifyObj=_.clone(this.modifyObj)},cancel:function(){b.modifyPwdObj.isModifyFlag=!1,this.showModifyHotelUserPanelFlag=!1,this.modifyObj.isUnbindFlag=!1},saveModifyData:function(){var a=this,d=_.values(this.oldModifyObj),e=_.values(this.modifyObj),f=_.difference(e,d).length>0?!0:_.difference(d,e).length>0?!0:!1;f?(this.modifyObj.qrcode.replace("---请选择---",""),c.post(contentPath+"/user/modify",this.modifyObj).success(function(c){c.success?(Tip.message("用户信息修改成功"),a.cancel(),b.finsHotelQrcodeUsers()):Tip.message(c.errorMsg,"error")}).error(function(a){})):Tip.message("数据没有改变无需保存","error")}},b.finsHotelQrcodeUsers()}]).controller("UnbindPhoneController",["$scope","HmsHttp","HmsModalService",function(a,b,c){function d(){var c={phoneNo:a.unbind.loginname,tag:a.unbind.tag,pwd:a.unbind.password};c.pwd||Tip.message("请输入密码","error"),b.post(contentPath+"/user/unbindPhone",c).success(function(b){b.success?(e(a.unbind.userid),Tip.message("删除用户操作成功"),a.modalConfirmClose()):Tip.message(b.errorMsg,"error")}).error(function(a){Tip.message("删除用户操作失败","error")})}function e(b){angular.forEach(a.userList,function(c,d){c.userid==b&&a.userList.splice(d,1)})}a.modalConfirm=function(){d()},a.modalConfirmClose=function(){c.hide()}}]).directive("userI2dimcode",function(){return{restrict:"A",link:function(a,b,c){var d="";d=c.code?contentPath+"/i2dimcodes/userI2DimCode?content="+encodeURIComponent(c.code)+"&tag="+c.tag:contentPath+"/images/erwei-img2.png",b.attr("src",d)}}}),angular.module("commentApp",[]).controller("CommentController",["$rootScope","$scope","CommentService","HmsModalService",function(a,b,c,d){function e(){a.hmsLoading.show();var d=b.nav[b.active].action,e=b.pageNum,g=b.pageSize;c[d](e,g).success(function(c){a.hmsLoading.hide(),f(c),b.rowsData=c.rows,b.totalItems=parseInt(c.total)}).error(function(c){a.hmsLoading.hide(),b.rowsData=[],b.totalItems=0,Tip.message("数据加载异常","error")})}function f(b){var c=b.rows;_.map(c,function(b){switch(b.creatTime=DateUtils.formatDate4TimeVal(b.createTime,DateUtils.YYYY_MM_DD_HH_MM_SS),b.hotelName=a.thisHotel.hotelName,b.loginName=b.loginName?b.loginName:"--",b.serviceScore=b.serviceScore?b.serviceScore:"--",b.status){case 4:b.status="未回复";break;case 5:b.status="已回复";break;default:b.status="--"}})}var g=[{field:"creatTime",displayName:"时间",width:"8%"},{field:"hotelName",displayName:"酒店名称",width:"8%"},{field:"mId",displayName:"会员号",width:"8%"},{field:"loginName",displayName:"提交人",width:"8%"},{field:"orderId",displayName:"订单号",width:"8%"},{field:"score",displayName:"评论内容",width:"20%"},{field:"serviceScore",displayName:"回复内容",width:"20%"},{field:"status",displayName:"状态",width:"8%"}];b.columns=g,b.active=0,b.nav=[{id:"unreply",displayName:"待回复的评论",action:"findsUnReply"},{id:"replied",displayName:"已回复的评论",action:"findsReplied"}],b.totalItems=0,b.pageNum=1,b.pageSize=10,b.numPages=1,b.maxSize=5,b.pageChanged=function(){e()},b.setActive=function(a){b.active=a,e()},b.doReply=function(a){b.reply={id:a.id},d.show({contentTmpl:contentPath+"/main/comment/template/comment-reply.html",scope:b})},b.deleteUnReply=function(a){angular.forEach(b.rowsData,function(c,d){return c.id==a?void b.rowsData.splice(d,1):void 0})},b.showPics=function(e){a.hmsLoading.show(),c.findsPics(e).success(function(c){c&&c.success&&c.attribute.length>0?(b.commentPic={modalConfirmClose:function(){d.hide()},pics:c.attribute},d.show({contentTmpl:contentPath+"/main/comment/template/comment-pics.html",scope:b})):Tip.message("没有评价照片"),a.hmsLoading.hide()}).error(function(b){a.hmsLoading.hide(),Tip.message("获取评价照片数据异常","error")})},e()}]).controller("CommentReplyController",["$scope","CommentService","HmsModalService",function(a,b,c){function d(){var c=a.reply.id,d=a.reply.content;return d?void b.reply(c,d).success(function(b){b.success?(e(c),Tip.message("回复成功"),a.cancel()):Tip.message("回复失败："+b.errorMsg,"error")}).error(function(a){Tip.message("回复失败：网络超时","error")}):void Tip.message("请输入回复内容","error")}function e(b){a.deleteUnReply(b)}a.confirm=function(){d()},a.cancel=function(){c.hide()}}]).service("CommentService",["HmsHttp",function(a){var b=contentPath+"/comment/";return{findsUnReply:function(c,d){var e={pageNum:c,pageSize:d};return a.post(b+"unReply",e)},findsReplied:function(c,d){var e={pageNum:c,pageSize:d};return a.post(b+"replied",e)},findsUnAudit:function(c,d){var e={pageNum:c,pageSize:d};return a.post(b+"replied",e)},findsPics:function(c){var d={id:c};return a.post(b+"getPics",d)}}}]);